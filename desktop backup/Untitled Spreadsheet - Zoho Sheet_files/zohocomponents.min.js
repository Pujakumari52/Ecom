function ZAlertDialog(){}var ZDOMUtil=function(){var elements=void 0;return{init:function(){elements={div:document.createElement("div")}},clone:function(elementName){return elements[elementName].cloneNode()}}}(window),ZComponents=function($){function getAttrSupport(){var ele=document.createElement("div"),supported=!1;return ele.addEventListener("DOMAttrModified",function(){supported=!0},!1),ele.setAttribute("class","zcomponents"),supported}var needToInit=!0,userAgent=navigator.userAgent.toLowerCase(),sourceDiv=document.createElement("div"),sourceText=document.createTextNode(" ");return{version:"3.3",isRTL:!1,selector:"data-ctype",userAgent:userAgent,DOMUtil:$,locale:navigator.language,zIndex:1e3,$document:$(document),$window:$(window),hasHandlebars:window.Handlebars?!0:!1,keys:{},localeInfo:{"en-US":{daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],firstDayOfWeek:0,dateFormat:{"short":"M/d/yyyy",medium:"MMM d, yyyy","long":"MMMM d, yyyy",full:"dddd, MMMM d, yyyy"},timeFormat:{"short":"h:mm tt",medium:"h:mm:ss tt","long":"hh:mm:ss tt"},dateTimeFormat:{"short":"MMM d, yyyy, hh:mm:ss tt",medium:"MMM d, yyyy, hh:mm:ss tt","long":"dddd, MMMM d, yyyy 'at' h:mm tt",full:"dddd, MMMM d, yyyy 'at' h:mm tt"},numberFormat:{thousandSeparator:",",decimalSeparator:"."},currency:{code:"USD",name:"United States Dollar",symbol:"$"}}},keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,ALT:18},initDeferredComponents:function(componentsMap,timeout,callback){var base=this;setTimeout(function(){$.each(componentsMap,function(ctype,componentGroup){$(componentGroup).each(function(i,component){base._initComponent($(component),ctype)})}),callback&&callback(componentsMap)},timeout?timeout:1e4)},init:function(container,callback,attr,options){needToInit&&this._init(),options=options||{},container=$(container?container:"body");var attr1=attr?attr:this.selector,attrSelector="["+attr1+"]",uiComponents=options.nodeArray||(document.querySelectorAll?container[0].querySelectorAll(attrSelector):$(attrSelector,container));if((container[0].attributes[attr1]||container[0].dataset&&container[0].dataset[attr1])&&(uiComponents=$(container).add(uiComponents)),uiComponents.length){var base=this;this.eachAsync(uiComponents,{delay:options.delay||20,chunkSize:options.chunkSize||500,loop:function(i,ele){base._initComponent(ele,void 0,attr)},end:function(){base._end(container,uiComponents,callback)}})}else this._end(container,uiComponents,callback)},destroy:function(container,callback,attr){container=$(container?container:"body"),attr=attr?attr:this.selector;var attrSelector="["+attr+"]",uiComponents=$(attrSelector,container);if(container.is(attrSelector)&&(uiComponents=$(container).add(uiComponents)),uiComponents.length){var base=this;this.eachAsync(uiComponents,{delay:20,loop:function(i,ele){$(ele)[ele.getAttribute(attr)]("destroy")},end:function(){base._end(container,uiComponents,callback,!0)}})}else this._end(container,uiComponents,callback,!0)},eachAsync:function(array,_opts){var i=0,l=array.length,loop=_opts.loop||function(){};_opts=_opts||{},_opts.test=function(){return l>i},_opts.loop=function(){var val=array[i];return loop.call(val,i++,val)},this.whileAsync(_opts)},whileAsync:function(opts){var delay=Math.abs(opts.delay)||10,bulk=opts.chunkSize?opts.chunkSize:isNaN(opts.bulk)?500:Math.abs(opts.bulk),test=opts.test||function(){return!0},loop=opts.loop||function(){},end=opts.end||function(){};!function executeLoop(){for(var t=!1,begin=new Date;(t=test())&&(loop(),!(0===bulk||new Date-begin>bulk)););t?setTimeout(executeLoop,delay):end()}()},_initComponent:function(element,ctype,attr){attr=attr?attr:this.selector,element=$(element),element[ctype?ctype:element.attr(attr)]()},_end:function(mainDiv,uiComponents,callback,isdestroy){this.$document.trigger(isdestroy?"zcomponentdestroyed":"zcomponentinitialized",mainDiv),callback&&callback(uiComponents)},clearMetadata:function(elements){elements&&$(elements).removeData("metadata")},_getDataAttributes:function(element,object){for(var data=element.attributes,len=data.length,i=0;len>i;i++){var name=data[i].nodeName,value=""===data[i].nodeValue?"true":data[i].nodeValue;"data"!==name&&name.match(/^data-/)&&(name=name.replace(/^data-/,""),name=name.replace(/-([a-zA-Z])/g,this._stringReplace.bind(this)),name=name.replace(/(Html|Svg|Hsv|Hsl|Rgb)/gi,this._toUpperCase),object[name]="true"===value||"false"===value?"true"===value:-1!==value.indexOf("{")?ZComponents._getObject(value):value)}return object},_stringReplace:function(g){return g[1].toUpperCase()},_toUpperCase:function(s){return s.toUpperCase()},_getDataSet:function(element,object){var value,data=element.dataset;for(var i in data)data.hasOwnProperty(i)&&(value=data[i],i=i.replace(/(Html|Svg|Hsv|Hsl|Rgb)/gi,this._toUpperCase),object[i]="true"===value||"false"===value?"true"===value:-1!==value.indexOf("{")?ZComponents._getObject(value):value);return object},_getOptions:void 0,getMetadata:function(element){return this.getOptions(element)},getOptions:function(element){element=element instanceof $?element[0]:element;var object=$.data(element,"metadata");if(!object&&element.attributes){var dataAttr=element.getAttribute("data");dataAttr&&(object=ZComponents._getObject(void 0,element)),object=this._getOptions(element,object?object:{}),$.data(element,"metadata",object)}return object?object:{}},getTemplate:function(handleBarsFileName){var template;return this.hasHandlebars&&Handlebars.templates&&(template=Handlebars.templates[handleBarsFileName]),template},_getObject:function(data,element){if("object"==typeof data)return data;data=data||element.getAttribute("data"),data=data.indexOf("{")<0?"{"+data+"}":data;try{data=JSON.parse(data.replace(/'/g,'"'))}catch(error){return $.metadata?$(element).metadata():{}}return data},_extend:function(target,base){target.prototype=$.extend({},base.prototype,target.prototype),$.each(target.prototype,function(prop,value){"function"===$.type(value)&&(target.prototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)};return function(){return this._super=_super,value.apply(this,arguments)}}())})},OS:{isLinux:function(){return-1!=navigator.appVersion.indexOf("Linux")}},Browser:{isMobile:function(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())},isIE:function(){return-1!==userAgent.indexOf("msie")||-1!==userAgent.indexOf(".net")},isSafari:function(){return-1!==userAgent.indexOf("safari")&&-1===userAgent.indexOf("chrome")},isChrome:function(){return window.chrome},isFirefox:function(){return userAgent.indexOf("firefox")>-1?!0:!1},isMac:function(){return navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?!0:!1},isWindows:function(){return-1!==navigator.platform.indexOf("Win")},getIEVersion:function(){var rv=-1;if("Microsoft Internet Explorer"==navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1))}return rv}},AJAX:{transport:function(params,successCallback,failureCallback){var request=$.ajax({url:params.sourceURL,data:params.data,type:params.type,dataType:params.dataType,success:function(data){successCallback(data)},fail:function(error,exception){failureCallback(error,exception)},error:function(error,exception){failureCallback(error,exception)}});return request}},setI18NKeys:function(moduleName,values,replace){if("object"==typeof moduleName)for(var i in moduleName)this.keys[i]=$.extend({},this.keys[i],moduleName[i]);else this.keys[moduleName]=replace?values:$.extend({},this.keys[moduleName],values)},getI18NText:function(moduleName,key,stringArray){var defaultKeys=void 0;4===arguments.length&&(defaultKeys=stringArray,stringArray=arguments[3]);var keyObject=ZComponents.keys[moduleName]||{},ii8nText=keyObject[key]||"";if(""===ii8nText&&defaultKeys&&(ii8nText=defaultKeys[key]),stringArray)for(var i=0;i<stringArray.length;i++)ii8nText=ii8nText.replace("{"+i+"}",stringArray[i]);return ii8nText},create:function(initObject){var componentName=initObject.ctype.replace(initObject.ctype.charAt(0),""),methodName="create"+componentName.charAt(0).toUpperCase()+componentName.substring(1);return this[methodName](initObject)},setProperties:function(){var doc=document.documentElement||{},body=document.body||{};ZComponents.documentObject={height:Math.max(doc.clientHeight,doc.scrollHeight,doc.offsetHeight,body.offsetHeight,body.scrollHeight),width:Math.max(doc.clientWidth,doc.scrollHeight,doc.offsetHeight,body.offsetWidth,body.scrollWidth)},ZComponents.windowObject={height:window.innerHeight,width:window.innerWidth}},createSVGElement:function(tagName,attributes,childElements){var element=document.createElementNS("http://www.w3.org/2000/svg",tagName);for(var i in attributes)element.setAttribute(i,attributes[i]);if(childElements)for(var a=0;a<childElements.length;a++)for(var b in childElements[a]){var childEle=document.createElementNS("http://www.w3.org/2000/svg",b),childData=childElements[a][b];if(childData.nodes)childEle=this.createSVGElement(b,childData.props,childData.nodes);else for(var k in childData)childEle.setAttribute(k,childData[k]);element.appendChild(childEle)}return element},createIcon:function(element,icon,svgId,iconClass,cname){if(icon=svgId?-1===svgId.indexOf("#")?"#"+svgId:svgId:iconClass?iconClass:icon)if(-1===icon.indexOf("#"))element.addClass(" "+icon);else{var svgId=icon.split(" ")[0],customClass=icon.slice(svgId.length).trim()+" "+(cname?cname+"__svg":"");element.empty().append($("<svg class='"+customClass+"'><use xlink:href='"+svgId+"'></use></svg>"))}return element},_handleIcon:function(iTag,svgData,defaultSVGId,iconClass,svgIconId,v1IconClass,isUpdate,prevIconClass){isUpdate&&iTag.removeClass(prevIconClass);var iconIsSVG=!1;if(void 0!==v1IconClass||void 0!==iconClass||void 0!==svgIconId)if(v1IconClass&&0===v1IconClass.indexOf("#")||void 0!==svgIconId){var svgIcon=svgIconId||v1IconClass;if(svgIcon){var iconInfo=svgIcon.split(" ");svgIconId=iconInfo[0],iconClass=iconInfo[1]||"",iconIsSVG=!0}}else iconClass=iconClass||v1IconClass;else if(void 0!==defaultSVGId&&void 0!==svgData){var svgIcon=this._svgSprite.querySelector("#"+defaultSVGId);if(!svgIcon){var props=svgData.props||{};props.id=defaultSVGId;var element=this.createSVGElement("symbol",props,svgData.nodes);element.removeAttribute("class"),this._svgSprite.appendChild(element)}svgIconId="#"+defaultSVGId,iconClass=svgData.props&&svgData.props["class"]?svgData.props["class"]:defaultSVGId,iconIsSVG=!0}return iconIsSVG?(svgIconId=-1!==svgIconId.indexOf("#")?svgIconId:"#"+svgIconId,iTag.empty().append($("<svg class='"+iconClass+"'><use xlink:href='"+svgIconId+"'></use></svg>"))):iTag.addClass(iconClass),iTag},_handleFocus:function(element,cname){element=$(element),element.off("keyup.fs."+cname).on("keyup.fs."+cname,function(event){event.keyCode===ZComponents.keyCode.TAB&&element.addClass("has-focus")}).off("keydown.fs."+cname).on("keydown.fs."+cname,function(event){(event.keyCode===ZComponents.keyCode.ENTER||event.keyCode===ZComponents.keyCode.SPACE)&&element.addClass("has-focus")}).off("blur.fs."+cname).on("blur.fs."+cname,function(){element.removeClass("has-focus")}).off("focus.fs."+cname).on("focus.fs."+cname,function(event){event.originalEvent||element.addClass("has-focus")})},encodeHTML:function(str){return sourceText.nodeValue=str,sourceDiv.innerHTML},_init:function(){ZDOMUtil.init();var base=ZComponents;return needToInit?(needToInit=!1,base._getOptions=ZDOMUtil.clone("div").dataset?base._getDataSet:base._getDataAttributes,base.isDOMAttrModifiedSupported=getAttrSupport(),sourceDiv.appendChild(sourceText),base.Browser.isIE()&&base.isDOMAttrModifiedSupported&&(base.core._attachObserver=function(element){var base=this;this.observer=function(e){-1!==base.attributeList.indexOf(e.attrName)&&base._handleObserver(e.attrName,e.newValue)},element.addEventListener("DOMAttrModified",this.observer,!1)},base.core.destroy=function(){this.element[0].removeEventListener("DOMAttrModified",this.observer)}),base.setProperties(),base._svgSprite=base.createSVGElement("svg",{id:"zcomponents__svg"}),void $(base._svgSprite).appendTo("body").hide()):!1},registerComponent:function(componentName,parentComponent,prototype){prototype||(prototype=parentComponent,parentComponent=this.core),prototype.componentName=componentName,$[componentName]=function(options,element,userOptions){arguments.length&&this._init(options,element,userOptions)};var baseClass=new parentComponent;baseClass.options=$.extend(!0,{},baseClass.options),$[componentName].prototype=$.extend(!0,{},baseClass,prototype),this[componentName]||(this[componentName]={DEFAULTS:{}}),this[componentName]._DEFAULTS=$[componentName].prototype.options,$.fn[componentName]=function(options){needToInit&&ZComponents._init();var returnValue=this,length=this.length;if(options&&"object"!=typeof options){if("string"!=typeof options||-1!==options.indexOf("_"))return!1;for(var params=Array.prototype.slice.call(arguments,1),i=0;length>i;i++){var componentInstance=$(this[i]).data(componentName);componentInstance&&("option"===options?options=params&&2===params.length?"setAttribute":"getAttribute":"options"===options&&(options=params&&0===params.length?"getAttributes":"setAttributes"),returnValue=componentInstance[options].apply(componentInstance,params))}}else{options=options?options:{};for(var i=0;length>i;i++){var componentInstance=$(this[i]).data(componentName);if(componentInstance){if(length>1)continue;return returnValue}var metadata=ZComponents.getOptions(this[i],{});if(metadata.override){var newArray={};for(var obj in metadata)if(0===obj.indexOf(componentName)){var result=obj.replace(componentName,""),keyName=result[0].toLowerCase()+result.substring(1);newArray[keyName]=metadata[obj]}metadata=newArray}var data=$.extend(!0,{},ZComponents[componentName]._DEFAULTS,ZComponents[componentName].DEFAULTS,metadata,options);$(this[i]).data(componentName,new $[componentName](data,this[i],options)),$(this[i]).data("componentName",componentName)}}return returnValue},this._extend($[componentName],parentComponent)}}}(jQuery);!function(ZC){"object"==typeof module&&"object"==typeof module.exports&&(module.exports=function(){return ZC}())}(ZComponents),function(ZC){var $=ZC.DOMUtil;ZC.core=function(options,element){arguments.length&&this._init(options,element)},ZC.core.prototype={_init:function(options,element,userOptions){this.element=$(element),this.options=options,this._create($(element),options,userOptions)},_create:function(){},_trigger:function(eventName,event,data,element,isFromUI){return this._dispatchEvent(eventName,event,data,element,isFromUI)},_dispatchEvent:function(eventName,event,data,element,isFromUI){var type=this._EVENTS[eventName]||eventName;element=element?element:this.element;var prop,orig,value,callback=this.options[type];data=data||{},data.fromUI=isFromUI,data.fromui=isFromUI,data.element=element,data.options=data.options||this.options;var event=$.Event(event);if(event.type=(this.componentName?this.componentName+type:""+type).toLowerCase(),event.originalTarget=event.target||event.originalEvent&&event.originalEvent.target,event.target=element,orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return element.trigger(event,data),data=[event].concat(data),value=callback&&"string"==typeof callback?this._triggerFunction(callback,element[0],data):$.isFunction(callback)?callback.apply(element,data):void 0,void 0!==value?value:!event.isDefaultPrevented()},_handleIcon:function(iTag,svgData,defaultSVGId,iconClass,svgIconId,v1IconClass,isUpdate,prevIconClass,prevSVGIconId,svgIconName){return svgIconName=svgIconName||this.componentName+"__"+defaultSVGId,ZC._handleIcon(iTag,svgData,svgIconName,iconClass,svgIconId,v1IconClass,isUpdate,prevIconClass,prevSVGIconId)},_triggerFunction:function(functionName,context,params){for(var namespaces=functionName.split("."),executionContext=window,i=0;i<namespaces.length&&executionContext;i++)executionContext=executionContext[namespaces[i]];return executionContext&&executionContext.apply(context,params)},_handleObserver:function(attrName,attrValue){var formattedAttribute=attrName.replace(/^data-/,"");formattedAttribute=formattedAttribute.replace(/-([a-zA-Z])/g,function(g){return g[1].toUpperCase()}),this.setAttribute(formattedAttribute,attrValue)},_attachObserver:function(element){var base=this;this.observer=new MutationObserver(function(props){var attrName=props[0].attributeName,attrValue=props[0].target.getAttribute(attrName);base._handleObserver(attrName,attrValue)}),this.observer.observe(element,{attributes:!0,attributeFilter:this.attributeList})},_handleFocus:function(element){ZC._handleFocus(element||this.container,this.componentName)},getData:function(element){return ZC.getOptions(element?element:this.element[0])},_setAttribute:function(){return!0},_checkIsObject:function(value){return!(value instanceof Array||value instanceof Date||value instanceof RegExp||value instanceof $||value instanceof Element||$.isWindow(value)||value.nodeName)},setAttribute:function(optionName,value){var oldValue=this.options[optionName];if("string"!=typeof oldValue||oldValue!==value){value=value&&"object"==typeof value&&"object"==typeof oldValue&&this._checkIsObject(value)?$.extend(!0,{},oldValue,value):value;var valueChanged=this._setAttribute(optionName,value);"disable"===optionName&&(this._handleDisable(value),valueChanged=!0),valueChanged&&(this.options[optionName]=value)}},setAttributes:function(options){for(var i in options)this.setAttribute(i,options[i])},getAttribute:function(optionName){return this.options[optionName]},getAttributes:function(){return $.extend(!0,{},this.options)},_localize:function(key,stringArray,optionKey){var defaultsKeys=this.options.labels||this.options.messages,i18nText=optionKey?this.options[optionKey][key]:void 0;return i18nText||this._getI18N(this.componentName,key,defaultsKeys,stringArray)},_getI18N:function(moduleName,key,defaultKeys,stringArray){var keyObject=ZC.keys[moduleName]||{},ii8nText=keyObject[key]||"";if(""===ii8nText&&defaultKeys&&(ii8nText=defaultKeys[key]),stringArray)for(var i=0;i<stringArray.length;i++)ii8nText=ii8nText.replace("{"+i+"}",stringArray[i]);return ii8nText},enable:function(){this._handleDisable(!0)},disable:function(){this._handleDisable(!1)},_handleDisable:function(enable){var ele=$(this.container||this.element);enable?ele.removeClass("is-disabled").removeAttr("aria-disabled disabled"):ele.addClass("is-disabled").attr({"aria-disabled":!0,disabled:!0}),this.setAttribute("disabled",!enable)},getElement:function(){return this.container||this.element},_destroy:function(){},destroy:function(){this.element.off("."+this.eventPrefix),this.element.removeData(this.componentName).removeData("metadata"),this._destroy();var ele=this.container;ele&&ele[0]!==this.element[0]&&ele.remove()}};var bindedElements=[],closeHandlerDatas=[],getHandlerData=function(element){return closeHandlerDatas[bindedElements.indexOf(element)]};ZC.bindDocumentEvents=function(options){var uniqueNamespace=".zclosehandler-"+Math.floor(1e6*Math.random()),ctype=options.ctype,element=$(options.element),container=$(options.container||options.element),forElement=$(options.forElement),closeFn=options.closeMethodName,closeEvent=ctype+(options.closeEvent||closeFn),metadata={},data=getHandlerData(element[0]);data&&forElement.is(data.forElement)||(ZC.unBindDocumentEvents(element),bindedElements.forEach(function(bindedEle){var data=getHandlerData(bindedEle);data.contextElements=forElement.closest(data.container).length?data.contextElements.add(forElement).add(container):data.contextElements.not(element)}),bindedElements.push(element[0]),metadata.contextElements=container.add(forElement),metadata.uniqueNamespace=uniqueNamespace,metadata.forElement=forElement,metadata.container=container,metadata.ctype=ctype,metadata.closeFn=closeFn,closeHandlerDatas.push(metadata),element.on(closeEvent+".zclosehandler",function(){ZC.unBindDocumentEvents(element)}),metadata.timer=setTimeout(function(){ZC.$document.on("mousedown"+uniqueNamespace+" contextmenu"+uniqueNamespace,function(origEvent){var metadata1=getHandlerData(element[0]);if(!metadata1||!$.contains(document.documentElement,element[0]))return void ZC.unBindDocumentEvents(element);if(metadata1.uniqueNamespace===metadata.uniqueNamespace){var target=$(origEvent.target);if(!target.closest(metadata.contextElements).length){var customEvent=$.Event("zclosehandlerbeforehide",{originalEvent:origEvent});element.trigger(customEvent),customEvent.isDefaultPrevented()||element[ctype](closeFn)}}})},10))},ZC.unBindDocumentEvents=function(element,close){var index=bindedElements.indexOf(element[0]);if(-1!==index){var data=closeHandlerDatas[index];clearTimeout(data.timer);var relatedElements=data.contextElements.not(element);relatedElements.each(function(i,rel_ele){ZC.unBindDocumentEvents($(rel_ele),!0)}),element.off(".zclosehandler"),ZC.$document.off(data.uniqueNamespace),index=bindedElements.indexOf(element[0]),bindedElements.splice(index,1),closeHandlerDatas.splice(index,1),close&&element[data.ctype](data.closeFn)}}}(ZComponents),document.addEventListener("DOMContentLoaded",ZComponents._init),window.addEventListener("resize",ZComponents.setProperties);var ZPosition=function($,$window){function getCorrectionOffset(){var $body=$("body");if(correctionOffset)return correctionOffset;if(correctionOffset={left:0,top:0},/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var temp=$("<span>").css({position:"absolute",height:"20px",width:"20px",top:"0px",left:"0px"}).appendTo($body);correctionOffset=temp.offset(),correctionOffset.left=correctionOffset.left-parseFloat($body.css("margin-left"))-parseFloat($body.css("border-left-width")),correctionOffset.top=correctionOffset.top-parseFloat($body.css("margin-top"))-parseFloat($body.css("border-top-width")),temp.remove()}return correctionOffset}function getDimensions(element){if(element.preventDefault)return{width:0,height:0,offset:{left:element.pageX,top:element.pageY}};var element=$(element);if(9===element.nodeType)return{width:element.width(),height:element.height(),offset:{left:0,top:0}};if($.isWindow(element))return{width:element.width(),height:element.height(),offset:{left:element.scrollLeft(),top:element.scrollTop()}};var dimension={width:getDimension(element[0],"outerWidth"),height:getDimension(element[0],"outerHeight"),offset:getOffset(element)};return dimension}function getOffset(element){var offset=element.offset(),excessoffset=getCorrectionOffset();return offset.left-=excessoffset.left,offset.top-=excessoffset.top,offset}function fixDirection(direction){var dir=direction.split("-");if(/^(top|bottom)$/.test(dir[0])||/^corner$/.test(dir[2])){callout&&callout.callback.call(this,callout.element,calloutPositions[dir[0]]);var collisionWidth=elemDim.width+(callout?callout.width?callout.width:callout.element.outerWidth():0),collisionHeight=elemDim.height+(callout?callout.height?callout.height:callout.element.outerHeight():0),dirInfo=flip.top(direction,collisionHeight);if(direction=dirInfo.direction,dirInfo.overTop>0&&regex.flipall.test(options.positionAlterable)){var newDirInfo=flip.left("right",collisionWidth);newDirInfo.overLeft<=0&&(direction=newDirInfo.direction)}}if(dir=direction.split("-"),/^(left|right)$/.test(dir[0])||/^corner$/.test(dir[2])){callout&&callout.callback.call(this,callout.element,calloutPositions[dir[0]]);var collisionWidth=elemDim.width+(callout?callout.width?callout.width:callout.element.outerWidth():0),collisionHeight=elemDim.height+(callout?callout.height?callout.height:callout.element.outerHeight():0),dirInfo=flip.left(direction,collisionWidth);if(direction=dirInfo.direction,dirInfo.overLeft>0&&regex.flipall.test(options.positionAlterable)){var newDirInfo=flip.top("bottom",collisionHeight);direction=newDirInfo.direction}}return direction}function fixAlternateDirection(direction){var dir=direction.split("-"),calloutWidthLeft=0,calloutHeightLeft=0;if(target.preventDefault&&callout&&(calloutWidthLeft=2*callout.width+callout.width/2,calloutHeightLeft=2*callout.height+callout.height/2),/^(left|right)$/.test(dir[1])){var dirInfo=flip.left(dir[1],elemDim.width-("corner"===dir[0]?0:targetDim.width)-calloutHeightLeft);direction=direction.replace(dir[1],dirInfo.direction)}else if(/^(top|bottom)$/.test(dir[1])){var dirInfo=flip.top(dir[1],elemDim.height-targetDim.height-calloutWidthLeft);direction=direction.replace(dir[1],dirInfo.direction)}return direction}function initCallout(elementDir){if(options.arrow&&options.arrow.element){var callout={},element=options.arrow.element;if(("string"==typeof element||element.jquery||element.nodeType)&&(element=$(element),element.length&&(callout.element=element)),callout.element&&"static"!==callout.element.css("position"))return callout.centeredToTarget=/^(center|undefined)$/.test(options.arrow.direction)&&!target.preventDefault?!0:!1,callout.callback=$.isFunction(options.arrow.callback)?options.arrow.callback:$.isFunction(options.arrowCallback)?options.arrowCallback:$.noop,callout.direction=calloutPositions[elementDir],callout.callback.call(this,callout.element,callout.direction.split("-")[0]),callout.height="number"==typeof options.arrow.height?options.arrow.height:0,callout.width="number"==typeof options.arrow.height?options.arrow.width:0,callout.minSpace=options.arrow.minSpace,callout.margin=options.arrow.margin||{left:0,top:0},callout;options.arrow=void 0}}function getElementHeight(){return elemDim.height>getAvailableHeight(options.direction)?getAvailableHeight(options.direction):elemDim.height}function getElementWidth(){return elemDim.width>getAvailableWidth(options.direction)?getAvailableWidth(options.direction):elemDim.width}function fitCalloutPosition(callout,calloutP){var maxValue,dir=callout.direction.split("-"),tempDir=dir[1],minValue=0,elemWidth1=getElementWidth(),elemHeight1=getElementHeight();/^(left|right)$/.test(dir[1])?maxValue=elemWidth1-callout.width:/^(top|bottom)$/.test(dir[1])?maxValue=elemHeight1-callout.height:/^(top|bottom)$/.test(dir[0])?(maxValue=elemWidth1-callout.width,tempDir="left"):/^(left|right)$/.test(dir[0])&&(maxValue=elemHeight1-callout.height,tempDir="top"),calloutP[tempDir]>maxValue&&(calloutP[tempDir]=maxValue),calloutP[tempDir]<minValue&&(calloutP[tempDir]=minValue)}function getCalloutPosition(callout,correctionPixel){callout.element.css({left:"auto",top:"auto",right:"auto",bottom:"auto"});var pos={},dir=callout.direction.split("-");if(/^(top|bottom)$/.test(dir[0])?(pos[dir[0]]=-callout.height,dir[1]||(pos.left=elemDim.width/2-callout.width/2-correctionPixel.left)):/^(left|right)$/.test(dir[0])&&(pos[dir[0]]=-callout.width,dir[1]||(pos.top=elemDim.height/2-callout.height/2-correctionPixel.top)),/^(left|right)$/.test(dir[1])){var cPix=correctionPixel.left;"left"===dir[1]&&(cPix=-cPix),targetDim.width&&elemDim.width>targetDim.width?pos[dir[1]]=targetDim.width/2-callout.width/2+cPix:pos.left=elemDim.width/2-callout.width/2}else if(/^(top|bottom)$/.test(dir[1])){var cPix=correctionPixel.top;"top"===dir[1]&&(cPix=-cPix),targetDim.height&&elemDim.height>targetDim.height?pos[dir[1]]=targetDim.height/2-callout.height/2+cPix:pos.top=elemDim.height/2-callout.height/2}var doesHaveBoxShadow="none"!==element.css("box-shadow");return"top"===callout.direction.split("-")[0]?pos.top=pos.top+(parseFloat(element.css("border-top-width"))||doesHaveBoxShadow?1:0):"bottom"===callout.direction.split("-")[0]?pos.bottom=pos.bottom+(parseFloat(element.css("border-bottom-width"))||doesHaveBoxShadow?1:0):"right"===callout.direction.split("-")[0]?pos.right=pos.right+(parseFloat(element.css("border-right-width"))||doesHaveBoxShadow?1:0):"left"===callout.direction.split("-")[0]&&(pos.left=pos.left+(parseFloat(element.css("border-left-width"))||doesHaveBoxShadow?1:0)),pos}function fitPosition(position){var newPosition=$.extend({},position),direction=options.direction,dir=(elemDim.width+callout?callout.width:0,elemDim.height+callout?callout.height:0,direction.split("-"));dir[1]=void 0===dir[1]?/^(top|bottom)$/.test(dir[0])?"left":"top":dir[1];within.isWindow?{left:win.scrollLeft,top:win.scrollTop}:within.offset;if(/^(top|bottom)$/.test(dir[1])||target.preventDefault){var overTop=within.scrollTop-newPosition.top;overTop>0&&(newPosition.top+=overTop);var overBottom=newPosition.top+elemDim.height-(within.scrollTop+getAvailableHeight().complete);overBottom>0&&(newPosition.top-=overBottom)}if(/^(left|right)$/.test(dir[1])||target.preventDefault){var overLeft=within.scrollLeft-newPosition.left;overLeft>0&&(newPosition.left+=overLeft);var overRight=newPosition.left+elemDim.width-(within.scrollLeft+getAvailableWidth().complete)+1;overRight>0&&(newPosition.left-=overRight)}return newPosition}function calculatePosition(direction){var newPosition,position;options.direction=direction,/corner/.test(options.direction)||(callout=initCallout(options.direction)),options.callbacks.beforeComputingDir.dimensionModifier(targetDim,elemDim,within),regex.flip.test(options.positionAlterable)&&!recalculated&&(options.direction=fixDirection(options.direction)),callout&&(callout.direction=calloutPositions[options.direction],callout.callback.call(this,callout.element,callout.direction.split("-")[0]),callout.height||(callout.height=callout.element.outerHeight()),callout.width||(callout.width=callout.element.outerWidth())),regex.flipside.test(options.positionAlterable)&&(options.direction=fixAlternateDirection(options.direction)),options.callbacks.beforeComputingPos.dimensionModifier(targetDim,elemDim,within),position=fixPosition(options.direction),newPosition=$.extend({},position),regex.fit.test(options.positionAlterable)&&(newPosition=fitPosition(position)),newPosition.top<within.scrollTop&&(newPosition.top=within.scrollTop),newPosition.left<within.scrollLeft&&(newPosition.left=within.scrollLeft);var newdir;if(callout&&regex.flipall.test(options.positionAlterable)&&!recalculated&&!target.preventDefault){var CALLOUTMINSPACE=callout.minSpace;if(void 0!==CALLOUTMINSPACE){var minElemLeft,minElemTop,maxEleLeft,maxEleTop,dir=options.direction.split("-"),elemWidth1=getElementWidth(),elemHeight1=getElementHeight();minElemLeft=targetDim.offset.left-elemWidth1+callout.width,minElemTop=targetDim.offset.top-elemHeight1+callout.height,maxEleLeft=targetDim.offset.left+targetDim.width-callout.width,maxEleTop=targetDim.offset.top+targetDim.height-callout.height,/^(top|bottom)$/.test(dir[0])?(newPosition.left<minElemLeft&&(newdir="left"),newPosition.left>maxEleLeft&&(newdir="right")):/^(left|right)$/.test(dir[0])&&(newPosition.top<minElemTop&&(newdir="top"),newPosition.top>maxEleTop&&(newdir="bottom"))}}if(!newdir||recalculated){var correctedPosition=getCorrectedPosition(newPosition,element);if(callout){callout.direction=calloutPositions[options.direction];var correctionPixel={left:newPosition.left-position.left,top:newPosition.top-position.top};callout.position=getCalloutPosition(callout,correctionPixel),fitCalloutPosition(callout,callout.position)}}else recalculated=!0,correctedPosition=calculatePosition(newdir);return correctedPosition}function getAvailableHeight(direction){if(!availableHeight)if(within.isWindow||within.isDocument)availableHeight={top:targetDim.offset.top-within.scrollTop,bottom:within.height-(targetDim.offset.top+targetDim.height-within.scrollTop),complete:within.height};else{availableHeight={},availableHeight.top=within.offset.top<win.scrollTop?targetDim.offset.top-win.scrollTop:targetDim.offset.top-within.scrollTop,availableHeight.bottom=within.offset.top+within.height-(targetDim.offset.top+targetDim.height);
var diffHeight=win.height+win.scrollTop-(within.offset.top+within.height);0>diffHeight&&(availableHeight.bottom+=diffHeight),availableHeight.complete=availableHeight.top+availableHeight.bottom+targetDim.height}return direction?(direction=direction.split("-")[0],"top"===direction?availableHeight.top:"bottom"===direction?availableHeight.bottom:availableHeight.complete):availableHeight}function getAvailableWidth(direction){if(!availableWidth)if(within.isWindow||within.isDocument)availableWidth={left:targetDim.offset.left-within.scrollLeft,right:within.width-(targetDim.offset.left+targetDim.width-within.scrollLeft),complete:within.width};else{availableWidth={},availableWidth.left=within.offset.left<win.scrollLeft?targetDim.offset.left-win.scrollLeft:targetDim.offset.left-within.scrollLeft,availableWidth.right=within.offset.left+within.width-(targetDim.offset.left+targetDim.width);var diffWidth=win.width+win.scrollLeft-(within.offset.left+within.width);0>diffWidth&&(availableWidth.right+=diffWidth),availableWidth.complete=availableWidth.left+availableWidth.right+targetDim.width}if(!direction)return availableWidth;var dir=direction.split("-"),finaldir="corner"===dir[2]?dir[1]:dir[0];return"left"===finaldir?availableWidth.left:"right"===finaldir?availableWidth.right:availableWidth.complete}function fixPosition(direction){direction=direction||options.direction,regex.relDirections.test(direction)||(options.direction=direction="top-left");var dir=direction.split("-"),basePosition=$.extend({},targetDim.offset);return"top"===dir[0]?basePosition.top-=elemDim.height+(callout?callout.height:0):"bottom"===dir[0]?basePosition.top+=targetDim.height+(callout?callout.height:0):"left"===dir[0]?basePosition.left-=elemDim.width+(callout?callout.width:0):"right"===dir[0]&&(basePosition.left+=targetDim.width+(callout?callout.width:0)),void 0===dir[1]?dir[0].match(/^left|right$/)?basePosition.top=basePosition.top-elemDim.height/2+targetDim.height/2:basePosition.left=basePosition.left-elemDim.width/2+targetDim.width/2:"top"===dir[1]?basePosition.top=basePosition.top+targetDim.height-elemDim.height:"left"===dir[1]?basePosition.left=basePosition.left-elemDim.width+("corner"===dir[2]?0:targetDim.width):"right"===dir[1]&&"corner"===dir[2]&&(basePosition.left=basePosition.left+targetDim.width),basePosition}function showHiddenParent(element){if(element=$(element),element.is(":hidden"))for(var i=1,parent=element;i&&parent&&!parent.is("body");)"none"===parent.css("display")&&(hiddenParents.push(parent),prevStyles.push(parent.attr("style")||""),parent.css({display:"block",position:"absolute",opacity:1,visibility:"hidden"}),i=parent.is(":hidden")),parent=parent.parent()}function resetParent(){hiddenParents&&hiddenParents.length&&(hiddenParents.forEach(function(parent,i){parent.attr("style",prevStyles[i])}),hiddenParents=[],prevStyles=[])}function getCorrectedPosition(calculatedOffset,element){var offsetNew=$.extend({},calculatedOffset),position=element.css("position"),parent=element.parent()[0],temp=$("<span>").css({position:position,height:"20px",width:"20px",top:"0px",left:"0px",transform:"none",margin:"0px",display:"",visibility:"hidden"});parent.appendChild(temp[0]);var curOffset=temp.offset();return parent.removeChild(temp[0]),offsetNew.top=offsetNew.top-curOffset.top,offsetNew.left=offsetNew.left-curOffset.left,offsetNew}function getScrollBarWidth(){var scrollEle=document.createElement("div"),styleProps="width:100px;height:100px;overflow:scroll;";document.querySelector("body").appendChild(scrollEle),scrollEle.style.cssText=styleProps;var scrollWidth=$(scrollEle).width()-scrollEle.scrollWidth;return document.querySelector("body").removeChild(scrollEle),scrollWidth||0}function getWithinDimensions(element){element=element.length?element:$window;var width,height,scrollEle,isWindow=$.isWindow(element[0]),isDocument=!!element[0]&&9===element[0].nodeType,offset=isWindow||isDocument?{left:0,top:0}:getOffset(element)||{left:0,top:0},scrollLeft=isWindow||isDocument?win.scrollLeft:offset.left<win.scrollLeft?win.scrollLeft:offset.left,scrollTop=isWindow||isDocument?win.scrollTop:offset.top<win.scrollTop?win.scrollTop:offset.top;if(isWindow?(width=win.width,height=win.height):isDocument?(width=document.documentElement.scrollWidth,height=document.documentElement.scrollHeight):(width=element.outerWidth(),height=element.outerHeight(),scrollEle=element),scrollEle){var scrollWidth,overflowX=scrollEle.css("overflow-x"),overflowY=scrollEle.css("overflow-y"),hasOverflowX="scroll"===overflowX||("auto"===overflowX||scrollEle.is("body")&&"visible"===overflowX)&&width<scrollEle[0].scrollWidth,hasOverflowY="scroll"===overflowY||("auto"===overflowY||scrollEle.is("body")&&"visible"===overflowY)&&height<scrollEle[0].scrollHeight;hasOverflowX&&(height-=void 0===scrollWidth?getScrollBarWidth():scrollWidth),hasOverflowY&&(width-=scrollWidth=getScrollBarWidth())}return{element:element,isWindow:isWindow,isDocument:isDocument,offset:offset,scrollLeft:scrollLeft,scrollTop:scrollTop,width:width,height:height}}function changeDirection(direction){return"top-left"===direction?direction="top-right":"bottom-left"===direction?direction="bottom-right":"top-right"===direction?direction="top-left":"bottom-right"===direction&&(direction="bottom-left"),direction}function getDimension(element,dimension){var value,isSVG,transform=window.getComputedStyle(element).transform;if(element instanceof SVGElement&&(isSVG=!0),isSVG||!transform||"none"===transform){var styles=element.getBoundingClientRect();if(styles)switch(dimension){case"outerWidth":value=styles.width;break;case"outerHeight":value=styles.height}}return(isNaN(value)||!value)&&(value=$(element)[dimension]()),value}function getPosition(targetElement,elementPositioned,opt){if(options=$.extend(!0,{},defaultOptions,opt),target=targetElement,element=elementPositioned,options.showWithinTarget)return getWithinTargetPosition();var oldDirection=options.direction;element.css({top:"0px",left:"0px"}),elemDim=options.computeElementDim?getDimensions(element):{};var elementHidden,actual_display;elemDim.height>document.documentElement.clientHeight&&regex.flip.test(options.positionAlterable)&&(elementHidden=!0,actual_display=element[0].style.display||"",element.css("display","none")),win={scrollLeft:$window.scrollLeft(),scrollTop:$window.scrollTop()+options.withinPadding,height:document.documentElement.clientHeight-2*options.withinPadding,width:document.documentElement.clientWidth},targetDim=options.customDimensions?target:options.computeTargetDim?getDimensions(target):{},within=options.computeWithinDim?getWithinDimensions($(options.within)):{},elementHidden&&element.css("display",actual_display),options.direction=regex.relDirections.test(options.direction)?changeDirection(options.direction):"top-right";var position=calculatePosition(options.direction),response={elementPosition:position||{left:0,top:0},oldDirection:oldDirection,direction:changeDirection(options.direction),arrowPosition:callout?callout.position:{left:0,top:0},arrowDirection:calloutPositions[options.direction]&&calloutPositions[options.direction].split("-")[0]},dir=options.direction.split("-");return/^(top|bottom)$/.test(dir[0])?(response.availableHeight=getAvailableHeight(dir[0])-(callout?callout.height:0),response.availableWidth=getAvailableWidth(dir[0])):/^(left|right)$/.test(dir[0])&&(response.availableHeight=getAvailableHeight(dir[0]),response.availableWidth=getAvailableWidth(dir[0])-(callout?callout.width:0)),response}function getWithinTargetPosition(){target=$(target);var isWindow,position={};target.length&&target[0]!==window&&9!==target[0].nodeType||(target=$(window),isWindow=!0),regex.withinDirections.test(options.direction)||(options.direction="top-left");var containerProps={width:target.outerWidth()-(isWindow?0:parseFloat(target.css("border-right-width"))+parseFloat(target.css("border-left-width"))),height:target.outerHeight()-(isWindow?0:parseFloat(target.css("border-top-width"))-parseFloat(target.css("border-bottom-width")))};containerProps.offset=isWindow?{left:window.scrollX,top:window.scrollY}:getOffset(target)||{left:0,top:0};var elementProps={width:element.outerWidth(),height:element.outerHeight()},centerDirections=["center","left","right","top","bottom"],directionPropertObj={left:"width",top:"height"};for(var dir in directionPropertObj){var oppDir="left"===dir?"right":"bottom",prop=directionPropertObj[dir];-1!==options.direction.indexOf(dir)?position[dir]=containerProps.offset[dir]:-1!==options.direction.indexOf(oppDir)?position[dir]=containerProps.offset[dir]+containerProps[prop]-elementProps[prop]:-1!==centerDirections.indexOf(options.direction)&&(position[dir]=containerProps.offset[dir]+containerProps[prop]/2-elementProps[prop]/2)}return position=getCorrectedPosition(position,element),{elementPosition:position}}var target,element,options,within,targetDim,elemDim,availableHeight,availableWidth,win,element,callout,recalculated,hiddenParents,prevStyles,correctionOffset,defaultOptions={direction:"top-left",showWithinTarget:!1,within:$window,computeElementDim:!0,computeTargetDim:!0,computeWithinDim:!0,arrow:{minSpace:0,margin:{left:0,top:0},callback:void 0},callbacks:{beforeComputingDir:{dimensionModifier:$.noop,directionModifier:$.noop},beforeComputingPos:{dimensionModifier:$.noop,directionModifier:$.noop}},withinPadding:0,customDimensions:!1,positionAlterable:"flipallfit"},calloutPositions={"top-left":"bottom-right","top-right":"bottom-left","bottom-left":"top-right","bottom-right":"top-left",top:"bottom",bottom:"top",left:"right",right:"left","left-top":"right-bottom","left-bottom":"right-top","right-top":"left-bottom","right-bottom":"left-top"},regex={relDirections:/^(top|top-right|top-left|bottom|bottom-right|bottom-left|left|left-top|left-bottom|right|right-top|right-bottom|top-left-corner|top-right-corner|bottom-left-corner|bottom-right-corner)$/,withinDirections:/^(top|bottom|left|right|top-left|top-right|bottom-left|bottom-right|center)$/,fit:/^(fit|flipfit|flipallfit|flipsidefit|flipsideallfit|true)$/,flip:/^(flip|flipfit|flipall|flipallfit|flipside|flipsidefit|flipsideall|flipsideallfit|true)$/,flipside:/^(flipside|flipsidefit|flipsideall|flipsideallfit|true)$/,flipall:/^(flipall|flipallfit|flipsideall|flipsideallfit|true)$/},flip={top:function(direction,collisionHeight){var dir=direction.split("-")[0],response={direction:direction},availHeight=getAvailableHeight(direction);if(response.overTop=collisionHeight-availHeight,response.overTop>0){var newdir="top"===dir?"bottom":"top",newAvailableHeight=getAvailableHeight(direction.replace(dir,newdir));newAvailableHeight>availHeight&&(response.direction=direction.replace(dir,newdir),response.overTop=collisionHeight-newAvailableHeight)}return response},left:function(direction,collisionWidth){var finalDir,newdir,dir=direction.split("-"),response={direction:direction},availWidth=getAvailableWidth(direction);if(response.overLeft=collisionWidth-availWidth,response.overLeft>0){finalDir=dir[0],"corner"===dir[2]&&(finalDir=dir[1]),newdir="left"===finalDir?"right":"left";var newAvailableWidth=getAvailableWidth(direction.replace(finalDir,newdir));newAvailableWidth>availWidth&&(response.direction=direction.replace(finalDir,newdir),response.overLeft=collisionWidth-newAvailableWidth)}return response}};return{get:function(targetElement,elementPositioned,opt){if(targetElement&&$(elementPositioned).length&&(targetElement instanceof $&&(targetElement=targetElement[0]),elementPositioned instanceof $&&(elementPositioned=elementPositioned[0]),1===elementPositioned.nodeType&&(1===targetElement.nodeType||opt.showWithinTarget&&(targetElement===window||targetElement===document)||targetElement.preventDefault||opt.customDimensions))){hiddenParents=[],prevStyles=[],showHiddenParent(targetElement),showHiddenParent(elementPositioned),opt=opt||{};var positionObject=getPosition(targetElement,$(elementPositioned),opt);return resetParent(),target=element=recalculated=callout=options=within=elemDim=availableHeight=availableWidth=win=correctionOffset=hiddenParents=prevStyles=void 0,positionObject}}}}(jQuery,jQuery(window),jQuery(document));jQuery(function($){function initScrollWidth(){var scrollEle=$("<div>").css({width:"100px",height:"100px",overflow:"scroll"}).appendTo("body"),scrollWidth=scrollEle.width()-scrollEle[0].scrollWidth;scrollEle.remove(),$.ZContextMenu.scrollWidth=scrollWidth}function canAssociationHappen(data){return!data.fromDataBinding}function mouseClicked(ev,data){if(data||(data={}),!ev.button||0==ev.button){var ele=_getClickedElement(ev);if(!ele.is("input[type=file]")){canAssociationHappen(data)&&handleAssociatedObjects(ele);var res=performMenuAction(ev,"data-menu-id");if(!res)return res;var res=performMenuAction(ev,"data-popover-id");return res&&(res=performMenuAction(ev,"toolbar"))?$.ZContextMenu.colorpaletteRegistered?performMenuAction(ev,"colorpalette"):performMenuAction(ev,"data-colorpicker-id"):res}}}function rightClicked(ev,data){return ev.data=data,data&&data.target&&(ev.target=data.target),$(".zmenu").length&&$(".zmenu").zmenu("hide"),performMenuAction(ev,"data-context",void 0,!0)}function _getButtonIfClickedInsideButton(ele){return ele.parent().is("button")?ele.parent():ele}function _isObjInArray(processedArray,ele){var isInArray=!1;return $.each(processedArray,function(i,pele){return pele==ele[0]?(isInArray=!0,!1):void 0}),isInArray}function handleAssociatedObjects(ele,data,processedArray){setTimeout(function(){_handleAssociatedObjects(ele,data,processedArray)},10)}function _handleAssociatedObjects(ele,data,processedArray){var click=data?!1:!0;data=data?data:{};var associationAttr="data-association",selector="["+associationAttr+"]";if(ele=ele.is(selector)?ele:$(ele.parents(selector).get(0)),!(!ele.length||data&&void 0==data.disabled||ele.is(":disabled"))){if(processedArray){if(_isObjInArray(processedArray,ele))return}else processedArray=[];processedArray.push(ele[0]);var associatedSelectors=ele.attr(associationAttr),associatedObjs=$(associatedSelectors);associatedObjs.each(function(i,obj){if(obj!=ele[0]&&!_isObjInArray(processedArray,$(obj))){obj=$(obj);var edata={fromDataBinding:!0};if(void 0!==typeof data.visible)if(obj.is("input, button")&&obj.zbutton("getElement").hasClass("zbutton"))obj=obj.parent().hasClass("zbutton--split")?obj.parent():obj.zbutton("getElement"),obj[data.visible?"show":"hide"]();else{var menu=obj.closest(".zmenu");menu.length?menu.zmenu("updateMenuItems",["#"+obj.attr("id")],"hidden",data.visible?!0:!1):obj[data.visible?"show":"hide"]()}if(void 0!==typeof data.disabled)if(obj.is("input, button")&&obj.zbutton("getElement").hasClass("zbutton"))obj.zbutton("option","disabled",data.disabled?!0:!1);else{var menu=obj.closest(".zmenu");menu.length?menu.zmenu("updateMenuItems",["#"+obj.attr("id")],"disabled",data.disabled?!0:!1):obj[data.disabled?"disable":"enable"](!1,!0,edata)}if(void 0!==typeof data.checked){if(ele.is("[checked]")||ele.is("input[type=checkbox]")||ele.is("input[type=radio]")){var isChecked=ele.is(":checked");if(obj.is(".zmenu__item")){obj.data("checked",isChecked);var menu=obj.closest(".zmenu");menu.zmenu("updateMenuItems",[obj],"checked",isChecked)}else obj.attr("checked",isChecked)}obj.is("input, button")&&(obj.data("zbuttonset")?(obj.buttonset("destroy"),obj.buttonset()):obj.data("zbutton")&&(obj.button("destroy"),obj.button()))}click&&obj.trigger("click",edata),handleAssociatedObjects(obj,data,processedArray)}})}}function _getClickedElement(ev){var ele=ev.data&&ev.data.target?ev.data.target:ev.srcElement;if(ele){var cele=ele.correspondingElement;cele&&(ele=$(cele))}else ele=$(ev.target);return $(ele)}function stopEvent(ev){ev.stopPropagation(),ev.preventDefault()}function isDisabled(ele){return ele.is("input,button,textarea,select")?ele.is(":disabled"):ele.hasClass("is-disabled")}function performMenuAction(ev,attr,pos,isRightClick){var lastMenu=$.ZContextMenu.currentMenu,lastPopover=$.ZContextMenu.currentPopover;if(!$.ZContextMenu.hideMenu(ev))return!1;var ele=_getClickedElement(ev);ele=_getButtonIfClickedInsideButton($(ele));var obj=traverseAndGetContextElement(ele,attr);$.ZContextMenu.colorpaletteRegistered&&"colorpalette"!=attr&&$.ZContextMenu.colorpalette.zcolorpalette("hide");var cmenu=obj.attr;if(ele=obj.element,isDisabled(ele))return!0;if(cmenu&&"colorpalette"===attr)return void(ele.length&&$.ZContextMenu.displayColorPalette(ele,!0));if(cmenu&&"data-colorpicker-id"===attr)return void(ele.length&&$.ZContextMenu.toggleColorPicker(ele));if($.ZContextMenu.closePopover(ev),cmenu){var menu=$("#"+cmenu);if("toolbar"===attr&&!menu.length){var toolbar=$(ele.parent().metadata().relatedTabPane);toolbar.hasClass("ui-ztoolbar-panel")&&(menu=toolbar.ztoolbar("getToolbarAsMenu"),menu.attr("relativeto","parent"),$(ele).attr("data-menu-id",$(ele).attr("toolbar")).removeAttr("toolbar"))}if(lastMenu&&lastMenu[0]==menu[0]&&this._lastVisitedMenu[0]===ele[0]&&menu.data("toggle"))return stopEvent(ev),!1;if(this._lastVisitedMenu=ele,"data-popover-id"==attr){if(menu.off("zpopoverclose.zeventhandler").on("zpopoverclose.zeventhandler",function(orgEvent){var target;orgEvent=orgEvent.originalEvent,orgEvent&&(target=orgEvent.target)&&target!==$.ZContextMenu._lastVisitedPopover[0]&&($.ZContextMenu._lastVisitedPopover=void 0)}),lastPopover&&lastPopover[0]==menu[0]&&$.ZContextMenu._lastVisitedPopover&&$.ZContextMenu._lastVisitedPopover[0]===ele[0])return $.ZContextMenu._lastVisitedPopover=void 0,stopEvent(ev),!1;options=$.extend({},ZComponents.getOptions(menu)),$.ZContextMenu._lastVisitedPopover&&$("#"+$.ZContextMenu._lastVisitedPopover.attr("data-popover-id")).is(":visible")&&$("#"+$.ZContextMenu._lastVisitedPopover.attr("data-popover-id")).zpopover("close"),(void 0===$.ZContextMenu._lastVisitedPopover||$.ZContextMenu._lastVisitedPopover&&$.ZContextMenu._lastVisitedPopover[0]!==ele[0])&&(menu.data("zpopover")||((""===options.forElement||void 0===options.forElement)&&(options.forElement=ele),options.content=menu,options.popOn="none",menu.zpopover(options)),menu.zpopover("setAttribute","forElement",ele),menu.zpopover("open",void 0,ev),$.ZContextMenu.currentPopover=menu,$.ZContextMenu._lastVisitedPopover=ele)}else $.ZContextMenu.showMenu(menu,ele,pos,ev,isRightClick),$.ZContextMenu._lastVisitedPopover=void 0;return stopEvent(ev),!1}return!0}function traverseAndGetContextElement(ele,attr){var selector="["+attr+"]";return ele=ele.is(selector)?ele:$(ele.parents(selector).get(0)),{element:ele,attr:ele.attr(attr)}}_lastVisitedMenu=void 0,_lastVisitedPopover=void 0,$.ZContextMenu=function(ele){bindEvents($(ele)),initScrollWidth()};var components={zcolorpicker:{events:"zcolorpickercolorpanmouseover zcolorpickercolorpanmouseout zcolorpickerbeforeopen zcolorpickeropen zcolorpickerbeforeclose zcolorpickerbeforeotherusedcoloradd zcolorpickerotherusedcoloradd zcolorpickerbeforefocus zcolorpickerfocus zcolorpickerblur zcolorpickerclose zcolorpickerpick",selectEvent:"zcolorpickerchange"}};$.ZContextMenu.hidingMenu=!0,bindEvents=function(jele){jele.on("click.zcontextmenu",function(ev,data){var tar=$(ev.target);tar.closest(".zmenu").length||tar.closest(".zpopover__content").length||($.ZContextMenu.isColorpaletteShowing=!1,$.ZContextMenu.hidingMenu=!0,setTarget(ev),mouseClicked(ev,data))}),jele.on("contextmenu.zcontextmenu",function(ev,data){setTarget(ev),rightClicked(ev,data)}),$(".zdialog").on("zdialogdragstart.zcontextmenu",function(ev){mouseClicked(ev)}),ZComponents.$document.on("zbuttonsetselectionchange",function(e,ui){canAssociationHappen(ui)&&handleAssociatedObjects($(e.target),ui)}).on("zmenuitemclick",function(e,ui){canAssociationHappen(ui)&&handleAssociatedObjects(ui.menuitem)}).on("tabselect",function(e,ui){canAssociationHappen(ui)&&handleAssociatedObjects(ui.tab)}).on("zselectboxitemclick",function(e,ui){canAssociationHappen(ui)&&handleAssociatedObjects(ui.menuitem)})},setTarget=function(ev){ev.target.correspondingElement&&(ev.target=ev.target.correspondingElement)},$.ZContextMenu.highlightItem=function(tar,remove){var meta=ZComponents.getOptions(tar);if(!tar.is(".zcolorchooser")&&meta.highlightOnMenuShow!==!1){var fn=remove?"removeClass":"addClass",classNm=meta.activeClass?meta.activeClass:"ui-state-highlight",classOp="ui-state-open";tar[fn](classNm);var targetParent=tar.parent();targetParent&&(targetParent[fn](classOp),targetParent.is(".zbutton--split")&&targetParent[fn](classNm))}},$.ZContextMenu.showMenu=function(cmenu,ele,pos,ev,isRightClick){if(!cmenu||!cmenu.length||$(ele).data("zmenubutton"))return!1;var options={},_data=ZComponents.getOptions(cmenu);return _data&&(options=_data),isRightClick?options.direction="after-pointer":(cmenu.one("zmenushow.zcontext",function(e,ui){ui.skipHighlightTarget||$.ZContextMenu.highlightItem($(ui.forElement))}),cmenu.one("zmenuhide.zcontext",function(e,ui){ui.skipHighlightTarget||$.ZContextMenu.highlightItem($(ui.forElement),!0)})),cmenu.zmenu(options),$.ZContextMenu.currentMenu=cmenu,cmenu.zmenu("show",{currentTarget:ev.target,forElement:ele,event:ev,isRightClick:isRightClick}),$.ZContextMenu._isMenuShowing=!0,$.ZContextMenu.hidingMenu=!1,cmenu.one("zmenuhide.zcontext",function(e,ui){var tar=$(ui.currentTarget).closest(".zbutton").length?$(ui.currentTarget).closest(".zbutton"):$(ui.forElement);$.ZContextMenu.highlightItem(tar,!0),$.ZContextMenu.currentMenu=void 0,$.ZContextMenu._isMenuShowing=!1}),!0},$.ZContextMenu.hideMenu=function(ev){return($.ZContextMenu.currentMenu&&$.ZContextMenu._isMenuShowing||$.ZContextMenu.colorpalette&&$.ZContextMenu.colorpalette.is(":visible")||$.ZContextMenu.colorpicker&&$.ZContextMenu.colorpicker.is(":visible"))&&($.ZContextMenu.currentMenu&&$.ZContextMenu.currentMenu.hasClass("zmenu")?$.ZContextMenu.currentMenu.zmenu("hide"):$.ZContextMenu.isColorpaletteShowing=!0,$.ZContextMenu._isMenuShowing=!1,$.ZContextMenu.currentMenu=void 0,ev&&$.ZContextMenu.consumeEventOnMenuHide)?(ev.stopPropagation(),ev.preventDefault(),!1):!0},$.ZContextMenu.currentMenu=void 0,$.ZContextMenu._colorpaletteHoveredMenuItem=void 0,$.ZContextMenu._isMenuShowing=!1,$.ZContextMenu.colorpalette=void 0,$.ZContextMenu.colorpicker=void 0,$.ZContextMenu.windowElement=$(window),$.ZContextMenu._documentElement=$(document),$.ZContextMenu.windowWidth=$.ZContextMenu.windowElement.width(),$.ZContextMenu.windowHeight=$.ZContextMenu.windowElement.height(),$.ZContextMenu.colorpaletteRegistered=!1,$.ZContextMenu.displayMenuComponents=function(event,ui){$.ZContextMenu._colorpaletteHoveredMenuItem&&($.ZContextMenu.displayColorPalette(void 0,void 0,!1),$.ZContextMenu._colorpaletteHoveredMenuItem=void 0);var itemData=ui.menuitem.metadata();if(itemData.colorpalette){var itemObj=$(ui.menuitem),targetEle=$(itemData.relatedButton);targetEle=targetEle.data("menuButton")?targetEle.data("menuButton"):targetEle,itemObj.addClass("on-hover");var _options=itemData.colorpaletteOptions?itemData.colorpaletteOptions:{},selectedColor=$.data($(targetEle)[0],"selectedColor");selectedColor=selectedColor&&"transparent"!=selectedColor?selectedColor:!1;var colorpalette=$.ZContextMenu.colorpalette;_options.relativeto?colorpalette.attr("relativeto",_options.relativeto):colorpalette.removeAttr("relativeto"),options=$.extend({},_options,{relativeToEle:targetEle,selectedColor:selectedColor}),$.ZContextMenu.colorpalette.one("colorpaletteshow",function(){var position=$.ZContextMenu.adjustElementPosition({bufferWidth:itemObj.width()+colorpalette.width(),bufferHeight:colorpalette.height()-itemObj.outerHeight(),top:itemObj.offset().top,left:itemObj.offset().left+itemObj.width(),width:colorpalette.width(),height:colorpalette.height()});$.ZContextMenu.colorpalette.addClass("ui-zcolorpalette-menu-popover"),$.ZContextMenu.colorpalette.css({top:position.top,left:position.left})}),$.ZContextMenu._colorpaletteHoveredMenuItem=itemObj,$.ZContextMenu.colorpalette.one("mouseenter",function(){$.ZContextMenu._colorpaletteHoveredMenuItem&&$.ZContextMenu._colorpaletteHoveredMenuItem.addClass("ui-state-hover")}),itemObj.one("mouseleave",function(){colorpalette.is(":visible")&&$.ZContextMenu._colorpaletteHoveredMenuItem&&$.ZContextMenu._colorpaletteHoveredMenuItem.addClass("ui-state-hover")}),colorpalette.zcolorpalette("show",targetEle,options)}},$.ZContextMenu.adjustElementPosition=function(eleOffet){return $.ZContextMenu.windowWidth-(eleOffet.left+eleOffet.width+$.ZContextMenu.scrollWidth)<5&&(eleOffet.left=eleOffet.left-eleOffet.bufferWidth),$.ZContextMenu.windowHeight-(eleOffet.top+eleOffet.height+$.ZContextMenu.scrollWidth)<5&&(eleOffet.top=eleOffet.top-eleOffet.bufferHeight,eleOffet.top<0&&(eleOffet.top=$.ZContextMenu.windowHeight-eleOffet.height-5)),eleOffet},$.ZContextMenu.toggleColorPicker=function(target,colorpicker,options){var colorpicker=$("#"+target.attr("data-colorpicker-id")),events=components.zcolorpicker.events.replace(/  +/g," ").split(" ").join(".zcolorfield ");events+=".zcolorfield";var selectEvent=components.zcolorpicker.selectEvent+".zcolorfield";colorpicker.off(".zcolorfield"),colorpicker.is(":visible")&&target.is($.ZContextMenu.lastPickerTarget)?colorpicker.zcolorpicker("close"):(target=$(target),options=ZComponents.getOptions(target).colorpickerOptions||{},$.ZContextMenu.lastPickerTarget=options.forElement=target,options.value=target.data("selectedColor")||$.zcolorpicker.prototype.options.defaultValue,colorpicker.zcolorpicker("setAttributes",options),colorpicker.zcolorpicker("open"),colorpicker.on(selectEvent,function(origEvent,customData){target.trigger(origEvent.type,customData),target.data("selectedColor",customData.color)}).on(events,function(origEvent,customData){target.trigger(origEvent.type,customData)}).on("zcolorpickerclose.zcolorfield",function(){colorpicker.off(".zcolorfield")}))},$.ZContextMenu.registerColorpalette=function(options){$.ZContextMenu.colorpalette||(options=options||{},options.closeOnBodyClick=!1,$.ZContextMenu.colorpalette=$("<div>").css("display","none").appendTo("body").zcolorpalette(options).on("zcolorpalettecolorselected",function(origEvent,customData){$.ZContextMenu.lastPaletteTarget.trigger("zcolorpalettecolorselected",customData).data("selectedColor",customData.color)}).on("zcolorpalettehover zcolorpaletteshow",function(origEvent,customData){$.ZContextMenu.lastPaletteTarget.trigger(origEvent.type,customData)}).on("zcolorpalettehide",function(origEvent,customData){$.ZContextMenu.lastPaletteTarget.trigger(origEvent.type,customData),origEvent.originalEvent&&$(origEvent.originalEvent.currentTarget).closest($.ZContextMenu.colorpalette).length&&$.ZContextMenu.lastPaletteTarget&&$.ZContextMenu.lastPaletteTarget.focus()}),$.ZContextMenu.defaultPaletteOptions=$.ZContextMenu.colorpalette.zcolorpalette("options"),$.ZContextMenu.colorpaletteRegistered=!0)},$.ZContextMenu.destroyColorPalette=function(){$.ZContextMenu.colorpalette&&($.ZContextMenu.colorpalette.zcolorpalette("destroy"),$.ZContextMenu.colorpalette=$.ZContextMenu.colorpaletteRegistered=null)},$.ZContextMenu.hideColorPalette=function(){clearTimeout($.ZContextMenu.colorpaletteHideTimer),$.ZContextMenu.colorpalette&&$.ZContextMenu.colorpalette.zcolorpalette("hide",!0)},$.ZContextMenu.displayColorPalette=function(target,options){clearTimeout($.ZContextMenu.colorpaletteHideTimer),target=$(target);var colorpalette=$.ZContextMenu.colorpalette;if(colorpalette&&target.length){var initElement=target.hasClass("ui-zcolorchooser")?target.prev():target;$.ZContextMenu.lastPaletteTarget=target;var options=ZComponents.getOptions($(initElement));options=options.colorpaletteOptions||{};var selectedColor=target.data("selectedColor");options.selectedColor="transparent"!==selectedColor&&selectedColor?selectedColor:!1,options.relativeToEle=$(target);var display=!0;$.ZContextMenu.isColorpaletteShowing&&this._lastVisited&&this._lastVisited[0]===target[0]&&(display=!1),this._lastVisited=target,colorpalette.zcolorpalette(display?"show":"hide",$(target),options)}},$.ZContextMenu.closePopover=function(ev){var target=$(ev.target);if($.ZContextMenu.currentPopover&&0===target.closest(".zpopover").length){var metadata=$.ZContextMenu.currentPopover.data().zpopover,bodyClick=metadata.options.closeOnBodyClick,forElement=metadata._forElement;(bodyClick||target.closest(forElement).length)&&($.ZContextMenu.currentPopover.zpopover("close"),0===target.closest($.ZContextMenu._lastVisitedPopover).length&&($.ZContextMenu.currentPopover=$.ZContextMenu._lastVisitedPopover=void 0))}},$.fn.zcontextmenu=function(){$.ZContextMenu(this),ZComponents.$window.on("resize.zcontextmenu",function(ev){window.setTimeout(function(){$.ZContextMenu.hideMenu(),$.ZContextMenu.closePopover(ev)},300)})},$(document).zcontextmenu()});var ZShortCut=function($,$Z){function triggerShortcut(eventObj,isKeyDown){if(isShortcutEnabled&&isInputElement(eventObj)){var keyCode=eventObj.keyCode,key="";eventObj.ctrlKey&&(key="ctrl+"),broswerObj.isMac()&&eventObj.metaKey&&(key+="cmd+"),eventObj.shiftKey&&(key+="shift+"),eventObj.altKey&&(key+="alt+");var charCode=String.fromCharCode(keyCode);keyCode>=65&&90>=keyCode&&(keyCode=charCode.charCodeAt());var tempKey=key;key+=keyCode;var eventObject=allKeys[key];if(!eventObject)for(var i in spCharArr)if(spCharArr[i]===keyCode.toString()&&(key=tempKey+i.toLowerCase(),eventObject=allKeys[key]))break;if(eventObject){var keyInfo=eventObject.keyInfo||{},element=eventObject.element||"",handleOn=eventObject.handleOn,isDirectInit=eventObject.isDirectInit;if(element=$(element),((isKeyDown&&"keyup"!==handleOn)===!0||(!isKeyDown&&"keyup"===handleOn)==!0)&&(isDirectInit&&keyInfo.disabled!==!0||element)){if(isDirectInit){var elementId=keyInfo.elementIds;element=$("#"+(elementId&&elementId[0]))}var isSupportDisabledAttr=element&&-1!==tagNames.indexOf(element[0].tagName);if(isDirectInit&&!element.length||!element.is(":disabled")&&isSupportDisabledAttr||!isSupportDisabledAttr&&!element.is("[disabled]")){var triggerData={ele:element,shortcutKey:eventObject.shortcutKey,fromShortCut:!0};isDirectInit?executionFunction(keyInfo.action,element,eventObj,keyInfo.params):element.is(":checkbox")&&"click"===eventObject.event?element.each(function(){triggerData.ele=$(this),$(this).triggerHandler(eventObject.event,triggerData)}):element.trigger(eventObject.event,triggerData)}eventObj.stopPropagation(),eventObj.preventDefault()}}}}function executionFunction(callback,element,eventObj,data){var value=void 0;if(callback&&"string"==typeof callback){var executableFnc=_getAsFunction(callback);value=executableFnc.callable(data)}else value=$.isFunction(callback)?callback.apply(element,data):void 0;return void 0!==value?value:!eventObj.isDefaultPrevented()}function _getAsFunction(strValue){if(strValue){var methodIdx,_action=strValue.split("."),fn=window,base="";return $(_action).each(function(i,action){methodIdx=action.indexOf("()"),fn=methodIdx>0?fn[action.substring(0,methodIdx)]():fn[action],i==_action.length-2&&(base=fn)}),{fn:fn,base:base,callable:function(){fn&&fn.call(base,arguments[0])}}}}function getKey(element,keyInfo){keyInfo=keyInfo||$Z.getOptions(element);var shortcut=keyInfo.shortcutkey||keyInfo.shortcutKey||keyInfo.key;if(shortcut){isMac&&keyInfo.macShortcut?shortcut=keyInfo.macShortcut.key:keyInfo.windowsShortcut&&(shortcut=keyInfo.windowsShortcut.key);for(var keys="object"==typeof shortcut&&$.isArray(shortcut)?shortcut:[shortcut],formatFn=function($0){return keyInfo.skipShortcutFormat&&$0[0]!==$0[0].toUpperCase()?"cmd":"Cmd"},i=0;i<keys.length;i++){var key=keys[i];if("object"==typeof keys[i]&&(key=isMac&&keys[i].macKey?keys[i].macKey:keys[i].key,!keys[i].key&&!isMac))return!1;key&&!key.macKey&&isMac&&(key=key.replace(/ctrl/i,formatFn)),keyInfo.skipShortcutFormat||(key=key.toString().toLowerCase()),keys[i]=key}return keys}}function isInputElement(orgEvent){if(ZShortCut.discardInputElement){var element=$(orgEvent.srcElement);if(0===element.length&&(element=$(orgEvent.target)),element.is("input")||element.is("textarea"))return!1}return!0}function sortKeyCombination(key,keyInfo){var splittedKey,splittedKeys=key.split("+"),arrangedKeys="";key="";for(var i=0;i<allowedModifiers.length;i++)for(var j=0;j<splittedKeys.length;j++)splittedKey=splittedKeys[j].trim(),allowedModifiers[i]===splittedKey?arrangedKeys+=splittedKey+"+":-1===$.inArray(splittedKey,allowedModifiers)&&(key=splittedKey),""===splittedKey&&(key="+");
return keyInfo&&keyInfo.skipShortcutFormat||spCharArr[key.toUpperCase()]||(key=key.toUpperCase().charCodeAt(0)),arrangedKeys+=key}function registerKey(element,key,orgEvent,handleOn,isDirectInit,keyInfo){var arrangedKeys=sortKeyCombination(key,keyInfo);if(arrangedKeys){var registerObj={element:element,event:orgEvent,handleOn:handleOn};isDirectInit&&(registerObj.isDirectInit=!0,registerObj.keyInfo=keyInfo),allKeys[arrangedKeys]=registerObj}}function getFormattedKey(key,keyInfo){if(!keyInfo||!keyInfo.skipShortcutFormat){for(var splitKeys=key.split("+"),dkey="",i=0;i<splitKeys.length;i++)splitKeys[i]=splitKeys[i].charAt(0)==splitKeys[i].charAt(0).toUpperCase()?splitKeys[i].toUpperCase():splitKeys[i].charAt(0).toUpperCase()+splitKeys[i].substring(1,splitKeys[i].length),splitKeys.length-1!==i&&(splitKeys[i]+="+"),dkey+=splitKeys[i];return dkey}return key}function bindKeyUpEvent(){keyUpBinded=!0,$Z.$document.on("keyup.shortcut",function(orgEvent){triggerShortcut(orgEvent,!1)})}function deregisterKey(key,keyInfo){var arrangedKeys=sortKeyCombination(key,keyInfo);arrangedKeys&&delete allKeys[arrangedKeys]}function _handleRegister(keyInfo,element,isDirectInit){var eventName=keyInfo.eventName||"click",handleOn=keyInfo.handleOn,keys=getKey(null,keyInfo);if(isMac&&keyInfo.macShortcut?handleOn=keyInfo.macShortcut.handleOn||handleOn:keyInfo.windowsShortcut&&(handleOn=keyInfo.windowsShortcut.handleOn||handleOn),keyUpBinded||"keyup"!==handleOn||bindKeyUpEvent(),keys)for(var skipRegister=keyInfo.skipshortcutregister||keyInfo.skipRegistration,i=0;i<keys.length;i++)skipRegister||registerKey(element,keys[i],eventName,handleOn,isDirectInit,keyInfo),keyInfo.skipShortcutFormat||(keys[i]=getFormattedKey(keys[i],keyInfo));return keys?keys:!1}var broswerObj=$Z.Browser,allowedModifiers=["ctrl","cmd","shift","alt"],isMac=broswerObj.isMac(),handleAction=!0,allKeys=(broswerObj.isWindows(),{}),keyMap={},isShortcutEnabled=!0,keyUpBinded=!1,spCharArr={"<F1>":"112","<F2>":"113","<F3>":"114","<F4>":"115","<F5>":"116","<F6>":"117","<F7>":"118","<F8>":"119","<F9>":"120","<F10>":"121","<F11>":"122","<F12>":"123",PRINTSCREEN:"44",NUMLOCK:"144",PAUSE:"19",INSERT:"45",HOME:"36",PAGEUP:"33",PAGEDOWN:"34",DELETE:"46",END:"35",TAB:"9",CAPSLOCK:"20",WINDOWS:"91",ARROW_UP:"38",ARROW_DOWN:"40",ARROW_LEFT:"37",ARROW_RIGHT:"39",ENTER:"13",BACKSPACE:"8",SPACE:"32",ESCAPE:"27",DOT:"190",".":"190","":"226",91:"219",92:"220",93:"221",61:"187",45:"189",96:"192",44:"188",47:"191",39:"222",59:"186",123:"219",124:"220",125:"221",43:"187",95:"189",126:"192",60:"188",62:"190",63:"191",34:"222",58:"186",33:"49",64:"50",35:"51",36:"52",37:"53",94:"54",38:"55",42:"56",40:"57",41:"48"},tagNames=["BUTTON","INPUT","TEXTAREA","OPTION","SELECT","TEXTAREA","OPTGROUP","FIELDSET"];return $Z.$document.on("keydown.shortcut",function(orgEvent){triggerShortcut(orgEvent,!0)}),{init:function(options){options=options||{},handleAction=options.handleAction!==!1,handleAction||$Z.$document.off("keydown.shortcut")},discardInputElement:!0,disableAction:function(actionName){var keyInfo=keyMap[actionName];keyInfo&&(keyInfo.disabled=!0)},enableAction:function(actionName){var keyInfo=keyMap[actionName];keyInfo&&(keyInfo.disabled=!1)},addShortcuts:function(keysList){for(var keyInfo,keysList=keysList instanceof Array?keysList:[keysList],i=0;i<keysList.length;i++){keyInfo=keysList[i];var newKey=_handleRegister(keyInfo,keyInfo.elements,!0);keyMap[keyInfo.actionName]=keyInfo,keyMap[keyInfo.actionName].shortcutKey=newKey[0]}},register:function(element){var keyInfo=$Z.getOptions(element),shortcut=keyInfo.shortcutkey||keyInfo.shortcutKey;return keyInfo.eventName=shortcut&&shortcut.event?shortcut.event:"click",_handleRegister(keyInfo,element)},getShortcutKey:function(element){var keys=getKey(element),keyInfo=$Z.getOptions(element);if(keys){for(var i=0;i<keys.length;i++)keys[i]=getFormattedKey(keys[i],keyInfo);return keys}return!1},getInfo:function(actionName,element,registerElement){if(actionName){var keyInfo=keyMap[actionName]||{};return keyInfo.shortcutKey||keyInfo.key||""}return registerElement!==!1&&element?this.register(element):element?this.getShortcutKey(element):void 0},enable:function(){isShortcutEnabled=!0},disable:function(){isShortcutEnabled=!1},deregister:function(element){for(var keys=getKey(element),i=0;i<keys.length;i++)deregisterKey(keys[i],$Z.getOptions(element))}}}(jQuery,ZComponents);!function(ZC){function menuScrollWidth(){var scrollEle=document.createElement("div");return ZM_DOM._iconDiv=scrollEle.cloneNode(),ZM_DOM._iconDiv.className="zmenu__iconcontainer",ZM_DOM._icon=document.createElement("i"),document.querySelector("body").appendChild(scrollEle),scrollEle.style.cssText="width:50px;height:50px;overflow:scroll;",menuPrototype._scrollWidth=$(scrollEle).width()-scrollEle.scrollWidth,$(scrollEle).remove(),ZM_DOM._text=document.createElement("span"),ZM_DOM._hint=ZM_DOM._text.cloneNode(),ZM_DOM._key=ZM_DOM._text.cloneNode(),ZM_DOM._text.className="zmenu__text",ZM_DOM._hint.className="zmenu__hint",ZM_DOM._key.className="zmenu__shortcut",menuPrototype._scrollWidth}var $=ZC.DOMUtil,menuItemTemplate=ZC.getTemplate("zmenu.hbs"),menuItemJsonTemplate=ZC.getTemplate("zmenujson.hbs"),hasHandlebars=!1;!ZC.Browser.isIE()&&menuItemTemplate&&menuItemJsonTemplate&&(Handlebars.partials=Handlebars.templates,hasHandlebars=!0);var menuPrototype={options:{displayType:"box",direction:"auto",type:"list",toggle:!0,contentType:"text",renderInPlace:!1,columnCount:void 0,columns:3,search:!1,forElement:void 0,width:void 0,height:void 0,menuClass:"",className:"",animation:void 0,pointer:!1,checkedRadioItemIconClassName:void 0,checkedRadioItemSVGIconId:void 0,checkedCheckboxItemIconClassName:void 0,checkedCheckboxItemSVGIconId:void 0,isCustomHTMLEncoded:!0,htmlSafe:!0,offset:void 0,scroll:"slider",constructMenu:!0,EFFECTS:{slide:{open:"slideDown",close:"slideUp"},fade:{open:"fadeIn",close:"fadeOut"}},minWidth:200,handleAccessKeyNavigation:!0},ANIMATION_EVENTS:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend webkitTransitionEnd msTransitionEnd oTransitionEnd transitionEnd transitionend",ARIA_ROLES:{"default":"menuitem",custom:"menuitem",radio:"menuitemradio",checkbox:"menuitemcheckbox",itemgroup:"group",separator:"separator"},EFFECTS:{slide:{open:"slideDown",close:"slideUp"},fade:{open:"fadeIn",close:"fadeOut"}},_MENU_CONTENT_TYPES:{text:"",icon:"zmenu--icononly","icon-text":"zmenu--iconwithtext"},_MENU_ITEM_TYPES:{"default":"zmenu__item",separator:"zmenu__separator",splitmenu:"zmenu__item zmenu--split",itemgroup:"zmenu__title"},_DIRECTIONS:{menu:"bottom-left",submenu:"right-bottom",pointer:"bottom"},_attrNames:["id","name","data-item-type","disabled","checked","hidden","data-fixed","data-is-footer","data-item-value","data-label","data-icon","data-icon-class-name","data-svg-icon-id","data-text-as-icon","data-shortcutkey","data-shortcut-key","data-hint","data-description","data-menu-id"],_EVENTS:{ONBEFORESHOW:"beforeshow",ONBEFOREHIDE:"beforehide",ONSHOW:"show",ONHIDE:"hide",ONSUBMENUMENUITEMCLICKED:"submenuitemclick",ONBEFORESUBMENUSHOW:"beforesubmenushow",ONSUBMENUSHOW:"submenushow",ONBEFORESUBMENUHIDE:"beforesubmenuhide",ONSUBMENUHIDE:"submenuhide",ONMENUITEMHOVERED:"itemhover",ONMENUITEMCLICKED:"itemclick",ONBEFOREFOCUS:"beforefocus",ONKEYDOWN:"keydown"},_lastOverlayedMenuItem:void 0,_lastOverlayedMenu:void 0,_create:function(element,options){this.scrollWidth=void 0===menuPrototype._scrollWidth?menuScrollWidth():menuPrototype._scrollWidth,this.options.appendTo=void 0!==options.appendTo&&options.appendTo.length?$(options.appendTo):void 0,options.usingJSON||this._buildMenu(element),"DIV"===this.element[0].tagName&&element.find("ul:first").addClass("zmenu__list"),element[0].setAttribute("role","menu"),this._initEvents(),this._menuTextArray=[],options.search&&this._createSearchContainer(element),options.renderInPlace?(this._resetMenuTextArray(element),this.show()):element[0].style.display="none",element.data("toggle",options.toggle),element[0].setAttribute("tabindex",0),element[0].style.outline=0,options.height&&element.data("height",options.height),options.width&&element.data("width",options.width),ZC.isRTL&&(this._DIRECTIONS.submenu="left-bottom")},_buildMenu:function(menu){var items=menu[0].querySelectorAll("li");if(this.options.constructMenu){for(var i=0;i<items.length;i++)this._buildMenuItem($(items[i]),menu);menu[0].className+=" zmenu "+("grid"===this.options.type?"zmenu--thumbnail":this._MENU_CONTENT_TYPES[this.options.contentType])+" "+(this.options.menuClass?this.options.menuClass:"")+" "+(this.options.className?this.options.className:"")}else for(var i=0;i<items.length;i++)this._handleCheckedandDisabled($(items[i]),this.getData(items[i])),this._addEventsForMenuItems($(items[i]))},_createSearchContainer:function(menu){var header=$("<div class='zmenu__header'></div>"),textBox=$("<input type='text' class='zmenu__textbox' placeholder='Search' />"),searchIcon=$("<i class='zmenu__icon'></i>"),svgEle=ZC.createSVGElement("svg",{"class":"zmenu__search",viewBox:"0 0 16 16",width:"100%",height:"100%"},[{path:{d:"M15.6,15.6c-0.6,0.6-1.5,0.6-2.1,0l-2.7-2.7C9.7,13.6,8.4,14,7,14c-3.9,0-7-3.1-7-7s3.1-7,7-7c3.9,0,7,3.1,7,7c0,1.4-0.4,2.7-1.1,3.8l2.7,2.7C16.1,14,16.1,15,15.6,15.6z M7,2C4.2,2,2,4.2,2,7s2.2,5,5,5c2.8,0,5-2.2,5-5C12,4.2,9.8,2,7,2z"}}]);searchIcon[0].appendChild(svgEle),header.append(textBox,searchIcon),this.element.prepend(header),menu.data("_styleElement",$("<style id='zmenu-search-filter' type='text/css'>").appendTo("head")),textBox.on("keydown."+this.componentName,function(event){event.keyCode===ZC.keyCode.TAB&&event.preventDefault()})},_buildMenuItem:function(menuItem,menu){var data=this.getData(menuItem),hasSubmenu=data.menuId||(menuItem[0].firstElementChild&&"object"==typeof menuItem[0].firstElementChild&&menuItem[0].firstElementChild.tagName?"UL"===menuItem[0].firstElementChild.tagName:!1),itemClass=data.className?data.className:data.itemCssClass?data.itemCssClass:"";if(data.isGrid="grid"===this.options.type,menuItem[0].className+=" "+(this._MENU_ITEM_TYPES[data.itemType]?this._MENU_ITEM_TYPES[data.itemType]:"zmenu__item")+" "+itemClass,data.parentMenu=menuItem.parent(),data.disabled=void 0!==data.disabled?data.disabled:null!=menuItem[0].getAttribute("disabled"),data.hidden=void 0!==data.hidden?data.hidden:null!=menuItem[0].getAttribute("hidden"),data.checked=void 0!==data.checked?data.checked:null!=menuItem[0].getAttribute("checked"),hasSubmenu&&(data.hasSubmenu=!0,this._buildSubmenu(menuItem,data)),menuItem[0].setAttribute("role",this.ARIA_ROLES[data.itemType?data.itemType:"default"]),"separator"===data.itemType)return void this._handleCheckedandDisabled(menuItem,data);if("custom"===data.itemType||data.custom){if(menuItem[0].className+=" zmenu__custom",data.innerHTML){var content=data.innerHTML.content,replaceArray=data.innerHTML.replaceArray;if(content&&replaceArray){for(var i=0;i<replaceArray.length;i++)content=content.replace("{"+i+"}",ZC.encodeHTML(replaceArray[i]));menuItem.html(content)}else menuItem.html(this.options.isCustomHTMLEncoded||this.options.htmlSafe?data.innerHTML:ZC.encodeHTML(data.innerHTML))}return data.hasSubmenu&&this._createArrowIcon(menuItem),this._handleCheckedandDisabled(menuItem,data),this._addEventsForMenuItems(menuItem)}data.label=data.label?data.label:menuItem.text().trim(),data.label=data.ellipsis?data.label+"...":data.label;var shortcutkey=data.shortcutkey||data.shortcutKey;data.shortcutkey=window.ZShortCut?ZShortCut.getInfo(data.actionName,menuItem,!0):shortcutkey,menuItem[0].innerHTML="";var actualItem=menuItem;if(data.action&&"string"==typeof data.action&&-1!==data.action.indexOf("URL:")&&(data.target=data.target?data.target:"_blank",menuItem.addClass("zmenu--withlink").append("<a class='zmenu__link' href='"+data.action.replace("URL:","")+"' target='"+data.target+"'>"),actualItem=menuItem.find(".zmenu__link")),hasHandlebars)data.icon=data.SVGIconId?"#"+data.SVGIconId:data.iconClassName?data.iconClassName:data.icon,data.icon&&-1!==data.icon.indexOf("#")&&(data.svgId=data.icon.split(" ")[0],data.svgClass=data.icon.slice(data.svgId.length).trim()),"itemgroup"!==data.itemType&&(data["icon"===this.options.contentType?"icon-only":this.options.contentType]=this.options.contentType),actualItem.append(menuItemTemplate(data));else{if("text"!==this.options.contentType)if("itemgroup"!==data.itemType){var isThumbnail=data.isGrid,iconContainer=isThumbnail?void 0:ZM_DOM._iconDiv.cloneNode(),iconEle=ZM_DOM._icon.cloneNode();iconEle.className=isThumbnail?"zmenu__image ":"zmenu__icon ",this._handleIcon($(iconEle),void 0,void 0,data.iconClassName,data.SVGIconId,data.icon),!isThumbnail&&iconContainer.appendChild(iconEle),actualItem[0].appendChild(isThumbnail?iconEle:iconContainer)}else"icon"===this.options.contentType&&this._domUpdate(ZM_DOM._text,data.label,actualItem);"icon"!==this.options.contentType&&(this._domUpdate(ZM_DOM._text,data.label,actualItem),data.hint||data.description?this._domUpdate(ZM_DOM._hint,data.hint?data.hint:data.description,actualItem):data.shortcutkey&&this._domUpdate(ZM_DOM._key,data.shortcutkey,actualItem)),data.hasSubmenu&&this._createArrowIcon(actualItem)}data.icon&&0===data.icon.indexOf("text:")&&"text"!==this.options.contentType&&menuItem.find("i:first").removeClass(data.icon).text(data.icon.replace("text:","")),(data.fixed||data.isFooter)&&this._addFixedItem(menuItem,menu,data),menuItem[0].setAttribute("data-item-type",data.itemType),"icon"!==this.options.contentType&&menuItem[0].setAttribute("data-label",data.label),this._handleCheckedandDisabled(menuItem,data),this._addEventsForMenuItems(menuItem,data)},_domUpdate:function(node,text,item){var itemText=node.cloneNode();item[0].appendChild(itemText),itemText.textContent=text},_createArrowIcon:function(menuItem){var iconEle=$("<i class='zmenu__icon h-alignright'/>"),svgData={props:{"class":"zmenu__arrow",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{polygon:{points:"6.5,12.5 5.5,11.5 9,8 5.5,4.5 6.5,3.5 11,8"}}]};return this._handleIcon(iconEle,svgData,"arrow",this.options.arrowIconClassName,this.options.arrowSVGIconId),menuItem.append(iconEle),iconEle},_addFixedItem:function(menuItem,menu,data){if(data.label&&"icon"===this.options.contentType&&"grid"===this.options.type&&!menuItem.find(".zmenu__text").length&&menuItem.append($("<span class='zmenu__text'>"+data.label+"</span>")),menu.find(".zmenu__footer").length)menu.find(".zmenu__footer ul").append(menuItem);else{var fixedArea=$("<div class='zmenu__footer'><ul class='zmenu__list'></ul></div>");menu.append(fixedArea),fixedArea.find("ul").append(menuItem.addClass("is-fixed")),menu.data("fixedArea",fixedArea.find("ul"))}},_buildSubmenu:function(menuItem,data){var menu=this.getSubmenu(menuItem);if(menu&&(menuItem.addClass(data.splitmenu||"splitmenu"===data.itemType?"zmenu--split":"zmenu--submenu"),menuItem.data("submenu",menu),!data.menuId)){var menuData=this.getData(menu);$(menuData.appendTo?menuData.appendTo:"body").append(menu),this.getData(menuItem).menuId=menu.attr("id"),menu.zmenu()}},getSubmenu:function(menuItem){if(menuItem.data("submenu"))return menuItem.data("submenu");var submenu=this.getData(menuItem).menuId;return submenu?(submenu=$("#"+submenu),submenu.length?(submenu.data("zmenu")||submenu.zmenu(),submenu.data("isExternalSubmenu",!0),submenu):void 0):menuItem.children("ul:first")},_handleCheckedandDisabled:function(menuItem,data,optionName){var fromSetAttribute=void 0!==optionName;(fromSetAttribute?"hidden"===optionName:void 0!==data.hidden)&&this._hideMenuItem(menuItem,!data.hidden),(fromSetAttribute?"disabled"===optionName:void 0!==data.disabled)&&(menuItem[data.disabled?"addClass":"removeClass"]("is-disabled"),menuItem.attr("aria-disabled",data.disabled),data.disabled?menuItem.attr("disabled",!0):menuItem.removeAttr("disabled"));var condition=fromSetAttribute?"checked"===optionName:!0;!condition||"text"===this.options.contentType||void 0===data.checked||"checkbox"!==data.itemType&&"radio"!==data.itemType||this._checkMenuItem(menuItem,data.checked,data)},_initEvents:function(menu){var base=this,componentName=this.componentName;menu=$(menu?menu:this.element),menu.data("initialized")&&!menu||menu.data("isExternalSubmenu")||(menu.data("initialized",!0),menu.on("mouseup."+componentName,function(event){(3!==event.which||$(event.target).closest(".zmenu--withlink").length)&&base._handleMenuItemClick(event,menu)}).on("contextmenu."+componentName,function(event){var item=$(event.target).closest(".zmenu__item");item.length&&item.hasClass("zmenu--withlink")&&event.stopPropagation()}))},_handleMenuItemClick:function(event,menu){menu=menu||this.element;var menuItem=$(event.target);if(menuItem.is("li")||(menuItem=menuItem.closest("li")),menuItem&&0!==menuItem.length&&!menuItem.hasClass("separator")&&!menuItem.hasClass("zmenu__title")){var data=this.getData(menuItem),hasSubmenu=menuItem.data("submenu")&&menuItem.data("submenu").length&&!menuItem.hasClass("zmenu--split")?!0:!1;if(!data.disabled){if(hasSubmenu&&"click"===data.openOn){var submenu=this.getSubmenu(menuItem),base=this;submenu.is(":visible")?this.hide(submenu,function(){submenu.data("forElement")[0]!==menuItem[0]&&base._showSubmenu(menuItem,{event:event},!1,event)}):(this._checkAndHideAllOpenedSubMenus(menu,!0),this._showSubmenu(menuItem,{event:event},!0,event)),event.preventDefault(),event.stopPropagation()}var click=data.action;void 0!==click&&("function"!=typeof click&&"string"==typeof click&&-1===click.indexOf("URL:")?this._triggerFunction(click,menuItem,[event,{menuitem:menuItem,options:data}]):"function"==typeof click&&click.call(menuItem,event,{menuitem:menuItem,options:data})),this._triggerEvent("beforeitemchecked",event,menu,menuItem,{})&&("checkbox"===data.itemType||"radio"===data.itemType)&&this._checkMenuItem(menuItem,"checkbox"===data.itemType?!menuItem.prop("checked"):!0,data),this._triggerEvent(void 0!==menu.data("parent")?"ONSUBMENUMENUITEMCLICKED":"ONMENUITEMCLICKED",event,menu,menuItem,{})&&(this.options.renderInPlace||(!hasSubmenu&&this.hide(void 0,void 0,event),menuItem&&!menuItem.is(".zmenu--withlink")&&event&&event.preventDefault&&(event.stopImmediatePropagation(),event.preventDefault(),event.stopPropagation())))}}},show:function(options,menu){options=options?options:{};var appendedTo=$(this.options.appendTo),isSubMenu=options.isSubMenu=menu?!0:!1,menu=menu?menu:this.element,forElement=$(options.forElement?options.forElement:this.options.forElement),isFloating=this._isGridMenu(menu),offsetValue=options.offset?options.offset:this.options.offset?this.options.offset:void 0;if(this._uninitSliders(menu),isSubMenu||(this.options.forElement=options.forElement=forElement),menu.is(":visible")&&!options.mustBeShown)return void(this.options.toggle&&!isSubMenu&&this.hide());if(isSubMenu?menu.data({forElement:forElement,parent:forElement}):(this.options.handleAccessKeyNavigation&&this._initRuntimeEvents(),this.element.data("forElement",forElement)),this.options.renderInPlace&&!isSubMenu||options.mustBeShown||(void 0!==appendedTo&&appendedTo.length?appendedTo.append(menu):$("body").append(menu)),options.within=this.options.viewport&&$(this.options.viewport).length?$(this.options.viewport):appendedTo,this.updateLastMenuChain(menu),menu.data("modified")&&(menu.find("#noresultFound").remove(),menu.data("_styleElement").empty()),isFloating||this.options.renderInPlace||menu.addClass("zmenu__width"),this.options.renderInPlace)menu.css({width:"inherit",height:"inherit",position:"relative"}),this._openWithAnimation(menu,options,originalEvent);else{ZC.bindDocumentEvents&&ZC.bindDocumentEvents({element:menu,forElement:options.isRightClick?void 0:forElement,ctype:this.componentName,closeMethodName:"hide",closeEvent:"hide"});var originalEvent=options.event?options.event:{};if(options.isRightClick=options.isRightClick?options.isRightClick:options.direction?"after-pointer"===options.direction||"at-cursor"===options.direction:"after-pointer"===this.options.direction||"at-cursor"===this.options.direction,!this._triggerEvent(isSubMenu?"ONBEFORESUBMENUSHOW":"ONBEFORESHOW",originalEvent,menu,void 0,{currentTarget:options.isRightClick?originalEvent.target:forElement}))return;var base=this;if(menu.css({display:"block",opacity:"0"}),this._setFocus(),menu.data("width")){var menuWidth=parseInt(menu.outerWidth(!0)),optionWidth=parseInt(menu.data("width"));if(menuWidth>optionWidth){var maxWidth=menu.find("li").map(function(index,item){return $(item).find(".zmenu__shortcut").length?parseInt($(item).find(".zmenu__shortcut").outerWidth(!0)):0});maxWidth=Math.max.apply(null,maxWidth),maxWidth&&menu.find("li:not(li.zmenu__title) .zmenu__text").css("width","calc(100% - "+maxWidth+"px)")}menu.removeClass("zmenu__width"),menu.width(optionWidth)}else menu.outerWidth()<parseInt(this.options.minWidth)&&"icon"!==menu.data("zmenu").options.contentType&&(menu.removeClass("zmenu__width"),menu.width("border-box"===menu.css("box-sizing")?parseInt(this.options.minWidth)-parseInt(menu.css("border-left-width"))-parseInt(menu.css("border-right-width"))-1:parseInt(this.options.minWidth)-1));var hasScroll=!1;if(isFloating&&this._fixFloatingMenuWidth(menu),menu.css("height","auto"),menu.find("ul").length&&menu.find("ul").css("height","auto"),menu.data("height")<=menu.outerHeight()&&(menu.outerHeight(parseInt(menu.data("height"))),hasScroll=!0),menu.removeClass("zmenu__width"),!isFloating){var mwidth=menu.innerWidth()+1+(hasScroll?this.scrollWidth:0);menu.width(mwidth)}if(this.refresh(menu),options&&!options.position){if(options.direction=options.direction?"auto"===options.direction||options.isRightClick?this.options.pointer||"callout"===this.options.displayType?this._DIRECTIONS.pointer:this._DIRECTIONS.menu:options.direction:isSubMenu?this._DIRECTIONS.submenu:"auto"===this.options.direction||options.isRightClick?this.options.pointer||"callout"===this.options.displayType?this._DIRECTIONS.pointer:this._DIRECTIONS.menu:this.options.direction,options.eventObj=options.event,options.positionAlterable=options.positionAlterable||this.options.positionAlterable,options.positionAlterable=void 0!==options.positionAlterable?options.positionAlterable:isSubMenu?"flipfit":"auto"===this.options.direction||"after-pointer"===this.options.direction||"at-cursor"===this.options.direction,options.positionAlterable="after-pointer"!==this.options.direction&&"at-cursor"!==this.options.direction&&!options.isRightClick||isSubMenu?options.positionAlterable:"fit","object"!=typeof options.position){if((this.options.pointer||"callout"===this.options.displayType)&&!isSubMenu){this._createPointerElement();var base=this;options.arrowCallback=function(element,direction){base._arrowDirection=direction,element.removeClass("h-top h-bottom h-right h-left").addClass("h-"+direction)}}menu.data("isRightClick",options.isRightClick),options.withinPadding=8;var pos=ZPosition.get(options.isRightClick&&!isSubMenu?options.event:forElement,menu,$.extend({},{arrow:{element:isSubMenu?null:this._pointerElement,callback:options.arrowCallback}},options),this._pointerElement?this._pointerElement:void 0);if(options.availableHeight=pos.availableHeight,options.position=pos.elementPosition,options.position.direction=pos.direction,menu.data("direction",pos.direction),this._pointerElement&&!isSubMenu)offsetValue&&(pos.arrowDirection.match(/^top|bottom$/)?pos.arrowPosition.left=pos.arrowPosition.left-offsetValue.left:pos.arrowPosition.top=pos.arrowPosition.top-offsetValue.top),this._pointerElement.css(pos.arrowPosition);else if(!this._pointerElement&&!offsetValue)if(menu.removeClass("zmenu--bottomleft zmenu--bottomright zmenu--topleft zmenu--topright zmenu--top zmenu--bottom zmenu--left zmenu--right"),isSubMenu)"right-top"===pos.direction?(menu.addClass("zmenu--bottomleft"),options.position.left=options.position.left-1):"right-bottom"===pos.direction?(menu.addClass("zmenu--topleft"),options.position.left=options.position.left-1):"left-top"===pos.direction?(menu.addClass("zmenu--bottomright"),options.position.left=options.position.left+1):"left-bottom"===pos.direction&&(menu.addClass("zmenu--topright"),options.position.left=options.position.left+1);else{var topLeft=forElement.length?parseInt(forElement.css("border-top-left-radius")):0,topRight=forElement.length?parseInt(forElement.css("border-top-right-radius")):0,bottomLeft=forElement.length?parseInt(forElement.css("border-bottom-left-radius")):0,bottomRight=forElement.length?parseInt(forElement.css("border-bottom-right-radius")):0;5>=topLeft&&5>=topRight&&5>=bottomLeft&&5>=bottomRight?options.isRightClick?menu.removeClass("zmenu--bottomleft zmenu--bottomright zmenu--topleft zmenu--topright zmenu--top zmenu--bottom zmenu--left zmenu--right"):0===pos.direction.indexOf("bottom")?("bottom-right"===pos.direction?forElement.outerWidth(!0)<menu.width()?(menu.addClass("zmenu--topright"),forElement.css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"})):(menu.addClass("zmenu--top"),forElement.css({"border-bottom-right-radius":"0px"})):"bottom-left"===pos.direction&&(forElement.outerWidth(!0)<menu.width()?(menu.addClass("zmenu--topleft"),forElement.css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"})):(menu.addClass("zmenu--top"),forElement.css({"border-bottom-left-radius":"0px"}))),options.position.top=options.position.top-1):0===pos.direction.indexOf("top")?("top-right"===pos.direction?forElement.outerWidth(!0)<menu.width()?(menu.addClass("zmenu--bottomright"),forElement.css({"border-top-left-radius":"0px","border-top-right-radius":"0px"})):(menu.addClass("zmenu--bottom"),forElement.css({"border-top-right-radius":"0px"})):"top-left"===pos.direction&&(forElement.outerWidth(!0)<menu.width()?(menu.addClass("zmenu--bottomleft"),forElement.css({"border-top-left-radius":"0px","border-top-right-radius":"0px"})):(menu.addClass("zmenu--bottom"),forElement.css({"border-top-left-radius":"0px"}))),options.position.top=options.position.top+1):0===pos.direction.indexOf("left")?(menu.addClass("zmenu--right"),forElement.css({"border-top-left-radius":"0px","border-bottom-left-radius":"0px"})):0===pos.direction.indexOf("right")&&(menu.addClass("zmenu--left"),forElement.css({"border-top-right-radius":"0px","border-bottom-right-radius":"0px"})):options.position.top=options.position.top+2}}if(menu.find(".zmenu__textbox").length){menu.data("initialDirection",options.position.direction);var searchDiv=menu.find(".zmenu__search").parent();if(options.position.top<$(forElement).position().top){menu.append(searchDiv.addClass("zmenu__footer").removeClass("zmenu__header"));var pos=ZPosition.get(options.isRightClick&&!isSubMenu?options.event:forElement,menu,options,this._pointerElement?this._pointerElement:void 0);options.position=pos.elementPosition,options.position.top=options.position.top+1}else menu.prepend(searchDiv.addClass("zmenu__header").removeClass("zmenu__footer"))}offsetValue&&(options.position.top=options.position.top+(parseInt(offsetValue.top)||0),options.position.left=options.position.left+(parseInt(offsetValue.left)||0))}options.position&&(options.isRightClick&&(options.position.top=options.position.top+2,options.position.left=options.position.left+2),menu.css(options.position)),this._fixMenuUI(menu,options,isSubMenu),0===menu.find("ul:first .zmenu__item").length&&menu.find(".zmenu__footer").length&&menu.find(".zmenu__footer").css("border-top","0px"),menu.css({display:"block",opacity:""}),this._pointerElement&&this._pointerElement.hide(),this._openWithAnimation(menu,options,originalEvent)}isSubMenu||(ZC.currentMenu&&ZC.currentMenu.get(0)!=menu.get(0)&&(ZC.prevMenu=ZC.currentMenu),ZC.currentMenu=menu)},_openWithAnimation:function(menu,options,originalEvent){var animationObject=this.options.animation;if(options.isSubMenu&&(animationObject=menu.data("zmenu").options.animation),animationObject||options&&options.animation){var base=this,animation=animationObject?animationObject.open:options.animation.open,animationClass=animation.className,effect=animation.name,duration=animation.duration?animation.duration:0,completeFunction=function(){base._handleMenuOpen(menu,options,originalEvent)};animationClass?(this._pointerElement&&this._pointerElement.show().addClass(animationClass),menu.show().addClass(animationClass).on(this.ANIMATION_EVENTS,function(){menu.removeClass(animationClass),completeFunction&&completeFunction(),completeFunction=void 0,menu.off(base.ANIMATION_EVENTS)})):"object"==typeof effect?(this._pointerElement&&this._pointerElement.show().animate(effect,duration,completeFunction),menu.show().animate(effect,duration,completeFunction)):this.options.EFFECTS[effect]&&(this._pointerElement&&this._pointerElement[this.options.EFFECTS[effect].open](duration,completeFunction),menu[this.options.EFFECTS[effect].open](duration,completeFunction))}else menu.show(),this._pointerElement&&this._pointerElement.show(),this._handleMenuOpen(menu,options,originalEvent)},_handleMenuOpen:function(menu,options,originalEvent){this._resetMenuTextArray(menu),!this.options.renderInPlace&&this._triggerEvent(options.isSubMenu?"ONSUBMENUSHOW":"ONSHOW",originalEvent,menu,void 0,{forElement:options.forElement})},_createPointerElement:function(){return this._pointerElement?this._pointerElement.removeAttr("class").addClass("zmenu__pointer"):(this._pointerElement=$("<div class='zmenu__pointer' />"),void this.element.prepend(this._pointerElement))},_isGridMenu:function(menuOrMenuItem,isMenuItem){var menu=isMenuItem?menuOrMenuItem.closest(".zmenu"):menuOrMenuItem?menuOrMenuItem:this.element;if(menu.length){var type=this.getMenuType(menu);return this._isTypeFloating(type,menu)}},_addEventsForMenuItems:function(menuItem){var base=this,metaData=this.getData(base.element);menuItem.hover(function(event,data){event.data=data;var isdirect=base._isDirectEvent(event),mouseOverFunc=function(){base._handleMouseOverOnMenuItems(menuItem,event,void 0,!0)};base._clearMouseHoverTimeout(),isdirect&&base._isToBeDelayed(event)?metaData.mouseOverTimeout=setTimeout(mouseOverFunc,300):mouseOverFunc()},function(event,data){event.data=data;var isdirect=base._isDirectEvent(event),mouseOutFunc=function(){base._handleMouseOutOnMenuItems(menuItem,event)};isdirect&&(menuItem.data("submenu")||metaData.mouseOverTimeout)?metaData.mouseOutTimeout=setTimeout(mouseOutFunc,300):mouseOutFunc()})},hide:function(menu,callback,event){if(!this.options.renderInPlace){var isSubMenu=menu&&menu.length||this.element.data("parent")&&$(this.element.data("parent")).is(".zmenu__item")&&!event?!0:!1;if(menu=menu?$(menu):this.element,!menu.is(":hidden")){var result=this._triggerEvent(isSubMenu?"ONBEFORESUBMENUHIDE":"ONBEFOREHIDE",event,menu);result&&(isSubMenu||(this._hideAllSubMenus(menu),this._destroyRuntimeEvents()),$("li.on-hover",menu).each(function(i,menuItem){$(menuItem).is(".zmenu--split")&&$(menuItem).find(".zmenu__icon.h-alignright").removeClass("on-hover"),$(menuItem).removeClass("on-hover")}),menu.get(0)!==this.element.get(0)?this.updateLastMenuChain(menu.data("parent").parent()):this._lastOverlayedMenuItem=void 0,this._uninitSliders(menu),this._closeWithAnimation(menu,isSubMenu,callback,event))}}},_closeWithAnimation:function(menu,isSubMenu,callback,event){var animation=this.options.animation;if(isSubMenu&&(animation=menu.data("zmenu").options.animation),animation&&animation.close){animation=animation.close;var base=this,animationClass=animation.className,effect=animation.name,duration=animation.duration?animation.duration:0,completeFunction=function(){base._handleMenuClose(menu,isSubMenu,callback,event)};if(animationClass)menu.addClass(animationClass).on(this.ANIMATION_EVENTS,function(){menu.removeClass(animationClass),menu.hide(),completeFunction&&completeFunction(),completeFunction=void 0,menu.off(base.ANIMATION_EVENTS)});else if("object"==typeof effect){var base=this;menu.animate(effect,duration,completeFunction)}else this.options.EFFECTS[effect]&&menu[this.options.EFFECTS[effect].close](duration,completeFunction);isSubMenu&&menu.data("parent").closest(".zmenu").data("waitingTime",duration)
}else{var base=this;menu.data("waitingTime")>0?window.setTimeout(function(){menu.hide(),base._handleMenuClose(menu,isSubMenu,callback,event),menu.data("waitingTime",0)},menu.data("waitingTime")):(menu.hide(),base._handleMenuClose(menu,isSubMenu,callback,event))}},_handleMenuClose:function(menu,isSubMenu,callback,event){if(isSubMenu){var __menu=$(menu.data("parent")).closest(".zmenu");this._resetMenuTextArray(__menu)}else this._resetMenuTextArray(menu);menu.css({top:"",left:"",height:"",width:""}),menu.removeClass("zmenu--bottomleft zmenu--bottomright zmenu--topright zmenu--topleft zmenu--bottom zmenu--top zmenu--left zmenu--right"),$(menu.data("forElement")).css({"border-radius":""}),void 0!==menu.data("_styleElement")&&menu.data("_styleElement").empty(),this._triggerEvent(isSubMenu?"ONSUBMENUHIDE":"ONHIDE",event,menu),callback&&callback()},_clearMouseHoverTimeout:function(){var metaData=this.getData(this.element);if(clearTimeout(metaData.mouseOverTimeout),clearTimeout(metaData.mouseOutTimeout),void 0!==this.element.data("parent")){var parData=this.getData(this.element.data("parent").closest(".zmenu"));clearTimeout(parData.mouseOverTimeout),clearTimeout(parData.mouseOutTimeout),parData.constantLoc=void 0}},_isElementInMenu:function(element,menu){return menu||(menu=this.element),element=$(element)[0],1===menu.has(element).length},_isToBeDelayed:function(e){var metaData=this.getData(this.element);if(void 0!==metaData.constantLoc){var cursorPosition={x:e.pageX,y:e.pageY},decreasingSlope=this._slope(cursorPosition,this.decreasingCorner),increasingSlope=this._slope(cursorPosition,this.increasingCorner);if(decreasingSlope<this.prevDecreasingSlope&&increasingSlope>this.prevIncreasingSlope)return!0}return!1},_scrollToView:function(menuitem){var ul=menuitem.closest("ul"),itemTop=menuitem.offset().top-ul.offset().top,scrollTop=ul[0].scrollTop;0>itemTop?scrollTop+=itemTop:scrollTop<itemTop+scrollTop+menuitem.outerHeight(!0)-ul.outerHeight()&&(scrollTop+=itemTop),ul.scrollTop(scrollTop)},_handleMouseOverOnMenuItems:function(menuItem,event,scrollToView,triggerEvent,fromLoad){if(menuItem.is(".is-disabled")||menuItem.is(".zmenu__title"))return void(this._lastOverlayedMenuItem&&this._lastOverlayedMenuItem.removeClass("on-hover"));if(scrollToView&&this._scrollToView(menuItem,menuItem.closest(".zmenu").is("ul")?menuItem.closest(".zmenu"):menuItem.closest(".zmenu").find("ul:first")),menuItem.is(".on-hover")&&this._isMenuOfMenuItemShown(menuItem))return void this._setLastOverlayedMenuItem(menuItem);if(fromLoad||triggerEvent&&this._triggerEvent("ONMENUITEMHOVERED",event,menuItem.closest(".zmenu"),menuItem)){this._checkAndHideAllOpenedSubMenus(menuItem.closest(".zmenu")),this._setLastOverlayedMenuItem(menuItem),this._clearMenuTimeout(),menuItem.addClass("on-hover");var isDirectlyFromMouseEvent=event?this._isDirectEvent(event):!1,base=this,showSubMenuAndTriggerEvent=function(){"click"!==this.getData(menuItem).openOn&&menuItem.data("submenu")&&isDirectlyFromMouseEvent?(this._checkAndHideAllOpenedSubMenus(menuItem.closest(".zmenu"),!0),this._showSubmenu(menuItem,{event:event},!1,event)):this.getData(this.element).constantLoc=void 0};menuItem.is(".zmenu--split")?window.setTimeout(function(){menuItem.hasClass("on-hover")&&(menuItem.find(".zmenu__icon.h-alignright").addClass("on-hover"),showSubMenuAndTriggerEvent.bind(base)())},150):showSubMenuAndTriggerEvent.bind(this)()}},_showSubmenu:function(menuItem,options,showImmediately,eventObj){var base=this;options.forElement||(options.forElement=menuItem);var f=function(){if(menuItem.is(":visible")){var submenu=base.getSubmenu(menuItem);options.direction=submenu.data("zmenu").options.submenuDirection?submenu.data("zmenu").options.submenuDirection:base._DIRECTIONS.submenu,base.show(options,submenu,!1),base._saveMenuPoints(eventObj,menuItem)}};showImmediately?f():base._menuTimeout=setTimeout(f,100)},_clearMenuTimeout:function(){this._menuTimeout&&(clearTimeout(this._menuTimeout),this._menuTimeout=void 0)},_handleMouseOutOnMenuItems:function(menuItem,e){var isDirectlyFromMouseEvent=this._isDirectEvent(e);if(isDirectlyFromMouseEvent){if(!menuItem.parent().has(e.relatedTarget).length){if(menuItem.data("submenu")&&this._isMenuOfMenuItemShown(menuItem))return;this._setLastOverlayedMenuItem(void 0)}}else{var relatedEle=e.data;if((!this._isMenuOfMenuItemShown(menuItem)||!this._isElementInMenu(relatedEle,$(this.getSubmenu(menuItem))))&&(this._clearMenuTimeout(),menuItem.removeClass("on-hover"),menuItem.is(".zmenu--split")&&menuItem.find(".zmenu__icon.h-alignright").removeClass("on-hover"),menuItem.data("submenu"))){var smenu=this.getSubmenu(menuItem);if(!smenu||"click"===this.getData(menuItem).openOn)return;!this._isElementInMenu(relatedEle,$(smenu))&&$(smenu).data("parent")&&$(smenu).data("parent")[0]===menuItem[0]&&this.hide(smenu)}}},_isMenuOfMenuItemShown:function(menuItem){return menuItem.data("submenu")&&$(this.getSubmenu(menuItem)).is(":visible")},_isDirectEvent:function(e){return!!e.originalEvent},_hideMenuItem:function(menuItem,show){var menuItem="string"==typeof menuItem?$("#"+menuItem,this.element):$(menuItem);menuItem.length&&(menuItem[show?"show":"hide"](),menuItem.attr({hidden:show?!1:!0,"aria-hidden":show?!1:!0}))},_checkMenuItem:function(menuItem,checked,data){"radio"===data.itemType?this._handleRadioChecked(menuItem,checked,data):"checkbox"===data.itemType&&this._handleCheckboxChecked(menuItem,checked,data)},_checkAndHideAllOpenedSubMenus:function(menu,hideAll,callback){for(var items=menu.find("li"),i=0;i<items.length;i++){var item=$(items[i]),subMenu=this.getSubmenu(item),openOnClick=subMenu&&"click"==this.getData(item).openOn;subMenu&&subMenu.is(":visible")&&(!openOnClick||hideAll)&&(this._checkAndHideAllOpenedSubMenus(subMenu,hideAll,callback),subMenu.data("parent")&&"click"===this.getData(subMenu.data("parent")).openOn?menu.zmenu("hide",subMenu,callback):item.trigger("mouseleave"))}},_setLastOverlayedMenuItem:function(menuItem,noTrigger){if(!this._lastOverlayedMenuItem||!menuItem||this._lastOverlayedMenuItem.get(0)!==menuItem.get(0)){if(this._lastOverlayedMenuItem&&menuItem&&menuItem.length&&!this._lastOverlayedMenu.has(menuItem.get(0)).length){var submenu=menuItem.data("submenu");if(!submenu||submenu[0]!==this._lastOverlayedMenu[0]){var par=this._lastOverlayedMenu.data("parent");par&&par.parent().has(menuItem[0]).length&&par.trigger("mouseleave",menuItem)}}if(this._lastOverlayedMenuItem&&!noTrigger&&this._lastOverlayedMenuItem.trigger("mouseleave",menuItem),this._lastOverlayedMenuItem=menuItem,menuItem&&menuItem.length){var __menu=menuItem.closest(".zmenu"),currentMenu=this.element;for(this.updateLastMenuChain(__menu),this.getData(currentMenu)._lastOverlayedMenuItem=menuItem;currentMenu.data("isSubMenu");){var par=this.getData(currentMenu).parent;currentMenu=par.closest(".zmenu")}this.getData(currentMenu)._lastOverlayedMenuItem=menuItem}}},_fixFloatingMenuWidth:function(menu){var options=menu.data("zmenu").options,columns=(options.type,options.columnCount||options.columns);if(!columns||-1===columns){var _menu=menu.closest(".zmenu");if(columns=_menu.data("isExternalSubmenu")?this.getData(_menu).columns?this.getData(_menu).columns:this.getData(_menu).columnCount:this.options.columns,!columns||-1===columns)return}for(var itemStyle,items=this._getAllMenuItems(menu,!1,!1,!0),floatingMenuWidth=($(items[0]).outerWidth(!0),0),i=0;columns>i&&i<items.length;i++)itemStyle=window.getComputedStyle(items[i]),floatingMenuWidth+=Math.round(parseFloat(itemStyle.width))+Math.round(parseFloat(itemStyle.marginLeft))+Math.round(parseFloat(itemStyle.marginRight));menu.width(floatingMenuWidth),(menu.data("height")<=menu.outerHeight()||menu.hasClass("h-scroll_y")||menu.find(".h-scroll_y").length)&&(floatingMenuWidth+=this.scrollWidth,menu.width(floatingMenuWidth)),menu.data("width",floatingMenuWidth),this.getData(menu).search&&menu.data("container").width(floatingMenuWidth).find("input").width(floatingMenuWidth)},getItemCount:function(){return $(this.element).children(".zmenu__item").length},removeMenuItems:function(menuItems){var item,base=this;if(menuItems)for(var i=0;i<menuItems.length;i++)item=$(menuItems[i],this.element),item.length&&base.removeMenuItem(item);else this.element.empty(),this.element.is("div")&&(this._pointerElement&&this.element.append(this._pointerElement),this.element.append($("<ul class='zmenu__list'>")))},removeMenuItem:function(menuItem){if(menuItem=$(menuItem,this.element),menuItem.length){var name=menuItem.attr("name");menuItem.remove();var groupTitle=name?this.element.find("#"+name+".zmenu__title"):void 0;if(groupTitle&&groupTitle.length){var items=this.element.find("li[name="+name+"]:not(.zmenu__title)");items.length||groupTitle.remove()}this.element.find(".zmenu__footer")&&!this.element.find(".zmenu__footer li").length&&this.element.find(".zmenu__footer").remove(),this._fixMenuUI(this.element),this._resetMenuTextArray(this.element)}},getMenuItemAt:function(index,menu,returnAsObj){return menu=menu?menu:this.element,returnAsObj?this._getMenuItemAsObject(menu.find(".zmenu__item:eq("+index+")")):menu.find(".zmenu__item:eq("+index+")")},_getMenuItemAsObject:function(menuItem){var mdata={},data=this.getData(menuItem),base=this;$(this._attrNames).each(function(i,name){var attrVal=menuItem.attr(name)||data[name];void 0!==attrVal&&(mdata[name]=attrVal)});for(var i in data)-1===$.inArray(i,base._attrNames)&&"menuItems"!==i&&void 0!==data[i]&&(mdata[i]=data[i]);if("custom"==mdata.itemType||mdata.custom?mdata.innerHTML=menuItem[0].innerHTML:void 0===mdata.label&&(mdata.label=menuItem.find(".zmenu__text").length&&menuItem.find(".zmenu__text").text()),mdata.text=void 0,menuItem.data("submenu")){var subMenu=this.getSubmenu(menuItem);subMenu&&(mdata.menuItems=this._getMenuAsObject(subMenu))}return mdata},_getMenuAsObject:function(menu){menu=menu?menu:this.element;var base=this,menuArr=[],menuItems=menu.find("li");return menuItems.each(function(index,menuItem){menuArr.push(base._getMenuItemAsObject($(menuItem)))}),menuArr},addMenuItems:function(menuItemArray,itemCallback,appendOnce){for(var items=[],base=this,menuItemArr=Object.create(menuItemArray),menuItem=void 0,len=menuItemArr.length,i=0;len>i;i++)menuItem=base.addMenuItem(menuItemArr[i],itemCallback,!0,appendOnce),items.push(menuItem);return appendOnce&&this.element.find("ul.zmenu__list:first").append(items),(this.element.is(":visible")||this.options.renderInPlace)&&(this._fixMenuUI(this.element),this._resetMenuTextArray(this.element)),items},addMenuItem:function(menuItemObj,itemCallback,isInternal,appendOnce){var menuItem=void 0,menu=$(this.element);"object"==typeof menuItemObj&&(menuItemObj=Object.create(menuItemObj)),menuItemObj.menu&&menuItemObj.menu.length&&"object"==typeof menuItemObj.menu&&(menu="UL"===!$(menuItemObj.menu)[0].tagName?$(menuItemObj.menu).children("ul"):menuItemObj.menu);var container="UL"===menu[0].tagName?!1:!0;if(menuItem=hasHandlebars?this._menuItemUsingTemplate(menu,menuItemObj,itemCallback):$(this._menuItemUsingElementCreation(menu,menuItemObj,itemCallback)),!appendOnce){var allItems=menu[0].querySelectorAll("li");if("undefined"!=typeof menuItemObj.index&&allItems.length){var insertAfter=!1;menuItemObj.index>=allItems.length&&(menuItemObj.index=allItems.length-1,insertAfter=!0),menuItemObj.index<0&&(menuItemObj.index=0),menuItem[insertAfter?"insertAfter":"insertBefore"]($(allItems[menuItemObj.index]))}else container?menu[0].querySelector("ul").appendChild(menuItem[0]):menu[0].appendChild(menuItem[0])}"object"!=typeof menuItemObj.menuItems&&itemCallback&&"separator"!==menuItemObj.mtype&&itemCallback(menuItem,menuItemObj);var attrName=void 0;for(var i in this._attrNames)attrName=this._attrNames[i],menuItemObj[attrName]&&menuItem[0].setAttribute(attrName,menuItemObj[attrName]+"");var data=this.getData(menuItem);for(var i in menuItemObj)-1===$.inArray(i,this._attrNames)&&"menuItems"!==i&&"action"!==i&&menuItemObj[i]&&(data[i]=menuItemObj[i]);if(menuItemObj.action&&"string"==typeof menuItemObj.action&&-1!==menuItemObj.action.indexOf("URL:")&&(data.action=menuItemObj.action),menuItemObj.checked&&(menuItem.data("checked",menuItemObj.checked),menuItem.attr({"data-checked":menuItemObj.checked,"aria-checked":menuItemObj.checked})),menuItemObj.hidden&&menuItem.attr({"data-hidden":menuItemObj.hidden,"aria-hidden":menuItemObj.hidden}),menuItemObj.disabled&&menuItem.attr({"data-disabled":menuItemObj.disabled,"aria-disabled":menuItemObj.disabled}),menuItemObj.customAttributes){if(menuItemObj.customAttributes.data){var attrVal=menuItemObj.customAttributes.data;"string"==typeof attrVal&&(attrVal=JSON.parse(attrVal)),attrVal.appData&&(this.getData(menuItem).appData=attrVal.appData)}menuItem.attr(menuItemObj.customAttributes)}if(menuItemObj.internal||hasHandlebars){if(menuItem.attr("role",this.ARIA_ROLES[menuItemObj.itemType?menuItemObj.itemType:"default"]),menuItemObj.innerHTML){var content=menuItemObj.innerHTML.content,replaceArray=menuItemObj.innerHTML.replaceArray;if(content&&replaceArray){for(var i=0;i<replaceArray.length;i++)content=content.replace("{"+i+"}",ZC.encodeHTML(replaceArray[i]));menuItem.html(content)}else this.options.isCustomHTMLEncoded||this.options.htmlSafe?menuItem.append(data.innerHTML):menuItem.html(ZC.encodeHTML(data.innerHTML));menuItemObj.hasSubmenu&&this._createArrowIcon(menuItem)}this._handleCheckedandDisabled(menuItem,menuItemObj)}else this._buildMenuItem(menuItem,menu);var extAsso=menuItemObj.itemValue;extAsso&&menuItem.data("itemValue",extAsso);var splitButtonData=menuItemObj.splitButtonData;splitButtonData&&menuItem.data("relatedButton",splitButtonData),this.getData(menuItem).action=menuItemObj.action,(menuItemObj.fixed||menuItemObj.isFooter)&&this._addFixedItem(menuItem,menu,data),isInternal||this._fixMenuUI(menu);var className=menuItemObj.className?menuItemObj.className:menuItemObj.itemCssClass?menuItemObj.itemCssClass:"";return menuItemObj.isFooter?null:menuItem.addClass(className)},_menuItemUsingTemplate:function(menu,menuItemObj,itemCallback){if(menuItemObj.listClass="itemgroup"===menuItemObj.itemType?"zmenu__title":"zmenu__item",menuItemObj.icon=menuItemObj.SVGIconId?menuItemObj.SVGIconId:menuItemObj.iconClassName?menuItemObj.iconClassName:menuItemObj.icon,menuItemObj.icon&&-1!==menuItemObj.icon.indexOf("#")&&(menuItemObj.svgId=menuItemObj.icon.split(" ")[0],menuItemObj.svgClass=menuItemObj.icon.slice(menuItemObj.svgId.length).trim()),menuItemObj.isGrid=this._isGridMenu(menu),menuItemObj.isSeparator="separator"===menuItemObj.itemType?!0:!1,menuItemObj.isCustom="custom"===menuItemObj.itemType||menuItemObj.custom?!0:!1,"splitmenu"===menuItemObj.itemType&&(menuItemObj.listClass+=" zmenu--split"),"string"==typeof menuItemObj.menuId)menuItemObj.hasSubmenu=!0,menuItemObj.submenuId=menuItemObj.menuId.substr(1);else if(menuItemObj.menuItems&&menuItemObj.menuItems.length){menuItemObj.submenuId=menuItemObj.id+"submenu",menuItemObj.submenu=$("<ul>").attr("id",menuItemObj.submenuId),menuItemObj.hasSubmenu=!0,menuItemObj.contentType=menuItemObj.contentType?menuItemObj.contentType:"text",this.getData(menuItemObj.submenu).contentType=menuItemObj.contentType;var base=this;$(menuItemObj.menuItems).each(function(i,_menuItemObj){_menuItemObj.menu=menuItemObj.submenu,_menuItemObj.internal=!0,base.addMenuItem(_menuItemObj,itemCallback,void 0)}),menuItemObj.submenu.addClass("zmenu "+this._MENU_CONTENT_TYPES[menuItemObj.contentType?menuItemObj.contentType:"text"]).zmenu({usingJSON:!0}),$("body").append(menuItemObj.submenu)}var menuType=menu.data("zmenu")?menu.data("zmenu").options.contentType:this.getData(menu).contentType;menuItemObj["icon"===menuType?"icon-only":menuType]=menuType;var menuItem=$(menuItemJsonTemplate(menuItemObj));if(menuItemObj.isGroup?menuItem.append(menuItemObj.submenu):menuItemObj.menuItems&&menuItemObj.menuItems.length&&(menuItem.attr("data-menu-id",menuItemObj.submenuId),menuItemObj.submenu.data("parent",menuItem)),menuItemObj.label&&menuItem.attr("data-label",menuItemObj.label),menuItemObj.disabled&&menuItem.attr("data-disabled",menuItemObj.disabled),menuItemObj.hidden&&menuItem.attr("data-hidden",menuItemObj.hidden),this.getData(menuItem).parentMenu=menu,menuItemObj.icon&&0===menuItemObj.icon.indexOf("text:")&&"text"!==this.options.contentType&&menuItem.find("i:first").removeClass(menuItemObj.icon).text(menuItemObj.icon.replace("text:","")),menuItem.is(".zmenu__separator")||menuItem.is(".zmenu__title")||this._addEventsForMenuItems(menuItem),menuItemObj.action&&"string"==typeof menuItemObj.action&&-1!==menuItemObj.action.indexOf("URL:")){var menuItemContents=menuItem.html();menuItemObj.target=menuItemObj.target?menuItemObj.target:"_blank",menuItem.empty().addClass("zmenu--withlink").append($("<a class='zmenu__link' href='"+menuItemObj.action.replace("URL:","")+"' target='"+menuItemObj.target+"'></a>")),menuItem.find(".zmenu__link").append(menuItemContents)}return menuItemObj.hasSubmenu&&menuItem.data("submenu",menuItemObj.submenu?menuItemObj.submenu:$(menuItemObj.submenuId)),menuItem},_menuItemUsingElementCreation:function(menu,menuItemObj,itemCallback){var menuItem=document.createElement("li");if(menuItemObj.itemType&&menuItem.setAttribute("data-item-type",menuItemObj.itemType),menuItemObj.name&&menuItem.setAttribute("name",menuItemObj.name),"object"==typeof menuItemObj.menuItems){var className=menuItemObj.className?menuItemObj.className:menuItemObj.menuClass?menuItemObj.menuClass:"",subMenu=$("<ul>").attr({id:menuItemObj.id+"submenu","class":className}),base=this;menuItem.appendChild(subMenu[0]),subMenu.data("usingJSON",!0),this.getData(subMenu).appendTo=menuItemObj.appendTo?menuItemObj.appendTo:this.options.appendTo,this.getData(subMenu).contentType=menuItemObj.contentType?menuItemObj.contentType:this.getData(menu).contentType,$(menuItemObj.menuItems).each(function(i,_menuItemObj){_menuItemObj.menu=subMenu,base.addMenuItem(_menuItemObj,itemCallback,void 0)})}return menuItem},destroy:function(menu){var menu=menu?menu:this.element;if(this._clearMenuTimeout(),this._uninitSliders(menu),this.hide(),menu.data("usingJSON")||this.options.usingJSON){for(var submenuItems=menu.find(".zmenu--submenu"),i=0;i<submenuItems.length;i++)$(submenuItems[i]).data("submenu").zmenu("destroy"),$(submenuItems[i]).data("submenu").remove();menu.empty()}var componentName=this.componentName;menu.off("mouseup."+componentName+" keydown.run."+componentName).removeClass("zmenu zmenu--thumbnail "+this._MENU_CONTENT_TYPES[this.options.contentType]+" "+this.options.menuClass+" "+this.options.className).removeData("zmenu").data("initialized",!1),menu.find(".h-scroll_y").removeClass("h-scroll_y"),menu.find(".zmenu__pointer").length&&(menu.find(".zmenu__pointer").remove(),this._pointerElement=void 0);for(var listEle=menu.find("li"),i=0;i<listEle.length;i++){var item=listEle[i],itemData=this.getData(listEle[i]),text=$(item).find(".zmenu__text").text()||itemData.label,isFixed=$(item).is(".is-fixed");$(item).removeData("metadata").empty().removeClass("zmenu__item zmenu__title zmenu__custom zmenu__separator is-disabled is-fixed is-selected").empty().removeAttr("data-label").off("mouseenter mouseleave"),$(item).text(text),isFixed&&$(item).appendTo(menu.find("ul:first"))}menu.find(".zmenu__header,.zmenu__footer").remove(),menu.removeData("fixedArea width height"),this._menuTextArray=[]},updateLastMenuChain:function(menu,isExternal){if(this._lastOverlayedMenu=menu,!isExternal&&menu[0]!==this.element[0]){var bmenu=this._traverseAndFindBaseMenu();bmenu.zmenu("updateLastMenuChain",menu,!0)}},_traverseAndFindBaseMenu:function(menu){var _menu=menu;if(menu=menu?menu:this.element,menu.data("parent"))for(var par=menu.data("parent");par;){var _menu=par.closest(".zmenu");_menu.is(":visible")?(menu=_menu,par=menu.data("parent")):par=!1}return menu.closest(".zmenu")},selectHoveredMenuItem:function(){var item=this._lastOverlayedMenuItem;return item&&$(item).trigger("mouseup"),item?item:!1},hoverMenuItem:function(item){return item=$(item),item.length?void this._handleMouseOverOnMenuItems($(item),{},!0,!1,!0):(this._lastOverlayedMenuItem&&this._lastOverlayedMenuItem.removeClass("on-hover"),void(this._lastOverlayedMenuItem=void 0))},_getAllMenuItems:function(menu,excludeFloatingItems,excludeSubMenuItems,isOnlyVisible,excludeseparator){return menu&&menu.length||(menu=this.element),menu.find(".zmenu__item:not([itemType=group], .zc-splitmenu-list-rht"+(excludeseparator?", .zmenu__separator":"")+(excludeFloatingItems?", .zmenu--thumbnail":"")+(excludeSubMenuItems?", li ul[mtype=submenu] li":"")+")"+(isOnlyVisible?":visible":""))},_handleCheckboxChecked:function(menuItem,checked,data){if(this._isGridMenu(menuItem,!0))menuItem[checked?"addClass":"removeClass"]("is-selected");else if((data.icon||data.iconClassName||data.SVGIconId)&&"text"!==this.options.contentType)menuItem[checked?"addClass":"removeClass"]("is-selected");else{var iconEle=menuItem.find("i:first");if(iconEle.length)if(this.options.checkedCheckboxItemIconClassName&&iconEle.removeClass(this.options.checkedCheckboxItemIconClassName),checked){var svgData={props:{"class":"zmenu__tick",viewBox:"-2 -2 20 20",width:"100%",height:"100%"},nodes:[{polygon:{points:"14.6,2.4 4.9,12.1 1.2,8.5 0.4,9.3 4.9,13.8 15.4,3.2"}}]};this._handleIcon(iconEle,svgData,"checkedcheckbox",this.options.checkedCheckboxItemIconClassName,this.options.checkedCheckboxItemSVGIconId)}else iconEle.find("svg").remove()}menuItem.prop("checked",checked).attr({checked:checked,"aria-checked":checked})},_handleRadioChecked:function(menuItem,checked,data){var name=$(menuItem).attr("name"),menu=menuItem.closest("ul"),base=this,metaInfo=void 0,radios=menu.find("li[role=menuitemradio][name="+name+"]");checked&&(radios=radios.filter(function(){return $(this).prop("checked")}),radios.each(function(i,radio){radio=$(radio),metaInfo=base.getData(radio),base._fixRadioIcon(radio,!1,metaInfo)})),base._fixRadioIcon(menuItem,checked,data)},_fixRadioIcon:function(menuItem,checked,data){var isGrid=this._isGridMenu(menuItem,!0);if(isGrid)menuItem[checked?"addClass":"removeClass"]("is-selected");else if(data.icon||data.iconClassName||data.SVGIconId)menuItem[checked?"addClass":"removeClass"]("is-selected");else{var iconEle=menuItem.find("i:first");if(iconEle.length)if(this.options.checkedRadioItemIconClassName&&iconEle.removeClass(this.options.checkedRadioItemIconClassName),checked){var svgData={props:{"class":"zmenu__radio",viewBox:"-7 -7 64 64",width:"100%",height:"100%"},nodes:[{circle:{cx:"24.5",cy:"24.5",r:"15.5"}}]};this._handleIcon(iconEle,svgData,"checkedradio",this.options.checkedRadioItemIconClassName,this.options.checkedRadioItemSVGIconId)}else iconEle.find("svg").remove()}menuItem.prop("checked",checked).attr({checked:checked,"aria-checked":checked})},_initRuntimeEvents:function(){var base=this,componentName=this.componentName;this.element.off("keydown.run."+componentName).on("keydown.run."+componentName,function(event){base.handleKeyCode(event.keyCode,event,void 0),($(event.target).closest(".zmenu__header").length||event.ctrlKey||event.metaKey||event.shiftKey||event.altKey)&&event.keyCode!==ZC.keyCode.UP&&event.keyCode!==ZC.keyCode.DOWN&&event.keyCode!==ZC.keyCode.LEFT&&event.keyCode!==ZC.keyCode.RIGHT||(event.preventDefault(),event.stopPropagation())})},handleKeyCode:function(code,event,showSubMenu){var _isFloatingMenu=this._isGridMenu();switch(event=event?event:{},code){case ZC.keyCode.UP:if(event.altKey||event.ctrlKey||event.metaKey){var item=this._lastOverlayedMenu.find("li:visible:not('.zmenu__title,.is-disabled'):first");this.hoverMenuItem(item,!0)}else{var nextItem=this._getNextMenuItem(!0);nextItem.length&&(this._scrollToView(nextItem,nextItem.closest(".zmenu").is("ul")?nextItem.closest(".zmenu"):nextItem.closest(".zmenu").find("ul:first")),nextItem.trigger("mouseover"))}break;case ZC.keyCode.DOWN:if(event.altKey||event.ctrlKey||event.metaKey){var item=this._lastOverlayedMenu.find("li:visible:not('.zmenu__title,.is-disabled'):last");this.hoverMenuItem(item,!0)}else{var nextItem=this._getNextMenuItem();nextItem.length&&(this._scrollToView(nextItem,nextItem.closest(".zmenu").is("ul")?nextItem.closest(".zmenu"):nextItem.closest(".zmenu").find("ul:first")),nextItem.trigger("mouseover"))}break;case ZC.keyCode.RIGHT:if(void 0!==this._lastOverlayedMenuItem){var subMenu=this.getSubmenu(this._lastOverlayedMenuItem),menu=this._lastOverlayedMenuItem.closest(".zmenu");if((_isFloatingMenu||!subMenu.length&&menu.hasClass("zmenu--thumbnail"))&&!showSubMenu){var f=void 0,item=this._getNextMenuItem(f,f,f,code);this._scrollToView(item,item.closest(".zmenu").is("ul")?item.closest(".zmenu"):item.closest(".zmenu").find("ul:first")),item.trigger("mouseover");break}if(this._lastOverlayedMenuItem.is(".is-disabled"))return;if(subMenu&&subMenu.length){var menu=this.getSubmenu(this._lastOverlayedMenuItem);if(!menu)return;this.show({forElement:this._lastOverlayedMenuItem,event:event},menu),this._lastOverlayedMenuItem=void 0,this._getNextMenuItem(!1,!0).trigger("mouseover")}}else _isFloatingMenu&&this._lastOverlayedMenu.find("li:not('.zmenu__title,.is-disabled'):not(':hidden'):first").trigger("mouseover");break;case ZC.keyCode.LEFT:if(void 0!==this._lastOverlayedMenuItem){menu=this._lastOverlayedMenuItem.closest(".zmenu");var parentItem=this._lastOverlayedMenu.data("parent"),subMenuShown=parentItem&&this._isMenuOfMenuItemShown(parentItem),firstMenuItem=menu.find(":visible.zmenu__item").not(".zmenu__separator,.is-disabled,.zmenu__title").filter(":first"),_isFirstItem=firstMenuItem[0]==this._lastOverlayedMenuItem[0],currentMenuFloating=this._isGridMenu(menu);if(!(!currentMenuFloating||_isFirstItem||subMenuShown&&_isFirstItem)){var item=this._getNextMenuItem(!0,void 0,void 0,code);this._scrollToView(item,item.closest(".zmenu").is("ul")?item.closest(".zmenu"):item.closest(".zmenu").find("ul:first")),item.trigger("mouseover");break}this._isMenuMainMenu(this._lastOverlayedMenu)||this._hideLastShownMenu()}else _isFloatingMenu&&this._lastOverlayedMenu.find("li:not('.zmenu__title,.is-disabled'):not(':hidden'):last").trigger("mouseover");break;case ZC.keyCode.ESCAPE:this.options.renderInPlace||(this._isMenuMainMenu(this._lastOverlayedMenu)?this.hide():this._hideLastShownMenu());break;case ZC.keyCode.ENTER:case ZC.keyCode.SPACE:this._lastOverlayedMenuItem&&this._lastOverlayedMenuItem.data("submenu")&&!this._lastOverlayedMenuItem.hasClass("zmenu--split")?this.handleKeyCode(ZC.keyCode.RIGHT,event,!0):this._lastOverlayedMenuItem?this._lastOverlayedMenuItem.is(".zmenu--withlink")?$(this._lastOverlayedMenuItem).find(".zmenu__link")[0].click():(event.target=$(this._lastOverlayedMenuItem),this._handleMenuItemClick(event,this._lastOverlayedMenuItem.closest(".zmenu"))):this.hide();break;case ZC.keyCode.PAGE_UP:var item=this._lastOverlayedMenu.find("li:not('.zmenu__title,.is-disabled'):first");this.hoverMenuItem(item,!0);break;case ZC.keyCode.PAGE_DOWN:var item=this._lastOverlayedMenu.find("li:not('.zmenu__title,.is-disabled'):last");this.hoverMenuItem(item,!0);break;default:var alphaNumericKey=String.fromCharCode(code);this._menuTextArray.length&&this.options.handleAccessKeyNavigation&&this._callMenuitemSearch(alphaNumericKey,(new Date).getTime())}var hoveredItem=this.element.find(".on-hover"),containsSubmenu=hoveredItem.length?hoveredItem.data("submenu")&&hoveredItem.data("submenu").length:!1;event&&"keydown"===event.type&&!containsSubmenu&&this._triggerEvent("KEYDOWN",event,this.element)},_isDisabled:function(menuItem){var disabled=menuItem.attr("disabled")?menuItem.attr("disabled"):!1;return disabled},_isMenuMainMenu:function(menu){return $(menu).get(0)===this.element.get(0)},_getNextFloatingMenuItem:function(currentItemPos,items,isPrev,compareTop,isReverse){var next=void 0,key=compareTop?"top":"left",total=items.length;return $.each(items,function(i,item){item=items[isReverse?total-i-1:i];var ipos=$(item).position();return ipos[key]===currentItemPos[key]?(next=$(item),!1):"top"===key?(next=$(item),!1):void 0}),next},_hideLastShownMenu:function(){var nextItem=this._lastOverlayedMenu.data("parent");this._lastOverlayedMenuItem=nextItem,this.hide(this._lastOverlayedMenu);var __menu=nextItem.closest(".zmenu");this.updateLastMenuChain(__menu),this.getData(this.element)._lastOverlayedMenuItem=nextItem},_resetMenuTextArray:function(menu){this._menuTextArray=[],this._prevSearchKey="",this._prevKeydownTime="",this._prevSearchIndex="",this._prevSearchTimer=void 0;var menuItemSelector=".zmenu__item:visible:not(.zmenu__title,.is-disabled,.zmenu__separator)";this.options.renderInPlace&&(menuItemSelector=".zmenu__item:not(.zmenu__title,.is-disabled,.zmenu__separator)");for(var menuItems=menu.find(menuItemSelector),i=0;i<menuItems.length;i++)this._menuTextArray[this._menuTextArray.length]={text:$(menuItems[i]).find(".zmenu__text").text()||"",menuitem:$(menuItems[i])}},_callMenuitemSearch:function(alphaNumericKey,currentTime){var sameKeySearch=!1;""!==this._prevKeydownTime&&currentTime-this._prevKeydownTime>700?(sameKeySearch=this._prevSearchKey==alphaNumericKey?!0:!1,this._prevSearchKey=alphaNumericKey):this._prevSearchKey=this._prevSearchKey+alphaNumericKey,this._prevKeydownTime=currentTime,this._menuitemSearch(sameKeySearch)},_menuitemSearch:function(sameKeySearch){var regExp=new RegExp("^"+this._prevSearchKey.replace(/[|()\[{.+*?$\\]/g,"\\$0"),"i"),searchFromIndex=sameKeySearch&&this._prevSearchIndex<this._menuTextArray.length?this._prevSearchIndex+1:0;searchFromIndex=searchFromIndex>0&&searchFromIndex<this._menuTextArray.length?searchFromIndex:0;for(var x=searchFromIndex;x<this._menuTextArray.length;x++)if(this._menuTextArray[x].text.match(regExp)){this._prevSearchIndex=x;for(var checkNextMatch=!1,y=x+1;y<this._menuTextArray.length;y++)this._menuTextArray[y].text.match(regExp)&&(checkNextMatch=!0);return checkNextMatch||(this._prevSearchIndex=-1),void this._handleMouseOverOnMenuItems($(this._menuTextArray[x].menuitem),{},!0,!0)}},_getNextMenuItem:function(isPrev,noTrigger,prevItem,keyCode){var menu=this._lastOverlayedMenu&&0!==this._lastOverlayedMenu.length?this._lastOverlayedMenu:this.element,_isFloatingMenu=this._isGridMenu(menu),item=void 0,actualMenu=menu.is("ul")?menu:menu.find("ul:first");if(prevItem=void 0!==prevItem?prevItem:this._lastOverlayedMenuItem,prevItem&&prevItem.length){if(item=prevItem[isPrev?"prevAll":"nextAll"](".zmenu__item:visible").not(".zmenu__separator,.is-disabled,.zmenu__title"),_isFloatingMenu){var prevPos=prevItem.position(),compareTop=keyCode===ZC.keyCode.LEFT||keyCode===ZC.keyCode.RIGHT;item=this._getNextFloatingMenuItem(prevPos,item,isPrev,compareTop),item||menu.find(".zmenu__footer").length&&compareTop||(item=prevItem[isPrev?"nextAll":"prevAll"](".zmenu__item:not(.zmenu__separator,.is-disabled,.zmenu__title):visible"),prevPos[compareTop?"left":"top"]=0,item=this._getNextFloatingMenuItem(prevPos,item,isPrev,compareTop,!0))}else item=$(item[0]);item&&item.length||(menu.find(".zmenu__footer").length?prevItem.closest(".zmenu__footer").length?prevItem[0]===menu.find(".zmenu__footer").find(".zmenu__item:visible").first()[0]?(prevItem.removeClass("on-hover"),item=this._getNextMenuItem(isPrev,noTrigger,!1)):item=this._getNextMenuItem(isPrev,noTrigger,!1):item=menu.find(".zmenu__footer").find(".zmenu__item:visible")[isPrev?"last":"first"]():item=this._getNextMenuItem(isPrev,noTrigger,!1))}else item=menu.find(".zmenu__footer").length&&!this._lastOverlayedMenuItem?menu.find(".zmenu__item:visible:not(.zmenu__title,.is-disabled,.zmenu__separator):"+(isPrev?"last":"first")):actualMenu.find(".zmenu__item:visible:not(.zmenu__title,.is-disabled,.zmenu__separator):"+(isPrev?"last":"first"));return this._setLastOverlayedMenuItem(item,noTrigger),this._lastOverlayedMenuItem},_setFocus:function(){var base=this,f=function(){base.element.focus(),base.element.find(".zmenu__textbox").length&&base.element.find(".zmenu__textbox").focus()};this._triggerEvent("ONBEFOREFOCUS",{},this.element)&&setTimeout(f,100)},refresh:function(menu){menu=menu?menu:this.element,this._fixMenuItemsWidth(menu)
},_fixMenuItemsWidth:function(menu,type){return menu?(type=type?type:this.getMenuType(menu),this._isTypeFloating(type)?this._fixFloatingMenuWidth(menu):void 0):void 0},getMenuType:function(menu){if(menu&&menu.data("isExternalSubmenu"))return menu.zmenu("getMenuType");menu=menu?menu:this.element;var type=this._getMenuTypeFromData(menu);return type||(type=this.options.type),type},_getMenuTypeFromData:function(menu){var mdata=this.getData(menu);return mdata.componentOptions?mdata.componentOptions.type:mdata.type},_isTypeFloating:function(type,menu){return type&&"grid"===type||menu&&menu.hasClass("zmenu--thumbnail")?!0:!1},_fixMenuUI:function(menu,options){menu.is(":visible")&&this._fixMenuHeight(menu,options)},_fixMenuHeight:function(menu,options){var menuHeight="auto",actualMenu=menu.is("ul")?void 0:menu.find("ul:first");menu.height(menuHeight),actualMenu&&actualMenu.height(menuHeight),menu.removeClass("h-scroll_y");var positionAlterable="auto"===this.options.direction||"after-pointer"===this.options.direction||"at-cursor"===this.options.direction,height=menu.outerHeight(),top=1*menu.css("top").split("px")[0]-$(window).scrollTop(),windowHeight=ZC.windowObject?ZC.windowObject.height:$(window).height(),openingDirection=menu.data("direction"),limit=(openingDirection&&0===openingDirection.indexOf("bottom")||openingDirection&&0===openingDirection.indexOf("top"))&&options&&!options.isRightClick?options.availableHeight:windowHeight,space=limit-height,top=top?top:0;options&&options.isRightClick&&(top=parseInt(top)+2),(top+height>=limit&&0>space||!positionAlterable)&&(menuHeight=options&&options.availableHeight&&!options.isRightClick?options.availableHeight:windowHeight-top),menu.data("height")?menuHeight=options&&options.availableHeight&&parseInt(menu.data("height"))>=options.availableHeight?options.availableHeight:parseInt(menu.data("height")):space>0&&positionAlterable&&(menuHeight=height);this.scrollWidth,this.getData(menu);if(height>menuHeight)if(menu.outerHeight(menuHeight),actualMenu){var headerHeight=menu.find(".zmenu__header").length?parseInt(menu.find(".zmenu__header").outerHeight(!0))+parseInt(menu.find(".zmenu__header").css("margin-top"))+parseInt(menu.find(".zmenu__header").css("margin-bottom"))+parseInt(menu.css("padding-top")):parseInt(menu.css("padding-top")),footerHeight=menu.find(".zmenu__footer").length?parseInt(menu.find(".zmenu__footer").outerHeight(!0))+parseInt(menu.find(".zmenu__footer").css("margin-top"))+parseInt(menu.find(".zmenu__footer").css("margin-bottom")):parseInt(menu.css("padding-bottom")),pointerHeight=menu.find(".zmenu__pointer").length?parseInt(menu.find(".zmenu__pointer").outerHeight(!0)):0,remaining=headerHeight+(menu.find(".zmenu__footer").length>1?menu.find(".zmenu__footer").length*footerHeight:footerHeight)+pointerHeight;actualMenu.innerHeight(menuHeight-remaining),"slider"===this.options.scroll?(this._initSliders(menu),actualMenu.addClass("h-overflowhidden")):actualMenu.addClass("h-scroll_y"),"slider"===this.options.scroll&&this._initSliders(menu),0!==remaining&&menu.outerHeight(menuHeight)}else"slider"===this.options.scroll?(this._uninitSliders(menu),this._initSliders(menu),menu.addClass("h-overflowhidden")):(this._uninitSliders(menu),menu.addClass("h-scroll_y"));else menu.removeClass("h-scroll_y")},_findScrollWidth:function(){var scrollEle=document.createElement("div"),styleProps="width:100px;height:100px;overflow:scroll;";document.querySelector("body").appendChild(scrollEle),scrollEle.style.cssText=styleProps;var scrollWidth=$(scrollEle).width()-scrollEle.scrollWidth;return document.querySelector("body").removeChild(scrollEle),scrollWidth},_initSliders:function(menu){this._createSlider(menu),this._createSlider(menu,!0)},_uninitSliders:function(menu){menu=menu.is("div")?menu.find("ul:first"):menu;var data=this.getData(menu);data&&data.sliders&&(data.sliders.top&&data.sliders.top.remove(),data.sliders.down&&data.sliders.down.remove(),data.sliders=null),menu.off("mousewheel")},_createSlider:function(menu,isTop){menu=menu.is("div")?menu.find("ul:first"):menu;var direction=isTop?"top":"down",data=this.getData(menu),base=this;data.sliders||(data.sliders={});var slider=data.sliders[direction];slider&&slider.remove(),slider=$("<div>").addClass("zmenu--scroller zmenu--scroller"+direction),data.sliders[direction]=slider;var base=this;slider.hover(function(){base._startScrolling(menu,isTop)},function(){base._stopScrolling(menu)}).hide(),slider.click(function(){var top=menu.scrollTop();return base._stopScrolling(menu),menu.scrollTop(top+(isTop?-1:1)),base._startScrolling(menu,isTop),!1});var componentName=this.componentName;menu.off("mousewheel."+componentName).on("mousewheel."+componentName,function(event){var top=menu.scrollTop();menu.scrollTop(event.originalEvent.wheelDelta>0?top-6:top+6),base._displayScrollElements(menu),event.stopPropagation(),event.preventDefault()});var width=menu.width();slider.css({width:width}),isTop||slider.show();var iconSpan=$('<i class="zmenu__icon"></i>'),svgData=void 0;if(svgData="top"===direction?{props:{viewBox:"-3 -3 22 22",width:"100%",height:"100%"},nodes:[{path:{d:"M0,12l8-8l8,8H0z"}}]}:{props:{viewBox:"-3 -3 22 22",width:"100%",height:"100%"},nodes:[{path:{d:"M16,4l-8,8L0,4H16z"}}]},this._handleIcon(iconSpan,svgData,isTop?"topscroller":"bottomscroller",isTop?this.options.scrollUpArrowIconClassName:this.options.scrollDownArrowIconClassName,isTop?this.options.scrollUpArrowSVGIconId:this.options.scrollDownArrowSVGIconId),$(iconSpan).appendTo(slider),menu.hasClass("zmenu__list")){slider.appendTo(menu.parent());var topValue=menu.height()-slider.outerHeight(!0)+parseInt(menu.parent().css("padding-top"));menu.parent().find(".zmenu__footer").length?topValue+=parseInt(menu.parent().find(".zmenu__footer").css("margin-top")):topValue=this._pointerElement?topValue+Math.ceil(this._pointerElement.outerHeight(!0)/2)+parseInt(menu.parent().css("border-bottom-width")):topValue-parseInt(menu.parent().css("border-bottom-width"))-parseInt(menu.parent().css("border-top-width")),slider.css({left:"0px",top:isTop?"0px":topValue})}else{slider.insertAfter(menu);var offset=menu.position(),buffer=isTop?1:menu.outerHeight()-slider.outerHeight(!0)-1;slider.css({top:offset.top+buffer,left:offset.left+1})}return slider},_displayScrollElements:function(menu){var scrollElement=(menu.hasClass("zmenu")?!1:!0,this.getData(menu).sliders),scrollTop=menu.scrollTop();scrollElement.top[0===scrollTop?"hide":"show"](),scrollElement.down[menu[0].scrollHeight-scrollTop<=menu.outerHeight()?"hide":"show"]()},_startScrolling:function(menu,isTop){var stop=isTop?0:menu[0].scrollHeight-menu.innerHeight(),base=this,distance=menu.scrollTop()-stop,duration=Math.abs(1e3*distance/50);menu.animate({scrollTop:stop},{duration:duration,easing:"linear",complete:function(){base._displayScrollElements(menu)}})},_stopScrolling:function(menu){menu.stop(),this._displayScrollElements(menu)},_hideAllSubMenus:function(menu,callback){var menu=this._traverseAndFindBaseMenu(menu);menu[0]!=this.element[0]?menu.zmenu("hide",void 0,callback):this._checkAndHideAllOpenedSubMenus(menu,!0,callback)},_destroyRuntimeEvents:function(){$(this.element).off(".run."+this.componentName)},_triggerEvent:function(type,orgEvent,menu,menuItem,dataObj){orgEvent=orgEvent?orgEvent:{},menuItem=menuItem?menuItem:$(orgEvent.target).closest(".zmenu__item");var isBase=!menu||menu.get(0)==this.element.get(0),data={originalEvent:orgEvent,target:menu.data("forElement"),forElement:menu.data("forElement"),offset:menu.offset(),menu:menu,isBaseMenu:isBase,menuitem:menuItem,data:menuItem.length?this._getMenuItemAsObject(menuItem):void 0,itemValue:menuItem.length&&menuItem.data("itemValue")};if(dataObj&&(data=$.extend({},data,dataObj)),menu.data("parent")&&-1!==type.indexOf("SUBMENU")){menu.zmenu("triggerEvent",type.replace("SUBMENU",""),orgEvent,data);var parentMenu=menu.data("parent").closest(".zmenu");return parentMenu.zmenu("triggerEvent",type,orgEvent,data)}return this._dispatchEvent(type,orgEvent,data,menu)},triggerEvent:function(type,orgEvent,data){return this._dispatchEvent(type,orgEvent,data)},_slope:function(a,b){return(b.y-a.y)/(b.x-a.x)},_saveMenuPoints:function(e,menuItem){var metaData=this.getData(this.element),subMenu=this._lastOverlayedMenu,baseMenuOffset=this.element.offset(),subMenuOffset=subMenu.offset();if(metaData.constantLoc={x:baseMenuOffset.left,y:baseMenuOffset.top+menuItem.position().top},baseMenuOffset.left>=subMenuOffset.left){var upperRight={x:subMenuOffset.left+subMenu.outerWidth(),y:subMenuOffset.top},lowerRight={x:subMenuOffset.left+subMenu.outerWidth(),y:subMenuOffset.top+subMenu.outerHeight()};this.increasingCorner=upperRight,this.decreasingCorner=lowerRight}else{var upperLeft={x:subMenuOffset.left,y:subMenuOffset.top},lowerLeft={x:subMenuOffset.left,y:subMenuOffset.top+subMenu.outerHeight()};this.decreasingCorner=upperLeft,this.increasingCorner=lowerLeft}this.prevDecreasingSlope=this._slope(metaData.constantLoc,this.decreasingCorner),this.prevIncreasingSlope=this._slope(metaData.constantLoc,this.increasingCorner)},setAttribute:function(optionName,value){if("height"===optionName&&this.options.height!==value)this.options.height=parseInt(value),this.element.data("height",parseInt(value)),this._fixMenuHeight(this.element,{});else if("width"===optionName&&this.options.width!==value)this.options.width=parseInt(value),this.element.data("width",parseInt(value)).width(this.options.width);else if("contentType"===optionName&&this.options.contentType!==value){"grid"!==this.options.type&&this.element.removeClass(this._MENU_CONTENT_TYPES[this.options.contentType]).addClass(this._MENU_CONTENT_TYPES[value]),this.options.contentType=value;var items=this._getMenuAsObject(this.element);this.element.is("ul")?this.element.empty():this.element.find("ul").empty(),this.addMenuItems(items)}else if("type"===optionName&&this.options.type!==value)this.element.zmenu("destroy"),this.options.type=value,this.element.zmenu(this.options);else if("search"===optionName&&this.options.search!==value){if(value)this._createSearchContainer(this.element);else{var searchBoxPosition=this.element.find(".zmenu__textbox").parent().attr("class");this.element.find("."+searchBoxPosition).remove()}this._fixMenuHeight(this.element,{})}else if("pointer"!==optionName&&"displayType"!==optionName||this.options.pointer===value)if("renderInPlace"===optionName&&this.options.renderInPlace!==value)value||this.element.css({position:"absolute",width:"auto",height:"auto"});else if("menuClass"!==optionName&&"className"!==optionName||this.options.menuClass===value&&this.options.className===value){if("handleAccessKeyNavigation"===optionName&&this.options.handleAccessKeyNavigation!==value)value?this._initRuntimeEvents():this._destroyRuntimeEvents();else if("appendTo"===optionName)void 0!==value&&$(value).length?this.element.appendTo($(value)):$("body").append(this.element);else if("checkedCheckboxItemSVGIconId"===optionName||"checkedCheckboxItemIconClassName"===optionName||"checkedRadioItemSVGIconId"===optionName||"checkedRadioItemIconClassName"===optionName){this.options[optionName]=value;for(var menuItem,childElements=this.element.find("li"),length=childElements.length,i=0;length>i;i++)menuItem=$(childElements[i]),this._checkMenuItem(menuItem,menuItem.prop("checked"),this.getData(menuItem))}}else this.element.removeClass(this.options.menuClass).addClass(value),this.element.removeClass(this.options.className).addClass(value);else value&&"box"!==value?this._createPointerElement():(this._pointerElement.remove(),this._pointerElement=void 0);this.options[optionName]=value},checkMenuItems:function(items){items=items?items:this.element.find("[role=menuitemcheckbox],[role=menuitemradio]"),this.setMenuItemsAttribute(items,"checked",!0)},uncheckMenuItems:function(items){items=items?items:this.element.find("[role=menuitemcheckbox],[role=menuitemradio]"),this.setMenuItemsAttribute(items,"checked",!1)},hideMenuItems:function(items){items=items?items:this.element.find("li").filter(function(){return"none"!==$(this).css("display")}),this.setMenuItemsAttribute(items,"hidden",!0)},showMenuItems:function(items){items=items?items:this.element.find("li:not(li[data-hidden=true])"),this.setMenuItemsAttribute(items,"hidden",!1)},setMenuItemsAttribute:function(menuItems,optionName,value){var base=this;$.each(menuItems,function(i,menuItem){if(menuItem=$(menuItem,base.element),menuItem.length){var data=base.getData(menuItem);if("itemgroup"===data.itemType){var groupItems=$("[name="+menuItem.attr("name")+"]:not(.zmenu__title)",base.element);groupItems.length&&base.setMenuItemsAttribute(groupItems,optionName,value)}if("icon"!==optionName&&"iconClassName"!==optionName&&"SVGIconId"!==optionName||data[optionName]===value)"label"===optionName&&data.label!==value?(data.ellipsis&&(value+="..."),menuItem.find(".zmenu__text").text(value)):"shortcutkey"!==optionName&&"shortcutKey"!==optionName||data.shortcutkey===value&&data.shortcutKey===value?"hint"===optionName||"description"===optionName&&(data.hint!==value||data.description!==value)?data.hint||data.description?menuItem.find(".zmenu__hint").text(value):menuItem.append($("<span class='zmenu__hint'/>").text(value)):"disabled"===optionName||"checked"===optionName||"hidden"===optionName?(data[optionName]=value,base._handleCheckedandDisabled(menuItem,data,optionName)):"menuId"===optionName&&data.menuId!==value?(data[optionName]=value,value?(menuItem.removeData("submenu"),base._buildSubmenu(menuItem,data),base._createArrowIcon(menuItem)):(menuItem.find(".zmenu__icon.h-alignright").remove(),menuItem.removeData("submenu"),menuItem.off("mouseup.submenuitem.zmenu"))):"innerHTML"===optionName&&"custom"===data.itemType?menuItem.empty().html(value):"itemType"===optionName&&data.itemType!==value&&("separator"===value?menuItem.removeClass("zmenu__item").addClass("zmenu__separator").empty():"default"===value?menuItem.removeClass("zmenu__title zmenu__custom zmenu__separator").addClass("zmenu__item"):"custom"===value?menuItem.addClass("zmenu__item zmenu__custom"):"itemgroup"===value?menuItem.removeClass("zmenu__item zmenu__custom zmenu__separator").addClass("zmenu__title"):"splitmenu"===value&&(menuItem.removeClass("zmenu__title zmenu__custom zmenu__separator").addClass("zmenu--split"),base._createArrowIcon(menuItem),menuItem.find(".zmenu__shortcut").remove()),menuItem.attr("role",base.ARIA_ROLES[value?value:"default"]),menuItem.attr("data-item-type",value),menuItem[0].setAttribute("role",this.ARIA_ROLES[value?value:"default"])):data.shortcutKey||data.shortcutkey?menuItem.find(".zmenu__shortcut").text(value):(value=window.ZShortCut?ZShortCut.getInfo(void 0,value):value,base.getData(menuItem).shortcutkey=base.getData(menuItem).shortcutKey=value,menuItem.append($("<span class='zmenu__shortcut'/>").text(value)));else{(data.icon||data.iconClass||data.SVGIconId||menuItem.find(".zmenu__iconcontainer:first").length)&&menuItem.find(".zmenu__iconcontainer:first").remove();var iconEle=$("<i class='zmenu__icon'/>");0===value.indexOf("text:")?(menuItem.prepend($("<div class='zmenu__iconcontainer'>").append(iconEle)),menuItem.find(".zmenu__icon:first").text(value.replace("text:",""))):(data[optionName]=value,menuItem.prepend($("<div class='zmenu__iconcontainer'>").append(base._handleIcon(iconEle,void 0,void 0,data.iconClassName,data.SVGIconId,data.icon))))}data[optionName]=value,menuItem.data("metadata",data)}})}};menuPrototype.updateMenuItems=menuPrototype.setMenuItemsAttribute,ZC.registerComponent("zmenu",menuPrototype),ZC.createMenu=function(menuId,menuDetails,options){if("object"==typeof menuId&&(menuDetails=menuId.items,options=menuId,menuId=menuId.id),$("#"+menuId).data("zmenu"))return $("#"+menuId);var menu=void 0;document.getElementById(menuId)?(menu=$(document.getElementById(menuId)),"DIV"===menu[0].tagName&&menu[0].appendChild(document.createElement("ul"))):menu=$("<div><ul></ul></div>").attr("id",menuId);var appendTo=options?options.appendTo:void 0;menu[0].className+=" zmenu "+menuPrototype._MENU_CONTENT_TYPES[options.contentType?options.contentType:"text"]+" "+(options.menuClass?options.menuClass:"")+" "+(options.className?options.className:""),options.type&&-1!==options.type.indexOf("grid")&&(menu[0].className+=" zmenu--thumbnail"),options.usingJSON=!0;var appendedTo=document.querySelector("body");return void 0!==appendTo&&appendTo.length&&(appendedTo=$(appendTo)[0]),appendedTo.appendChild(menu[0]),ZC.getOptions(menu).type=options.type,menu.zmenu(options),menuDetails.length?menu.zmenu("addMenuItems",menuDetails,options?options.addItemCallback:void 0):"",menu};var ZM_DOM={}}(ZComponents);var ZFocusHandler=function($){return{init:function(container,excludeFocus){this._setInitialFocus(container,excludeFocus),this._bindEvents(container,excludeFocus)},_setInitialFocus:function(container,excludeFocus){var inputElements=container.find("input[tabindex]:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"),textarea[tabindex]:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"), button[tabindex]:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"), .zselectbox[tabindex]:not([tabindex=-1]):not([tabindex=0]):not("+excludeFocus+"), li[tabindex]:not([tabindex=-1]):not([disabled]):not("+excludeFocus+") ,a[tabindex]:not([tabindex=-1]):not([disabled]):not("+excludeFocus+")").filter(":visible");if(inputElements.length||(inputElements=container.find("input:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"),label[tabindex]:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"),textarea:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"), button:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"), li:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"), .zselectbox:not([tabindex=-1]):not([disabled]):not("+excludeFocus+"), a:not([tabindex=-1]):not([disabled]):not("+excludeFocus+")").filter(":visible"),inputElements.length)){var inputObj=$(inputElements.get(inputElements.length-1)),tabIndex=inputObj.prop("tabindex");inputElements.each(function(i,inputEle){$(inputEle).prop("tabindex")<tabIndex&&(inputObj=$(inputEle),tabIndex=$(inputEle).prop("tabindex"))}),inputObj.hasClass("zselectbox")?inputObj.hasClass("zcombobox")?inputObj.prev().zcombobox("setFocus"):inputObj.prev().zselectbox("setFocus"):inputObj.focus()}},_getNextTabElement:function(activeElement,focusIndex,element,inputElement,event){var tabindexArray=$(inputElement.toArray()),focusEle=tabindexArray.eq((tabindexArray.index(activeElement)+focusIndex)%tabindexArray.length);focusEle.hasClass("zselectbox")&&(focusEle.hasClass("zcombobox")?focusEle.prev().zcombobox("setFocus"):focusEle.prev().zselectbox("setFocus")),focusEle.is("[disabled],:hidden")||(ZComponents.Browser.isFirefox()||ZComponents.Browser.isSafari())&&focusEle.is("label")?this._getNextTabElement(activeElement,event.shiftKey?focusIndex-1:focusIndex+1,element,inputElement,event):focusEle.focus()},_bindEvents:function(container,excludeFocus){var base=this,childElements=container.find("input:not([tabindex=-1]):not("+excludeFocus+"),label[tabindex]:not([tabindex=-1]):not("+excludeFocus+"), textarea:not([tabindex=-1]):not("+excludeFocus+"), li:not([tabindex=-1]):not("+excludeFocus+"), button:not([tabindex=-1]):not("+excludeFocus+"), .zselectbox:not([tabindex=-1]):not("+excludeFocus+"), a:not([tabindex=-1]):not("+excludeFocus+")");childElements.on("keydown.zfocushandler",function(event){if(event.which===ZComponents.keyCode.TAB)if(event.target===childElements.last())childElements.get(0).focus();else{var focusIndex=event.shiftKey?-1:1;base._getNextTabElement($(this),focusIndex,container,childElements,event)}}),container.off("keydown.zfocushandler").on("keydown.zfocushandler",function(event){$(event.target).is(".zdialog")&&event.which===ZComponents.keyCode.TAB&&childElements.get(0).focus()})},_unbindEvents:function(container){var childElements=container.find("input:not([tabindex=-1]), textarea:not([tabindex=-1]), button:not([tabindex=-1]), .zselectbox:not([tabindex=-1]), a:not([tabindex=-1])");childElements.off("keydown.zfocushandler")},destroy:function(container){this._unbindEvents(container)},refresh:function(container,excludeFocus,setFocus){this._unbindEvents(container),this._bindEvents(container,excludeFocus),setFocus&&this._setInitialFocus(container,excludeFocus)}}}(jQuery);!function(ZC){var $=ZC.DOMUtil,draggablePrototype={_EVENTS:{START:"start",END:"end",DRAG:"drag"},options:{addClasses:!0,axis:!1,ignore:"input,textarea,button,select,option",container:!1,containerOffset:{left:0,top:0},cursor:void 0,disabled:!1,handle:!1,opacity:"auto",zIndex:!1,revert:!1},_create:function(){this._handle=this.options.handle?this.element.find(this.options.handle):this.element,this.options.addClasses&&this._handle.addClass("zdraggable"),this.options.disabled?this._handle.addClass("is-disabled"):0!==this._handle.length&&(this._preserveValues(),this._bindEvents())},_preserveValues:function(){this._prevPosition=this.options.revert?this.element.offset():{},this._prevCursor=this.element.css("cursor"),this._prevZindex=this.options.zIndex?this.element.css("zIndex"):!1},_bindHandleEvents:function(){var base=this,componentName=this.componentName;this._handle.on("mousedown."+componentName,function(ev){$(ev.target).closest(base.options.ignore).length||base.options.disabled||(base._mouseDown=!0,base._mousex=ev.pageX,base._mousey=ev.pageY,base._prevOpacity=base.options.opacity?base.element.css("opacity"):1,base.element.addClass("h-drag"))}).on("mouseup."+componentName+" contextmenu."+componentName,function(event){base._mouseDown&&!base.options.disabled&&base._resetValues(event)})},_bindEvents:function(){var base=this,draggableObj=base.element,componentName=this.componentName;this._bindHandleEvents(),ZC.$document.on("mousemove."+componentName,function(event){if(base._mouseDown&&!base.options.disabled){base._startDispatched||(base._dispatchEvent("START",event,{offset:base.element.offset(),position:base.element.position()}),base._startDispatched=!0);var container,objectOffset=draggableObj.offset();base.options.container&&("string"==typeof base.options.container?"window"===base.options.container?container=[$(window).scrollLeft(),$(window).scrollTop(),$(window).scrollLeft()+$(window).width(),$(window).scrollTop()+$(window).height()]:"document"===base.options.container?container=ZC.$document:"parent"===base.options.container&&(container=draggableObj.parent().is("body")?ZC.$document:draggableObj.parent(),draggableObj.parent().is("body")||(objectOffset=draggableObj.position())):"object"===$.type(base.options.container)?(container=base.options.container,objectOffset=draggableObj.position()):container=base.options.container);var isUp=event.pageY-base._mousey>=0?!1:!0,isRight=event.pageX-base._mousex>=0?!0:!1,top=objectOffset.top+event.pageY-base._mousey,left=objectOffset.left+event.pageX-base._mousex;if(top=0>top?-base.options.containerOffset.top:top,left=0>left?-base.options.containerOffset.left:left,container&&"array"===$.type(container)){var boundary=container;top=top<boundary[1]?boundary[1]:top,left=left<boundary[0]?boundary[0]:left,base._windowWidth=boundary[2],base._windowHeight=boundary[3]}else base._windowWidth=container&&container.outerWidth()||ZC.$document.width(),base._windowHeight=container&&container.outerHeight()||ZC.$document.height();top+draggableObj.outerHeight()>base._windowHeight+base.options.containerOffset.top&&(top=base._windowHeight+base.options.containerOffset.top-(draggableObj.outerHeight()+parseInt(draggableObj.css("border")))),left+draggableObj.outerWidth()>base._windowWidth+base.options.containerOffset.left&&(left=base._windowWidth+base.options.containerOffset.left-(draggableObj.outerWidth()+parseInt(draggableObj.css("border"))));var property="parent"===container||"object"===$.type(container)?"css":"offset";draggableObj[property]("x"===base.options.axis?{left:left}:"y"===base.options.axis?{top:top}:{top:top,left:left}),draggableObj.css({right:"",bottom:""}),draggableObj.css({cursor:base.options.cursor,opacity:base.options.opacity,zIndex:base.options.zIndex}),base._dispatchEvent("DRAG",event,{position:base.element.position(),offset:base.element.offset(),isUp:isUp,isRight:isRight}),base._mousex=event.pageX,base._mousey=event.pageY,event.preventDefault()}}).on("mouseup."+componentName+" contextmenu."+componentName,function(event){base._mouseDown&&!base.options.disabled&&base._resetValues(event)})},_resetValues:function(event){this._mouseDown=!1,this.options.opacity&&this.element.css("opacity",this._prevOpacity),this.options.cursor&&this.element.css("cursor",this._prevCursor),this.options.revert&&this.element.css({left:this._prevPosition.left,top:this._prevPosition.top}),this.options.zIndex&&this.element.css("zIndex",this._prevZindex),event&&this._dispatchEvent("END",event,{offset:this.element.offset(),position:this.element.position()}),this.element.removeClass("h-drag"),this._startDispatched=!1},destroy:function(){var componentName=this.componentName;this._handle.off("."+componentName).removeClass("zdraggable"),ZC.$document.off("."+componentName),this.element.removeData("zdraggable")},setAttribute:function(optionName,value){"addClasses"===optionName&&value!==this.options.addClasses?this._handle[value?"addClass":"removeClass"]("zdraggable"):"handle"===optionName&&this.options.handle!==value?(this._handle.off("."+this.componentName).removeClass("zdraggable"),this._resetValues(),this._handle=this.element.find(value),this._preserveValues(),this._handle.addClass("zdraggable"),this._bindHandleEvents()):"disabled"===optionName&&value!==this.options.disabled&&(this._handle[value?"addClass":"removeClass"]("is-disabled"),this._handle[value?"removeClass":"addClass"]("zdraggable")),this.options[optionName]=value}};ZC.registerComponent("zdraggable",draggablePrototype)}(ZComponents),function(ZC){var $=ZC.DOMUtil,popoverTemplate=ZC.getTemplate("zpopover.hbs"),popoverPrototype={_create:function(element,options){this._initialize(element,options),this._bindEvents()},options:{position:"auto",margin:void 0,type:"modeless",forElement:!1,popOn:"click",insertAfterForElement:!1,appendTo:void 0,title:"",content:"Popover content appears here.",isContentHTMLEncoded:!1,positionAlterable:!0,isTitleHTMLEncoded:!1,displayType:"callout",closeSVGIconId:void 0,closeIconClassName:void 0,progressIndicatorIconClassName:void 0,progressIndicatorSVGIconId:void 0,closeButton:!1,closeOnBodyClick:!0,closeOnEsc:!0,closeOnScroll:!1,pauseOnHover:!1,pauseOnMouseOver:!1,messages:{close:"Close",serverError:"Server Request Failed."},removeOnClose:!1,mouseLeaveTime:1500,detachable:!1,animation:void 0,delay:void 0,wrapAroundKeyboardNavigation:!1,height:void 0,width:void 0,className:void 0,EFFECTS:{slide:{open:"slideDown",close:"slideUp"},fade:{open:"fadeIn",close:"fadeOut"}},contentAsPopover:!1},_EVENTS:{BEFOREOPEN:"beforeopen",AFTEROPEN:"open",BEFORECLOSE:"beforeclose",AFTERCLOSE:"close",DRAGSTART:"dragstart",DRAG:"drag",DRAGEND:"dragend",CLOSECLICK:"closeclick",CONTENTLOAD:"contentload"},_ANIMATIONEVENTS:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend transitionend",_initialize:function(element){var targets=$("[data-popover-id]");if(targets&&targets.length)for(var i=0,len=targets.length;len>i;i++){var attrValue=$(targets[i]).attr("data-popover-id");if(attrValue===element.attr("id")){this.options.content=element,this.element=element,this._initUsingContent=!0;break}}this._initUsingContent||(this.element.attr({"aria-haspopup":"true","aria-expanded":"false"}),this.options.isContextual&&(this.options.popOn="none",this.options.content=element)),this.options.contentAsPopover&&this.element.addClass("zpopover"),this.options.position="auto"===this.options.position?"callout"===this.options.displayType?"bottom":"bottom-left":this.options.position,"modal"===this.options.type&&(this._initialCloseButtonValue=this.options.closeButton,this.options.closeButton=!0,this._createOverlay()),this.options.content.URL&&(this._isAjaxContent=!0)},_createOverlay:function(){this._overlay=$("<div class='zpopover--overley'></div>").appendTo("body").hide(),this._overlay.attr("tabindex",1).on("keydown."+this.componentName,function(orgEvent){orgEvent.keyCode===ZC.keyCode.TAB&&orgEvent.preventDefault()})},_bindEvents:function(){for(var triggers=this.options.popOn.split(" "),i=0;i<triggers.length;i++)switch(triggers[i]){case"mouseover":case"hover":this._eventHandler("mouseenter",this._mouseEnterHandler),this._eventHandler("mouseleave",this._mouseLeaveHandler);break;case"click":this._eventHandler("click",this._clickHandler);break;case"focus":this._eventHandler("focusin",this._mouseEnterHandler),this._eventHandler("focusout",this._mouseLeaveHandler)}},_eventHandler:function(popoverEvent,handler){var eventPrefix=this.componentName;this._initUsingContent||(this.element.on(popoverEvent+"."+eventPrefix,handler.bind(this)),this.options.closeOnEsc&&this.element.off("keydown."+eventPrefix).on("keydown."+eventPrefix,this._keydownHandler.bind(this)))},_keydownHandler:function(orgEvent){orgEvent.keyCode===ZC.keyCode.ESCAPE&&this.container.is(":visible")&&this._closePopover(orgEvent)},_mouseEnterHandler:function(orgEvent){this._mouseEnterFired=!0,this._durationLeft&&(this._durationLeft-=(new Date).getTime()-this._closeAfterStartTime),this._mouseLeaveTimeout&&clearTimeout(this._mouseLeaveTimeout),this._currentTarget=$(orgEvent.currentTarget),this._handleTargetEnter(orgEvent),(this.options.pauseOnMouseOver||this.options.pauseOnHover)&&clearTimeout(this._autoCloseTimer)},_mouseLeaveHandler:function(orgEvent){var base=this;this._mouseEnterFired=!1,this._mouseLeaveTimeout=setTimeout(function(){if(base._durationLeft&&(base._durationLeft-=(new Date).getTime()-base._closeAfterStartTime),base.container){var currentPopoverId=base.container.attr("id");$(orgEvent.relatedTarget).parents("#"+currentPopoverId).length||$(orgEvent.relatedTarget).attr("id")==="#"+currentPopoverId||base._closePopover(orgEvent)}},this._durationLeft?this._durationLeft:this.options.mouseLeaveTime)},_clickHandler:function(orgEvent){this._initUsingContent&&(this._previousTarget=this._currentTarget),this._currentTarget=$(orgEvent.currentTarget),this._handleTargetClick(orgEvent)},_documentKeyDownHandler:function(orgEvent){this.options.closeOnEsc&&orgEvent.keyCode===ZC.keyCode.ESCAPE&&(this._clickedOutside=!0,ZC.openedInstance&&ZC.openedInstance._closePopover(orgEvent))},_handleTargetEnter:function(orgEvent,eventObject){if(this._closeClicked=this._clickedOutside=!1,void 0===orgEvent&&"modal"===this.options.type&&(this._overlay.show(),this._currentTarget.addClass("zpopover--target")),this._isAjaxContent)this._popoverOpen||this._content?(this._getPopover(orgEvent,eventObject),this.options.isContentHTMLEncoded?this._popoverContent.html(this._content):this._popoverContent.text(this._content),this._showPopover(orgEvent,eventObject)):this._makeAjaxRequest(orgEvent);else{var popover=this._getPopover(orgEvent,eventObject);this._initUsingContent&&ZC.openedInstance&&this._currentTarget!==this._previousTarget?(popover&&popover.is(":visible")&&ZC.openedInstance._closePopover(orgEvent),this._showPopover(orgEvent,eventObject)):"none"===this._popOn?popover&&this._showPopover(orgEvent,eventObject):(ZC.openedInstance&&ZC.openedInstance.container[0]!==this.container[0]&&ZC.openedInstance._closePopover(orgEvent),popover&&!popover.is(":visible")&&this._showPopover(orgEvent,eventObject))}this._autoClosePopover(orgEvent)},_handleTargetClick:function(orgEvent,eventObject){this._closeClicked=this._clickedOutside=!1,"modal"===this.options.type&&this._overlay&&(this._overlay.show(),this._currentTarget.addClass("zpopover--target")),this._isAjaxContent?this._popoverOpen||this._content?(this._togglePopover(orgEvent,eventObject),this.options.isContentHTMLEncoded?this._popoverContent.html(this._content):this._popoverContent.text(this._content),this._fixPopoverHeight()):this._makeAjaxRequest(orgEvent):this._togglePopover(orgEvent,eventObject)},_togglePopover:function(orgEvent,eventObject){var popover=this._getPopover(orgEvent,eventObject);
void 0!==popover&&(popover&&popover.is(":visible")?this._closePopover(orgEvent):this._showPopover(orgEvent,eventObject))},_getPopover:function(orgEvent,eventObject){if(this._preventBodyEvent=!1,this._retrieveForElement(orgEvent,eventObject),this.container||this.options.contentAsPopover){if(this.options.contentAsPopover)this.container=this.element;else{if(this.options.content){var content=this.options.content;(content instanceof $||0===content.indexOf(".")||0===content.indexOf("#"))&&(content=$(content),this._popoverContent[0].contains(content[0])||content.appendTo(this._popoverContent))}this.options.detachable&&("callout"===this.options.displayType&&this._arrowPointer.show(),!this.options.closeButton&&this.container.find(".zpopover__action").remove())}var returnValue=this._dispatchEvent("BEFOREOPEN",this.container,orgEvent,this);if(returnValue)return this.container}else{if(!ZC.Browser.isIE()&&popoverTemplate){var title,content,popoverData={};popoverData.hasCloseButton=this.options.closeButton,popoverData.hasTitle=this.options.title?!0:!1,popoverData.isContentHTMLEncoded=this.options.isContentHTMLEncoded,popoverData.isTitleHTMLEncoded=this.options.isTitleHTMLEncoded,this.options.title&&(title=this.options.title,title=title instanceof $?"":"string"!=typeof title||-1===title[0].indexOf("#")&&-1===title[0].indexOf(".")?title:"",popoverData.title=title),popoverData.hasArrow="callout"===this.options.displayType?!0:!1,this._isAjaxContent?(popoverData.isAjax=!0,popoverData.content="",popoverData.ajaxContent=!0):(content=this.options.content,content=content instanceof $?"":"string"!=typeof content||0!==content[0].indexOf("#")&&0!==content[0].indexOf(".")?content:"",popoverData.content=content),this.container=$(popoverTemplate(popoverData)),this._arrowPointer=this.container.find(".zpopover__pointer"),this._titleContainer=this.container.find(".zpopover__title"),this._popoverTitle=this.container.find(".zpopover__title").find(".zpopover__text"),this._popoverContent=this.container.find(".zpopover__content"),""===title&&$(this.options.title).appendTo(this._popoverTitle).show(),""===content&&$(this.options.content).appendTo(this._popoverContent).show()}else{if(this.container=$("<div>").addClass("zpopover"),this.options.title.length||this.options.closeButton)if(this._titleContainer=$("<div role='heading' class='zpopover__title'>").appendTo(this.container),this._popoverTitle=$("<span class='zpopover__text'></span>").appendTo(this._titleContainer),this.options.isTitleHTMLEncoded){var title=this.options.title;title instanceof $?title.appendTo(this._popoverTitle).show():"string"!=typeof title||0!==title[0].indexOf("#")&&0!==title[0].indexOf(".")?this._popoverTitle.html(title):$(title).appendTo(this._popoverTitle).show()}else this._popoverTitle.text(this.options.title);if(this.options.closeButton&&this._createCloseButton(),this._popoverContent=$("<div class='zpopover__content'></div>").appendTo(this.container),this._isAjaxContent)if(this._loaderContainer=$("<div class='zpopover__loading'></div>").appendTo(this._popoverContent),this._loaderIcon=$("<i class='zpopover__icon h-loading'></i>").appendTo(this._loaderContainer),this.options.progressIndicatorIconClassName||this.options.progressIndicatorSVGIconId){var iconClass=this.options.progressIndicatorIconClassName;if(iconClass)this._loaderIcon.addClass(iconClass);else{var svgConfig=this.options.progressIndicatorSVGIconId,svgId=svgConfig.split(" ")[0],customClass=svgConfig.slice(svgId.length).trim();this._loaderIcon.append($("<svg class='"+customClass+"'><use xlink:href='"+svgId+"'></use></svg>"))}}else{var svgElement=ZC.createSVGElement("svg",{"class":"zpopover__svg zpopover__loader zeffects--rotate"}),circleElement1=ZC.createSVGElement("circle",{"class":"circle__track"}),circleElement2=ZC.createSVGElement("circle",{"class":"circle__load"});svgElement.appendChild(circleElement1),svgElement.appendChild(circleElement2),this._loaderIcon[0].appendChild(svgElement)}else this._getContent();"callout"===this.options.displayType&&(this._arrowPointer=$("<div class='zpopover__pointer'>").appendTo(this.container))}var appendedTo=$(this.options.appendTo);this.container.appendTo(appendedTo.length?appendedTo:$("body")),this.options.className&&this.container.addClass(this.options.className);var actualElement=this._initUsingContent?this.options.content:this.options.isContextual?this.element:this._currentTarget;if(this.container.attr("id",(actualElement.attr("id")?actualElement.attr("id"):Math.floor(1e6*Math.random()))+"_"+this.componentName),this.options.insertAfterForElement){var forElement=this.options.forElement?this.options.forElement instanceof $?this.options.forElement:"string"!=typeof this.options.forElement||-1===this.options.forElement[0].indexOf("#")&&-1===this.options.forElement[0].indexOf(".")?!1:$(this.options.forElement):this._currentTarget;this.container.insertAfter(forElement)}this._initialCursorPosition||(this._initialCursorPosition=this.container.css("cursor")),this._initUsingContent||this.element.attr("aria-owns",this.container.attr("id"));var returnValue=this._dispatchEvent("BEFOREOPEN",this.container,orgEvent,this);if(this.options.detachable){this.options.title.length||this.options.closeButton||this._draggableContainer||(this._draggableContainer=$("<div class='zpopover__draggablearea'>").insertAfter(this._popoverContent));var data=this.container.data("zdraggable");data&&this.container.zdraggable("destroy"),this._initDraggable()}returnValue&&this._showPopover(orgEvent,eventObject)}},_getContent:function(){var content=this.options.content;if(this.options.isContentHTMLEncoded)content instanceof $||"string"==typeof content&&(0===content[0].indexOf("#")||0===content[0].indexOf("."))?(content=$(content),!content.is(":visible")&&content.show(),this._contentImmediateParent=content.parent(),content.appendTo(this._popoverContent),this._isContentSelector=!0):this._popoverContent.html(content);else{var value=content instanceof $?content.text():"string"!=typeof content||0!==content[0].indexOf("#")&&0!==content[0].indexOf(".")?content:$(content).text();this._popoverContent.text(value)}},_showPopover:function(orgEvent,eventObject){var base=this;if("modal"!==this.options.type&&ZC.bindDocumentEvents&&this.options.closeOnBodyClick&&ZC.bindDocumentEvents({element:this.element,container:this.container,forElement:this._currentTarget,ctype:this.componentName,closeMethodName:"close",closeEvent:"close"}),this.options.detachable){var data=this.container.data("zdraggable");data&&(this.options.closeButton||this.options.title.length||(this._titleContainer&&this._titleContainer.remove(),this._titleContainer=void 0),this._reinitialized=!1,this._draggableContainer&&(this._draggableContainer.show(),this.container.zdraggable("option","handle",this._draggableContainer)))}if(this.options.animation&&(this.options.animation.name||this.options.animation.className||this.options.animation.open)){var animation=this.options.animation,element=this.container;if(element.finish?element.finish().show():element.stop(!0,!0).show(),this._placePopover(orgEvent,eventObject),animation.open&&void 0!==animation.open.className||void 0!==animation.className){var animationClass=animation.open?animation.open.className:animation.className,closeAnimationClass=animation.close?animation.close.className:animation.className;animation.close&&"string"==typeof animation.close.className&&this.container.removeClass(closeAnimationClass),this._initPopoverEvents(),base._animationEnd=!1,this.container.addClass(animationClass).on(this._ANIMATIONEVENTS,function(){base._animationEnd=!0,base.container.off(base._ANIMATIONEVENTS)})}else effect=animation.name?animation.name:animation.open&&animation.open.name,duration=animation.duration?animation.duration:animation.open&&animation.open.duration?animation.open.duration:400,effect&&(this._placePopover(orgEvent,eventObject),this.container.hide(),"object"==typeof effect?this.container.animate(effect,duration):this.container[animation.open.name](duration),this._initPopoverEvents())}else this.options.delay&&this.options.delay.openAfter?(this._showAfterTimer&&clearTimeout(this._showAfterTimer),this._showAfterTimer=setTimeout(function(){base.container.show(),base._placePopover(orgEvent,eventObject),base._initPopoverEvents()},this.options.delay.openAfter)):(this._animationEnd=!0,this.container.show(),this._placePopover(orgEvent,eventObject),this._initPopoverEvents());this.options.wrapAroundKeyboardNavigation&&ZFocusHandler.init(this.container),ZC.openedInstance=this,this.container.attr("aria-hidden","false"),this._initUsingContent||this.element.attr("aria-expanded","true")},_placePopover:function(orgEvent,eventObject){if(this._fixPopoverHeight(),this._currentTarget&&"fixed"===this._currentTarget.css("position")&&this.container.css({position:"fixed"}),this.options.offset)this.container.css(this.options.offset);else if("page-center"===this.options.position){var position={top:ZC.$window.outerHeight()/2-this.container.outerHeight()/2+"px",left:(ZC.$window.width()-this.container.outerWidth())/2+ZC.$window.scrollLeft()+"px"};this.container.css(position)}else this._positionPopover(orgEvent,eventObject);this._popoverOpen=!0,this._dispatchEvent("AFTEROPEN",this.container,orgEvent,this)},_positionPopover:function(orgEvent,eventObject){if("page-center"!==this.options.position){var top,left,position=this._getPosition(orgEvent,eventObject),margin=this.options.margin;margin&&(this.options.contentAsPopover?(top=margin.top,left=margin.left):this.options.margin&&(position.elementPosition=this._retrieveMarginValues(position.elementPosition))),this.container.css(position.elementPosition),this._arrowPointer&&this._arrowPointer.css(position.arrowPosition)}},_retrieveMarginValues:function(position){var top,left,margin=this.options.margin;return"number"==typeof margin?(top=margin+position.top,left=margin+position.left):(left=margin.left?margin.left+position.left:position.left,top=margin.top?margin.top+position.top:position.top),top=0>top?position.top:top,left=0>left?position.left:left,position.top=top,position.left=left,position},_initPopoverEvents:function(){var base=this,popOn=this.options.popOn;if("mouseover"===popOn||"hover"===popOn||"focus"===popOn){var enterEv="mouseover"===popOn||"hover"===popOn?"mouseenter.":"focusin.",exitEv="mouseover"===popOn||"hover"===popOn?"mouseleave.":"focusout.",toBeClosed=!1,eventPrefix=this.componentName;this.container&&this.container.off(enterEv+eventPrefix).on(enterEv+eventPrefix,function(){base._durationLeft&&(base._durationLeft-=(new Date).getTime()-base._closeAfterStartTime),clearTimeout(base._mouseLeaveTimeout),(base.options.pauseOnMouseOver||base.options.pauseOnHover)&&clearTimeout(base._autoCloseTimer)}).off(exitEv+eventPrefix).on(exitEv+eventPrefix,function(orgEvent){toBeClosed="focusout"===orgEvent.type&&$(orgEvent.target).closest(".zpopover").length?!1:!0,base._durationLeft&&(base._durationLeft-=(new Date).getTime()-base._closeAfterStartTime),base._autoCloseTimer=setTimeout(function(){toBeClosed&&base._animationEnd&&!base._mouseEnterFired&&base._closePopover(orgEvent)},base._durationLeft?base._durationLeft:100)})}this.options.wrapAroundKeyboardNavigation&&this.container&&this.container.off("keydown."+eventPrefix).on("keydown."+eventPrefix,function(orgEvent){orgEvent.keyCode===ZC.keyCode.TAB?(orgEvent.stopPropagation(),orgEvent.preventDefault()):orgEvent.keyCode===ZC.keyCode.ESCAPE&&base._closePopover(orgEvent)}),this._closeButton&&this._closeButton.off("click."+eventPrefix).on("click."+eventPrefix,function(orgEvent){base._dispatchEvent("CLOSECLICK",void 0,orgEvent,base),base._closeClicked=!0,base._popoverOpen&&base._closePopover(orgEvent)})},_fixPopoverHeight:function(){this.options.width&&this.container.css({width:this.options.width+"px"});var value,children=this._popoverContent&&this._popoverContent.children();return this.options.height&&this._popoverContent&&(value=this.options.height-(this._titleContainer?this._titleContainer.height():0)-(children.outerHeight(!0)-children.height()),this._popoverContent.height(value)),value},_makeAjaxRequest:function(orgEvent){var base=this;base._getPopover(orgEvent),$.ajax({type:this.options.content.type,url:this.options.content.URL,success:function(data){base._loaderContainer=void 0,base._popoverContent.html(""),base._content=$.isFunction(base.options.content.success)?base.options.content.success(data):data,base.options.isContentHTMLEncoded?base._popoverContent.html(base._content):base._popoverContent.text(base._content),base._fixPopoverHeight(),base._positionPopover(orgEvent),base._dispatchEvent("CONTENTLOAD",base.container,orgEvent,base)},error:function(jqXHR,exception){base._popoverContent.html(""),base._content=base._localize("serverError"),base.options.isContentHTMLEncoded?base._popoverContent.html(base._content):base._popoverContent.text(base._content),base._getPopover(orgEvent),base._positionPopover(orgEvent),base.options.content.fail&&$.isFunction(base.options.content.fail)&&base.options.content.fail(jqXHR,exception)}})},_arrowCallback:function(element,direction){this.container.removeClass("zpopover--top zpopover--bottom zpopover--left zpopover--right"),this.container.addClass("zpopover--"+direction),this._calloutDirection=direction},_retrieveForElement:function(orgEvent,eventObject){if((this.options.positionAtCursor||this._positionAtCursor)&&(eventObject||orgEvent))eventObject?this._forElement=eventObject:orgEvent&&(this._forElement=orgEvent);else if(this.options.forElement){var forElement=this.options.forElement;this._forElement=this.options.forElement instanceof $?forElement:"string"!=typeof this.options.forElement||-1===this.options.forElement[0].indexOf("#")&&-1===this.options.forElement[0].indexOf(".")?!1:$(this.options.forElement)}else this._forElement=this._currentTarget},_getPosition:function(){/^(top|bottom|right|left|top-left|top-right|bottom-left|bottom-right)$/.test(this.options.position)||(this.options.position="bottom");var base=this,arrowElement=this.container.find(".zpopover__pointer"),arrowPointer=arrowElement.length?arrowElement:!1,popoverPosition=ZPosition.get(this._forElement,this.container,{direction:this.options.position,bufferSpace:6,positionAlterable:this.options.positionAlterable,arrow:{element:arrowPointer,callback:this._arrowCallback.bind(base),margin:{left:-1,top:-1}}});return popoverPosition},_closePopover:function(orgEvent){var toBeClosed=this._destroyCalled?!0:this._dispatchEvent("BEFORECLOSE",this.container,orgEvent,this);if(this.container){var element=this.container;if(element.finish?element.finish():element.stop(!0,!0),toBeClosed)if(ZC.openedInstance===this&&(ZC.openedInstance=void 0),this.options.animation&&(this.options.animation.name||this.options.animation.className||this.options.animation.close)){var base=this,animation=this.options.animation;if(animation.close&&void 0!==animation.close.className||void 0!==animation.className){var closeAnimationClass=animation.close?animation.close.className:animation.className;animation.open&&"string"==typeof animation.open.className&&this.container.removeClass(animation.open),base._animationEnd=!1,this.container.addClass(closeAnimationClass).on(this._ANIMATIONEVENTS,function(){base._animationEnd=!0,base.container.off(base._ANIMATIONEVENTS)}),this._handlePopoverClose(this,orgEvent)}else{var effect=animation.name?animation.name:animation.close&&animation.close.name,duration=animation.duration?animation.duration:animation.close&&animation.close.duration?animation.close.duration:400;if(effect){var onComplete=function(){base._handlePopoverClose(base,orgEvent)};"object"==typeof effect?this.container.animate(effect,duration,onComplete):this.container[animation.close.name](duration,onComplete)}}}else this._handlePopoverClose(orgEvent);else!this.container.is(":visible")&&(this._popoverOpen=!1)}},_handlePopoverClose:function(orgEvent){var popoverEle=this.container;if(this._autoCloseTimer&&clearTimeout(this._autoCloseTimer),this._mouseLeaveTimeout&&clearTimeout(this._mouseLeaveTimeout),this.options.removeOnClose){{this.container}if(void 0!==this.container){var content=this.options.content;(content instanceof $||-1!==content[0].indexOf("#")||-1!==content[0].indexOf("."))&&$(content).appendTo(this._contentImmediateParent).hide(),this.container.remove(),this._overlay&&this._overlay.remove(),this._overlay=this.container=this._arrowPointer=this._popoverContent=this._popoverTitle=this._titleContainer=this._closeButton=this._loaderContainer=void 0}}else this.container&&(this.container.attr("aria-hidden","true"),this.container.hide());this._popoverOpen=!1,this._overlay&&(this._overlay.hide(),this._currentTarget.removeClass("zpopover--target")),this._initUsingContent||this.element.attr("aria-expanded","false"),!this._destroyCalled&&this._dispatchEvent("AFTERCLOSE",popoverEle,orgEvent,this)},_autoClosePopover:function(orgEvent){if(this.options.delay&&this.options.delay.closeAfter){this._durationLeft=this.options.delay.openAfter?this.options.delay.closeAfter+this.options.delay.openAfter:this.options.delay.closeAfter,this._autoCloseTimer&&clearTimeout(this._autoCloseTimer),this._closeAfterStartTime=(new Date).getTime();var base=this;this._autoCloseTimer=setTimeout(function(){base._closePopover(orgEvent)},this._durationLeft)}},_dispatchEvent:function(customEvent,ui,orgEvent){var content={target:this._forElement,popover:ui};return this._super(customEvent,orgEvent,content)},open:function(openObject,orgEvent){var popOn=this.options.popOn;openObject&&(openObject.offset&&(this.options.offset=openObject.offset),openObject.target&&(this._currentTarget=$(openObject.target)),openObject&&openObject.eventObject&&(this._positionAtCursor=!0)),this._currentTarget||"none"!==popOn||this._initUsingContent||this.options.isContextual||(this._currentTarget=this.element),("none"===popOn||"none"===this._popOn)&&(this._manualOpen=!0),"click"===popOn&&"none"!==this._popOn?this._handleTargetClick(orgEvent,openObject?openObject.eventObject:void 0):("mouseover"===popOn||"hover"===popOn||"none"===popOn||"none"===this._popOn)&&this._handleTargetEnter(orgEvent,openObject?openObject.eventObject:void 0)},_createCloseButton:function(){void 0===this._titleContainer&&(this._titleContainer=$("<div role='heading' class='zpopover__title'>").prependTo(this.container),this._popoverTitle=$("<span class='zpopover__text'></span>").appendTo(this._titleContainer)),this._closeButton=$("<div class='zpopover__action'>");var closeIcon,svgProps,closeContainer=$("<button class='zpopover__close' type='button'></button>").appendTo(this._closeButton).attr({title:this._localize("close"),"aria-label":this._localize("close"),role:"button"});closeIcon=$("<i class='zpopover__icon'></i>").appendTo(closeContainer),svgProps={props:{"class":"zpopover__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)","class":"st0",width:"13",height:"1.1"}},{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)","class":"st0",width:"13",height:"1.1"}}]},this._handleIcon(closeIcon,svgProps,"closebutton",this.options.closeIconClassName,this.options.closeSVGIconId),this._closeButton.prependTo(this._titleContainer)},_initDraggable:function(){var base=this;this.container&&this.container.zdraggable({handle:base._draggableContainer?base._draggableContainer:base._titleContainer,container:"window",start:function(orgEvent){base._dragStart&&(base._dragStart=void 0),base._dragged&&(base._dragged=void 0),!base._dragStart&&(base._dragStart=!0),base._dispatchEvent("DRAGSTART",base.container,orgEvent,base)},drag:function(orgEvent){base._dragStart&&base._arrowPointer&&base._arrowPointer.hide(),!base._dragged&&(base._dragged=!0),base._dispatchEvent("DRAG",base.container,orgEvent,base)},end:function(orgEvent){base._dragStart&&(base._dragged&&!base.options.closeButton&&base._createCloseButton(),base._dragged&&base._draggableContainer&&base._draggableContainer.hide(),base._dragged&&base._titleContainer&&$(this).zdraggable("option","handle")!==base._titleContainer&&$(this).zdraggable("option","handle",base._titleContainer),base._dragged&&(base._preventBodyEvent=!0,base._initPopoverEvents())),base._dragged&&base._dispatchEvent("DRAGEND",base.container,orgEvent,base)}})},close:function(orgEvent){this.container&&this.container.is(":visible")&&this._closePopover(orgEvent)},setAttribute:function(optionName,value){var oldValue=this.options[optionName];if(this.options[optionName]=value,"popOn"!==optionName||this._initUsingContent){if("content"===optionName)this._content&&(this._content=!1),this._isAjaxContent="object"==typeof value&&!(value instanceof $),this.container&&!this._isAjaxContent&&(this._popoverContent.empty(),this.options.isContentHTMLEncoded?value instanceof $?value.appendTo(this._popoverContent).show():"string"!=typeof value||-1===value[0].indexOf("#")&&-1===value[0].indexOf(".")?this._popoverContent.html(value):$(value).appendTo(this._popoverContent).show():this._popoverContent.text(value));else if("height"===optionName)this.container&&(this.container.height(this.options.height),this._fixPopoverHeight());else if("width"===optionName)this.container&&this.container.width(this.options.width);else if("position"===optionName)this.options.position="box"===this.options.displayType?value.indexOf("-")>-1?value:"top"===value||"bottom"===value?value+"-right":value:value;else if("title"===optionName){if(this.container){var title=this.container.find(".zpopover__title");value.length?title.length?title.find(".zpopover__text").text(value):(this._titleContainer=$("<div role='heading' class='zpopover__title'></div>").prependTo(this.container),this._popoverTitle=$("<div class='zpopover__text'></div>").appendTo(this._titleContainer),this.options.isTitleHTMLEncoded?value instanceof $?value.appendTo(this._popoverTitle):"string"!=typeof value||-1===value[0].indexOf("#")&&-1===value[0].indexOf(".")?this._popoverTitle.html(value):$(value).appendTo(this._popoverTitle):this._popoverTitle.text(value)):title.length&&!this.options.closeButton?(title.remove(),this._titleContainer=void 0):this._titleContainer.find(".zpopover__text").text(""),this.options.detachable&&this._titleContainer?(this._draggableContainer.remove(),this._draggableContainer=void 0,this.container.zdraggable("option","handle",this._titleContainer)):(this.options.closeButton||this._draggableContainer||!this.container||(this._draggableContainer=$("<div class='zpopover__draggablearea'>").insertAfter(this._popoverContent)),this.container.zdraggable("option","handle",this._draggableContainer))}}else if("displayType"===optionName){if(this.options.position="box"===value?this.options.position.indexOf("-")>-1?this.options.position:"top"===this.options.position||"bottom"===this.options.position?this.options.position+"-right":this.options.position:this.options.position,this.container){var arrow=this.container.find(".zpopover__pointer");"box"===value?(arrow.length&&arrow.remove(),this._arrowPointer=void 0):arrow.length||(this._arrowPointer=$("<div class='zpopover__pointer'>").insertAfter(this._popoverContent)),this._positionPopover()}}else if("detachable"===optionName)value?(this._reinitialized=!1,this.options.title.length||this.options.closeButton||this._draggableContainer||(this._draggableContainer=$("<div class='zpopover__draggablearea'>").insertAfter(this._popoverContent)),this.container&&this._initDraggable()):(this.container&&(this.container.zdraggable("destroy",this._initialCursorPosition),this._arrowPointer&&!this._arrowPointer.is(":visible")&&this._arrowPointer.show(),this.options.closeButton||(this.container.find(".zpopover__action").remove(),this._closeButton=void 0),this.options.title.length||this.options.closeButton||!this._titleContainer||(this._titleContainer.remove(),this._titleContainer=void 0),void 0!==this._draggableContainer&&(this._draggableContainer.remove(),this._draggableContainer=void 0)),this._preventBodyEvent=this._dragged=this._dragStart=!1);else if("closeButton"===optionName){if(this.options.closeButton=this._initialCloseButtonValue=value,this.container){var closeButton=this.container.find(".zpopover__action");value===!1?(closeButton.length&&closeButton.remove(),this.options.title.length||(this._titleContainer.remove(),this._titleContainer=void 0)):closeButton.length||(this._createCloseButton(),this._initPopoverEvents())}}else if("closeOnBodyClick"===optionName)value||(this._preventBodyEvent=!0);else if("type"===optionName)if("modal"===value)this._initialCloseButtonValue=this.options.closeButton,this.options.closeButton=!0,this._initialCloseButtonValue||(this._createCloseButton(),this._initPopoverEvents()),this._createOverlay();else{if(this.options.closeButton=this._initialCloseButtonValue,this.container){var closeButton=this.container.find(".zpopover__action");this._initialCloseButtonValue===!1&&closeButton.length&&closeButton.remove()}this._overlay&&this._overlay.remove(),this._overlay=void 0}else if("className"===optionName)this.container&&(this.options.className&&this.container.removeClass(this.options.className),this.container.addClass(this.options.className));else if("margin"===optionName&&this.container&&this.container.is(":visible")){var position={};position.left=parseInt(this.container.css("left")),position.top=parseInt(this.container.css("top")),position=this._retrieveMarginValues(position),this.container.css(position)}}else{for(var triggers=oldValue.split(" "),i=0;i<triggers.length;i++){var eventPrefix=this.componentName;switch(triggers[i]){case"mouseover":case"hover":this.element.off("mouseenter."+eventPrefix+" mouseleave."+eventPrefix),this.container&&this.container.off("mouseenter."+eventPrefix+" mouseleave."+eventPrefix);break;case"focus":this.element.off("focusin."+eventPrefix+" focusout."+eventPrefix),this.container&&this.container.off("focusin."+eventPrefix+" focusout."+eventPrefix);break;case"click":this.element.off(triggers[i]+"."+eventPrefix)}}"click"===value&&this.options.delay&&(this.options.delay=void 0),this._bindEvents(),this._initPopoverEvents()}},repositionPopover:function(){var container=this.container;container&&(!container.is(":visible")&&container.show(),this._positionPopover())},destroy:function(){this._clickedOutside=this.options.removeOnClose=this._destroyCalled=!0,this._closePopover(),this._initUsingContent||this.element.off(this.options.popOn+".zpopover").removeData(this.componentName),this._destroyCalled=!1}};ZC.$document.on("keydown.zpopover",function(orgEvent){ZC.openedInstance&&ZC.openedInstance.options.closeOnEsc&&ZC.openedInstance._documentKeyDownHandler(orgEvent)}),ZC.$document.on("scroll.zpopover",function(orgEvent){ZC.openedInstance&&ZC.openedInstance.options.closeOnScroll&&ZC.openedInstance.container&&ZC.openedInstance.container.is(":visible")&&ZC.openedInstance._closePopover(orgEvent)}),ZC.registerComponent("zpopover",popoverPrototype)}(ZComponents),function(ZC){var $=ZC.DOMUtil,selectboxPrototype={options:{multiple:!1,acceptNewValues:!1,selectionLimit:0,dataSource:void 0,selectedIndex:void 0,selectedValue:void 0,placeholder:"Select",dropdownList:{height:void 0,width:void 0,appendTo:void 0,direction:"auto",className:void 0,viewport:void 0},autoFill:!1,searchable:!1,selectOnClose:!1,clearSelection:!1,searchSettings:{delay:150,searchCriteria:"contains",caseSensitive:!1,searchByField:"label"},disabled:!1,contentType:"text",className:void 0,messages:{allOptionsSelected:"All Selected",noResults:"No Results"},eventPrefix:"zselectbox"},_EVENTS:{ONBEFORESHOW:"beforedropdownlistopen",ONSHOW:"dropdownlistopen",ONCHANGE:"change",BEFOREHIDE:"beforedropdownlistclose",ONHIDE:"dropdownlistclose",ONITEMCLICK:"itemclick",ONINIT:"init",ONNEWVALUE:"newvalue",ONBLUR:"blur",ONFOCUS:"focus",ONBEFOREOPTIONADD:"beforeoptionadd",ONOPTIONADD:"optionadd"},_CLASS:{ICON:"zselectbox__icon",ICONTEXT:"zselectbox--icontext",ICONONLY:"zselectbox--icononly",PLACEHOLDER:"zselectbox__placeholder",DROPUP:"zselectbox--top",DROPDOWN:"zselectbox--bottom",ACTIVE:"is-active",FOCUS:"has-focus",DISABLED:"is-disabled",EMPTY:"zselectbox__emptyresult",TEXTBOX:"zselectbox__text"},_create:function(element,options){this.frominit=!0,this._elementWidth=options.width||this.element[0].offsetWidth,this.element[0].style.display="none",this._namespace="."+options.eventPrefix;var base=this;["disabled","multiple","title"].forEach(function(attr){options[attr]=options[attr]||base.element[0][attr]}),this._initialize(element,options),this._constructComponent(),this._handleDS(),this._setInitial(),this._bindEvents(),this._trigger("ONINIT"),this.frominit=!1},_initialize:function(element,options){if(this._textArray=[],this._prevKey=this._prevTimeStamp="",/^(text|icon|icon-text|custom)$/.test(options.contentType)||(options.contentType=$.zselectbox.prototype.options.contentType),options.multiple){var limit=+options.selectionLimit;options.selectionLimit=isNaN(limit)||0>limit?0:limit,options.contentType="text",void 0!==options.selectedValue?options.selectedValue=String(options.selectedValue).split(","):void 0!==options.selectedIndex&&(options.selectedIndex=String(options.selectedIndex).split(",")||0),this.element[0].setAttribute("multiple",!0)}},_constructComponent:function(){this.element[0].id||(this.element[0].id=(this._isEditable?"zcombo_":"zselect_")+Math.floor(1e6*Math.random())),"string"==typeof this.options.menuId?this._menuID=this.options.menuId:(this._menuID=this.element[0].id+"Menu",$(document.getElementById(this._menuID)).remove());var containerId=this.element[0].id+"Container";if(this.container=document.getElementById(containerId),this.container)this._closeIcon=this.container.querySelector(".zselectbox__close"),this._arrow=this.container.querySelector(".zselectbox__arrowicon"),this._optArea=this.container.querySelector(".zselectbox__selected"),this.textspan=this._optArea.querySelector(".zselectbox__text"),this.iconspan=this._optArea.querySelector(".zselectbox__icon");else{var baseClass="zselectbox "+("string"==typeof this.options.className?this.options.className:"")+" "+(this.element[0].getAttribute("class")?this.element[0].getAttribute("class"):"");this.container=document.createElement("div"),$(this.container).attr({"class":baseClass,"aria-haspopup":!0,title:this.element[0].getAttribute("title"),id:containerId,style:this.element[0].getAttribute("style")}),this.container.style.display="",!this.element[0].style.width&&this._elementWidth&&(this.container.style.width=isNaN(this._elementWidth)?this._elementWidth:this._elementWidth+"px"),this.container.innerHTML="<div class=zselectbox__selected></div> <i class='zselectbox__close'></i> <i class='"+this._CLASS.ICON+" zselectbox__arrowicon'></i>",this._optArea=this.container.children[0],this._closeIcon=this.container.children[1],this._arrow=this.container.children[2],this.options.arrowSVGIconId||this.options.arrowIconClassName?this._arrow=ZC.createIcon($(this._arrow),void 0,this.options.arrowSVGIconId,this.options.arrowIconClassName)[0]:this._arrow.innerHTML='<svg class="zselectbox__arrow" viewBox="0 0 16 16"> <polygon points="3.5,6.5 4.5,5.5 8,9 11.5,5.5 12.5,6.5 8,11 "></polygon> </svg>',this.options.closeSVGId||this.options.closeIconClass?this._closeIcon=ZC.createIcon($(this._closeIcon),void 0,this.options.closeSVGId,this.options.closeIconClass)[0]:this._closeIcon.innerHTML='<svg viewBox="0 0 16 16"> <path d="M15.1 3.1l-2.2-2.2-4.9 5-4.9-5-2.2 2.2 5 4.9-5 4.9 2.2 2.2 4.9-5 4.9 5 2.2-2.2-5-4.9z"/> </svg>',this._closeIcon.style.display="none",this._constructOptArea(),this.element[0].parentElement.insertBefore(this.container,this.element[0].nextSibling)}},_constructOptArea:function(){this.container.setAttribute("tabindex",this.element[0].getAttribute("tabindex")||0),this.container.setAttribute("role","listbox");var html="";this.options.contentType.match("icon")&&!this.options.multiple&&(html=html+"<i class="+this._CLASS.ICON+"></i>"),(!/^(icon)$/.test(this.options.contentType)||this.options.multiple)&&(html+="<span class=zselectbox__text></span>"),this._optArea.innerHTML=html,this.textspan=this._optArea.querySelector(".zselectbox__text"),this.iconspan=this._optArea.querySelector(".zselectbox__icon");
var specialClass=("icon"===this.options.contentType?this._CLASS.ICONONLY:"icon-text"!==this.options.contentType||this.options.multiple?" ":this._CLASS.ICONTEXT).trim();this._addClass(this.container,specialClass)},_createMenu:function(){var o=this.options,base=this,menu=document.getElementById(this._menuID),menu_opt={position:o.position,contentType:o.multiple?"icon-text":o.dropdownList.contentType||o.contentType,tagName:"div",height:o.dropdownList.height,appendTo:$(o.dropdownList.appendTo),className:(o.dropdownList.className||"")+" zmenu--selectmenu",direction:o.dropdownList.direction,handleAccessKeyNavigation:o.searchable?!1:!0,scroll:"default",viewport:$(o.dropdownList.viewport),toggle:!1,animation:o.dropdownList.animation};menu?(this._menu=$(menu),this._completeMenuLoaded=!0,menu_opt.constructMenu=!1,this._menu.zmenu(menu_opt)):(this._menu=ZC.createMenu(this._menuID,{},menu_opt),this._createSearchBox()),$(this.container).attr("aria-owns",this._menuID),this._menu.attr({tabindex:-1}).on({zmenubeforeshow:function(origEvent){return base._alreadyOpened=base._menu.is(":visible"),base._alreadyOpened?!0:base._trigger("ONBEFORESHOW",origEvent)},zmenubeforehide:function(origEvent){return origEvent.stopImmediatePropagation(),base._lastScrollTop=base._menu.children("ul")[0].scrollTop,base._trigger("BEFOREHIDE",origEvent)},zmenushow:this._onMenuShow.bind(this),zmenuhide:this._onMenuHide.bind(this),zmenuitemclick:this._onItemClick.bind(this),zmenuitemhover:this._onMenuItemHover.bind(this),zmenubeforefocus:function(){return!1}}).on("focusout"+this._namespace,this._onBlur.bind(this)).on("keydown"+this._namespace,function(origEvent){base._keyPress.call(base,origEvent)})},_createSearchBox:function(){if(this.options.searchable&&this._menu){var header=$('<div class="zmenu__header"> <div class="zmenu__search"> <i class="zmenu__icon"> <svg viewBox="0 -2 20 20"> <path d="M15.6,15.6c-0.6,0.6-1.5,0.6-2.1,0l-2.7-2.7C9.7,13.6,8.4,14,7,14c-3.9,0-7-3.1-7-7s3.1-7,7-7c3.9,0,7,3.1,7,7c0,1.4-0.4,2.7-1.1,3.8l2.7,2.7C16.1,14,16.1,15,15.6,15.6z M7,2C4.2,2,2,4.2,2,7s2.2,5,5,5c2.8,0,5-2.2,5-5C12,4.2,9.8,2,7,2z"></path> </svg> </i> <input type="text" class="zmenu__textbox"> </div> </div>');this._menu.prepend(header),this._bindSearchbox(header.find(".zmenu__textbox")[0])}},_bindSearchbox:function(textbox){var eventName=isIE9?"keyup":"input",base=this;$(textbox).on(eventName+this._namespace,function(origEvent){("input"===origEvent.type||!origEvent.metaKey&&!origEvent.ctrlKey&&(origEvent.keyCode>=186&&origEvent.keyCode<=192||origEvent.keyCode>=219&&origEvent.keyCode<=222||origEvent.keyCode>=48&&origEvent.keyCode<=57||origEvent.keyCode>=65&&origEvent.keyCode<=90||origEvent.keyCode===ZC.keyCode.SPACE||origEvent.keyCode===ZC.keyCode.DELETE||origEvent.keyCode===ZC.keyCode.BACKSPACE))&&(origEvent.type="input",base._onInput.call(base,textbox,origEvent))})},_onInput:function(textbox,origEvent){var value=textbox.value,setting=this.options.searchSettings;this._activated=!0,this._closeIcon&&(this._closeIcon.style.display=""!==$.trim(value)&&this.options.clearSelection?"":"none"),value=value.replace(new RegExp(/\\/gi),"\\\\").replace(new RegExp("'","gi"),"\\'"),value=setting&&setting.caseSensitive?value:value.toLowerCase(),clearTimeout(this.inputtextTimer),setting&&setting.delay?this.inputtextTimer=setTimeout(this._searchQuery.bind(this,origEvent,value),setting.delay):this._searchQuery(origEvent,value)},_searchQuery:function(origEvent,query){this._filterList(query),this._open(origEvent)},_filterList:function(query){var base=this,s=this.options.searchSettings||{};if(this._loadDropdown(),this._clearStyle(),"label"===s.searchByField){var metadata=ZC.getOptions(this.element[0]),styletag=metadata.styletag=document.getElementsByTagName("head")[0].appendChild(document.createElement("style"));if(query.length){styletag.textContent="#"+this._menuID+" [data-filter-label]:not([data-filter-label"+("startswith"===s.searchCriteria?"^=":"*=")+"'"+query+"']) {display:none !important;}";var g_hidden=[];this._queryAll(this._menu[0],".zmenu__title").forEach(function(group){var visibleitems=base._getFilteredNodes(function(node){return"none"!==$(node).css("display")},base._queryAll(base._menu[0],".zmenu__item[data-group="+group.id+"]"));visibleitems.length||g_hidden.push("#"+group.id)}),g_hidden.length&&(styletag.textContent=styletag.textContent+" "+g_hidden.join(",")+" {display:none !important;}")}}else this._hiddenitems=[],this._queryAll(this._menu[0],"li:not([hidden])").forEach(function(node){var menuData=ZC.getOptions(node);base._menuitemMatcher(menuData,query)||(node.style.display="none",base._hiddenitems.push(node))})},_menuitemMatcher:function(menuData,query){if(!menuData||""===$.trim(query))return!0;if("itemgroup"===menuData.itemType)for(var childDatas=this._menu.find("[data-group = "+menuData.customAttributes.id+"]"),i=0;i<childDatas.length;i++){var child=childDatas[i];if(this._menuitemMatcher(ZC.getOptions(child),query))return!0}else for(var s=this.options.searchSettings,searchKeys=s.searchByField.split(","),i=0;i<searchKeys.length;i++){var key=searchKeys[i],regex=new RegExp("startswith"===s.searchCriteria?"^("+query+")":query,"g"+(s.caseSensitive?"":"i"));if("string"==typeof menuData.properties[key]&&regex.test(menuData.properties[key]))return!0}},_clearStyle:function(){var metadata=ZC.getOptions(this.element[0]);metadata.styletag&&($(metadata.styletag).remove(),metadata.styletag=void 0),this._hiddenitems&&this._hiddenitems.length&&($(this._hiddenitems).show(),this._hiddenitems=void 0),$("."+this._CLASS.EMPTY,this._menu).remove()},_onMenuHide:function(origEvent){this._removeClass(this.container,this._CLASS.DROPUP+" "+this._CLASS.DROPDOWN),this.container.setAttribute("aria-expanded",!1),clearTimeout(this.inputtextTimer),this._clearStyle(),this._updateSTATE(),this.options.searchable&&!this._isEditable&&this._menu.find("input.zmenu__textbox").val(""),this._alreadyOpened=!1,this._trigger("ONHIDE",origEvent)},_onMenuShow:function(origEvent){this._activated=!0;var hoveredItem,visibleItems=this._getFilteredNodes(function(node){return"none"!==$(node).css("display")},this._queryAll(this._menu[0],"li[data-filter-label]:not([hidden])"));if(visibleItems.length)visibleItems=this._getFilteredNodes(":not(.is-disabled)",visibleItems),origEvent.originalEvent&&"input"===origEvent.originalEvent.type?(hoveredItem=visibleItems[0],this._isEditable&&this._autoComplete(this.textspan.value,visibleItems[0])):hoveredItem=this.options.multiple||!this._selected.length||"string"==typeof this._selected?this._menu[0].querySelector("li.zmenu__item:not([disabled]):not([hidden])"):this._getMenuItemForOption(this._selected)[0];else{if(this.options.acceptNewValues)return void this._menu.hide();this._menu.children("ul").append("<li class='zmenu__item  "+this._CLASS.EMPTY+"'><span>"+this._localize("noResults")+"</span></li>")}void 0!==this._lastScrollTop&&this._menu.children("ul").scrollTop(this._lastScrollTop),hoveredItem&&(this._menu.zmenu("hoverMenuItem",hoveredItem),this._lastHoveredItem=this._getOptionForMenuItem(hoveredItem.id)),this.container.setAttribute("aria-expanded",!0),this._setMenuWidth(),this._setState(),this.options.searchable&&!this._isEditable&&this._menu.find("input.zmenu__textbox").focus(),this._alreadyOpened||this._trigger("ONSHOW",origEvent),this._alreadyOpened=!1},_updateSTATE:function(){if(!this._activated){var itemToBeSelected,o=this.options;if(o.selectOnClose)itemToBeSelected=this._lastHighlightedItem;else if(this._lastHoveredItem)if(this._isEditable&&!this._keyPressActivated){var data=ZC.getOptions(this._lastHoveredItem);itemToBeSelected=data.label.toLowerCase()===this.textspan.value.toLowerCase()?this._lastHoveredItem:void 0}else(o.autoFill||o.autoComplete)&&(itemToBeSelected=this._lastHoveredItem);!o.multiple&&itemToBeSelected&&itemToBeSelected!==this._selected[0]?this._selectOption(itemToBeSelected,!0):!/(string|number)/.test(typeof this._selected)&&this._updateCombobox()}this._setFocus(),this._setState()},_onMenuItemHover:function(origEvent,userdata){var o=this.options;return this._lastHighlightedItem=this._getOptionForMenuItem(userdata.menuitem[0].id),o.multiple||!origEvent.originalEvent||origEvent.originalEvent.originalEvent||userdata.data.isFooter||!o.autoFill&&!o.autoComplete||o.searchable&&this._isEditable?void 0:(this._lastHoveredItem=this._lastHighlightedItem,this._keyPressActivated=!0,this._updateCombobox([this._lastHoveredItem],!1,!1),!0)},_setInitial:function(){this._selected=[];var defaultOption,o=this.options;this.element[0].options&&this.element[0].options.length&&(o.selectedValue?defaultOption=o.selectedValue:void 0!==o.selectedIndex?-1!==parseInt(o.selectedIndex)&&(defaultOption=this._getOptionAt(o.selectedIndex)):defaultOption=$(this._getOptions()).filter(":selected,[data-selected]").toArray(),o.selectedIndex=this.element[0].selectedIndex=-1,o.selectedValue=void 0,this._includePlaceholder()),this.setValue(defaultOption),o.disabled&&this._setAttribute("disabled",o.disabled)},_getOptionForMenuItem:function(itemid){return this.element[0].querySelector('[data-zitemid="'+itemid+'"]')},_handleDS:function(){var ds=this.options.dataSource;ds&&"object"==typeof ds&&this._addOption(ds)},_populateMenu:function(options){var results=this._constructResultSet(options);if(results.length){var menuObjects=this._constructMenuObject(results);if(menuObjects.length){var menuitems=[];return this._menu.zmenu("addMenuItems",menuObjects,function(item){menuitems.push(item[0])}),menuitems}}},_isSelected:function(data){var element=this._getOptionForMenuItem(data.id);return element?element.selected:void 0},_constructMenuObject:function(results){var menuObjects=[],o=this.options,contentType=o.dropdownList.contentType||o.contentType;if(results){results=Array.isArray(results)?results:[results];for(var i=0;i<results.length;i++){var result=results[i];"string"==typeof result&&(result={label:result});var m_obj={},attr=m_obj.customAttributes={};"object"==typeof result.customAttributes&&(attr=$.extend(attr,result.customAttributes));var label=String(result.label);m_obj.label=label,m_obj.hidden=result.hidden,m_obj.disabled=result.disabled,attr.id=result.id;var selected=this._isSelected(result);if(result.options)result.options&&(m_obj.itemType="itemgroup");else if(result.isFooter)m_obj.isFooter=!0,m_obj.innerHTML=result.innerHTML||label,m_obj.itemType="custom";else if(result.separator)m_obj.itemType=attr.role="separator";else{if(m_obj.description=result.description,m_obj.shortcutkey=result.shortcutkey,attr.style=attr.style||result.style,attr["data-filter-label"]=o.searchSettings&&o.searchSettings.caseSensitive?label:label.toLowerCase(),attr.title=attr.title||result.title||("icon"===contentType?label:void 0),m_obj.className=(result.className||"")+(selected?" is-selected":""),"custom"===contentType&&(m_obj.itemType="custom",m_obj.replaceWithText=result.replaceWithText,m_obj.innerHTML=this._getCustomContent(result,result.innerHTML||o.dropdownList.template)),o.multiple){var html="<div class='zmenu__iconcontainer'><i class='zmenu__icon'></i></div>";-1!==contentType.indexOf("icon")&&(html=html+"<div class='zmenu__iconcontainer'><i class='zmenu__icon "+result.icon+"'></i></div>"),"custom"===contentType?html+=m_obj.innerHTML:html=html+"<span class='zmenu__text'>"+label+"</span>",m_obj.innerHTML=html,m_obj.custom=!0,m_obj.itemType="checkbox",m_obj.checked=selected}else m_obj.SVGIconId=result.SVGIconId,m_obj.iconClassName=result.iconClassName,m_obj.icon=result.icon,m_obj.textAsIcon=result.textAsIcon;this._textArray&&this._textArray.push({text:label,menuid:attr.id})}if(menuObjects.push(m_obj),"itemgroup"===m_obj.itemType)for(var j=0;j<result.options.length;j++){var suboption=result.options[j],subItemObj=this._constructMenuObject(suboption)[0];m_obj.disabled&&(subItemObj.disabled=!0),m_obj.hidden&&(subItemObj.hidden=!0),subItemObj.customAttributes["data-group"]=m_obj.customAttributes.id,menuObjects.push(subItemObj)}m_obj.properties=result}}return menuObjects},_constructResultSet:function(option){if(option){var results=[];option=Array.isArray(option)?option:[option];for(var i=0;i<option.length;i++){var opt=option[i],optData=ZC.getOptions(opt);if("OPTION"===opt.tagName)optData.id=opt.getAttribute("data-zitemid")||"zoption-"+(opt.id||Math.round(1e8*Math.random())),optData.value=opt.value.trim();else{if("OPTGROUP"!==opt.tagName)continue;optData.id=opt.getAttribute("data-zitemid")||"zoptgroup-"+(opt.id||Math.round(1e8*Math.random())),optData.options=this._constructResultSet(this._childs(opt))}optData.label=void 0===optData.label?opt.label||opt.text:optData.label,optData.label=optData.label||"",optData.title=opt.title,optData.style=opt.getAttribute("style"),optData.className=opt.getAttribute("class")||optData.className,optData.hidden=optData.hidden||opt.hidden,optData.disabled=optData.disabled||opt.disabled,opt.setAttribute("data-zitemid",optData.id),optData.element=opt,results.push(optData)}return results}},_setIcon:function(mData,display){this.iconspan&&(this.iconspan.innerHTML="",this.iconspan.className=this._CLASS.ICON,ZC.createIcon($(this.iconspan),mData.icon,mData.SVGIconId,mData.iconClassName),display&&(this.iconspan.style.display=""))},_setText:function(text){this.textspan&&(this._removeClass(this.textspan,this._CLASS.PLACEHOLDER),this.textspan.textContent=text)},_isDisabled:function(element){return this._matches(element,"."+this._CLASS.DISABLED)},_setMenuWidth:function(){var elementWidth=this.container.offsetWidth,direction=this._menu.data("direction")?this._menu.data("direction").split("-"):void 0;if(direction&&this._addClass(this.container,"top"===direction[0]?this._CLASS.DROPUP:this._CLASS.DROPDOWN),"icon"===this.options.contentType&&this._menu.width()<=elementWidth&&!/^(left|right)$/.test(direction)){if(direction&&(direction=this._menu.data("direction"),/^(bottom-right|top-right|top|bottom)$/.test(direction))){var left=parseFloat(this._menu.css("left"));left-=(elementWidth-this._menu.outerWidth())*(/^(top|bottom)$/.test(direction)?.5:1),this._menu.css("left",left)}this._menu.width(elementWidth-2)}},_bindEvents:function(){$(this.container).on("focusin"+this._namespace,this._onFocus.bind(this)).on("mousedown"+this._namespace,this._onClick.bind(this)).on("keydown"+this._namespace,this._onKeydown.bind(this)).on("focusout"+this._namespace,this._onBlur.bind(this)),$(this._closeIcon).on("click"+this._namespace,this._onCloseButtonClick.bind(this)),this._bindFocus()},_bindFocus:function(){this._handleFocus($(this.container))},_onCloseButtonClick:function(origEvent){return this.deselectAllOptions(origEvent),this._includePlaceholder(),this._lastHoveredItem=void 0,!1},_onFocus:function(origEvent){this._focussed||(this._focussed=!0,this._setState(),this._trigger("ONFOCUS",origEvent))},_onKeydown:function(origEvent){this._isDisabled(this.container)||this._keyPress(origEvent)},_onClick:function(origEvent){this._isDisabled(this.container)||(this._menu&&this._menu.is(":visible")&&$(this.container).is(this._menu.data("forElement"))?this._close(origEvent):this._open(origEvent))},_onBlur:function(origEvent){clearTimeout(this.focusouttimer),this._focussed=!1,this.focusouttimer=setTimeout(this._closeHandler.bind(this,origEvent),1)},_closeHandler:function(origEvent){var activeElement=$(document.activeElement);activeElement.closest($(this.container).add(this._menu)).length?(this._focussed=!0,this.setFocus(),this._setState()):(this._focussed=this._activated=!1,this._close(origEvent),this._lastHoveredItem=this._lastHighlightedItem=this._alreadyOpened=!1,this._trigger("ONBLUR",origEvent))},_onItemClick:function(origEvent,userdata){userdata.data&&(userdata.data.menuitem=userdata.menuitem);var menuData=userdata.data,option=this._getOptionForMenuItem(menuData.menuitem[0].id),trigger=!1;if(option)if("OPTION"===option.tagName){var previousValue=this.options.selectedValue;menuData.isFooter?(this._activated=!1,this._updateCombobox()):this.options.multiple?menuData.menuitem.prop("checked")?!this.options.selectionLimit||this._selected.length<this.options.selectionLimit?(this._selectOption(option),trigger=!0):this._updateMenuItem(menuData.menuitem,!1):(option.selected=!1,this._remove(this._selected,option),this._updateCombobox(),trigger=!0):(this._activated=!1,trigger=this._selected[0]!==option,this._selectOption(option),this._showDropdown(!1,origEvent));var metadata=menuData.properties;metadata.selected=option.selected,trigger&&this._trigger("ONCHANGE",origEvent,{previousValue:previousValue,optionData:metadata,menuitem:menuData.menuitem}),this._trigger("ONITEMCLICK",origEvent,{previousValue:previousValue,optionData:metadata,menuitem:menuData.menuitem})}else this._updateCombobox();return!1},_showDropdown:function(show,origEvent){show=void 0===show?!0:show,show&&this._loadDropdown(),show?(this._menu.zmenu("setAttribute","minWidth",Math.max(this.container.offsetWidth,this.options.dropdownList.width||0)),this._menu.zmenu("show",{forElement:this.container,mustBeShown:!0,event:origEvent,positionAlterable:"flipsidefit"},void 0)):this._menu.zmenu("hide",void 0,void 0,origEvent)},_reloadDropdown:function(){this._menu&&$(this._queryAll(this._menu[0],"li, .zmenu__footer")).remove(),this._optArea.innerHTML="",this._completeMenuLoaded=this.textspan=this.iconspan=void 0,this._textArray=[],this._prevKey=this._prevTimeStamp="",this._removeClass(this.container,this._CLASS.ICONONLY+" "+this._CLASS.ICONTEXT),this._constructOptArea(),this.setValue(this.options.selectedValue),this._updateCombobox(),this._menu&&this._menu.is(":visible")&&this._open()},_loadDropdown:function(){this._menu||this._createMenu(),this._completeMenuLoaded||(this._populateMenu(this._childs(this.element[0])),this._completeMenuLoaded=!0)},_updateMenuItem:function(menuitems,checked){checked&&(menuitems=menuitems.filter(function(item){return!item.checked})),this._menu&&this._menu.zmenu("setMenuItemsAttribute",menuitems,"checked",checked)},_selectOption:function(option,origEvent){if(option){var selected=$(option).filter("option");this.options.multiple&&(selected=selected.add(this._selected)),this._selected=selected.prop("selected",!0).toArray()}this._updateCombobox(this._selected,origEvent,!0),this._lastHighlightedItem=this._lastHoveredItem=void 0},_updateCombobox:function(selected,origEvent,updatedata){var o=this.options,base=this;if(selected=selected||this._selected,this._closeIcon&&(this._closeIcon.style.display="none"),selected&&selected.length){var prevValue=o.selectedValue,selectedText="";if(this._removeClass(this.textspan,this._CLASS.PLACEHOLDER),o.multiple){selectedText=[],selected.forEach(function(opt){var metaData=ZC.getOptions(opt);selectedText.push(void 0!==metaData.label?metaData.label:opt.label.trim())});var options=this._queryAll(this.element[0],"option:not([hidden]):not([data-separator=true]):not([data-is-footer=true])"),unselectedOption=this._getFilteredNodes(function(){return!this.selected},options);this._setText(unselectedOption.length?selectedText.join(", "):this._localize("allOptionsSelected"))}else{var option=selected[0],metaData=ZC.getOptions(option);metaData.label=void 0!==metaData.label?metaData.label:option.label.trim(),selectedText=[metaData.label],"custom"!==o.contentType||this._isEditable?(this._setText(selectedText[0]),this._setIcon(metaData,!0)):this.textspan.innerHTML=this._getCustomContent(metaData,o.template||metaData.innerHTML),this.container.setAttribute("aria-activedescendant",option.getAttribute("data-zitemid"))}"icon"===o.contentType||this.textspan.clientWidth<this.textspan.scrollWidth?this._optArea.setAttribute("title",selectedText.join(", ")):this._optArea.removeAttribute("title"),o.clearSelection&&(this._closeIcon.style.display="")}else this._optArea.removeAttribute("title"),this.container.removeAttribute("aria-activedescendant"),this._setText(""),this._includePlaceholder();if(updatedata||void 0===updatedata){var prevValue=o.selectedValue;if(this._menu&&this._menu.find("li").removeClass("is-selected"),selected&&selected.length){if(o.selectedValue=[],o.selectedIndex=[],selected.forEach(function(opt){o.selectedValue.push(base._getOptionValue(opt)),o.selectedIndex.push(base._getOptionIndex(opt))}),o.selectedValue=o.multiple?o.selectedValue:o.selectedValue[0],o.selectedIndex=o.multiple?o.selectedIndex:o.selectedIndex[0],this._menu){var menuitems=this._getMenuItemForOption(this._selected);$(menuitems).addClass("is-selected")}}else o.selectedValue=this.options.multiple?[]:"",o.selectedIndex=this.element[0].selectedIndex=-1;origEvent&&this._trigger("ONCHANGE",origEvent.preventDefault?origEvent:void 0,{previousValue:prevValue})}},_getOptionValue:function(opt){if(opt){if(""!==opt.value)return opt.value;var optionData=ZC.getOptions(opt);return void 0!==optionData.value?optionData.value:optionData.label}},_getCustomContent:function(data,template){var label=this._populateTemplate(template,data);return void 0===label?data.label:label},_populateTemplate:function(template,data){return"string"==typeof template?template.replace(/(#?#[^# ]+#?#)/g,function(prop){return data[prop.replace(/#/g,"")]}):"function"==typeof template?template(data):void 0},_insertOption:function(option,menuitem,action,refEle){refEle&&(refEle="string"!=typeof refEle||/^(#)/.test(refEle)?$(refEle,this.element)[0]:this._getOption(refEle)[0]),action&&refEle||(action="append",refEle=this.element),$(refEle)[action](option);var parent=option[0].parentElement;if(parent&&/^(OPTGROUP|SELECT)$/.test(parent.tagName)||(action="append",this.element.append(option),parent=option[0].parentElement),menuitem&&menuitem.length){var refItem=this._menu[0].querySelector("ul");if("OPTGROUP"===parent.tagName){this._menu.zmenu("setMenuItemsAttribute",menuitem,"disabled",parent.disabled),this._menu.zmenu("setMenuItemsAttribute",menuitem,"hidden",parent.hidden);for(var i=0;i<menuitem.length;i++)menuitem[i].setAttribute("data-group",parent.id)}if("append"!==action||"OPTGROUP"===refEle.tagName){if("OPTGROUP"===refEle.tagName&&("after"===action||"append"===action)){var siblings=$(refEle.children).not(option);refEle=siblings.length?siblings[siblings.length-1]:refEle,action="after"}refItem=this._getMenuItemForOption(refEle)[0]}$(refItem)[action](menuitem)}},_insertOptionAt:function(option,menuitem,index,group){var baseEle=$(group,this.element).filter("optgroup")[0]||this.element[0],refEle=this._queryAll(baseEle,"option:not([data-separator=true]):not([data-is-footer=true])")[index];refEle?this._insertOption(option,menuitem,"before",refEle):this._insertOption(option,menuitem,"append",baseEle)},_createOption:function(obj,isGroup){var newOptions=[],base=this;return $.each($.isArray(obj)?obj:[obj],function(i,o){var option;try{option=$(o)}catch(e){option=void 0}if(option&&option.length&&option[0].nodeType)/^(OPTGROUP|OPTION)$/.test(option[0].tagName)&&newOptions.push(option[0]);else{if(o="string"==typeof o?{value:o}:o,void 0===o.label&&void 0===o.value&&!o.isFooter&&!o.separator)return;o.label=String(void 0===o.label?o.value:o.label),isGroup||o.options?(option=$("<optgroup />",{id:o.id||void 0,label:o.label}),Array.isArray(o.options)&&option.append(base._createOption(o.options))):(option=$("<option />",{value:o.value,id:o.id||void 0}).text(o.label),o.separator?option.attr("data-separator",!0):o.isFooter&&option.attr("data-is-footer",!0)),void 0!==o.title&&(option[0].title=o.title),o.style&&option[0].setAttribute("style",o.style),option.prop({disabled:o.disabled,hidden:o.hidden,selected:o.selected}),$.extend(ZC.getOptions(option),o),newOptions.push(option[0])}}),newOptions},_trigger:function(customEvent,originalEvent,data){return data=data||{},data.dropdownList=this._menu,data.selectedValue=data.value=this.options.selectedValue||"",data.selectedIndex=this.options.selectedIndex,data[this._isEditable?"combobox":"selectbox"]=$(this.container),this._dispatchEvent(customEvent,originalEvent,data)},_getOptionIndex:function(option){return this._getOptions().indexOf(option)},_getMenuItemForOption:function(option){var menuitems=[];if(this._menu){option=Array.isArray(option)?option:[option];for(var i=0;i<option.length;i++){var menuitem=this._menu[0].querySelector("#"+option[i].getAttribute("data-zitemid"));menuitem&&this._add(menuitems,menuitem)}}return menuitems},_keyPress:function(origEvent){var code=this.currentKeyCode=origEvent.charCode||origEvent.keyCode,isDropdownVisible=this._menu&&this._menu.is(":visible");if(code===ZC.keyCode.ENTER||code===ZC.keyCode.SPACE){if(!isDropdownVisible)return origEvent.preventDefault(),origEvent.stopPropagation(),void this._open();if(this.options.searchable){if(code===ZC.keyCode.SPACE)return;if(this._menu[0].querySelector(".zselectbox__emptyresult"))return void this._close()}code===ZC.keyCode.ENTER&&(this._activated=!1),origEvent.preventDefault()}else if(code===ZC.keyCode.DOWN||code===ZC.keyCode.UP){if(origEvent.preventDefault(),origEvent.stopPropagation(),!isDropdownVisible)return void this._open()}else{if(code===ZC.keyCode.ESCAPE||code===ZC.keyCode.TAB&&isDropdownVisible)return origEvent.preventDefault(),isDropdownVisible&&origEvent.stopPropagation(),code===ZC.keyCode.ESCAPE&&(this._lastHighlightedItem=void 0,this._lastHoveredItem&&(this._lastHoveredItem=this._selected[0])),void this._close(origEvent);if(!isDropdownVisible){if(!this._isEditable&&!this.options.multiple&&/(text)/.test(this.options.contentType)){this._loadDropdown();var alphaNumericKey=String.fromCharCode(code);/[a-zA-Z0-9-_ ]/.test(alphaNumericKey)&&this._textArray.length&&this._selectItemOnKeydown(alphaNumericKey,(new Date).getTime())}return}}this._handleDropdownKeycode(code)},_reloadTextArray:function(){if(this._completeMenuLoaded){var options=this._queryAll(this.element[0],"option"),t=this._textArray=[];options.forEach(function(p){t.push({text:p.text.trim(),menuid:p.getAttribute("data-zitemid")})})}},_selectItemOnKeydown:function(searchKey,currentTime){var search=function(start,end,pattern){for(var x=start;end>x&&(!this._textArray[x]||!this._textArray[x].text.match(pattern)||(menuitem=this._menu[0].querySelector("#"+this._textArray[x].menuid),!menuitem||this._matches(menuitem,".is-disabled,[hidden]")));x++);return x===end?void 0:menuitem}.bind(this),startIndex=this.options.selectedIndex+1,timeDiff=currentTime-this._prevTimeStamp;!isNaN(timeDiff)&&300>timeDiff&&this._prevKey!==searchKey&&(searchKey=(this._prevKey||"")+searchKey,startIndex--);var pattern=new RegExp("^"+searchKey.replace(/[|()[{.+*?$\\]/g,"\\$0"),"i");(isNaN(startIndex)||startIndex>=this._textArray.length)&&(startIndex=0);var menuitem=search(startIndex,this._textArray.length,pattern);menuitem||0===startIndex||(menuitem=search(0,startIndex,pattern)),menuitem&&$(menuitem).trigger("mouseup"),this._prevKey=searchKey,this._prevTimeStamp=currentTime},_handleDropdownKeycode:function(keyCode){this._menu.zmenu("handleKeyCode",keyCode)},_remove:function(array,item){var index=array.indexOf(item);index>-1&&array.splice(index,1)},_add:function(array,item){var index=array.indexOf(item);0>index&&array.push(item)},_removeOption:function(options){return options&&options.length?(options=this._getFilteredNodes(":not([data-readonly=true])",options),options.length&&(this._selected=$(this._selected).not(options).toArray(),$(this._getMenuItemForOption(options)).remove(),$(options).remove(),this._updateCombobox(),this._reloadTextArray()),options):void 0},_includePlaceholder:function(){this.iconspan&&(this.iconspan.style.display="none"),this.textspan&&!this._isEditable&&(this._addClass(this.textspan,this._CLASS.PLACEHOLDER),this.textspan.textContent=this.options.placeholder,this.container.setAttribute("aria-placeholder",this.options.placeholder))},_getMatchedOption:function(val,groupselector){var base=this;return val=String(val),this._getFilteredNodes(function(){return val===String(base._getOptionValue(this))},this._getOptions(groupselector))},_getOption:function(value,groupselector,valueType){var filteredOps=[];if(void 0!==value){value=Array.isArray(value)?value:[value];for(var i=0;i<value.length;i++){var v=value[i];"string"==typeof v||"number"==typeof v?"value"!==valueType&&/^(#)/.test(v)&&v.length>1?v=this.element[0].querySelector(v):filteredOps=filteredOps.concat(this._getMatchedOption(v,groupselector)):v instanceof $&&(v=v[0]),!v||1!==v.nodeType||"OPTION"!==v.tagName&&"OPTGROUP"!==v.tagName||this._add(filteredOps,v)}}else if(void 0!==groupselector)return this._getOptions(groupselector);return filteredOps},_getOptions:function(group){var options=[],selector="option:not([data-separator=true]):not([data-is-footer=true])";return group?(group=$(group,this.element)[0],group&&(options=this._queryAll(group,selector))):options=this._queryAll(this.element[0],selector),options},_getOptionAt:function(index,groupselector){index=$.isArray(index)?index:[index];var filteredOps=[],options=this._getOptions(groupselector),base=this;return index.forEach(function(i){base._add(filteredOps,options[i])}),filteredOps},_reconstructOptArea:function(){this._optArea.innerHTML="",this.textspan=this.iconspan=void 0,this._removeClass(this.container,this._CLASS.ICONTEXT+" "+this._CLASS.ICONONLY),this._constructOptArea(),this.options.disabled&&this.option("disabled",!0,!0),this._updateCombobox()},_setState:function(){this._focussed?this._activated?this._addClass(this.container,this._CLASS.ACTIVE):this._removeClass(this.container,this._CLASS.ACTIVE):this._removeClass(this.container,this._CLASS.FOCUS+" "+this._CLASS.ACTIVE)},_setValue:function(value,valueType,groupselector,trigger){if(void 0!==value){var options=this._getFilteredNodes(function(){if(!this.hidden&&!this.disabled){var parent=this.parentElement;return parent&&"OPTGROUP"===parent.tagName&&parent.disabled&&parent.hidden?!1:!0}},this._getOption(value,groupselector,valueType));if(!options.length)return!this.options.multiple&&this.deselectAllOptions(),!1;this.options.multiple&&(this.options.selectionLimit&&(options=$(options).not(this._selected).toArray().slice(0,this.options.selectionLimit-this._selected.length)),this._updateMenuItem(this._getMenuItemForOption(options),!0)),this._selectOption(options,trigger)}else this._updateCombobox()},_deselectOption:function(values,groupselector,trigger){if(this._selected.length){var options=$(this._selected).filter(this._getOption(values,groupselector));options.length&&(options.prop("selected",!1),this.options.multiple&&this._updateMenuItem(this._getMenuItemForOption(options.toArray()),!1),this._selected=$(this._selected).not(options).toArray(),this._updateCombobox(void 0,trigger))}},_close:function(origEvent,deactivate){(deactivate||void 0===deactivate)&&(this._activated=!1),this._menu&&this._menu.is(":visible")?this._showDropdown(!1,origEvent):this._updateSTATE()},_open:function(origEvent){this._showDropdown(!0,origEvent)},_addOption:function(obj,arg1,arg2,isIndex){if(obj){var options=this._createOption(obj);if(options.length){var menuitems=this._completeMenuLoaded?this._populateMenu(options):void 0;return menuitems&&menuitems.length&&(menuitems=this._getFilteredNodes(function(n){return!$(n).closest(".zmenu__footer").length},menuitems)),isIndex?this._insertOptionAt(options,menuitems,arg1,arg2):this._insertOption(options,menuitems,arg1,arg2),this.frominit||this._reloadTextArray(),options}}},_setOptionAttribute:function(option,optionName,value){if(option){var menuitem=this._getMenuItemForOption(option),optionData=ZC.getOptions(option),menu=$(this._menu);menuitem=menuitem.length?$(menuitem[0]):void 0;var oldValue=optionData[optionName];if(optionData[optionName]=value,"OPTGROUP"===option.tagName)/^(label|disabled|hidden)$/.test(optionName)&&(menu.zmenu("setMenuItemsAttribute",menuitem,optionName,value),/^(disabled|hidden)$/.test(optionName)&&(option[optionName]=value,this.setOptionAttributes(this._childs(option),optionName,value)));else{var selected=option.selected;if("value"===optionName)option.value=value,selected&&this._updateCombobox();else if("label"===optionName)"string"==typeof value&&(option.innerHTML=value,selected&&this._updateCombobox(),menuitem&&(menu.zmenu("setMenuItemsAttribute",menuitem,optionName,value),menuitem[0].setAttribute("data-filter-label",this.options.searchSettings.caseSensitive?value:value.toLowerCase()),menu.zmenu("setMenuItemsAttribute",menuitem,"innerHTML",this._getCustomContent(optionData,optionData.innerHTML||this.options.dropdownList.template))));
else if("innerHTML"===optionName)"string"==typeof value&&(selected&&this._updateCombobox(),menuitem&&menu.zmenu("setMenuItemsAttribute",menuitem,optionName,this._getCustomContent(optionData,value||this.options.dropdownList.template)));else if("disabled"===optionName||"hidden"===optionName)option[optionName]=value,menu.zmenu("setMenuItemsAttribute",menuitem,optionName,value),value&&this.deselectOption(option,void 0,!0);else if("readonly"===optionName)option.setAttribute("data-readonly",!!value);else{if("selected"===optionName)return void(value?this._setValue(option):this.deselectOption(option));"customAttributes"===optionName?"object"==typeof value&&(Object.keys(value).forEach(function(key){menuitem&&menuitem.length&&("class"===key?(option["class"]&&menuitem.removeClass(option["class"]),oldValue&&oldValue["class"]&&menuitem.removeClass(oldValue["class"]),menuitem.addClass(value[key])):menuitem[0].setAttribute(key,value[key])),option.setAttribute(key,value[key])}),optionData.customAttributes=$.extend(oldValue||{},value)):(menu.zmenu("setMenuItemsAttribute",menuitem,optionName,value),selected&&this._updateCombobox())}}}},_setAttribute:function(optionName,value){var menu=$(this._menu),o=this.options;switch(optionName){case"disabled":this._close(),o[optionName]=value,value?$(this.container).addClass(this._CLASS.DISABLED).attr("aria-disabled",!0).removeAttr("tabindex").removeClass(this._CLASS.ACTIVE).removeClass(this._CLASS.FOCUS):$(this.container).removeClass(this._CLASS.DISABLED).removeAttr("aria-disabled").attr("tabindex",this.element.attr("tabindex")||0);break;case"selectedIndex":this._setAttribute("selectedValue",this._getOptionAt(value));break;case"selectedValue":this.deselectAllOptions(),this.setValue(value);break;case"dataSource":var selectedValue=o.selectedValue;o[optionName]=value,this.removeOption(),this._selected=[],o.selectedIndex=-1,this._handleDS(),this.setValue(selectedValue);break;case"placeholder":o[optionName]=value,this.textspan&&-1===o.selectedIndex&&this._includePlaceholder();break;case"contentType":if(/^(text|icon|icon-text|custom)$/.test(value)){o.multiple&&"text"!==value||(o[optionName]=value,menu.zmenu("setAttribute","contentType",o.multiple?"icon-text":value),this._reloadDropdown());break}case"dropdownList":var keys=Object.keys(value);keys.forEach(function(key){/^(width|height|appendTo|className)$/.test(key)&&(o.dropdownList[key]=value[key],"width"!==key&&menu.zmenu("setAttribute",key,value[key]))});break;case"multiple":value=!!value,value!==o[optionName]&&(o[optionName]=value,value?(this._removeClass(this.container,this._CLASS.ICONONLY),this.element[0].setAttribute("multiple",!0),o.contentType="text",menu.zmenu("setAttribute","contentType","icon-text")):(this._selected=this._selected.slice(-1),this.element[0].removeAttribute("multiple"),menu.zmenu("setAttribute","contentType",o.dropdownList.contentType||o.contentType)),this._reloadDropdown());break;case"selectionLimit":value=parseInt(value),(!isNaN(value)||value>=0)&&(o[optionName]=value,o.multiple&&value&&this._selected.length>value&&this.deselectOption(this._selected.slice(0,this._selected.length-value)));break;case"autoFill":o[optionName]=!!value;break;case"clearSelection":o[optionName]=!!value,this._updateCombobox();break;case"selectOnClose":o[optionName]=!!value;break;case"searchable":o[optionName]=!!value,this._menu&&(this._menu.zmenu("setAttribute","handleAccessKeyNavigation",!value),value?this._createSearchBox():this._menu.find(".zmenu__header").remove());break;case"searchSettings":var base=this,keys=Object.keys(value);keys.forEach(function(key){if(/^(delay|searchCriteria|caseSensitive|minKeywordLength)$/.test(key)){if("searchCriteria"===key){if(!/^(startswith|contains)$/.test(value[key])||o.autoComplete)return!0}else"caseSensitive"===key&&base._menu&&base._getFilteredNodes(function(n){var label=ZC.getOptions(n).label;n.setAttribute("data-filter-label",value[key]?label:label.toLowerCase())},base._queryAll(base._menu[0],"li[data-filter-label]"));o.searchSettings[key]=value[key]}})}},_getFilteredNodes:function(filter,nodeList){nodeList=Array.isArray(nodeList)?nodeList:[nodeList];for(var filteredNodes=[],i=0;i<nodeList.length;i++){var isMatched,n=nodeList[i];n&&n.nodeType&&("string"==typeof filter?isMatched=this._matches(n,filter):"function"==typeof filter&&(isMatched=filter.call(n,n)),isMatched&&this._add(filteredNodes,n))}return filteredNodes},_matches:function(node,selector){var p=Element.prototype,f=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.msMatchesSelector||function(s){return-1!==[].indexOf.call(document.querySelectorAll(s),this)};return f.call(node,selector)},_queryAll:function(node,selector){return this._toArr(node.querySelectorAll(selector))},_childs:function(node){return this._toArr(node.children)},_toArr:function(list){return Array.prototype.slice.call(list,0)},_removeClass:function(node,className){if(node&&1===node.nodeType&&"string"==typeof className){var nowhitespace=/[^\x20\t\r\n\f]+/g,clsList=className.match(nowhitespace);clsList.forEach(function(clazz){node.className=node.className.replace(new RegExp("(([ ]|^)"+clazz+"([ ]|$))","g")," ")})}return node},_addClass:function(node,className){if(node&&1===node.nodeType&&"string"==typeof className&&className){var nowhitespace=/[^\x20\t\r\n\f]+/g,clsList=className.match(nowhitespace),curClassList=node.className.match(nowhitespace);clsList.forEach(function(clazz){-1===curClassList.indexOf(clazz)&&curClassList.push(clazz)}),node.className=curClassList.join(" ")}return node},_setFocus:function(){setTimeout(this.setFocus.bind(this,!0),20)},setFocus:function(internal){(!internal||this.focussed)&&(this.container.focus(),!this._isDisabled(this.container)&&this._onFocus())},close:function(){this._close()},open:function(){this._open()},refresh:function(){ZC.clearMetadata(this._queryAll(this.element[0],"option,optgroup")),this._reloadDropdown()},addOption:function(){return this._addOption.apply(this,arguments)},addOptionAt:function(obj,index,group){return this._addOption(obj,index,group,!0)},addOptGroup:function(obj,refElement){if(obj){var groups=this._createOption(obj,!0);if(groups.length){var menuitems=this._completeMenuLoaded?this._populateMenu(groups):void 0;this._insertOption(groups,menuitems,"before",refElement)}return groups}},removeOption:function(value,groupselector){return this._removeOption(void 0===value&&void 0===groupselector?this._queryAll(this.element[0],"option,optgroup"):this._getOption(value,groupselector))},removeOptionAt:function(index,groupselector){return this._removeOption(this._getOptionAt(index,groupselector))},removeOptGroup:function(groupselector){var g=this._getOption(groupselector),base=this;g.forEach(function(_g){base._removeOption(base._childs(_g)),base._childs(_g).length||base._removeOption([_g])})},setValue:function(value,valueType,trigger){return this._setValue(value,valueType,void 0,trigger),this.options.selectedValue},setValues:function(){return this.setValue.apply(this,arguments)},deselectAllOptions:function(trigger){this._deselectOption(this._selected,void 0,trigger)},deselectOption:function(){this._deselectOption.apply(this,arguments)},destroy:function(){this._menu&&(this._menu.zmenu("destroy"),this._menu.remove()),$(this.container).remove(),this.element.show().removeData("zcombobox").removeData("zselectbox").removeData("metadata").children().removeData("metadata")},setOptionAttributes:function(options,optionName,value){if("object"!=typeof optionName||$.isEmptyObject(optionName)){if(optionName&&void 0!==value){options=this._getOption(options);for(var i=0;i<options.length;i++)this._matches(options[i],":not([data-readonly=true])")&&this._setOptionAttribute(options[i],optionName,value)}}else{var base=this;$.each(optionName,function(o,v){base.setOptionAttributes(options,o,v)})}},setAttribute:function(optionName,value,force){(value!==this.options[optionName]||"dataSource"===optionName||force)&&(value="string"==typeof value?value.trim():value,this._setAttribute(optionName,value))},getValue:function(){return this.options.selectedValue},getValues:function(){return this.options.multiple?this.getValue():void 0}};ZC.registerComponent("zselectbox",selectboxPrototype);var isIE9=ZC.Browser.getIEVersion()>9||-1===ZC.Browser.getIEVersion()?!1:!0;ZC.zcombobox={};var comboboxPrototype={options:$.extend({},selectboxPrototype.options,{searchSettings:{delay:150,searchCriteria:"startswith",caseSensitive:!1,minKeywordLength:0,searchByField:"label"},autoComplete:!1,autoFill:!0,messages:{noResults:"No Results"},eventPrefix:"zcombobox"}),_initialize:function(element,options){this._isEditable=!0,options.searchable=options.multiple=!1,options.autoComplete&&(options.searchSettings.searchCriteria="startswith"),/^(text|icon-text|custom)$/.test(options.contentType)||(options.contentType=$.zcombobox.prototype.options.contentType)},_constructComponent:function(){this._super(),this._addClass(this.container,"zcombobox")},_constructOptArea:function(){var o=this.options;if(this.options.contentType.match("icon")){var i=this.iconspan=document.createElement("i");i.className=this._CLASS.ICON,this._optArea.appendChild(i)}var t=this.textspan=document.createElement("input");t.className="zselectbox__textbox",t.setAttribute("placeholder",o.placeholder);var tabindex=this.element[0].getAttribute("tabindex");void 0!==tabindex&&t.setAttribute("tabindex",tabindex),this._optArea.appendChild(this.textspan),this.container.setAttribute("tabindex",-1),this._bindSearchbox(this.textspan)},_onMenuItemHover:function(){this._super.apply(this,arguments)&&this.textspan.select()},_onFocus:function(origEvent){var _superMethod=this._super;this._focussed||this.textspan.select(),_superMethod.call(this,origEvent)},_onClick:function(origEvent){var _super=this._super;!this._isDisabled(this.container)&&$(origEvent.target).closest(this._arrow).length&&(_super.call(this,origEvent),this.textspan.select(),this._clearStyle())},_bindEvents:function(){this._super();var base=this,$textspan=$(this.textspan);$textspan.on("mousedown"+this._namespace,function(origEvent){base._focussed||$textspan.one("mouseup"+base._namespace,function(origEvent){$textspan.select(),origEvent.preventDefault()}),base._onFocus(origEvent)})},_onCloseButtonClick:function(origEvent){return this.deselectAllOptions(origEvent),this._lastHoveredItem=void 0,this._setText(""),this._activated&&this._onInput(this.textspan,origEvent),this.textspan.focus(),!1},_setText:function(text){this.textspan&&(this.textspan.value=text)},_onInput:function(){var _super=this._super;this.iconspan&&(this.iconspan.style.display="none"),this._keyPressActivated=!1,_super.apply(this,arguments)},_searchQuery:function(origEvent,query){var s=this.options.searchSettings||{},minKeywordLength="NaN"!==Number(s.minKeywordLength)?Number(s.minKeywordLength):1;!minKeywordLength||query.length>=minKeywordLength?this._super(origEvent,query):this._close(origEvent,!1)},_setValue:function(value,valueType,groupselector,origEvent){if(this._super(value,valueType,groupselector,origEvent)===!1&&/(string|number)/.test(typeof value)&&this.options.acceptNewValues&&value!==this._selected){var previousValue=this._selected;this._selected=this.options.selectedValue=value,this.options.selectedIndex=this.element.selectedIndex=-1,this._setText(value),origEvent&&this._trigger("ONCHANGE",origEvent,{previousValue:previousValue})}},_keyPress:function(origEvent){var code=this.currentKeyCode=origEvent.charCode||origEvent.keyCode;code===ZC.keyCode.ENTER&&this.options.acceptNewValues?this._selectMenuItemByContent(this.textspan.value,origEvent):code!==ZC.keyCode.SPACE&&this._super(origEvent)},_selectMenuItemByContent:function(label,origEvent){if(this._menu){var menuitem=this._getItemByLabel(label);menuitem?$(menuitem).trigger("mouseup"):(this._setValue(this.textspan.value,void 0,void 0,origEvent),!this.options.multiple&&this._close())}},_getItemByLabel:function(query){if("label"===this.options.searchSettings.searchByField)return this._menu.find('li:not([hidden])[data-filter-label="'+(this.options.searchSettings.caseSensitive?query:query.toLowerCase())+'"]')[0];var base=this;this._queryAll(this._menu[0],"li:not([hidden])[data-filter-label]").forEach(function(node){var menuData=ZC.getOptions(node);return base._menuitemMatcher(menuData,query)?void 0:node})},_autoComplete:function(currentText,matchedItem){if(this.options.autoComplete&&currentText.length>=this.options.searchSettings.minKeywordLength&&currentText){var keyCode=this.currentKeyCode;if(currentText&&""!==currentText&&matchedItem){var mData=ZC.getOptions(matchedItem);if(this._setIcon(mData,!0),keyCode!==ZC.keyCode.BACKSPACE&&keyCode!==ZC.keyCode.DELETE){this._setText(mData.label);var start=mData.label.toLowerCase().indexOf(currentText.toLowerCase())+currentText.length;this.textspan.setSelectionRange(start,mData.label.length)}}else this.iconspan&&(this.iconspan.style.display="none")}},setFocus:function(internal){(!internal||this._focussed)&&(this._activated?this.textspan.focus():this.textspan.select())},_setAttribute:function(optionName,value){if("disabled"===optionName)this._close(),this.options[optionName]=value,value?($(this.container).addClass(this._CLASS.DISABLED).attr("aria-disabled",!0).removeAttr("tabindex"),$(this.textspan).prop("disabled",!0).removeClass(this._CLASS.ACTIVE).removeClass(this._CLASS.FOCUS)):($(this.container).removeClass(this._CLASS.DISABLED).removeAttr("aria-disabled").attr("tabindex",-1),$(this.textspan).prop("disabled",!1));else if("placeholder"===optionName)this.options[optionName]=value,this.textspan.setAttribute("placeholder",value);else if("autoComplete"===optionName)this.options[optionName]=!!value,value&&(this.options.searchSettings.searchCriteria="startswith");else{if(/^(multiple|selectionLimit|searchable)$/.test(optionName)||"contentType"===optionName&&!/^(text|icon-text|custom)$/.test(value))return;this._super(optionName,value)}}};ZC.zcombobox={DEFAULTS:comboboxPrototype.options},ZC.registerComponent("zcombobox",$.zselectbox,comboboxPrototype);var createSelectbox=function(options,baseFunction){if("object"==typeof options){var element=$("#"+options.id);if(element.length){if(element.data(baseFunction))return element}else element=$("<select>").appendTo($(options.appendTo).length?options.appendTo:"body").attr({id:options.id,style:options.style,title:options.title});return element[baseFunction](options),element}};ZC.createCombobox=function(options){createSelectbox(options,"zcombobox")},ZC.createSelectbox=function(options){createSelectbox(options,"zselectbox")}}(ZComponents),function($){function modifyValue(value,o){return"MODIFY"==o.mode?value*=parseFloat(o.value):"OFFSET"==o.mode?value+=parseFloat(o.value):"ABSOLUTE"==o.mode&&(value=parseFloat(o.value)),value}window.zoho={color:{darken:function(rgb,determinant){determinant=zoho.math.limit(determinant,0,1);var a=[{mode:"MODIFY",value:1-determinant}];return this.hsl(rgb,{luminance:a})},lighten:function(rgb,determinant){determinant=zoho.math.limit(determinant,0,1);var a=[{mode:"MODIFY",value:1-determinant},{mode:"OFFSET",value:determinant}];return this.hsl(rgb,{luminance:a})},shade:function(rgb,determinant){determinant=zoho.math.limit(determinant,0,1);var a=[{mode:"MODIFY",value:1-determinant}];return this.rgb(rgb,{red:a,green:a,blue:a})},tint:function(rgb,determinant){determinant=zoho.math.limit(determinant,0,1);var a=[{mode:"MODIFY",value:1-determinant},{mode:"OFFSET",value:determinant}];return this.rgb(rgb,{red:a,green:a,blue:a})},blue:2,green:1,red:0,rgb:function(rgb,rgbMod){return this.modify(rgb,rgbMod,"linearRGB")},luminance:2,saturation:1,hue:0,modify:function(rgb,modobj,mode){var value=this["to"+mode].call(this,rgb),t=this;return $.each(modobj,function(k,modobj){var num=t[k];$.each(modobj,function(l,val){value[num]=modifyValue(value[num],val),value[num]=zoho.math.limit(value[num],0,1)})}),this[mode+"toRGB"].call(this,value)},hsl:function(rgb,hslMod){return this.modify(rgb,hslMod,"HSL")},tweak:function(rgb,o){if(!$.isArray(rgb)){var t=rgb;rgb=[t[0],t[1],t[2]]}rgb=zoho.array.toNum(rgb);var t=this;return $.each(o,function(i,val){t[i]&&(rgb=t[i].call(t,rgb,val))}),rgb},tolinearRGB:function(rgb){return rgb=$.map(rgb,function(val){if(val/=255,0>val)return 0;if(.0405>=val)return val/12.92;if(1>=val){var x=(val+.055)/1.055;return Math.pow(x,2.4)}return 1})},linearRGBtoRGB:function(scrgb){return scrgb=$.map(scrgb,function(val){if(0>val)val=0;else if(.0031308>=val)val*=12.92;else if(1>=val){var y=1/2.4;val=1.055*Math.pow(val,y)-.055}else val=1;return Math.round(val*=255)})},toHSL:function(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],max=Math.max(r,g,b),min=Math.min(r,g,b),h=0;if(max==min)h=0;else if(max==r){var n=(g-b)/(max-min);h=(60*n+360)%360}else if(max==g){var n=(b-r)/(max-min);h=60*n+120}else{var n=(r-g)/(max-min);h=60*n+240}h/=360;var l=(max+min)/510,s=0;return s=max==min?0:.5>=l?(max-min)/(2*l):(max-min)/(2-2*l),s/=255,[h,s,l]},HSLtoRGB:function(hsl){var q,h=hsl[0],s=hsl[1],l=hsl[2];q=.5>l?l*(1+s):l+s-l*s;var p=2*l-q,hk=h,tr=hk+1/3,tg=hk,tb=hk-1/3,rgb=[tr,tg,tb];return rgb=$.map(rgb,function(val){0>val?val+=1:val>1&&(val-=1),val%=1,val=1/6>val?p+6*(q-p)*val:val>=1/6&&.5>val?q:val>=.5&&2/3>val?p+6*(q-p)*(2/3-val):p;var value=Math.round(255*val);return value=zoho.math.limit(value,0,255)})},CMYKToRGB:function(cmyk){var r=255*(1-cmyk[0])*(1-cmyk[3]),g=255*(1-cmyk[1])*(1-cmyk[3]),b=255*(1-cmyk[2])*(1-cmyk[3]);return[r,g,b]},RGBToCMYK:function(rgb){var c=1-rgb[0]/255,m=1-rgb[1]/255,y=1-rgb[2]/255;return min_cmy=Math.min(c,m,y),c=(c-min_cmy)/(1-min_cmy),m=(m-min_cmy)/(1-min_cmy),y=(y-min_cmy)/(1-min_cmy),k=min_cmy,c=isNaN(c)?0:c,m=isNaN(m)?0:m,y=isNaN(y)?0:y,[c,m,y,k]},isDark:function(rgb){return this.brightness(rgb)<127.5},rgbToHex:function(rgb){if("object"!=typeof rgb){var rgbRegEx=/rgb|rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*\)/;if(null!=rgb.match(rgbRegEx)){var numRegEx=/\d{1,3}/g;rgb=rgb.match(numRegEx)}}var hex="#";return rgb?$.each(rgb,function(i,val){var num=zoho.color.numToHex(val);isNaN(zoho.color.hexToNum(num))&&(num="00"),hex+=num}):hex="#ffffff",hex},RGBToHSV:function(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),v=100*max,h=s=0,delta=max-min;if(0==max)return s=h=0,[h,s,v];s=delta/max*100;var sector=0;delta&&(sector=r==max?(g-b)/delta:g==max?2+(b-r)/delta:4+(r-g)/delta),h=60*sector,0>h&&(h+=360);var _r=Math.round;return h=_r(100*h)/100,s=_r(100*s)/100,v=_r(100*v)/100,[h,s,v]},HSVToRGB:function(hsv){var h=hsv[0],s=hsv[1],v=hsv[2],_s=s/100,_v=v/100,r=g=b=0,set=function(_r,_g,_b){var _rd=Math.round;r=_rd(255*_r),g=_rd(255*_g),b=_rd(255*_b)};if(0==_s)return set(_v,_v,_v),[r,g,b];360==h&&(h=0);var _sector=h/60,sector=Math.floor(_sector),factorial=_sector-sector,p=_v*(1-_s),q=_v*(1-_s*factorial),t=_v*(1-_s*(1-factorial));switch(sector){case 0:set(_v,t,p);break;case 1:set(q,_v,p);break;case 2:set(p,_v,t);break;case 3:set(p,q,_v);break;case 4:set(t,p,_v);break;default:set(_v,p,q)}return[r,g,b]},hexToRgb:function(hex,replacementHex){if(hex=hex.replace("#",""),3==hex.length&&(hex+=hex),6!=hex.length){if(!replacementHex)return"rgb(0, 0, 0)";hex=replacementHex}var rgb="rgb(",r="";return $.each(hex.split(""),function(i,val){r=!i%2?val:r+val,i%2&&(_v=zoho.color.hexToNum(r),isNaN(_v)&&(_v=0),rgb+=_v,4>=i&&(rgb+=","),r="")}),rgb+=")"},numToHex:function(num){var colStr=parseInt(num).toString(16);return 1==colStr.length?"0"+colStr:colStr},hexToNum:function(hex){return parseInt(hex,16)},brightness:function(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],brightness=.299*r+.587*g+.114*b;return brightness}},math:{limit:function(val,min,max){var a=Math.min(val,max);return Math.max(a,min)},maxLimit:function(val,max){return Math.min(val,max)},minLimit:function(val,min){return Math.max(val,min)},toRadians:function(angle){return angle*(Math.PI/180)},toDegrees:function(angle){return angle*(180/Math.PI)},getRotatedValue:function(angle,x,y,cX,cY){var transformMatrix={},radAngle=zoho.math.toRadians(angle);transformMatrix.a=Math.cos(radAngle),transformMatrix.c=-1*Math.sin(radAngle),transformMatrix.b=Math.sin(radAngle),transformMatrix.d=Math.cos(radAngle),transformMatrix.e=cY*transformMatrix.b-cX*transformMatrix.d+cX,transformMatrix.f=cY-cX*transformMatrix.b-cY*transformMatrix.d;var finX=x*transformMatrix.a+y*transformMatrix.c+transformMatrix.e,finY=x*transformMatrix.b+y*transformMatrix.d+transformMatrix.f;return{x:finX,y:finY}},getAngle:function(x,y,wR,hR,midX,midY){var rad1=2*Math.PI;midX=midX?midX:wR,midY=midY?midY:hR;var n1=(y-midY)*wR,n2=(x-midX)*hR,angle=Math.atan2(n1,n2);return angle+=rad1,angle%=rad1},bezierPoint:function(start,cp1,cp2,end,interval){var B=Math.pow(1-interval,3)*start+3*Math.pow(1-interval,2)*interval*cp1+3*(1-interval)*Math.pow(interval,2)*cp2+Math.pow(interval,3)*end;return B},length:function(x1,y1,x2,y2){return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2))},getPointAtDistance:function(line,interDistance){var start=line.start,end=line.end,D=zoho.math.length(start.x,start.y,end.x,end.y);return{x:start.x+interDistance/D*(end.x-start.x),y:start.y+interDistance/D*(end.y-start.y)}},distanceOf:function(val1,val2,diffX,diffY,isY){var a=val2.y-val1.y;isY&&(a*=-1);var b=val1.x-val2.x;isY&&(b*=-1);var c=-1*b*val1.y-a*val1.x,denominator=Math.sqrt(Math.pow(a,2)+Math.pow(b,2)),d=denominator?(a*diffX+b*diffY+c)/denominator:0;return d},toCubicControlPoints:function(x1,y1,cx1,cy1,x2,y2){var val1=2/3,val2=1/3,ccx1=val1*cx1+val2*x1,ccy1=val1*cy1+val2*y1,ccx2=val1*cx1+val2*x2,ccy2=val1*cy1+val2*y2;return[ccx1,ccy1,ccx2,ccy2]},ifElse:function(x,y,z){return x>0?y:z},cosTan:function(x,y,z){return x*Math.cos(Math.atan2(z,y))},sinTan:function(x,y,z){return x*Math.sin(Math.atan2(z,y))},roundDecimal:function(number,digits){var decimals=Math.pow(10,digits),result=Math.round(number*decimals)/decimals;return result},modulo:function(num,modulor){num=parseFloat(num),modulor=parseFloat(modulor);var f=zoho.math._getFloatingPointLength,pow=Math.pow(10,Math.max(f(num),f(modulor)));return num*pow%(modulor*pow)/pow},_getFloatingPointLength:function(floatNum){var f=floatNum.toString().split(".")[1];return f?f.length:0},midPoint:function(p1,p2){return{x:.5*(p1.x+p2.x),y:.5*(p1.y+p2.y)}},getDiff:function(p1,p2,t){return t||(t=1),{x:(p1.x-p2.x)*t,y:(p1.y-p2.y)*t}},gcd:function(a,b){return 0==b?a:this.gcd(b,a%b)}},array:{toNum:function(a){return $.map(a,function(val){return 1*val})},sort:function(val,type){return val.sort(zoho.array.sortnum),type&&val.reverse(),val},sortnum:function(a,b){return a-b},compareXY:function(a,b){return a.small?a.small-b.small:a.big?a.big-b.big:void 0},compareZindex:function(a,b){return a.zindex-b.zindex},diff:function(a,b){for(var diff=[],i=0;a.length>i;i++)-1==b.indexOf(a[i])&&diff.push(a[i]);return diff},unique:function(b){var i,a=[],l=b.length;for(i=0;l>i;i++)$.inArray(b[i],a)<0&&a.push(b[i]);return a},clear:function(a){a.splice(0,a.length)}},string:{removeSpace:function(s){return s.replace(/\s+/g,"")}},customMerge:function(){var options,name,src,copy,overWrite,extendOptions,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;if(("boolean"==typeof target||$.isObject(target)&&(target.deep||target.overwrite))&&(deep=target.deep?target.deep:target,overWrite=target.overwrite?target.overwrite:[],extendOptions=target,target=arguments[1]||{},i=2),"object"==typeof target||$.isFunction(target)||(target={}),length===i)return target;for(;length>i;i++)if(null!=(options=arguments[i]))for(name in options)if(src=target[name],copy=options[name],target!==copy)if(deep&&copy&&($.isPlainObject(copy)||$.isArray(copy))){var clone=src&&($.isPlainObject(src)||$.isArray(src))?src:$.isArray(copy)?[]:{},skip=src&&extendOptions.skip&&-1!=$.inArray(name,extendOptions.skip)?!0:!1;if(skip)continue;target[name]=-1==$.inArray(name,overWrite)?zoho.customMerge(extendOptions,clone,copy):$.extend(deep,$.isArray(copy)?[]:{},copy)}else void 0!==copy&&(target[name]=copy);return target}},zoho.zcolor=function(color){return this.init(color),this},zoho.zcolor.prototype={init:function(color){this.initialColor=color;var color=inputToRGB(color);color?(this._r=color.r,this._g=color.g,this._b=color.b,this._a=color.a,this.format=color.format,this.initialColor=color.initialColor,this._valid=!0):this._valid=!1},isValid:function(){return this._valid},colorCodeMapping:{hue:"decimal",saturation:"percent",brightness:"percent",lightness:"percent",rgb:"decimal",cmyk:"percent",opacity:"decimal"},getObject:function(format,colorCodeMapping){colorCodeMapping=colorCodeMapping?$.extend({},this.colorCodeMapping,colorCodeMapping):this.colorCodeMapping;var rgb=[this._r,this._g,this._b],r=Math.round,fixTo2=function(value){return r(100*value)/100},getHue=function(type,frac){return"percent"===type?fixTo2(100*frac)+"%":r(360*frac)},getRGB=function(type,frac){return"percent"===type?fixTo2(100*frac)+"%":r(255*frac)},getDefault=function(type,frac){return"decimal"===type?fixTo2(frac):r(100*frac)+"%"};if(/(hsv)/.test(format)){var hsv=[];return/(hsv)/.test(this.format)?(hsv[0]=this.initialColor.h,hsv[1]=this.initialColor.s,hsv[2]=this.initialColor.v):(hsv=zoho.color.RGBToHSV(rgb),/(hsl)/.test(this.format)&&(hsv[0]=360*this.initialColor.h)),{h:getHue(colorCodeMapping.hue,hsv[0]/360),s:getDefault(colorCodeMapping.saturation,hsv[1]/100),v:getDefault(colorCodeMapping.brightness,hsv[2]/100),a:getDefault(colorCodeMapping.opacity,this._a)}}if(/(hsl)/.test(format))return/(hsl)/.test(this.format)?(hsl[0]=this.initialColor.h,hsl[1]=this.initialColor.s,hsl[2]=this.initialColor.l):(hsl=zoho.color.toHSL(rgb),/(hsv)/.test(this.format)&&(hsl[0]=this.initialColor.h/360)),{h:getHue(colorCodeMapping.hue,hsl[0]),s:getDefault(colorCodeMapping.saturation,hsl[1]),l:getDefault(colorCodeMapping.lightness,hsl[2]),a:getDefault(colorCodeMapping.opacity,this._a)};if(/(cmyk)/.test(format)){var cmyk=[];return/(cmyk)/.test(this.format)?(cmyk[0]=this.initialColor.c,cmyk[1]=this.initialColor.m,cmyk[2]=this.initialColor.y,cmyk[3]=this.initialColor.k):cmyk=zoho.color.RGBToCMYK(rgb),{c:getDefault(colorCodeMapping.cmyk,cmyk[0]),m:getDefault(colorCodeMapping.cmyk,cmyk[1]),y:getDefault(colorCodeMapping.cmyk,cmyk[2]),k:getDefault(colorCodeMapping.cmyk,cmyk[3])}}return/(hex)/.test(format)?{hex:zoho.color.rgbToHex(rgb).replace(/#/,""),a:getDefault(colorCodeMapping.opacity,this._a)}:{r:getRGB(colorCodeMapping.rgb,rgb[0]/255),g:getRGB(colorCodeMapping.rgb,rgb[1]/255),b:getRGB(colorCodeMapping.rgb,rgb[2]/255),a:getDefault(colorCodeMapping.opacity,this._a)}},getPercentageObject:function(format){var color=this.getObject(format);return/(hsv|hsl)/.test(format)?(color.h=color.h/360*100+"%",color.a=100*color.a+"%"):/(rgb)/.test(format)&&(color.r=color.r/255*100+"%",color.g=color.g/255*100+"%",color.b=color.b/255*100+"%",color.a=100*color.a+"%"),color},getColor:function(format,colorCodeMapping,flexible){var color=this.getObject(format,colorCodeMapping);if(color){var isAlpha=1!==this._a;return flexible=void 0===flexible?!0:flexible,/^(hsv)/.test(format)?(format=flexible?isAlpha?"hsva":"hsv":format,/^(hsva)/.test(format)?"hsva("+color.h+", "+color.s+", "+color.v+", "+color.a+")":"hsv("+color.h+", "+color.s+", "+color.v+")"):/^(hsl)/.test(format)?(format=flexible?isAlpha?"hsla":"hsl":format,/^(hsla)/.test(format)?"hsla("+color.h+", "+color.s+", "+color.l+", "+color.a+")":"hsl("+color.h+", "+color.s+", "+color.l+")"):/^(cmyk)$/.test(format)?"cmyk("+color.c+","+color.m+","+color.y+","+color.k+")":/^(hex)/.test(format)?(format=flexible?isAlpha?"hex8":"hex":format,/^(hex8)/.test(format)?"#"+color.hex+zoho.color.numToHex(255*this._a):"#"+color.hex):(format=flexible||!/(rgb)/.test(format)?isAlpha?"rgba":"rgb":format,/^(rgba)/.test(format)?"rgba("+color.r+", "+color.g+", "+color.b+", "+color.a+")":"rgb("+color.r+", "+color.g+", "+color.b+")")}},setAlpha:function(alpha){this._a=validate("a",alpha)},getAlpha:function(){return this._a},setColor:function(color){this.init(color)}};var colornames=zoho.color.colornames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},matchers=function(){var INT="[-\\+]?\\d+%?",NUM="[-\\+]?\\d*\\.\\d+%?",VALUEPATTERN="(?:"+NUM+")|(?:"+INT+")",MATCH3="[\\s|\\(]+("+VALUEPATTERN+")[,|\\s]+("+VALUEPATTERN+")[,|\\s]+("+VALUEPATTERN+")\\s*\\)?",MATCH4="[\\s|\\(]+("+VALUEPATTERN+")[,|\\s]+("+VALUEPATTERN+")[,|\\s]+("+VALUEPATTERN+")[,|\\s]+("+VALUEPATTERN+")\\s*\\)?";return{value:new RegExp(VALUEPATTERN),rgb:new RegExp("rgb"+MATCH3),rgba:new RegExp("rgba"+MATCH4),hsl:new RegExp("hsl"+MATCH3),hsla:new RegExp("hsla"+MATCH4),hsv:new RegExp("hsv"+MATCH3),hsva:new RegExp("hsva"+MATCH4),cmyk:new RegExp("cmyk"+MATCH4),hex3:/^#?([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})$/,hex6:/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/,hex8:/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/}}(),validate=function(prop,value){var isper=/%/.test(value);return value=isper?parseFloat(value)/100:parseFloat(value),"h"===prop?Math.round(zoho.math.limit(isper?360*value:value,0,360)):/(s|v|l)/.test(prop)?Math.round(zoho.math.limit(100*value,0,100)):/(c|m|y|k)/.test(prop)?Math.round(100*zoho.math.limit(value,0,1))/100:/(r|g|b)/.test(prop)?Math.round(zoho.math.limit(isper?255*value:value,0,255)):"a"===prop?void 0===value||isNaN(value)||0>value||value>1?1:value:void 0
},inputToRGB=function(color){if(color=inputToObject(color),"object"==typeof color){var rgb,format=color.format;if(color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("v")?(format=format||"hsva",color.h=validate("h",color.h),color.s=validate("s",color.s),color.v=validate("v",color.v),rgb=zoho.color.HSVToRGB([color.h,color.s,color.v])):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("l")?(format=format||"hsla",color.h=validate("h",color.h)/360,color.s=validate("s",color.s)/100,color.l=validate("l",color.l)/100,rgb=zoho.color.HSLtoRGB([color.h,color.s,color.l])):color.hasOwnProperty("r")&&color.hasOwnProperty("g")&&color.hasOwnProperty("b")?(format=format||"rgba",color.r=validate("r",color.r),color.g=validate("g",color.g),color.b=validate("b",color.b),rgb=[color.r,color.g,color.b]):color.hasOwnProperty("c")&&color.hasOwnProperty("m")&&color.hasOwnProperty("y")&&color.hasOwnProperty("k")&&(format=format||"cmyk",color.c=validate("c",color.c),color.m=validate("m",color.m),color.y=validate("y",color.y),color.k=validate("k",color.k),rgb=zoho.color.CMYKToRGB([color.c,color.m,color.y,color.k])),rgb)return{r:rgb[0],g:rgb[1],b:rgb[2],a:validate("a",color.a),format:format,initialColor:color}}},inputToObject=function(color){if("string"!=typeof color&&"number"!=typeof color)return Array.isArray(color)?{r:color[0],g:color[1],b:color[2],a:color[3],format:"rgba"}:$.extend({},color);color=color.trim().toLowerCase();var isName=!1;if(colornames[color])color=colornames[color],isName=!0;else if("transparent"==color)return{r:0,g:0,b:0,a:0};var match;return(match=matchers.rgb.exec(color))?{r:match[1],g:match[2],b:match[3],format:"rgb"}:(match=matchers.rgba.exec(color))?{r:match[1],g:match[2],b:match[3],a:match[4],format:"rgba"}:(match=matchers.hsl.exec(color))?{h:match[1],s:match[2],l:match[3],format:"hsl"}:(match=matchers.hsla.exec(color))?{h:match[1],s:match[2],l:match[3],a:match[4],format:"hsla"}:(match=matchers.hsv.exec(color))?{h:match[1],s:match[2],v:match[3],format:"hsv"}:(match=matchers.hsva.exec(color))?{h:match[1],s:match[2],v:match[3],a:match[4],format:"hsva"}:(match=matchers.cmyk.exec(color))?{c:match[1],m:match[2],y:match[3],k:match[4],format:"cmyk"}:(match=matchers.hex8.exec(color))?{r:zoho.color.hexToNum(match[1]),g:zoho.color.hexToNum(match[2]),b:zoho.color.hexToNum(match[3]),a:Math.round(zoho.color.hexToNum(match[4])/255*100)/100,format:"hex8"}:(match=matchers.hex6.exec(color))?{r:zoho.color.hexToNum(match[1]),g:zoho.color.hexToNum(match[2]),b:zoho.color.hexToNum(match[3]),format:isName?"rgba":"hex"}:(match=matchers.hex3.exec(color))?{r:zoho.color.hexToNum(match[1]+match[1]),g:zoho.color.hexToNum(match[2]+match[2]),b:zoho.color.hexToNum(match[3]+match[3]),format:"hex"}:void 0};ZComponents.COLORPALETTE={},ZComponents.COLORPALETTE.preset={colors:[{color:"#ffffff",tones:[{"function":"shade",percent:10},{"function":"shade",percent:20},{"function":"shade",percent:40},{"function":"shade",percent:60},{"function":"shade",percent:80},{"function":"shade",percent:90},{"function":"shade",percent:100}]},"#ef1616","#ef8216","#efb116","#5dc35a","#38d7bb","#16d0ef","#398ef3","#c516ef","ef166f"],tones:[{"function":"tint",percent:90},{"function":"tint",percent:80},{"function":"tint",percent:60},{"function":"tint",percent:40},{"function":"tint",percent:20},{"function":"shade",percent:30},{"function":"shade",percent:70}]},ZComponents.COLORPALETTE.vga={colors:[{color:"000000"},{color:"0000aa"},{color:"00aa00"},{color:"00aaaa"},{color:"aa0000"},{color:"aa00aa"},{color:"aa5500"},{color:"aaaaaa"},{color:"555555"},{color:"5555ff"},{color:"55ff55"},{color:"#55ffff"},{color:"#ff5555"},{color:"#ff55ff"},{color:"#ffff55"},{color:"#ffffff"}]},ZComponents.COLORPALETTE["ms-office"]={colors:[[192,0,0],[255,0,0],[255,192,0],[255,255,0],[146,208,80],[0,176,80],[0,176,240],[0,112,192],[0,32,96],[112,48,160]]}}(jQuery),function(ZC){var $=ZC.DOMUtil,key=ZC.keyCode,numberfieldPrototype={options:{min:void 0,max:void 0,step:1,value:void 0,spinButtons:"always",spinValues:!0,wrapAround:!1,disabled:!1,thousandSeparator:",",allowNegativeValue:!1,spinButtonsType:"together",showThousandSeparator:!1,readonly:!1,decimalPlaces:void 0,prefix:"",suffix:"",longStep:void 0,nullValue:0,decimalSeparator:".",locale:void 0,useLocale:!0,stepBehavior:"default",suppressThousandSeparatorKey:!1,spinEventTriggerDelay:0,clearButton:"focus",clearButtonSVGIconId:void 0,clearButtonIconClassName:void 0,className:"",bindedSpinAndChange:!1,blurEventDelay:500,decimalsForWholeNumber:!0},styleProperties:["font-size","font-style","font-weight","font-family","line-height"],escapeSequence:/[[\]{}()*+?\\^$|#]/g,_EVENTS:{FOCUS:"focus",BLUR:"blur",CHANGE:"change",INPUT:"input",SPIN:"spin",SPINSTART:"spinstart",SPINEND:"spinend",OPTIONSCHANGED:"optionschanged"},_factor:1,_blurEventTimer:void 0,_userAgent:navigator.userAgent.toLowerCase(),_create:function(){this._normalizeOptions(),this._createNumberField(),this._bindEvents(),this._setInitialValue()},_normalizeOptions:function(){if(this._mac=ZC.Browser.isMac(),this.options.max=void 0!=this.element.attr("max")?parseFloat(this.element.attr("max")):this.options.max?parseFloat(this.options.max):this.options.max,this.options.min=void 0!=this.element.attr("min")?parseFloat(this.element.attr("min")):this.options.min?parseFloat(this.options.min):this.options.min,this.options.step=void 0!=this.element.attr("step")?parseFloat(this.element.attr("step")):this.options.step?parseFloat(this.options.step):this.options.step,this.options.value=void 0!=this.element.attr("value")?parseFloat(this.element.attr("value")):this.options.value?parseFloat(this.options.value):this.options.value,this.options.disabled=this.element.attr("disabled")?!0:this.options.disabled,this.options.readonly=this.element.attr("readonly")?!0:this.options.readonly,this._validateOptions(),"w3"===this.options.stepBehavior&&(this._factor=Math.pow(10,this.options.decimalPlaces)||1,void 0!==this.options.min)){var reminder=(this.options.max-this.options.min)*this._factor%(this.options.step*this._factor)/this._factor;this.options.max=Math.round((this.options.max-reminder)*this._factor)/this._factor}this._hasValidValue=!0,this.options.locale||(this.options.locale=ZC.locale?ZC.locale:window.navigator.language),this.options.useLocale&&this.options.showThousandSeparator&&this._setSeparatorFromLocale("thousandSeparator"),this.options.decimalPlaces&&this._setSeparatorFromLocale("decimalSeparator")},_validateOptions:function(){(void 0===this.options.min||""===this.options.min)&&(this.options.min=this.options.allowNegativeValue?void 0:0),""===this.options.max&&(this.options.max=void 0),this.options.max&&this.options.max<this.options.min&&(this.options.max=void 0),!this.options.step||this.options.step<=0?this.options.step=1:this.options.step>this.options.max-this.options.min&&(this.options.step=this.options.max-this.options.min);var isMinFloat=Number(this.options.min)===this.options.min&&this.options.min%1!==0,isMaxFloat=Number(this.options.max)===this.options.max&&this.options.max%1!==0,isStepFloat=Number(this.options.step)===this.options.step&&this.options.step%1!==0;(isMinFloat||isMaxFloat||isStepFloat)&&(this._hasFloatingNumber=!0),(this.options.decimalPlaces<0||this.options.decimalPlaces>20)&&(this.options.decimalPlaces=0),this.options.longStep||void 0===this.options.max||void 0===this.options.min||(this.options.longStep=2*this.options.step>this.options.max?2*this.options.step/(this.options.max-this.options.min):2*this.options.step),this._dispatchEvent("OPTIONSCHANGED",{})},_setSeparatorFromLocale:function(separatorName){if(ZC.localeInfo){var numberFormat=ZC.localeInfo[this.options.locale]&&ZC.localeInfo[this.options.locale].numberFormat||{},value=numberFormat[separatorName]||this.options[separatorName];this.options[separatorName]=value}},_createNumberField:function(){this.container=$("<div>").css({display:"inline-block"}).attr({"class":"zinputfield "+this.options.className,title:this.element.attr("title")}),this._input=$("<input>").attr({"class":"zinputfield__textbox","aria-valuemin":this.options.min,"aria-valuemax":this.options.max,role:"spinbutton",tabindex:this.element.attr("tabindex")}),this.container.append(this._input.attr("class","zinputfield__textbox")),this.options.readonly&&this._input.attr({tabindex:0,readonly:!0}),("always"===this.options.spinButtons||"focus"===this.options.spinButtons)&&this._createSpinButtons(),"focus"!==this.options.spinButtons&&"none"!=this.options.spinButtons||"split"===this.options.spinButtonsType||this._input.width("100%"),this.container.insertAfter(this.element.hide()),this.options.disabled&&(this.container.addClass("is-disabled"),this._input.attr({disabled:!0,"aria-disabled":!0})),this.options.readonly&&(this.container.addClass("is-disabled is-readonly"),this._input.attr({readonly:!0,"aria-readonly":!0})),this.options.maxLength&&this._input.attr("maxlength",this.options.maxLength),"none"!==this.options.spinButtons&&"split"===this.options.spinButtonsType&&this.container.addClass("zinputfield--split"),this.container.outerWidth(this.options.width?this.options.width:this.element.width()),("focus"===this.options.clearButton||"always"===this.options.clearButton)&&this._createClearButton()},resetWidth:function(){this.container.outerWidth(this.element.outerWidth())},_createClearButton:function(){if(!this.container.find(".zinputfield__clearbutton").length){var clearButton=$("<div class='zinputfield__clearbutton'></div>"),iconEle=$("<i>");clearButton.append(iconEle),this._clearButton=clearButton,this._changeClearButtonIcon(),this.container.append(clearButton),this._bindClearButtonEvents()}"focus"===this.options.clearButton&&this._clearButton.hide(),"always"===this.options.clearButton&&("focus"!==this.options.spinButtons&&this._input.outerWidth(this._input.outerWidth()-this._clearButton.width()),this._clearButton.show(),"focus"===this.options.spinButtons&&"split"!==this.options.spinButtonsType&&this._clearButton.addClass("h-right"))},_changeClearButtonIcon:function(){var iconEle=this._clearButton.find("i");iconEle.empty().removeAttr("class").addClass("zinputfield__icon");var svgData={props:{"class":"zinputfield__svg",viewBox:"0 0 21.9 21.9"},nodes:[{path:{d:"M14.1,11.3c-0.2-0.2-0.2-0.5,0-0.7l7.5-7.5c0.2-0.2,0.3-0.5,0.3-0.7s-0.1-0.5-0.3-0.7l-1.4-1.4C20,0.1,19.7,0,19.5,0  c-0.3,0-0.5,0.1-0.7,0.3l-7.5,7.5c-0.2,0.2-0.5,0.2-0.7,0L3.1,0.3C2.9,0.1,2.6,0,2.4,0S1.9,0.1,1.7,0.3L0.3,1.7C0.1,1.9,0,2.2,0,2.4  s0.1,0.5,0.3,0.7l7.5,7.5c0.2,0.2,0.2,0.5,0,0.7l-7.5,7.5C0.1,19,0,19.3,0,19.5s0.1,0.5,0.3,0.7l1.4,1.4c0.2,0.2,0.5,0.3,0.7,0.3  s0.5-0.1,0.7-0.3l7.5-7.5c0.2-0.2,0.5-0.2,0.7,0l7.5,7.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l1.4-1.4c0.2-0.2,0.3-0.5,0.3-0.7  s-0.1-0.5-0.3-0.7L14.1,11.3z"}}]};this._handleIcon(iconEle,svgData,"clear",this.options.clearButtonIconClassName,this.options.clearButtonSVGIconId)},_bindClearButtonEvents:function(){var base=this,componentName=this.componentName;this._clearButton.off("click."+componentName).on("click."+componentName,function(event){base._input.val("").focus(),$(event.target).closest(".zinputfield__clearbutton").hide()}).off("mousedown."+componentName).on("mousedown."+componentName,function(){base._mouseDown=!0}).off("mouseup."+componentName).on("mouseup."+componentName,function(){base._mouseDown=!1})},_createSpinButtons:function(){if(!this.container.find(".zinputfield__spinbutton").length){var up=$("<button type='button' class='zinputfield__spinbutton h-up' tabindex=-1 ></button>"),innerUp=$("<i>").attr("class","zinputfield__icon"),down=$("<button type='button' class='zinputfield__spinbutton h-down' tabindex=-1 ></button>"),innerDown=$("<i>").attr("class","zinputfield__icon");if(innerUp.appendTo(up),innerDown.appendTo(down),this._updateIcons(innerUp,innerDown),"together"===this.options.spinButtonsType){var buttons=$("<div>").attr("class","zinputfield__spinbuttonpane").append(up).append(down);buttons.insertAfter(this._input)}else this.container.empty().append(down,this._input,up);this._bindSpinButtonEvents()}"together"===this.options.spinButtonsType&&("focus"===this.options.spinButtons&&this.container.find(".zinputfield__spinbutton").addClass("h-dnone"),"always"===this.options.spinButtons&&this.container.find(".zinputfield__spinbutton").removeClass("h-dnone"))},_updateIcons:function(upIconElement,downIconElement){var upSVGData,downSVGData,iconName;upIconElement.removeAttr("class").empty().attr("class","zinputfield__icon"),downIconElement.removeAttr("class").empty().attr("class","zinputfield__icon"),"together"===this.options.spinButtonsType?(upSVGData={props:{"class":"zinputfield__svg",viewBox:"0 0 48 48",width:"100%",height:"100%"},nodes:[{path:{"class":"cls-1",d:"M6,32l5,4L24,22,38,36l4-4L24,13Z"}}]},downSVGData={props:{"class":"zinputfield__svg",viewBox:"0 0 48 48",width:"100%",height:"100%"},nodes:[{path:{"class":"cls-1",d:"M11.76,13L24,26.521,37.147,13,41,16.9,24,35,7,16.9Z"}}]},iconName="arrow"):(upSVGData={props:{"class":"zinputfield__svg",viewBox:"0 0 12 12",width:"100%",height:"100%"},nodes:[{polygon:{points:"11,6 7,6 7,2 6,2 6,6 2,6 2,7 6,7 6,11 7,11 7,7 11,7 "}}]},downSVGData={props:{"class":"zinputfield__svg",viewBox:"0 0 12 10",width:"100%",height:"100%"},nodes:[{rect:{x:"2",y:"5",width:"9",height:"1"}}]},iconName="signs"),this._handleIcon(upIconElement,upSVGData,"increment"+iconName,this.options.incrementButtonIconClassName,this.options.incrementButtonSVGIconId),this._handleIcon(downIconElement,downSVGData,"decrement"+iconName,this.options.decrementButtonIconClassName,this.options.decrementButtonSVGIconId)},_bindSpinButtonEvents:function(){var base=this,componentName=this.componentName;this.container.find(".h-up,.h-down").off("mousedown."+componentName).on("mousedown."+componentName,function(event){base._handleMousedownOnControls(event)&&(ZC.currentNumberField=base.container,base._hasValidValue=!0,(!base._prevMouseupTime||!base._currentMouseupTime||base._currentMouseupTime-base._prevMouseupTime>600)&&base._triggerEvent("SPINSTART",event),base._spinValue($(event.target).closest(".h-up").length,event.shiftKey,void 0,!1),base._blurEventTimer&&clearTimeout(base._blurEventTimer),base._mousedownTimer=setInterval(function(){$(event.target).closest(".zinputfield__spinbutton").is(".is-disabled")&&(base._triggerSpinEndEvent(event),clearInterval(base._mousedownTimer)),base._mouseDown?(base._hasValidValue=!0,base._spinValue($(event.target).closest(".h-up").length,event.shiftKey,void 0,!0)):clearInterval(base._mousedownTimer)},200))}).off("mouseup."+componentName).on("mouseup."+componentName,function(event){base._spinbuttonsMouseUpHandler(event),$(event.target).closest(".zinputfield__spinbutton").focus()}).off("blur."+componentName).on("blur."+componentName,function(event){var relatedTarget=event.relatedTarget,sameFieldFocus=!1;relatedTarget&&($(relatedTarget).closest(".zinputfield__textbox").length||$(relatedTarget).closest(".zinputfield__spinbutton").length)&&(sameFieldFocus=$(relatedTarget).closest(".zinputfield")[0]===base.container[0]),relatedTarget&&sameFieldFocus||(base._spinbuttonsMouseUpHandler(event,!0),base.options.triggerBlurOnSpinButtonClick?base._updateValue(base.options.value):base._input.trigger("blur"))}).on("keydown.run"+componentName,function(event){base._spinButtonKeyDownHandler(event)})},_spinButtonKeyDownHandler:function(event){(event.keyCode===ZC.keyCode.UP||event.keyCode===ZC.keyCode.DOWN)&&(this._input.focus(),this._spinValue(event.keyCode===ZC.keyCode.UP,event.shiftKey,void 0,!0))},_spinbuttonsMouseUpHandler:function(event,blurEvent){clearInterval(this._mousedownTimer),this._mousedownTimer=void 0,window.clearTimeout(this._mousewheelTimer);var isButtonDisabled=$(event.target).closest(".zinputfield__spinbutton").hasClass("is-disabled");if(this.options.disabled||this.options.readonly||(blurEvent||this._mouseDown?!1:isButtonDisabled))return!1;this._prevMouseupTime=this._currentMouseupTime||void 0,this._currentMouseupTime=(new Date).getTime();var base=this;void 0!==this._prevMouseupTime&&this._currentMouseupTime-this._prevMouseupTime<600&&(window.clearInterval(this._mouseupTimer),this._mouseupTimer=window.setInterval(function(){base._currentMouseupTime=(new Date).getTime(),base._currentMouseupTime-base._prevMouseupTime>600&&(window.clearInterval(base._mouseupTimer),(!base.options.bindedSpinAndChange||void 0===base._lastChangedValue||parseFloat(base._lastChangedValue)!==parseFloat(base.options.value))&&base._triggerSpinEndEvent(event),base._prevMouseupTime=base._currentMouseupTime=void 0,base._mouseupTimer=base._mouseDown=void 0)},200)),this.options.bindedSpinAndChange&&void 0!==this._lastChangedValue&&parseFloat(this._lastChangedValue)===parseFloat(this.options.value)||this._mouseDown&&this._triggerSpinEndEvent(event),!blurEvent&&this.options.triggerBlurOnSpinButtonClick&&this._triggerBlurEvent(),blurEvent&&!this._input.is(":focus")?this.container.removeClass("has-focus"):this._hasFocus&&this._input.attr("tabindex",0).focus(),this._mouseDown=!1},_setInitialValue:function(){var inputValue=this.options.value;inputValue&&!inputValue+"".match("[0-9]")&&(inputValue=isNaN(this.options.value)?this.options.min:this._checkMinimumAndMaximum(void 0!=this.options.value?this.options.value:this.options.min)),this._updateValue(inputValue),this._toggleSpinButtonsStates(),this.options.previousValue=this._lastChangedValue=this.options.value},_attachAffixes:function(value){return this.options.prefix&&(value=this.options.prefix+" "+value),this.options.suffix&&(value=value+" "+this.options.suffix),value},_checkMinimumAndMaximum:function(value){return void 0===value||isNaN(value)?this.options.min?this.options.min:0:(value=parseFloat(value),value=value<this.options.min?this.options.min:value>this.options.max?this.options.max:value,"w3"===this.options.stepBehavior&&(value=value*this._factor/this._factor),value)},_toggleSpinButtonsStates:function(){if(!this.options.wrapAround){var disableUp=this.options.value>=this.options.max,disableDown=this.options.value<=this.options.min;this.container.find(".zinputfield__spinbutton").removeClass("is-disabled"),disableUp&&this.container.find(".h-up").addClass("is-disabled"),disableDown&&this.container.find(".h-down").addClass("is-disabled")}},_addEffect:function(){this._hideCursor(!0),this._input.stop().removeClass("zeffects--skew").addClass("zeffects--skew");var base=this;window.setTimeout(function(){base._hideCursor(!1),base._input.removeClass("zeffects--skew"),base._hasFocus&&base._input.focus()},1e3)},_bindSpinEvents:function(){var base=this,componentName=this.componentName;this._valueChangeNotTriggered=!1,this._input.off("keydown.run."+componentName).on("keydown.run."+componentName,function(event){if(event.keyCode!==key.ESCAPE){window.clearTimeout(base._mousewheelTimer),base._prevKeydownTime=base._currentKeyDownTime||void 0,base._currentKeyDownTime=(new Date).getTime();var currentTime=(new Date).getTime(),longPress=!1;if(longPress=void 0!=base._prevKeydownTime&&void 0!=base._currentKeyDownTime&&(base._currentKeyDownTime-base._prevKeydownTime<600||currentTime-base._currentKeyDownTime<600)?!0:!1,base.options.disabled)return!1;if(base._valueChangeNotTriggered=!0,!base.options.readonly)switch(event.keyCode){case key.UP:case key.DOWN:event.preventDefault(),event.stopPropagation(),("none"!==base.options.spinButtons||base.options.spinValues)&&(!longPress&&(!base._currentKeyupTime||!base._prevKeyupTime||base._currentKeyupTime-base._prevKeyupTime>600)&&base._triggerEvent("SPINSTART",event),base._spinValue(event.keyCode===key.UP,event.shiftKey,void 0,longPress));break;case key.ENTER:clearTimeout(base._spinTimer),base._lastChangedValue=base.options.value,base._updateValue(base._input.val()),base._triggerEvent("CHANGE",{}),base._valueChangeNotTriggered=!1,base.options.triggerBlurOnSpinButtonClick&&base._triggerBlurEvent(event);break;case key.PAGE_UP:(base.options.spinValues||"none"!==base.options.spinButtons)&&base._updateValue(base.options.max);break;case key.PAGE_DOWN:(base.options.spinValues||"none"!==base.options.spinButtons)&&base._updateValue(base.options.min);break;case key.TAB:base._selectionDone=!1}return(event.ctrlKey||event.metaKey)&&(base._shortcutOperation=!0),base._handleKeyDown(event)}}).off("keyup."+componentName).on("keyup."+componentName,function(event){if(base.options.disabled||base.options.readonly)return!1;if(event.keyCode===ZC.keyCode.UP||event.keyCode===ZC.keyCode.DOWN){if(base._prevKeyupTime=base._currentKeyupTime||void 0,base._currentKeyupTime=(new Date).getTime(),void 0!==base._prevKeyupTime&&base._currentKeyupTime-base._prevKeyupTime<600)return window.clearInterval(base._keyupTimer),void(base._keyupTimer=window.setInterval(function(){base._currentKeyupTime=(new Date).getTime(),base._currentKeyupTime-base._prevKeyupTime>600&&((!base.options.bindedSpinAndChange||void 0===base._lastChangedValue||parseFloat(base._lastChangedValue)!==parseFloat(base.options.value))&&base._triggerSpinEndEvent(event),base._prevKeydownTime=base._prevKeyupTime=base._currentKeyupTime=base._currentKeyDownTime=void 0,window.clearInterval(base._keyupTimer),base._keyupTimer=void 0)},200))}else base._prevKeyupTime=base._currentKeyupTime=base._prevKeydownTime=base._currentKeyDownTime=void 0;(event.keyCode===key.UP||event.keyCode===key.DOWN)&&(base.options.bindedSpinAndChange&&void 0!==base._lastChangedValue&&parseFloat(base._lastChangedValue)===parseFloat(base.options.value)||base._triggerSpinEndEvent(event)),base._prevKeydownTime=base._currentKeyDownTime=void 0,base._handleKeyUp(event),(event.keyCode===key.UP||event.keyCode===key.DOWN)&&(base._input[0].selectionStart=base._input[0].selectionEnd=base._input.val().length)}).off("mousewheel."+componentName+" DOMMouseScroll."+componentName+"  MozMousePixelScroll."+componentName).on("mousewheel."+componentName+" DOMMouseScroll."+componentName+"  MozMousePixelScroll"+componentName,function(event){base._mouseWheelHandler(event),clearTimeout(base._mousewheelTimer),base._mousewheelTimer=setTimeout(function(){base._triggerSpinEndEvent(event),clearTimeout(base._mousewheelTimer)},600)})},_unbindSpinEvents:function(){var componentName=this.componentName;this._input.off(" mousewheel."+componentName+" DOMMouseScroll."+componentName+" MozMousePixelScroll."+componentName)},_bindDocumentEvents:function(){var base=this,componentName=this.componentName;$(document).off("mousedown.all"+componentName).on("mousedown.all."+componentName,function(event){base._clearButtonClicked=$(event.target).closest(".zinputfield__clearbutton").length}).off("mouseup.all"+componentName).on("mouseup.all."+componentName,function(){base._clearButtonClicked=null})},_bindEvents:function(){var base=this,componentName=this.componentName;("none"!==this.options.spinButtons||this.options.spinValues)&&this._bindSpinEvents(),this._input.on("focus."+componentName,function(event){if(base._focusedValue=base.options.value,base.options.disabled||base.options.readonly)return!1;if(base.options.prefix&&""!==base.options.prefix.trim()||base.options.suffix&&""!==base.options.suffix.trim()){$(window).on("keyup."+componentName,function(nestedEvent){nestedEvent.keyCode===key.TAB&&($(nestedEvent.target).closest(".zinputfield__textbox").removeClass("h-hidecursor").select(),$(window).off("keyup."+componentName))});var selectionStart=base._input[0].selectionStart,selectionEnd=base._input[0].selectionEnd,value=base._input.val();selectionStart!==selectionEnd&&0===selectionStart&&selectionEnd==value.length&&base._input.addClass("h-hidecursor"),value=base._extractNumericValue(value,!0),base._input.val(value)}ZC.currentNumberField&&ZC.currentNumberField[0]!==base.container[0]&&ZC.currentNumberField.removeClass("has-focus"),$(document).find(".zinputfield").removeClass("has-focus"),base.container.addClass("has-focus"),base._bindDocumentEvents(),"focus"===base.options.clearButton&&base._clearButton[base._input.val().length?"show":"hide"](),base._mouseDown||base._triggerEvent("FOCUS",event),"focus"===base.options.clearButton&&base._input.val().length&&base._clearButton.show(),"split"!==base.options.spinButtonsType&&"focus"===base.options.spinButtons&&(base.container.find(".zinputfield__spinbutton").removeClass("h-dnone"),"always"===base.options.clearButton&&base._clearButton.removeClass("h-right")),!base._mouseDown&&base._setInputWidth(!0)}).on("blur."+componentName,function(event){var relTarget=event.relatedTarget&&$(event.relatedTarget);if(!(base._mouseDown||relTarget&&relTarget.closest(".zinputfield").length&&relTarget.closest(".zinputfield").find(".zinputfield__textbox")[0]===base._input[0])){base.container.removeClass("has-focus");var value=base._input.val(),reg=/^[- . 0-9 e]+$/,changeValue=!1;if(value=base._extractNumericValue(value),isNaN(parseFloat(value))||!reg.test(value))changeValue=!0,value=base.options._lastValue;else{var checkedValue=base._checkMinimumAndMaximum(value);checkedValue!==parseFloat(value)&&(changeValue=!0,base.options._lastValue=value=checkedValue)}base.options.value!==parseFloat(value)&&(changeValue=!0),changeValue?(base._updateValue(value),base._hasValidValue=!0):base._clearButtonClicked||base._updateValue(base.options.value),(void 0===base._lastChangedValue||parseFloat(base._lastChangedValue)!==parseFloat(base.options.value))&&(base._triggerEvent("CHANGE",event),base._lastChangedValue=base.options.value),base._valueChangeNotTriggered&&base.options.triggerBlurOnSpinButtonClick?base._triggerBlurEvent(event):base._mouseDown||base._triggerEvent("BLUR",event),base._toggleSpinButtonsStates(),window.setTimeout(function(){base._input.is(":focus")||"focus"!==base.options.clearButton||base._clearButton.hide()},200),"split"!==base.options.spinButtonsType&&"focus"===base.options.spinButtons&&(base.container.find(".zinputfield__spinbutton").addClass("h-dnone"),"always"===base.options.clearButton&&base._clearButton.addClass("h-right")),"focus"!==base.options.clearButton||base.container.hasClass("has-focus")||base._clearButton.hide(),base._setInputWidth(),base._clearTimers()}}).on("click."+componentName,function(){base.options.readonly||base.options.disabled||!base.options.prefix&&!base.options.suffix||base._input.select()}).on("select."+componentName,function(){base._selectionDone=!0}),this.container.on("mouseenter."+componentName,function(){base.options.readonly||base.options.disabled||("focus"===base.options.clearButton&&base._input.val().length&&base._clearButton.show(),"focus"===base.options.spinButtons&&"split"!==base.options.spinButtonsType&&(base.container.find(".zinputfield__spinbutton").removeClass("h-dnone"),"always"===base.options.clearButton&&base._clearButton.removeClass("h-right"),base._input.outerWidth(base.container.outerWidth()-base.container.find(".zinputfield__spinbutton").outerWidth())))}).on("mouseleave."+componentName,function(){base.options.readonly||base.options.disabled||("focus"!==base.options.spinButtons||"split"===base.options.spinButtonsType||base.container.hasClass("has-focus")||(base.container.find(".zinputfield__spinbutton").addClass("h-dnone"),"always"===base.options.clearButton&&base._clearButton.addClass("h-right"),base._input.outerWidth("100%")),"focus"!==base.options.clearButton||base.container.hasClass("has-focus")||base._clearButton.hide())})},_setInputWidth:function(focused){if("focus"===this.options.clearButton||"focus"===this.options.spinButtons&&"split"!==this.options.spinButtonsType){var spinButtonWidth="split"===this.options.spinButtonsType?2*parseInt(this.container.find(".zinputfield__spinbutton").outerWidth(!0)):this.container.find(".zinputfield__spinbuttonpane").width();focused?this._clearButton&&this._clearButton.is(":visible")&&this._input.outerWidth(this.container.width()-spinButtonWidth-this._clearButton.width()):(this._clearButton&&this._input.outerWidth(this._clearButton.is(":visible")?this.container.width()-spinButtonWidth+this._clearButton.width():this.container.width()-spinButtonWidth),"focus"===this.options.spinButtons&&"split"!==this.options.spinButtonsType&&this._input.outerWidth("100%"))}},_extractNumericValue:function(value,doNotReplaceThousandandDecimal){if(value+="",this.options.prefix&&""!==this.options.prefix.trim()){var escPrefix=this.options.prefix.replace(this.escapeSequence,"");value=value.replace(this.escapeSequence,"").replace(new RegExp(escPrefix,"g"),"")}if(this.options.suffix&&""!==this.options.suffix.trim()){var escSuffix=this.options.suffix.replace(this.escapeSequence,"");value=value.replace(this.escapeSequence,"").replace(new RegExp(escSuffix,"g"),"")}return!doNotReplaceThousandandDecimal&&this.options.thousandSeparator&&this.options.showThousandSeparator?value=value.replace(new RegExp("\\"+this.options.thousandSeparator,"g"),""):this.options.showThousandSeparator||","===this.options.decimalSeparator||(value=value.replace(/,/g,"")),!doNotReplaceThousandandDecimal&&this.options.decimalPlaces&&"."!==this.options.decimalSeparator&&(value=value.replace(new RegExp("\\"+this.options.decimalSeparator,"g"),".")),value.trim()},_mouseWheelHandler:function(event){if(this.options.disabled||this.options.readonly||!this.container.hasClass("has-focus"))return!1;event.stopPropagation(),event.preventDefault();var incrementValue=0!==event.originalEvent.detail?event.originalEvent.detail>0:event.originalEvent.wheelDelta<0;incrementValue?this._spinValue(!0,event.shiftKey):this._spinValue(!1,event.shiftKey)},_handleKeyDown:function(event){if(this._checkPatternKeys(event)&&!this.options.readonly){var oldValue=$(event.target).val();oldValue=this._extractNumericValue(oldValue);var fieldValue=this._input.val();fieldValue=this._extractNumericValue(fieldValue),fieldValue=fieldValue.substr(0,this._input[0].selectionEnd)+String.fromCharCode(event.keyCode)+fieldValue.substr(this._input[0].selectionEnd,this._input.val().length),!isNaN(fieldValue)&&parseFloat(fieldValue)>this.options.max&&this._input[0].selectionStart===this._input[0].selectionEnd?event.preventDefault():this.options.value=fieldValue,this._toggleSpinButtonsStates()}else this._handleShortcutKeys(event)},_handleKeyUp:function(event){this._checkPatternKeys(event)?this._triggerEvent("INPUT",event):(this._handleShortcutKeys(event),event.ctrlKey||event.metaKey||(this._shortcutOperation=!1)),this.options.clearButton&&"none"!==this.options.clearButton&&this._clearButton[this._input.val().length?"show":"hide"](),event.keyCode===key.SPACE&&""===this._input.val().trim()&&this._input.val("")},_triggerSpinEndEvent:function(event){this.options.bindedSpinAndChange&&(this._lastChangedValue=this.options.value),this._triggerEvent("SPINEND",event)},_triggerEvent:function(eventName,originalEvent){originalEvent=originalEvent?originalEvent:{};var value=this._input.val(),ui={value:""!==value?parseFloat(this._extractNumericValue(value)):void 0!==this.options.min?this.options.min:null,event:originalEvent};return ui[this.componentName.replace("z","")]=this.container,this._dispatchEvent(eventName,originalEvent,ui)},_clearTimers:function(){clearTimeout(this._spinTimer),clearTimeout(this._mousedownTimer),clearInterval(this._mouseupTimer),clearInterval(this._keyupTimer),this._prevMouseupTime=this._currentMouseupTime=this._prevKeyupTime=this._prevKeydownTime=this._currentKeyupTime=this._currentKeyDownTime=this._mouseupTimer=this._keyupTimer=this._mousedownTimer=void 0},_stopEvent:function(event){event.preventDefault(),event.stopPropagation()},_checkPatternKeys:function(event){var pattern=void 0,decimalSeparatorEntered=void 0,thousandSeparatorEntered=void 0;return pattern=!event.shiftKey&&(event.keyCode>=48&&event.keyCode<=57||8===event.keyCode||event.keyCode>=96&&event.keyCode<=105||69===event.keyCode),event.keyCode===key.SPACE&&" "!==this.options.thousandSeparator&&(0!==this._input[0].selectionStart||this._input[0].selectionEnd!==this._input.val().length?this._stopEvent(event):pattern=!0),(this.options.allowNegativeValue&&!this.options.min||void 0!==this.options.min&&-1!==this.options.min.toString().indexOf("-"))&&(pattern=pattern||189===event.keyCode||173===event.keyCode),this.options.decimalPlaces&&(decimalSeparatorEntered="."===this.options.decimalSeparator?110===event.keyCode||190===event.keyCode:188===event.keyCode),!this.options.suppressThousandSeparatorKey&&this.options.showThousandSeparator&&("."===this.options.thousandSeparator?thousandSeparatorEntered=110===event.keyCode||190===event.keyCode:","===this.options.thousandSeparator?thousandSeparatorEntered=188===event.keyCode:" "===this.options.thousandSeparator?thousandSeparatorEntered=event.keyCode===key.SPACE:"'"===this.options.thousandSeparator&&(thousandSeparatorEntered=222===event.keyCode)),pattern||decimalSeparatorEntered||thousandSeparatorEntered
},_handleShortcutKeys:function(event){this._shortcutOperation?(89===event.keyCode?this._mac&&this._stopEvent(event):65!=event.keyCode&&67!=event.keyCode&&86!=event.keyCode&&88!=event.keyCode&&90!=event.keyCode&&89!=event.keyCode&&event.keyCode!==key.LEFT&&event.keyCode!==key.RIGHT&&82!==event.keyCode&&this._stopEvent(event),(86===event.keyCode||91===event.keyCode)&&this._handlePasteOption(event)):event.keyCode!==key.DOWN&&event.keyCode!==key.UP&&event.keyCode!==key.DELETE&&event.keyCode!==key.BACKSPACE?(event.keyCode!==key.LEFT&&event.keyCode!==key.RIGHT&&event.keyCode!==key.TAB&&event.keyCode!==key.ENTER&&this._stopEvent(event),this._hasValidValue=!1):this._hasValidValue=!0},_handlePasteOption:function(){var value=this._input.val();value=this._extractNumericValue(value),this.options.value=this._checkMinimumAndMaximum(value),this._hasValidValue=!0},_handleMousedownOnControls:function(event){var isButtonDisabled=$(event.target).closest(".zinputfield__spinbutton").hasClass("is-disabled");return this.options.disabled||event.which>1||this.options.readonly||isButtonDisabled?!1:(this._mouseDown=!0,this._hasFocus=this._input.is(":focus")?!0:!1,ZC.currentNumberField&&ZC.currentNumberField[0]!==this.container[0]&&ZC.currentNumberField.removeClass("has-focus"),this.container.addClass("has-focus"),!0)},_hideCursor:function(status){this._input[status&&!ZC.Browser.isIE()?"addClass":"removeClass"]("h-hidecursor")},_spinValue:function(isUp,longStep,increment,longKeyPress){this.options.previousValue=this.options.value;var value=this._input.val(),modValue=0;value=this._extractNumericValue(value),(isNaN(value)||""==value.trim())&&(value=isUp?void 0!==this.options.min?this.options.min-this.options.step:0:void 0!==this.options.max?this.options.max+this.options.step:0),value=parseFloat(value);var staticMod,step=parseFloat(increment?increment:this.options[longStep?"longStep":"step"]);if(staticMod=this.options.min<0?(this.options.min*this._factor%(step*this._factor)+step*this._factor)%(step*this._factor)/this._factor:Math.round(this.options.min*this._factor%(step*this._factor))/this._factor,isUp){if(modValue=0>value?Math.round((value*this._factor%(step*this._factor)+step*this._factor)%(step*this._factor))/this._factor:Math.round(value*this._factor%(step*this._factor))/this._factor,modValue=Math.abs(modValue),"w3"===this.options.stepBehavior&&modValue!=staticMod){var quotient=parseInt((value-this.options.min)/step);value=(quotient+1)*step+this.options.min}else this._hasFloatingNumber?value=parseFloat((value+step).toFixed(12)):value+=step;if(void 0==this.options.max||isNaN(this.options.max))this._updateValue(value);else{if(value>this.options.max&&this.options.wrapAround&&(value=this.options.min?this.options.min:this.options.nullValue),value>this.options.max||value<this.options.min){var fieldValue=parseFloat(parseFloat(this.options.max).toFixed(this.options.decimalPlaces));this._updateValue(fieldValue)}value<=this.options.max&&!isNaN(value)&&this._updateValue(value)}}else{if(modValue=0>value?Math.round((value*this._factor%(step*this._factor)+step*this._factor)%(step*this._factor))/this._factor:Math.round(value*this._factor%(step*this._factor))/this._factor,modValue=Math.abs(modValue),"w3"===this.options.stepBehavior&&modValue!==staticMod){var quotient=parseInt((value-this.options.min)/step);value=quotient*step+this.options.min}else this._hasFloatingNumber?value=parseFloat((value-step).toFixed(12)):value-=step;if(void 0==this.options.min||isNaN(this.options.min))this._updateValue(value);else{if(value<this.options.min&&this.options.wrapAround&&(value=this.options.max?this.options.max:this.options.nullValue),value<this.options.min||value>this.options.max){var fieldValue=parseFloat(parseFloat(this.options.min).toFixed(this.options.decimalPlaces));this._updateValue(fieldValue)}value>=this.options.min&&!isNaN(value)&&this._updateValue(value)}}this._selectionDone=!1,this._toggleSpinButtonsStates(),this._hasValidValue=!0,this._triggerSpinEvent({},longKeyPress)},_triggerBlurEvent:function(event){if(event)(void 0===this._focusedValue||parseFloat(this._focusedValue)!==parseFloat(this.options.value))&&(this._triggerEvent("BLUR",event),this._focusedValue=this.options.value);else{var base=this;this._blurEventTimer=setTimeout(function(){base._triggerEvent("BLUR",event)},base.options.blurEventDelay)}},_triggerSpinEvent:function(event){if(clearTimeout(this._spinTimer),this._hasValidValue&&(void 0===this.options._lastValue||this.options._lastValue!==this.options.value)){if(this.options.spinEventTriggerDelay){var base=this;void 0===this._completedSpinTimer&&(this._startedSpinTimer=(new Date).getTime()),this._completedSpinTimer=(new Date).getTime()-this._startedSpinTimer;var delay=parseInt(this.options.spinEventTriggerDelay)-this._completedSpinTimer;if(delay)return void(this._spinTimer=setTimeout(function(){base._triggerEvent("SPIN",event),base._completedSpinTimer=void 0},delay))}this._triggerEvent("SPIN",event)}},_updateValue:function(val){this.options._lastValue=this.options.value,this.options.value=this._checkMinimumAndMaximum(val);var formattedValue=parseFloat(this.options.value);return isNaN(formattedValue)?void 0:(this.options.decimalPlaces?((this.options.decimalsForWholeNumber||-1!==formattedValue.toString().indexOf("."))&&(formattedValue=formattedValue.toFixed(this.options.decimalPlaces)),formattedValue=formattedValue.toString().replace(".",this.options.decimalSeparator)):this._hasFloatingNumber||(formattedValue=Math.ceil(formattedValue)),this.options.showThousandSeparator&&(formattedValue=this._insertSeparators(formattedValue)),this.container.hasClass("has-focus")||(formattedValue=this._attachAffixes(formattedValue)),this._input.val(formattedValue),this._input.attr("aria-valuenow",parseFloat(this._extractNumericValue(formattedValue))),this.element.val(formattedValue),formattedValue)},_insertSeparators:function(value){value+="";for(var splittedValue=value.split(this.options.decimalSeparator),leftportion=splittedValue[0],rightportion=splittedValue.length>1?this.options.decimalSeparator+splittedValue[1]:"",regex=/(\d+)(\d{3})/,portions=[];regex.test(leftportion);)portions=leftportion.split(regex),leftportion=leftportion.replace(regex,portions[1]+this.options.thousandSeparator+portions[2]);return leftportion+rightportion},setAttribute:function(optionName,value){var valueUpdationProp=["min","max","value","showThousandSeparator","allowNegativeValue","thousandSeparator","decimalSeparator","decimalPlaces","prefix","suffix","locale"],requiresValidationProp=["min","max","step","decimalPlaces"];if(this.options[optionName]=value,"spinButtons"===optionName)"focus"===value||"always"===value?(this._createSpinButtons(),this.options.clearButton&&!this._clearButton&&this._createClearButton(),"split"===this.options.spinButtonsType&&this.container.addClass("zinputfield--split"),this._toggleSpinButtonsStates(),this._input.css("width",""),this._setInputWidth(),"always"===this.options.clearButton&&"focus"===value&&this._clearButton.addClass("h-right")):"none"===value&&(this.container.find(".h-up,.h-down").off("mousedown."+this.componentName+", mouseup."+this.componentName),"together"===this.options.spinButtonsType&&this.container.find(".zinputfield__spinbuttonpane").remove(),this.container.find(".h-up,.h-down").remove(),this.container.removeClass("zinputfield--split"),this._input.css("width","100%")),this._bindEvents();else if("spinValues"===optionName&&"none"===this.options.spinButtons)value?this._bindSpinEvents():this._unbindSpinEvents(),value?this._input.attr("role","spinbutton"):this._input.removeAttr("role");else if("disabled"===optionName)this.container[value||this.options.readonly?"addClass":"removeClass"]("is-disabled"),value?this.options.readonly?this.container.removeClass("is-readonly"):$.noop:this.options.readonly?this.container.addClass("is-readonly"):$.noop,value?this._input.attr({disabled:!0,"aria-disabled":!0}):this.options.readonly?$.noop:this._input.removeAttr("disabled aria-disabled");else if("className"===optionName)this.container.removeClass(this.options.className).addClass(value);else if("readonly"===optionName)this.container[value&&!this.options.disabled?"addClass":"removeClass"]("is-readonly"),this.container[value||this.options.disabled?"addClass":"removeClass"]("is-disabled"),value?this._input.attr({readonly:!0,"aria-readonly":!0}):this._input.removeAttr(this.options.disabled?"readonly aria-readonly":"readonly disabled aria-readonly aria-disabled");else if("spinButtonsType"===optionName&&this.options.spinButtons){var upButton=this.container.find(".h-up"),downButton=this.container.find(".h-down");if(this.container.empty(),"together"===value){var buttonPane=$("<div>").attr("class","zinputfield__spinbuttonpane");buttonPane.append(upButton,downButton),"focus"===this.options.spinButtons?(upButton.addClass("h-dnone"),downButton.addClass("h-dnone"),this._input.css("width","100%")):this._input.css("width",""),this.container.append(this._input,buttonPane).removeClass("zinputfield--split")}else this.container.append(downButton,this._input,upButton).addClass("zinputfield--split"),this._input.css("width","");this._updateIcons(upButton.find(".zinputfield__icon"),downButton.find(".zinputfield__icon")),this._bindEvents(),this._bindSpinButtonEvents(),"none"!==this.options.clearButton&&this._createClearButton()}else"decrementButtonSVGIconId"===optionName||"incrementButtonSVGIconId"===optionName||"incrementButtonIconClassName"===optionName||"decrementButtonIconClassName"===optionName?this._updateIcons(this.container.find(".h-up .zinputfield__icon"),this.container.find(".h-down .zinputfield__icon")):"locale"===optionName?(this._setSeparatorFromLocale("thousandSeparator"),this._setSeparatorFromLocale("decimalSeparator")):"showThousandSeparator"===optionName?this.options.useLocale?this._setSeparatorFromLocale("thousandSeparator"):this.options.thousandSeparator=this.options.thousandSeparator?this.options.thousandSeparator:",":"allowNegativeValue"===optionName?this.options.min=value?this.options.min>=0?void 0:this.options.min:void 0===this.options.min||this.options.min<0?0:this.options.min:"wrapAround"===optionName?value?this.container.find(".zinputfield__spinbutton").removeClass("is-disabled"):this._toggleSpinButtonsStates():"decimalPlaces"===optionName?this.options.useLocale?this._setSeparatorFromLocale("decimalSeparator"):this.options.decimalSeparator=".":"title"===optionName?this.container[0].setAttribute("title",value):"width"===optionName?this.container.outerWidth(value):"clearButton"===optionName?"focus"===value||"always"===value?this._createClearButton():"none"===value&&(this._input.outerWidth(this._input.width()+this._clearButton.width()),this._clearButton.hide().remove(),this._clearButton=void 0):"clearButtonIconClassName"===optionName||"clearButtonSVGIconId"===optionName?this._changeClearButtonIcon():"maxLength"===optionName&&this._input[value?"attr":"removeAttr"]("maxlength",value);-1!==requiresValidationProp.indexOf(optionName)&&(this.options[optionName]=parseFloat(value),this._validateOptions()),-1!==valueUpdationProp.indexOf(optionName)&&(this._updateValue(this.options.value),this._toggleSpinButtonsStates()),("min"===optionName||"max"===optionName)&&this._input.attr({"aria-valuemax":this.options.max,"aria-valuemin":this.options.min})},getElement:function(){return this.container},getValue:function(){return isNaN(parseFloat(this.options.value))?this.options.min?this.options.min:0:this.options.value},setValue:function(value){this._mouseupTimer||this._keyupTimer||(value=this._extractNumericValue(value),this._updateValue(value),this.options.previousValue=this._lastChangedValue=this.options.value,this._toggleSpinButtonsStates())},increment:function(incrementValue){this._spinValue(!0,void 0,incrementValue)},decrement:function(decrementValue){this._spinValue(!1,void 0,decrementValue)},destroy:function(){this.container.off("."+this.componentName).remove(),$(this.element).show().removeData("znumberfield"),ZC.currentNumberField&&ZC.currentNumberField[0]===this.container&&(ZC.currentNumberField=void 0),this.container=this._tempDiv=this._input=this._mouseDown=this.options._lastValue=this._mac=this._clearButton=void 0}};ZC.registerComponent("znumberfield",numberfieldPrototype),ZC.createNumberField=function(initObject){var element=document.createElement("input");return initObject.id&&element.setAttribute("id",initObject.id),initObject.customAttributes&&$(element).attr(initObject.customAttributes),initObject.appendTo&&$(initObject.appendTo)[0].appendChild(element),$(element).znumberfield(initObject)}}(ZComponents),function(ZC){var $=ZC.DOMUtil,colorpickerPrototype={options:{value:"rgba(0,0,0,1)",defaultValue:"rgba(0,0,0,1)",valueColorModel:"auto",defaultColorButton:!0,noColorButton:!0,noColorIconClassName:void 0,noColorSVGIconId:void 0,paletteColumns:10,defaultPaletteType:"preset",customPalette:void 0,standardColors:!0,standardColorsPalette:"ms-office",otherPalettes:void 0,colorField:!1,colorFieldOptions:{colorMode:"auto",readonly:!1,preview:!0},opacity:!1,opacitySlider:{thumbIconClassName:void 0,thumbSVGIconId:void 0},opacityFieldType:"percent",advancedPicker:!0,advancedPickerIconClassName:void 0,advancedPickerSVGIconId:void 0,advancedPickerOptions:{},otherUsedColors:!0,otherUsedColorsHasLimit:!0,otherUsedColorsLimit:10,otherUsedColorsList:[],title:"",isTitleHTMLEncoded:!1,closeButton:!1,closeIconClassName:void 0,closeSVGIconId:void 0,closeOnSelect:!0,closeOnBodyClick:!0,position:"auto",forElement:void 0,displayType:"box",offset:void 0,margin:void 0,appendTo:void 0,type:"popup",className:void 0,draggable:!1,animation:!1,labels:{noColorButtonLabel:"No Fill",defaultColorButtonLabel:"Default Color",defaultColorsHeading:"Preset Colors",standardColorsHeading:"Standard Colors",otherUsedColorsHeading:"Other Used Colors",advancedPickerButtonLabel:"More Colors",closeButtonLabel:"Close",colorFieldLabel:"Color Field",opacityFieldLabel:"Opacity Field"}},_CLASS:{CONTAINER:"zcolorpicker",ICON:"zcolorpicker__icon",TEXT:"zcolorpicker__text",ARROW:"zcolorpicker__pointer",TITLEBAR:"zcolorpicker__titlebar",TITLE:"zcolorpicker__title",CLOSE:"zcolorpicker__close",COMMONCONTAINER:"zcolorpicker__showhidecontainer",BASICPICKER:"zcolorpicker__default",NOCOLORBUTTON:"zcolorpicker__nocolorbutton",DEFAULTCOLORBUTTON:"zcolorpicker__defaultcolorbutton",MORECOLORSBUTTON:"zcolorpicker__morecolorbutton",PALETTE:"zcolorpicker__palette",PALETTECONTAINER:"zcolorpicker__palettecontainer",PALETTEHEADING:"zcolorpicker__paletteheading",WITHSHADES:"zcolorpicker__shades",COLORBOX:"zcolorpicker__colorpan",PREVIEW:"zcolorpicker__colorfieldpreview",INNERPREVIEW:"zcolorpicker__dynamiccolor",TRANSPARENTBG:"zcolorpicker__transparentbg",COLORFIELDTEXTBOX:"zcolorpicker__textbox",COLORFIELD:"zcolorpicker__colorfield",COLORFIELDCONTAINER:"zcolorpicker__colorfieldcontainer",OPACITYCONTAINER:"zcolorpicker__opacitycontainer",SLIDER:"zslider",SLIDERTRACK:"zslider__track",SLIDERTHUMB:"zslider__thumb",OPACITYFIELD:"zcolorpicker__opacityfield",ACTIVE:"is-selected",DISABLED:"is-disabled",EMPTYCOLOR:"zcolorpicker__emptycolor",CUSTOM:"zcolorpicker__custom",NAVIGATABLE:"zcolorpicker__navigatable",DEFAULTPALETTE:"zcolorpicker__palette-default",STANDARDPALETTE:"zcolorpicker__palette-standard"},_EVENTS:{ONCHANGE:"change",ONSELECT:"select",ONBEFOREOPEN:"beforeopen",ONOPEN:"open",ONBEFORECLOSE:"beforeclose",ONCLOSE:"close",ONCOLORMOUSEOVER:"colorpanmouseover",ONCOLORMOUSEOUT:"colorpanmouseout",ONCOLORPANCLICK:"colorpanclick",ONBEFORERECENTCOLORADD:"beforeotherusedcoloradd",ONRECENTCOLORADD:"otherusedcoloradd",ONBEFOREFOCUS:"beforefocus",ONFOCUS:"focus",ONBLUR:"blur",ONPICK:"pick",ONMODECHANGE:"colorfieldlistchange",NOCOLORBUTTONCLICK:"nocolorbuttonclick",DEFAULTCOLORBUTTONCLICK:"defaultcolorbuttonclick",NOCOLORBUTTONMOUSEOVER:"nocolorbuttonmouseover",DEFAULTCOLORBUTTONMOUSEOVER:"defaultcolorbuttonmouseover",NOCOLORBUTTONMOUSEOUT:"nocolorbuttonmouseout",DEFAULTCOLORBUTTONMOUSEOUT:"defaultcolorbuttonmouseout"},_REGEX:{position:/^(bottom-right|bottom-left|top-right|top-left|top|bottom|left|right|center|auto|right-bottom|right-top|left-bottom|left-top)$/,colorMode:/^(rgb|rgba|hsl|hsla|hsv|hsva|hex|hex8|cmyk)$/},_ANIMATION:{slide:{show:"slideDown",hide:"slideUp"},fade:{show:"fadeIn",hide:"fadeOut"},end:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",transitionEnd:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"},_TEMPLATE:{close:'<svg viewBox="0 0 16 16"> <rect x="1.5" y="7.4" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)" class="st0" width="13" height="1.1"></rect> <rect x="1.5" y="7.4" transform="matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)" class="st0" width="13" height="1.1"></rect> </svg>',noColor:'<svg viewBox="0 0 16 16"> <path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,1c1.8,0,3.3,0.7,4.6,1.7l-9.9,9.9C1.7,11.3,1,9.8,1,8 C1,4.1,4.1,1,8,1z M8,15c-1.8,0-3.3-0.7-4.6-1.7l9.9-9.9C14.3,4.7,15,6.2,15,8C15,11.9,11.9,15,8,15z"></path> </svg>',advancedPicker:'<svg viewBox="0 0 600 598"> <path d="M299.7-0.2C128.3-0.2-7,134,0.2,305.2C7.4,476.9,138,577.3,259.7,595.9c88.2,13.4,107.8-45.1,87.3-67.3 c-35.5-38.3-22.6-68.6-7.3-82.5c17.4-15.7,50.3-17.3,77.3-13.8c65.5,8.5,175-40,182.2-144.8C611,116.5,471.1-0.2,299.7-0.2z M118.1,299.7c-27.7,0-50.1-22.4-50.1-50.1c0-27.7,22.4-50.1,50.1-50.1c27.7,0,50.1,22.4,50.1,50.1 C168.2,277.3,145.8,299.7,118.1,299.7z M217.6,166.6c-27.7,0-50.1-22.4-50.1-50.1c0-27.7,22.4-50.1,50.1-50.1 c27.7,0,50.1,22.4,50.1,50.1C267.7,144.1,245.2,166.6,217.6,166.6z M384.9,166.9c-27.7,0-50.1-22.4-50.1-50.1 c0-27.7,22.4-50.1,50.1-50.1c27.7,0,50.1,22.4,50.1,50.1C435,144.4,412.6,166.9,384.9,166.9z M485.2,299.9 c-27.7,0-50.1-22.4-50.1-50.1c0-27.7,22.4-50.1,50.1-50.1c27.7,0,50.1,22.4,50.1,50.1C535.2,277.5,512.8,299.9,485.2,299.9z"></path> </svg>',arrowIcon:'<svg viewBox="0 0 5 12"> <polygon points="4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5 	"></polygon> </svg>'},_create:function(element,options){this._frominit=!0,this._initialize(element,options),this._validation(),this._constructContainer(),this._bindEvents(),this._setInitial(),this._frominit=!1},_setDimension:function(){var titleHt=0;this._titleBar&&(titleHt=this._titleBar.outerHeight());var basicPickerWd=this._container[0].offsetWidth;this._basicPickerWd=basicPickerWd?basicPickerWd+"px":"";var basicPickerHt=this._container[0].offsetHeight;if(this._basicPickerHt=basicPickerHt?basicPickerHt+titleHt+"px":"",this.picker){var pickerWidth=this.picker[0].offsetWidth,pickerHeight=this.picker[0].offsetHeight;this._pickerWidth=pickerWidth?pickerWidth+"px":"",this._pickerHeight=pickerHeight?pickerHeight+titleHt+"px":""}},_resetDimension:function(){var isVisible=this.element.is(":visible");isVisible||this.element.show(),this._setElementWidthHeight("auto","auto"),this._setDimension(),isVisible||this.element.hide(),this._advPickerVisible?this._setElementWidthHeight(this._pickerWidth,this._pickerHeight):this._setElementWidthHeight(this._basicPickerWd,this._basicPickerHt)},_initialize:function(){this._paletteCount=1,this._namespace="."+this.componentName,this._floating="inline"!==this.options.type,this._appendComponent()},_appendComponent:function(){var appendTo=$(this.options.appendTo);appendTo&&appendTo.length&&appendTo.append(this.element)},_validation:function(){var o=this.options;o.paletteColumns=this._validateCount(o.paletteColumns),o.otherUsedColorsHasLimit&&(o.otherUsedColorsLimit=this._validateCount(o.otherUsedColorsLimit));var colorInstance=this._getClrInstance(o.value);o.value="none"===o.value||colorInstance.isValid()?o.value:$[this.componentName].prototype.options.value,o.defaultValue||(o.defaultValue=o.value),this._setColorMode(o.value)},_validateCount:function(number){return Math.max(+number||0,0)},_constructContainer:function(){var base=this,baseClass=this._CLASS.CONTAINER+" "+("string"==typeof this.options.className?this.options.className:"");this.element.addClass(baseClass).on("focus",function(origEvent){base._trigger("ONFOCUS",origEvent)}).on("blur",function(origEvent){base._trigger("ONBLUR",origEvent)}),void 0===this.element.attr("tabindex")&&this.element.attr("tabindex",0),this.paletteHolders=$(),this._createArrow(),this._constructTitleBar(),this._constructMainBody()},_createArrow:function(){"callout"===this.options.displayType&&this.element.prepend($('<div class="'+this._CLASS.ARROW+'"></div>'))},_arrowCallback:function(element,direction){this.element.removeClass("zcolorpicker--top zcolorpicker--bottom zcolorpicker--left zcolorpicker--right").addClass("zcolorpicker--"+direction)},_encoder:function(text,encoded){return encoded?text:ZC.encodeHTML(text)},_constructTitleBar:function(){if(this.options.title){var titleBarHTML='<div class="'+this._CLASS.TITLEBAR+'">';if(this.options.title&&(titleBarHTML+='<span class="'+this._CLASS.TITLE+'">'+this._encoder(this.options.title,this.options.isTitleHTMLEncoded)+"</span>"),this.options.closeButton){var closeIcon=this._createIcon(this.options.closeIconClassName,this.options.closeSVGIconId,this._TEMPLATE.close)[0].outerHTML;titleBarHTML+='<button type=button role="button" title="'+this._localize("closeButtonLabel")+'" class="'+this._CLASS.CLOSE+'">'+closeIcon+"</button>"}if(titleBarHTML+="</div>",this._titleBar=$(titleBarHTML).prependTo(this.element),this.options.closeButton){var base=this;this._titleBar.find("."+this._CLASS.CLOSE).on("click",function(origEvent){base.close(origEvent)})}this._setDraggable()}},_constructMainBody:function(){this._container=$("<div>",{"class":this._CLASS.BASICPICKER}).appendTo($("<div>",{"class":this._CLASS.COMMONCONTAINER}).appendTo(this.element)),this._createNoColorButton(),this._createDefaultButton(),this._createPalettes(),this._createRecentColorsPalette(),this._createAdvColorsButton(!0),this._createColorField(),this._createOpacitySection(),this._setDimension(),this._setElementWidthHeight(this._basicPickerWd,this._basicPickerHt),this.picker&&this.picker.css("visibility","hidden")},_setElementWidthHeight:function(width,height){this.element[0].style.width=width,this.element[0].style.height=height},_setDraggable:function(){this.options.draggable&&this.options.title&&$.zdraggable&&this.element.on("zdraggabledrag",this._onDrag.bind(this)).zdraggable({handle:this._titleBar})},_onDrag:function(){this.element.find("."+this._CLASS.ARROW).hide(),this._currentOpenedConfig&&(this._currentOpenedConfig.dragged=!0)},_createPalettes:function(){this._paletteContainer||(this._paletteContainer=$("<div>").appendTo(this._container)),this._createDefaultPalette(),this._createStandardPalette(),this._addPalettes(this.options.otherPalettes)},_createDefaultPalette:function(){var defaultPaletteData,isCustom="custom"===this.options.defaultPaletteType;if(isCustom&&this.options.customPalette)defaultPaletteData=this.options.customPalette;else{var presetData=this._getPresetColors(this.options.defaultPaletteType);presetData||(presetData=this._getPresetColors("preset")),defaultPaletteData={heading:this.options.defaultPaletteHeading||this._localize("defaultColorsHeading"),colors:presetData&&presetData.colors,hasTones:!0,tones:presetData.tones}}this._defaultPalette=this._addPalette(defaultPaletteData,"prepend",this._paletteContainer).addClass(this._CLASS.DEFAULTPALETTE)},_createStandardPalette:function(){if(this.options.standardColors){var presetData=this._getPresetColors(this.options.standardColorsPalette);if(presetData){var standardColorsData={heading:this.options.standardColorsHeading||this._localize("standardColorsHeading"),colors:presetData.colors};this._standardPalette=this._addPalette(standardColorsData,"after",this._defaultPalette).addClass(this._CLASS.STANDARDPALETTE)}}},_getPresetColors:function(name){return ZComponents.COLORPALETTE[name]},_bindEvents:function(){this.element.on("keydown"+this._namespace,this._onKeyPress.bind(this)),this._bindColorBoxEvents()},_bindColorBoxEvents:function(){this._container.on("click"+this._namespace,"."+this._CLASS.COLORBOX,this._colorPanClickHandler.bind(this)).on("mouseover","."+this._CLASS.COLORBOX,this._colorPanMouserOverHandler.bind(this)).on("mouseout","."+this._CLASS.COLORBOX,this._colorPanMouseOutHandler.bind(this))},_onKeyPress:function(origEvent){{var code=origEvent.keyCode,activeElement=document.activeElement;$(activeElement)}code===ZC.keyCode.ENTER?"INPUT"===activeElement.tagName?this.close(origEvent):"LI"===activeElement.tagName&&activeElement.click():"INPUT"!==activeElement.tagName&&(!this._container.is(":visible")||code!==ZC.keyCode.DOWN&&code!==ZC.keyCode.UP&&code!==ZC.keyCode.RIGHT&&code!==ZC.keyCode.LEFT||origEvent.preventDefault())},_setInitial:function(){this._floating&&this.element.hide(),this._setValue(this.options.value)},_addPalettes:function(paletteDatas,action,relElement){if(paletteDatas){var base=this;paletteDatas=Array.isArray(paletteDatas)?paletteDatas:[paletteDatas],"after"===action&&(paletteDatas=paletteDatas.reverse()),paletteDatas.forEach(function(paletteData){base._addPalette(paletteData,action,relElement)})}},_removePalettes:function(palettes,fromInternal){if(palettes){var base=this;palettes=Array.isArray(palettes)?palettes:[palettes],palettes.forEach(function(palette){var paletteHolder=base._getPalette(palette),$paletteHolder=$(paletteHolder);if(paletteHolder&&(fromInternal||!$paletteHolder.is(base._standardPalette)&&!$paletteHolder.is(base._defaultPalette)&&!$paletteHolder.is(base._recentColorsPalette))){{base._getPaletteData(paletteHolder)}$paletteHolder.remove(),base.paletteHolders=base.paletteHolders.not(paletteHolder)}}),this._resetDimension()}},_addPalette:function(paletteData,action,relElement){if("object"==typeof paletteData&&!this._getPalette(paletteData.name)){var label=paletteData.heading||paletteData.name||"",paletteHolder=$('<div class="'+this._CLASS.PALETTECONTAINER+'">');action&&relElement?("string"==typeof relElement&&(relElement=this._getPalette(relElement)),$(relElement)[action](paletteHolder)):paletteHolder.appendTo(this._paletteContainer);var attributes=paletteData.customAttributes||{},paletteName=attributes["data-palettename"]=paletteData.name||"palette_"+this._paletteCount++;paletteHolder.attr(attributes),label&&(paletteHolder[0].innerHTML='<span class="'+this._CLASS.PALETTEHEADING+'">'+this._encoder(label,paletteData.isLabelHTMLEncoded)+"</span >");var colors=paletteData.colors||[];paletteData.colors=[],paletteHolder.data("metadata",paletteData);var maxColorsCount=this._validateCount(paletteData.maxColorsCount);return maxColorsCount&&(paletteData.maxColorsCount=maxColorsCount,colors=colors.slice(0,maxColorsCount)),this._paletteCreation=!0,this._addColorsToPalette(paletteName,colors),this._paletteCreation=!1,this.paletteHolders=this.paletteHolders.add(paletteHolder[0]),paletteHolder}},_addColorsToPalette:function(palette,colors,index,insertBeforeElement){var paletteHolder=this._getPalette(palette),$paletteHolder=$(paletteHolder);if(paletteHolder&&(this._paletteCreation||!$paletteHolder.is(this._standardPalette))){var paletteBox=$paletteHolder.find("."+this._CLASS.PALETTE);paletteBox.length||(paletteBox=$("<div>",{"class":this._CLASS.PALETTE}).appendTo(paletteHolder)),colors=Array.isArray(colors)?colors:[colors];var target,tag,paletteData=this._getPaletteData(paletteHolder),action="append",baseColorsHtml="",prefix="",suffix="";paletteData.hasTones?(prefix='<ul class="'+this._CLASS.WITHSHADES+'">',suffix="</ul>",tag="ul",target=paletteBox.find("div."+this._CLASS.NAVIGATABLE+":last"),target.length||(target=$('<div class="'+this._CLASS.NAVIGATABLE+'">').appendTo(paletteBox))):(tag="li",target=paletteBox.find("ul:last"),target.length||(target=$("<ul>").appendTo(paletteBox.addClass(this._CLASS.NAVIGATABLE)))),void 0!==index&&(insertBeforeElement=paletteBox.find(tag+":not( ."+this._CLASS.CUSTOM+" )")[index]),insertBeforeElement&&(target=insertBeforeElement,action="before");for(var i=0;i<colors.length;i++){colors[i].color||(colors[i]={color:colors[i]});var colorInstance=this._getClrInstance(colors[i].color);if(colorInstance.isValid()){colors[i].color=colorInstance.getColor(this._colorMode),colors[i].title=colors[i].title||colorInstance.getColor("hex").toUpperCase();var include=!0;if(include){var colorbox=this._createColorBox(colors[i]);colorbox&&(baseColorsHtml+=prefix+colorbox,paletteData.hasTones&&(baseColorsHtml+=this._drawShades(colors[i],paletteData)),baseColorsHtml+=suffix,"before"===action?paletteData.colors.splice(index,0,colors[i]):paletteData.colors.push(colors[i]))}}}$(target)[action]($(baseColorsHtml)),this._repositionColorsInPalette(paletteHolder),!this._frominit&&this._selectColorbox()}},_getClrInstance:function(color){return new zoho.zcolor(color)},_repositionColorsInPalette:function(paletteHolder){var baseContainers,paletteData=ZC.getOptions(paletteHolder),paletteBox=$(paletteHolder).find("."+this._CLASS.PALETTE),tag="li",containerTag="<ul>";paletteData.hasTones?(tag="ul",containerTag='<div class="'+this._CLASS.NAVIGATABLE+'"></div>',baseContainers=paletteBox.find("."+this._CLASS.NAVIGATABLE).toArray()):baseContainers=paletteBox.find("ul").toArray();var colors=paletteBox.find(tag),colorCount=colors.length,columns=this.options.paletteColumns;if(!this._paletteCreation){var maxCount=paletteData.maxColorsCount;this._paletteCreation||(colorCount=colors.length,maxCount&&colors.length>maxCount&&($(colors.splice(maxCount-colors.length)).remove(),paletteData.colors=paletteData.colors.slice(0,maxCount),colorCount=colors.length))}var i=0;for(columns=columns||colors.length;colors.length>0;){var currentBlock=$(baseContainers[i]);currentBlock.length||(currentBlock=$(containerTag).appendTo(paletteBox)),currentBlock.append(colors.splice(0,columns)),i++}i&&i<baseContainers.length&&$(baseContainers.splice(i)).remove(),!this._frominit&&this._resetDimension()},_drawShades:function(color,paletteData){for(var shades=this._getShades(color,color.tones||paletteData.tones),shadesHtml="",i=0;i<shades.length;i++)shadesHtml+=this._createColorBox(shades[i],!0);return shadesHtml},_getPalette:function(palette){return palette instanceof $?palette=palette[0]:"string"==typeof palette&&(palette=this.element[0].querySelector('[data-palettename="'+palette+'"]')),palette&&1===palette.nodeType?palette:void 0},_getPaletteData:function(palettes){if(Array.isArray(palettes)){var base=this,options=[];return palettes.forEach(function(palette){options.push(base._getPaletteData(palette))}),options}return palettes&&ZC.getOptions(palettes)},_removeColorsFromPalette:function(palette,colors){var paletteHolder=this._getPalette(palette);if(paletteHolder){var base=(this._getPaletteData(paletteHolder),this),matchedboxes=$();colors=Array.isArray(colors)?colors:[colors],colors.forEach(function(color){matchedboxes=matchedboxes.add(base._getColorBox(color,paletteHolder))}),this._removeColorBoxes(palette,matchedboxes.toArray())}},_removeColorBoxes:function(palette,colorbox){var paletteHolder=this._getPalette(palette);if(paletteHolder){var baseColors,paletteData=this._getPaletteData(paletteHolder),indexes=[];baseColors=paletteData.hasTones?$(paletteHolder).find("ul").toArray():$(paletteHolder).find("li."+this._CLASS.COLORBOX+":not(."+this._CLASS.EMPTYCOLOR+")").toArray(),colorbox=Array.isArray(colorbox)?colorbox:[colorbox],colorbox.forEach(function(box){box&&"true"!==box.getAttribute("data-shade")&&(box=paletteData.hasTones?box.parentElement:box,indexes.push(baseColors.indexOf(box)),$(box).remove())}),this._removeColorsFromPaletteData(indexes,paletteData),this._repositionColorsInPalette(paletteHolder)}},_removeColorsFromPaletteAt:function(palette,indexes){var paletteHolder=this._getPalette(palette);if(paletteHolder){var paletteData=this._getPaletteData(paletteHolder);indexes=Array.isArray(indexes)?indexes:[indexes];var elements;elements=$(paletteHolder).find(paletteData.hasTones?"ul":"li."+this._CLASS.COLORBOX+":not(."+this._CLASS.EMPTYCOLOR+")"),indexes.forEach(function(index){$(elements[index]).remove()}),this._removeColorsFromPaletteData(indexes,paletteData),this._repositionColorsInPalette(paletteHolder)
}},_removeColorsFromPaletteData:function(indexes,paletteData){indexes.forEach(function(index){paletteData.colors[index]=void 0}),paletteData.colors=paletteData.colors.filter(function(color){return void 0!==color})},_createColorBox:function(colorObj,shade){if(colorObj){var icon="",titleAttr="",shadeAttr="",className=this._CLASS.COLORBOX;colorObj.SVGIconId&&(icon=this._createIcon(void 0,colorObj.SVGIconId)[0]),"string"==typeof colorObj.title&&(titleAttr="title='"+colorObj.title+"'"),"string"==typeof colorObj.className&&(className+=" "+colorObj.className);var rgb=this._getClrInstance(colorObj.color).getColor();return shade&&(shadeAttr="data-shade=true"+(colorObj.baseColor?' data-base-color="'+colorObj.baseColor+'"':"")+(colorObj.toneType?' data-tone-type="'+colorObj.toneType+'"':"")+(colorObj.percent?' data-tone-percent="'+colorObj.percent+'"':"")),"<li "+shadeAttr+' tabindex="'+this.element.attr("tabindex")+'" class="'+className+'" '+titleAttr+' data-zcolor="'+rgb+'"  style="background:'+rgb+'">'+icon+" </li>"}},_colorPanClickHandler:function(origEvent){var $colorpan=$(origEvent.target).closest("."+this._CLASS.COLORBOX);return this._setValue($colorpan[0].style.backgroundColor,origEvent),this._trigger("ONCOLORPANCLICK",origEvent,{colorpan:$colorpan[0],colorpanData:this._getColorPanData($colorpan)}),this._closeOnSelect(origEvent),!this._floating},_colorPanMouserOverHandler:function(origEvent){var $colorpan=$(origEvent.target).closest("."+this._CLASS.COLORBOX);this._trigger("ONCOLORMOUSEOVER",origEvent,{colorpan:$colorpan[0],colorpanData:this._getColorPanData($colorpan)})},_colorPanMouseOutHandler:function(origEvent){var $colorpan=$(origEvent.target).closest("."+this._CLASS.COLORBOX);this._trigger("ONCOLORMOUSEOUT",origEvent,{colorpan:$colorpan[0],colorpanData:this._getColorPanData($colorpan)})},_getColorPanData:function($colorpan){return{color:this._getClrInstance($colorpan.data("zcolor")).getColor(this._colorMode)}},_createColorField:function(){if(this.options.colorField){this._colorFieldPartition||(this._colorFieldPartition=$("<div>",{"class":this._CLASS.COLORFIELDCONTAINER}).appendTo(this._container));var colorFieldOptions=this.options.colorFieldOptions,colorField=$("<div>",{"class":this._CLASS.COLORFIELD});if(colorFieldOptions.preview){var previewBox=$('<span class="'+this._CLASS.PREVIEW+" "+this._CLASS.TRANSPARENTBG+'"><div class="'+this._CLASS.INNERPREVIEW+'"></div></span>');this._previewBox=$(previewBox[0].children[0])}var base=this;this._colorCodeBox=$('<input aria-label="'+this._localize("colorFieldLabel")+'" class="'+this._CLASS.COLORFIELDTEXTBOX+'">').on("focus"+this._namespace,function(){!base.options.colorFieldOptions.readonly&&colorField.addClass("has-focus")}).on("blur"+this._namespace,function(){colorField.removeClass("has-focus")}),colorFieldOptions.readonly?this._colorCodeBox.attr("readonly",!0).addClass("h-hidecursor"):this._colorCodeBox.addClass(this._CLASS.NAVIGATABLE).on("input"+this._namespace+" change"+this._namespace,this._validateInput.bind(this)),this._colorFieldPartition.prepend(colorField.append(previewBox,this._colorCodeBox))}},_validateInput:function(origEvent){var colorCode=this._colorCodeBox.val(),colorInstance=this._getClrInstance(colorCode);this._ignoreHexFieldUpdate="input"===origEvent.type,colorInstance.isValid()?this._setValue(colorInstance.getObject(),origEvent):this._updateColorField()},_createSlider:function(sliderOptions){var slider=$('<div class="'+this._CLASS.SLIDER+'"><div class="'+this._CLASS.SLIDERTRACK+'"><canvas></canvas></div></div>'),thumb=$('<div role="slider" class="'+this._CLASS.SLIDERTHUMB+'"></div>').appendTo(slider);if(sliderOptions&&(sliderOptions.thumbIconClassName||sliderOptions.thumbSVGIconId)){var icon=this._createIcon(sliderOptions.thumbIconClassName,sliderOptions.thumbSVGIconId);thumb.append(icon)}else thumb.addClass("zslider__circlethumb");return{slider:slider,track:$(slider[0].querySelector("."+this._CLASS.SLIDERTRACK)),thumb:$(slider[0].querySelector("."+this._CLASS.SLIDERTHUMB)),canvasContext:slider[0].querySelector("canvas").getContext("2d")}},_createOpacitySection:function(){this.options.opacity&&(this._colorFieldPartition||(this._colorFieldPartition=$("<div>",{"class":this._CLASS.COLORFIELDCONTAINER}).appendTo(this._container)),this._sliderContainer=$("<div>",{"class":this._CLASS.OPACITYCONTAINER}).appendTo(this._colorFieldPartition),this._createOpacitySlider(),this._createOpacityField())},_createOpacityField:function(){var opacityHtml="<input type=measurement min=0 data-suffix='%' max=100>",isDecimal="decimal"===this.options.opacityFieldType;isDecimal&&(opacityHtml="<input data-decimal-places=2 min=0 max=1 step=0.01>");var base=this;this._opacityField=$(opacityHtml).appendTo(this._sliderContainer).znumberfield({className:this._CLASS.NAVIGATABLE+" "+this._CLASS.OPACITYFIELD,spinButtons:"none",clearButton:"none"}).on("znumberfieldspin znumberfieldchange znumberfieldinput",function(origEvent,data){base._ignoreOpacityFieldUpdate=!0,base._setAlpha.call(base,isDecimal?data.value:data.value/100,origEvent),base._ignoreOpacityFieldUpdate=!1}),this._opacityField.znumberfield("getElement").removeAttr("style").find("input").removeAttr("style").attr("aria-label",this._localize("opacityFieldLabel"))},_createOpacitySlider:function(sliderOptions){if(this.options.opacity){var response=this._createSlider(sliderOptions||this.options.opacitySlider);response.track.addClass(this._CLASS.TRANSPARENTBG),this._opacityBar=response.slider.appendTo(this._sliderContainer).on("mousedown"+this._namespace,this._onMouseDown.bind(this)),this._opacityPicker=response.thumb,this._opacityContext=response.canvasContext}},_onMouseDown:function(origEvent){3!==origEvent.which&&(this._onPickerDragged(origEvent),this._trigger("ONDRAGSTART",origEvent),ZComponents.$document.off("mousemove"+this._namespace+" mouseup"+this._namespace).on("mousemove"+this._namespace,this._onMouseMove.bind(this)).on("mouseup"+this._namespace,this._onMouseUp.bind(this)))},_onMouseMove:function(origEvent){return this._onPickerDragged(origEvent),this._trigger("ONDRAG",origEvent),!1},_onMouseUp:function(origEvent){ZComponents.$document.off("mousemove"+this._namespace+" mouseup"+this._namespace),this._trigger("ONDRAGSTOP",origEvent)},_onPickerDragged:function(origEvent){origEvent.preventDefault();var containerOffset=this._opacityBar.offset(),cursorPos=origEvent.pageX-containerOffset.left,totalPixel=this._opacityBar.width(),percent=100*this._limit(cursorPos/totalPixel,0,1);this._opacityPicker.css("left",percent+"%"),this._ignoreSliderUpdate=!0,this._setAlpha(Math.round(percent)/100,origEvent),this._ignoreSliderUpdate=!1},_setAlpha:function(alpha,origEvent){var color=this._colorInstance.getObject();color.a=alpha,this._setValue(color,origEvent)},_limit:function(value,min,max){return Math.max(Math.min(value,max),min)},_setGradientColors:function(gradient,rgbs){rgbs=rgbs.slice(0);for(var frac=Math.round(1/(rgbs.length-1)*100)/100,offset=0;rgbs.length>1;)gradient.addColorStop(offset,rgbs.shift()),offset+=frac;gradient.addColorStop(1,rgbs.shift())},_updateOpacitySlider:function(){if(this.options.opacity&&!this._ignoreSliderUpdate){var rgbObj=this._colorInstance.getObject();this._opacityPicker.css("left",Math.round(100*rgbObj.a)+"%");var context=this._opacityContext,rgb=this._colorInstance.getColor("rgb",void 0,!1);context.rect(0,0,context.canvas.width,context.canvas.height),context.clearRect(0,0,context.canvas.width,context.canvas.height);var gradient=context.createLinearGradient(0,0,context.canvas.width,0);this._setGradientColors(gradient,["rgba("+rgbObj.r+","+rgbObj.g+","+rgbObj.b+", 0)",rgb]),context.fillStyle=gradient,context.fill()}},_updateOpacityField:function(){if(this.options.opacity&&!this._ignoreOpacityFieldUpdate){var alpha=this._colorInstance.getAlpha();this._opacityField.znumberfield("setValue","decimal"===this.options.opacityFieldType?alpha:Math.round(100*alpha))}},_createNoColorButton:function(){if(this.options.noColorButton){var base=this;this._noColorButton=this._createActionButton("noColorButtonLabel",this.options.noColorButtonLabel,this._onNoColorButtonClick).on("mouseover."+this.componentName,function(origEvent){base._trigger("NOCOLORBUTTONMOUSEOVER",origEvent)}).on("mouseout."+this.componentName,function(origEvent){base._trigger("NOCOLORBUTTONMOUSEOUT",origEvent)});var icon=this._createIcon(this.options.noColorIconClassName,this.options.noColorSVGIconId,this._TEMPLATE.noColor);this._noColorButton.addClass(this._CLASS.NOCOLORBUTTON).prepend(icon).prependTo(this._container)}},_onNoColorButtonClick:function(origEvent){this._setValue("transparent",origEvent,{noColorButtonClick:!0}),this._trigger("NOCOLORBUTTONCLICK",origEvent),this._closeOnSelect(origEvent)},_createDefaultButton:function(){if(this.options.defaultColorButton){var base=this;this._defaultButton=this._createActionButton("defaultColorButtonLabel",this.options.defaultColorButtonLabel,this._onDefaultButtonClick).on("mouseover."+this.componentName,function(origEvent){base._trigger("DEFAULTCOLORBUTTONMOUSEOVER",origEvent)}).on("mouseout."+this.componentName,function(origEvent){base._trigger("DEFAULTCOLORBUTTONMOUSEOUT",origEvent)}),this._defaultButton.addClass(this._CLASS.DEFAULTCOLORBUTTON);var colorSpan=document.createElement("span");colorSpan.className=this._CLASS.ICON;var defaultClr,colorInstance=this._getClrInstance(this.options.defaultValue);defaultClr=colorInstance.isValid()?colorInstance.getColor():ZC.zcolorpicker.prototype.options.defaultValue,colorSpan.style.backgroundColor=this.options.defaultValue=defaultClr,this._defaultButton.prepend(colorSpan),this._noColorButton?this._defaultButton.insertAfter(this._noColorButton):this._defaultButton.prependTo(this._container)}},_onDefaultButtonClick:function(origEvent){this._setValue(this.options.defaultValue,origEvent,{defaultColorButtonClick:!0}),this._trigger("DEFAULTCOLORBUTTONCLICK",origEvent),this._closeOnSelect(origEvent)},_createActionButton:function(buttonName,label,callback){label=label||this._localize(buttonName);var button=$('<button role=button aria-label="'+label+'" class="'+this._CLASS.NAVIGATABLE+'" ><span class="'+this._CLASS.TEXT+'">'+label+"</span></button>").on("click"+this._namespace,callback.bind(this));return button},_createIcon:function(className,SVGId,template){var icon=$('<i class="'+this._CLASS.ICON+'">');return className||SVGId?ZC.createIcon(icon,className,SVGId):icon[0].innerHTML=template,icon},_getShades:function(colorObj,shadeFactors){var colorInstance=this._getClrInstance(colorObj.color);if(colorInstance.isValid()){var colorProps=colorInstance.getObject(),base=this,shades=[],rgb=[colorProps.r,colorProps.g,colorProps.b],pushShade=function(mode,percent,title){if(/^(lighten|darken|tint|shade)$/.test(mode)){var n_rgb=zoho.color[mode](rgb,percent/100);colorInstance.setColor({r:n_rgb[0],g:n_rgb[1],b:n_rgb[2],a:colorProps.a}),shades.push({color:colorInstance.getColor(),title:title||colorInstance.getColor("hex").toUpperCase(),toneType:mode,percent:percent,baseColor:colorObj.color})}};if(Array.isArray(shadeFactors))shadeFactors.forEach(function(shadeFactor){var color=shadeFactor.color||shadeFactor;if("string"==typeof color){var colorInstance=base._getClrInstance(color);shades.push({color:colorInstance.getColor(),baseColor:colorObj.color,title:shadeFactor.title||colorInstance.getColor("hex").toUpperCase()})}else pushShade(shadeFactor["function"],shadeFactor.percent,shadeFactor.title)});else{var isDark=zoho.color.isDark(rgb),brightness=zoho.color.brightness(rgb),fixedPer=brightness>=210&&255>=brightness||brightness>=0&&38>=brightness?!1:!0,measure=brightness>=240&&255>=brightness?[.05,.15,.25,.35,.5]:brightness>=0&&15>=brightness?[.5,.35,.25,.15,.05]:brightness>=224&&240>brightness?[.1,.25,.5,.75,.9]:brightness>15&&31>=brightness?[.9,.75,.5,.25,.1]:[.8,.6,.4,.25,.5];$.each(measure,function(index,value){fixedPer&&(isDark=2>=index),pushShade(isDark?"lighten":"darken",100*value)})}return shades}},_getColorBox:function(color,palette){var colorInstance=this._getClrInstance(color);return colorInstance.isValid()?$("."+this._CLASS.COLORBOX+'[data-zcolor="'+colorInstance.getColor()+'"]',palette||this.element):void 0},_createRecentColorsPalette:function(){if(this.options.otherUsedColors){var paletteData={colors:this.options.otherUsedColorsList,name:"otherusedcolors",type:"otherused",heading:this.options.otherUsedColorsHeading||this._localize("otherUsedColorsHeading"),maxColorsCount:this.options.otherUsedColorsHasLimit&&this.options.otherUsedColorsLimit};this._recentColorsPalette=this._addPalette(paletteData,"after",this._paletteContainer),paletteData.colors.length||this._recentColorsPalette.hide().attr("aria-hidden",!0)}},_createAdvColorsButton:function(updatepicker){var options=this.options;if(options.advancedPicker&&$.fn.zadvancedcolorpicker){var icon=this._createIcon(options.advancedPickerIconClassName,options.advancedPickerSVGIconId,this._TEMPLATE.advancedPicker),arrowIcon=this._createIcon(options.advancedPickerIconClassName,options.advancedPickerSVGIconId,this._TEMPLATE.arrowIcon);this._advancedColorsButton=this._createActionButton("advancedPickerButtonLabel",options.advancedPickerButtonLabel,this._onAdvancedColorsButtonClick),this._advancedColorsButton.addClass(this._CLASS.MORECOLORSBUTTON).append(arrowIcon.addClass("h-alignright")).prepend(icon).insertAfter(this._recentColorsPalette||this._paletteContainer),updatepicker&&this._createAdvPicker()}else options.advancedPicker=!1},_createAdvPicker:function(){var options=this.options,advancedPickerOptions={isFromPicker:!0,type:"inline",value:this.options.value,valueColorModel:this.options.valueColorModel,immediateCommit:!1,closeButton:!1,appendTo:!1,draggable:!1,animation:!1,palettes:!1,customAttributes:{tabindex:this.element.attr("tabindex")}};options.advancedPickerOptions&&(advancedPickerOptions=$.extend({},options.advancedPickerOptions,advancedPickerOptions)),void 0===advancedPickerOptions.hideCancelButton&&(advancedPickerOptions.hideCancelButton=!0),advancedPickerOptions.commandBar||(advancedPickerOptions.commandBar={leftColumn:{commands:["back"]},rightColumn:{commands:["cancel","OK"]},middleColumn:!1}),this.picker=$("<div>").appendTo(this.element.find("."+this._CLASS.COMMONCONTAINER)).zadvancedcolorpicker(advancedPickerOptions).removeClass(this._CLASS.CONTAINER).on("zadvancedcolorpickerok",this._onPickerChange.bind(this)).on("zadvancedcolorpicker"+this._EVENTS.ONMODECHANGE,this._onModeChange.bind(this)).on("zadvancedcolorpickerselect",this._onPickerSelect.bind(this)).on("zadvancedcolorpickercancel",this.close.bind(this)).on("zadvancedcolorpickerback",this._onBackClick.bind(this))},_onAdvancedColorsButtonClick:function(){this._advPickerVisible=!0,this._setElementWidthHeight(this._pickerWidth,this._pickerHeight),this.picker.css("visibility","visible"),this._container.css("margin-left","-"+this._basicPickerWd);var base=this;this.element.addClass("zcolorpicker--transition").off(this._ANIMATION.transitionEnd).on(this._ANIMATION.transitionEnd,function(origEvent){base._container.is(origEvent.target)&&(base.picker.zadvancedcolorpicker("setFocus"),base._container.css("visibility","hidden"),base.element.removeClass("zcolorpicker--transition"))}),this._reposition(this._pickerWidth,this._pickerHeight)},_onBackClick:function(origEvent,data){data.fromUI&&(this._showBasicPicker(origEvent.originalEvent,!0),this.setFocus())},_onPickerChange:function(origEvent,data){data.fromUI&&(this._setValue(data.rgb,origEvent.originalEvent),this.close(origEvent.originalEvent))},_onModeChange:function(origEvent,data){data.fromUI&&this._trigger("ONMODECHANGE",origEvent,data)},_onPickerSelect:function(origEvent,data){data.fromUI&&(this._trigger("ONSELECT",origEvent.originalEvent,data),this._lastAdvSelectValue=data.currentRGB)},_addToRecentColors:function(color,origEvent){if(this.options.otherUsedColors&&!this._noFill&&!this._defaultColor){var colorbox=this._getColorBox(color,this.paletteHolders);if(colorbox.length)return;this._trigger("ONBEFORERECENTCOLORADD",origEvent)&&(this._addColorsToPalette("otherusedcolors",color,this.options.otherUsedColorsHasLimit?0:void 0),this.options.otherUsedColorsList=this._getPaletteData(this._recentColorsPalette).colors,this.options.otherUsedColorsList.length&&"none"===this._recentColorsPalette[0].style.display&&(this._recentColorsPalette.show().removeClass("aria-hidden",!1),this._resetDimension()),this._trigger("ONRECENTCOLORADD",origEvent))}},_triggerChange:function(origEvent,data){(this._frominit||this._currentColor!==this._selectedInstance.getColor())&&(this._updateSelectedColor(),this._trigger("ONCHANGE",origEvent,data)),this._trigger("ONPICK",origEvent,data)},_triggerSelect:function(origEvent,fromUI,data){data=data||{},data.currentValue=this._colorInstance.getColor(this._colorMode),data.currentOpacity=this._colorInstance.getAlpha(),data.currentRGB=this._colorInstance.getColor(),this._trigger("ONSELECT",origEvent,data,fromUI)},_updateColorField:function(){this.options.colorField&&(this._previewBox&&this._previewBox.css("background-color",this._currentColor),!this._ignoreHexFieldUpdate&&this._colorCodeBox.val(this._noFill?"":this._colorInstance.getColor(this._displayColorMode,void 0,!1))),this._ignoreHexFieldUpdate=void 0},_selectColorbox:function(){return this.paletteHolders&&($("."+this._CLASS.COLORBOX,this.element).removeClass(this._CLASS.ACTIVE).attr("aria-selected",!1),this._selectedPan=[],!this._noFill)?(this._selectedPan=this._getColorBox(this._currentColor,this.paletteHolders).addClass(this._CLASS.ACTIVE).attr("aria-selected",!0),this._selectedPan):void 0},_setColorMode:function(color){var colorInstance=this._getClrInstance(color||this.options.value);this._colorMode=this._REGEX.colorMode.test(this.options.valueColorModel)?this.options.valueColorModel:colorInstance.format,this._displayColorMode=this._REGEX.colorMode.test(this.options.colorFieldOptions.colorMode)?this.options.colorFieldOptions.colorMode:this._colorMode},_updateUI:function(){this._updateColorField(),this._selectColorbox(),this._updateOpacitySlider(),this._updateOpacityField()},_setValue:function(color,origEvent,data){var colorInstance=this._getClrInstance("none"===color?"transparent":color);if(colorInstance.isValid()){var prevColor=this._currentColor;this._colorInstance=colorInstance,this._noFill=data&&data.noColorButtonClick||"none"===color,this._defaultColor=data&&data.defaultColorButtonClick,this._currentColor=colorInstance.getColor(),this._updateUI(),prevColor!==this._currentColor&&this._triggerSelect(origEvent,void 0,data),this._triggerChange(origEvent,data),this.options.advancedPicker&&this.picker.zadvancedcolorpicker("setValue",colorInstance.getObject())}},_updateSelectedColor:function(){this._selectedInstance=$.extend(!0,{},this._colorInstance),this.options.value=this._noFill?"transparent":this._colorInstance.getColor(this._colorMode,void 0,!1)},_trigger:function(customEvent,origEvent,data,fromUI){if(!this._frominit){origEvent=origEvent&&origEvent.preventDefault?origEvent:void 0,data=data||{},data.value=data.color=this.getValue(),data.rgb=this._colorInstance.getColor(),data.opacity=this._colorInstance.getAlpha(),data.colorData=this._colorInstance.getObject(this._colorMode),data.otherData={},data.otherData.colorPan=this._selectedPan;var selectedPan=this._selectedPan[0];return selectedPan&&selectedPan.getAttribute("data-shade")&&(data.otherData.isShade=!0,data.otherData.baseColor=selectedPan.getAttribute("data-base-color"),data.otherData.toneType=selectedPan.getAttribute("data-tone-type"),data.otherData.tonePercent=selectedPan.getAttribute("data-tone-percent")),this._dispatchEvent(customEvent,origEvent,data,void 0,!!origEvent||fromUI)}},_animate:function(element,animation,action,callback){if(animation&&"object"==typeof animation){var effect,className;"string"==typeof animation?effect=this._ANIMATION[animation][action]:animation.name?this._ANIMATION[animation.name]&&(effect=this._ANIMATION[animation.name][action]):animation[action]&&("string"==typeof animation[action]?effect=animation[action]:animation[action].name?effect=animation[action].name:animation[action].className&&(className=animation[action].className));var duration=animation.duration?animation.duration:animation[action]&&animation[action].duration?animation[action].duration:void 0;"object"==typeof effect?element.animate(effect,duration,callback):/^(fadeIn|fadeOut|slideDown|slideUp)$/.test(effect)?element[effect](duration,callback):"string"==typeof className?("open"===action&&element.css("display",""),element.removeClass(element.data("css-effect")).addClass(className).data("css-effect",className).off(this._ANIMATION.end).on(this._ANIMATION.end,function(){"close"===action&&element.hide(),element.removeClass(className).removeData("css-effect"),callback&&callback()})):(element.css("display","close"===action?"none":"block"),callback&&callback())}else element.css("display","close"===action?"none":"block"),callback&&callback()},setFocus:function(){if(this._trigger("ONBEFOREFOCUS")&&-1!==this.element.attr("tabindex")){var base=this;clearTimeout(this._focusTimer),this._focusTimer=setTimeout(function(){base.element[0].focus()},100)}},_onOpen:function(origEvent){this.options.closeOnBodyClick&&ZComponents.bindDocumentEvents({element:this.element,forElement:this.options.forElement,ctype:this.componentName,closeMethodName:"close"}),this.setFocus(origEvent),this.element.attr("aria-hidden",!1),this._bindDocumentEvents(),this._trigger("ONOPEN",origEvent)},_bindDocumentEvents:function(){var base=this;ZC.$document.on("keydown"+this._namespace,function(origEvent){var code=origEvent.keyCode;code===ZC.keyCode.ESCAPE&&base.close(origEvent)})},_unBindDocumentEvents:function(){ZC.$document.off(this._namespace)},_closeOnSelect:function(origEvent){!this.options.opacity&&this.options.closeOnSelect&&this.close(origEvent)},_showBasicPicker:function(origEvent,animate){if(this._advPickerVisible){if(this._advPickerVisible=!1,this.element.off(this._ANIMATION.transitionEnd),this.picker){this._lastAdvSelectValue&&this._lastAdvSelectValue!==this._currentColor&&(this.picker.zadvancedcolorpicker("setValue",this._currentColor),this._triggerSelect(origEvent,!0));var base=this;this.element.on(this._ANIMATION.transitionEnd,function(origEvent){base._container.is(origEvent.target)&&(base.picker.css("visibility","hidden"),base.element.removeClass("zcolorpicker--transition"))})}this._lastAdvSelectValue=!1,this._setElementWidthHeight(this._basicPickerWd,this._basicPickerHt),this._container.css({visibility:"visible","margin-left":0}),animate?(this.element.addClass("zcolorpicker--transition"),this._reposition(this._basicPickerWd,this._basicPickerHt)):this.picker.css("visibility","hidden")}},_reposition:function(elementWidth,elementHeight){var options=this._currentOpenedConfig;options&&!options.dragged&&this._floating&&this._setPosition(options,!0,elementWidth,elementHeight)},_onClose:function(origEvent){this._addToRecentColors(this._selectedInstance.getColor(),origEvent),this._showBasicPicker(origEvent),this._unBindDocumentEvents(),this.element.attr("aria-hidden",!0).removeClass("zcolorpicker--transition").find(".zcolorpicker__pointer").removeClass("zcolorpicker--pointertransition"),this._trigger("ONCLOSE",origEvent)},_getPaletteAt:function(indexes){var palettes=this.paletteHolders.not(this._defaultPalette).not(this._standardPalette),matchedPalettes=[];indexes=Array.isArray(indexes)?indexes:[indexes];return indexes.forEach(function(index){matchedPalettes.push(palettes[index])}),matchedPalettes},_updatePaletteOptions:function(){var palettes=this.paletteHolders.not(this._defaultPalette).not(this._standardPalette).not(this._recentColorsPalette);palettes.length&&(this.options.otherPalettes=this._getPaletteData(palettes.toArray()))},getValue:function(){return this.options.value},setValue:function(color,origEvent){this._setValue(color,origEvent),this._addToRecentColors(this._currentColor,origEvent)},open:function(options,origEvent){this._floating&&this._trigger("ONBEFOREOPEN",origEvent)&&(options=options||{},this._currentOpenedConfig={forElement:options.forElement||this.options.forElement,offset:options.offset||this.options.offset,margin:options.offset||this.options.margin,position:options.position||this.options.position},this._setPosition(this._currentOpenedConfig),this._animate(this.element,this.options.animation,"open",this._onOpen.bind(this,origEvent)))},_setPosition:function(options,reset,elementWidth,elementHeight){if(options.offset)return void this.element.css(options.offset);if(window.ZPosition){var recalc=!1,positionAlterable=reset?"fit":!1,target=$(options.forElement);if(!target.length)return;this.options.forElement=target;var isCenter="center"===options.position;this._REGEX.position.test(options.position)||(options.position="auto"),"auto"===options.position&&(options.position="callout"===this.options.displayType?"bottom":"bottom-left",positionAlterable="flipsideallfit");var arrowElement=this.element.find("."+this._CLASS.ARROW).show(),positionOptions={direction:options.position,showWithinTarget:isCenter,within:options.appendTo,positionAlterable:positionAlterable,arrow:{element:arrowElement,callback:this._arrowCallback.bind(this)}};if(positionAlterable&&!isCenter){if(reset)this.element.find(".zcolorpicker__pointer").addClass("zcolorpicker--pointertransition");else if(this.options.advancedPicker){recalc=!0;var elementHeight=parseFloat(this._basicPickerHt),elementWidth=parseFloat(this._basicPickerWd);this._pickerHeight&&(elementHeight=Math.max(elementHeight,parseFloat(this._pickerHeight)),elementWidth=Math.max(elementWidth,parseFloat(this._pickerWidth)))}elementWidth&&elementHeight&&(positionOptions.callbacks={beforeComputingPos:{dimensionModifier:function(targetDimesion,elementDimension){elementDimension.width=parseInt(elementWidth),elementDimension.height=parseInt(elementHeight)}}})}var positionObject=ZPosition.get(isCenter?window:target,this.element,positionOptions);if(positionObject&&positionObject.elementPosition){var elementPos=positionObject.elementPosition;if(options.margin){var top=+options.margin.top||0,left=+options.margin.left||0,dir=positionObject.direction.split("-");"top"===dir[0]?elementPos.top-=top:"bottom"===dir[0]?elementPos.top+=top:"right"===dir[0]?elementPos.left+=left:"left"===dir[0]&&(elementPos.left-=left)}this.element.css(elementPos),arrowElement.length&&arrowElement.css(positionObject.arrowPosition),options.position=positionObject.direction,recalc&&this._setPosition(options,!0,this._basicPickerWd,this._basicPickerHt)}}},close:function(origEvent){if("inline"!==this.options.type&&(this._currentOpenedConfig=void 0,clearTimeout(this._focusTimer),this.element.is(":visible"))){if(!this._trigger("ONBEFORECLOSE",origEvent))return;this._animate(this.element,this.options.animation,"close",this._onClose.bind(this,origEvent))}},addPalette:function(paletteData){this._addPalettes(paletteData),this._updatePaletteOptions()},insertPaletteBefore:function(paletteData,insertBeforeElement){this._addPalettes(paletteData,"before",insertBeforeElement),this._updatePaletteOptions()},insertPaletteAt:function(paletteData,index){this.insertPaletteBefore(paletteData,this._getPaletteAt(index)[0])},removePalette:function(palettes){this._removePalettes(palettes),this._updatePaletteOptions()},removePaletteAt:function(indexes){this.removePalette(this._getPaletteAt(indexes))},addColor:function(palette,color){this._addColorsToPalette(palette,color)},insertColorAt:function(palette,color,index){this._addColorsToPalette(palette,color,index)},removeColor:function(palette,color){this._removeColorsFromPalette(palette,color)},removeColorAt:function(palette,index){this._removeColorsFromPaletteAt(palette,index)},getPaletteColors:function(palette){return palette=this._getPalette(palette),palette?$.extend({},this._getPaletteData(palette).colors):void 0},setPaletteColors:function(palette,colors){if(palette=this._getPalette(palette)){var $palette=$(palette);$palette.is(this._standardPalette)||$palette.is(this._defaultPalette)||$palette.is(this._recentColorsPalette)||($palette.find("ul").remove(),this._getPaletteData(palette).colors=[],this._addColorsToPalette(palette,colors))}},destroy:function(){this.element.removeClass(this._CLASS.CONTAINER).off(this._namespace).removeData(this.componentName).empty()},setAttribute:function(optionName,value){value!==this.options[optionName]&&(value="string"==typeof value?value.trim():value,this._setAttribute(optionName,value),this._resetDimension())},_destroyPicker:function(){this.picker&&(this.picker.zadvancedcolorpicker("destroy"),this.picker.remove(),this.picker=void 0)},_isArrayEquals:function(arr1,arr2){if(arr1.length===arr2.length){for(var i=0;i<arr1.length;i++)if(arr1[i]!==arr2[i])return!1;return!0}},_isObjectEquals:function(object1,object2){var keys1=Object.keys(object1),keys2=Object.keys(object2);if(keys1.length===keys2.length){for(var i=0;i<keys1.length;i++)if(object1[keys1[i]]!==object2[keys1[i]])return!1;return!0}},_setAttribute:function(optionName,value){var options=this.options,defaultButtonOptions=/^(defaultValue|defaultColorButton|defaultColorButtonLabel)$/,noColorButtonOptions=/^(noColorButton|noColorButtonLabel|noColorIconClassName|noColorSVGIconId)$/,defaultPaletteOptions=/^(defaultPaletteHeading|defaultPaletteType|customPalette)$/,standardPaletteOptions=/^(standardColors|standardColorsHeading|standardColorsPalette)$/,colorFieldOptions=/^(colorField|colorFieldOptions)$/,opacityOptions=/^(opacity|opacitySlider|opacityFieldType)$/,paletteOptions=/^(paletteColumns|otherPalettes)$/,advancedPickerButtonOptions=/^(advancedPicker|advancedPickerIconClassName|advancedPickerSVGIconId|advancedPickerButtonLabel)$/,advancedPickerOptions=/^(advancedPickerOptions)$/,otherUsedColorsOptions=/^(otherUsedColors|otherUsedColorsHeading|otherUsedColorsList|otherUsedColorsHasLimit|otherUsedColorsLimit)$/,titleBarOptions=/^(title|isTitleHTMLEncoded|closeButton|closeIconClassName|closeSVGIconId)$/;if("value"===optionName)return void this.setValue(value);var oldValue=options[optionName];if(/^(colorFieldOptions|advancedPickerOptions|opacitySlider|animation|offset|margin|customPalette|keys)$/.test(optionName))if("object"==typeof value){if("object"==typeof oldValue&&(value=$.extend(!0,{},oldValue,value),this._isObjectEquals(value,oldValue)))return}else if(!/(animation)/.test(optionName))return;options[optionName]=value,"valueColorModel"===optionName?(this._setColorMode(),this.options.value=this._selectedInstance.getColor(this._colorMode,void 0,!1),this._updateColorField()):defaultButtonOptions.test(optionName)?(this._defaultButton&&(this._defaultButton.remove(),this._defaultButton=void 0),this._createDefaultButton()):noColorButtonOptions.test(optionName)?(this._noColorButton&&(this._noColorButton.remove(),this._noColorButton=void 0),this._createNoColorButton()):defaultPaletteOptions.test(optionName)?(this._removePalettes(this._defaultPalette,!0),this._defaultPalette=void 0,this._createDefaultPalette()):standardPaletteOptions.test(optionName)?(this._removePalettes(this._standardPalette,!0),this._standardPalette=void 0,this._createStandardPalette()):colorFieldOptions.test(optionName)?(this._container.find("."+this._CLASS.COLORFIELD).remove(),this._previewBox&&(this._previewBox.remove(),this._previewBox=void 0),this._colorCodeBox&&(this._colorCodeBox.remove(),this._colorCodeBox=void 0),this._setColorMode(),this._createColorField(),this._updateColorField(),options.opacity||options.colorField||!this._colorFieldPartition||(this._colorFieldPartition.remove(),this._colorFieldPartition=void 0)):opacityOptions.test(optionName)?(this._sliderContainer&&(this._sliderContainer.remove(),this._sliderContainer=void 0),this._createOpacitySection(),this._updateOpacitySlider(),this._updateOpacityField(),options.opacity||options.colorField||!this._colorFieldPartition||(this._colorFieldPartition.remove(),this._colorFieldPartition=void 0)):paletteOptions.test(optionName)?(this._paletteContainer.empty(),this._standardPalette=void 0,this._defaultPalette=void 0,this._createPalettes()):advancedPickerButtonOptions.test(optionName)?("advancedPicker"!==optionName||value||this._showBasicPicker(),this._advancedColorsButton&&(this._advancedColorsButton.remove(),this._advancedColorsButton=void 0),options.advancedPicker?this._createAdvColorsButton(!this.picker):this._destroyPicker()):advancedPickerOptions.test(optionName)?this.picker&&this.picker.zadvancedcolorpicker("setAttributes",value):otherUsedColorsOptions.test(optionName)?(this._removePalettes("otherusedcolors",!0),this._recentColorsPalette=void 0,this._createRecentColorsPalette()):titleBarOptions.test(optionName)?(this.element.data("zdraggable")&&this.element.zdraggable("destroy"),this._titleBar&&(this._titleBar.remove(),this._titleBar=void 0),this._constructTitleBar()):"draggable"===optionName?(this.element.data("zdraggable")&&this.element.zdraggable("destroy"),this._setDraggable()):"appendTo"===optionName?this._appendComponent():"className"===optionName?this.element.removeClass(oldValue).addClass(this._CLASS.CONTAINER+" "+("string"==typeof value?value:"")):"type"===optionName?"inline"===value?(this._floating=!1,this.element.show(),this._unBindDocumentEvents()):(this._floating=!0,this._bindDocumentEvents()):"displayType"===optionName&&(this.element.find("."+this._CLASS.ARROW).remove(),this._createArrow())
}};ZC.registerComponent("zcolorpicker",colorpickerPrototype),ZC.createColorPicker=function(options){if("object"==typeof options){var element=$("#"+options.id);if(element.length){if(element.data("zcolorpicker"))return element}else element=$("<div>").appendTo($(options.appendTo).length?options.appendTo:"body").attr({id:options.id}),options.customAttributes&&element.attr(options.customAttributes);return element.zcolorpicker(options),element}}}(ZComponents),function(ZC){var $=ZC.DOMUtil,advancedcolorpickerPrototype={options:$.extend({},$.zcolorpicker.prototype.options,{opacity:!0,slider:void 0,mapMarkerIconClassName:void 0,mapMarkerSVGIconId:void 0,colorPreview:!0,previousColorInPreview:!0,colorFields:!0,colorFieldsList:void 0,defaultColorField:"hex",currentColorField:void 0,opacityFieldType:"percent",palettes:!1,palettesList:void 0,paletteColumns:0,customColorLibraries:void 0,addIconClassName:void 0,addSVGIconId:void 0,removeIconClassName:void 0,removeSVGIconId:void 0,immediateCommit:!1,closeOnSelect:!1,commandBar:{leftColumn:void 0,centerColumn:void 0,rightColumn:{commands:["cancel","OK"]}},OKButtonClassName:void 0,cancelButtonClassName:void 0,hideCancelButton:!1,backButton:!0,backButtonClassName:void 0,backButtonIconClassName:void 0,backButtonSVGIconId:void 0,labels:{closeButtonLabel:"Close",colorFieldLabel:"Color Field",addButtonLabel:"Add Button",HSVLabel:"HSV",RGBLabel:"RGB",HSLLabel:"HSL",CMYKLabel:"CMYK",HEXLabel:"HEX",opacityFieldLabel:"A",hexFieldLabel:"HEX",hueFieldLabel:"H",saturationFieldLabel:"S",valueFieldLabel:"V",lightnessFieldLabel:"L",redFieldLabel:"R",greenFieldLabel:"G",blueFieldLabel:"B",cyanFieldLabel:"C",magentaFieldLabel:"M",yellowFieldLabel:"Y",keyFieldLabel:"K",OKButtonLabel:"OK",cancelButtonLabel:"Cancel",backButtonLabel:"Back"},boxSelectionTypeDefaultColorModel:"HSV",boxSpectrumHSVColorModel:{xAxis:"saturation",yAxis:"value"},boxSpectrumHSLColorModel:{xAxis:"hue",yAxis:"saturation"}}),_CLASS:{CONTAINER:"zcolorpicker zcolorpicker--advanced",SWATCH:"zcolorpicker__maparea",PICKERPOINTER:"zcolorpicker__mapmarker",COLORMODECONTAINER:"zcolorpicker__colormodecontainer",PREVIEWBOX:"zcolorpicker__previewbox",INNERPREVIEW:"zcolorpicker__dynamiccolor",NEWPREVIEW:"zcolorpicker__newcolorpreview",PREVIOUSPREVIEW:"zcolorpicker__currentcolorpreview",SLIDERCONTAINER:"zcolorpicker__slidercontainer",SLIDER:"zslider",BARSLIDER:"zcolorpicker__slider",OPACITYSLIDER:"zcolorpicker__opacityslider",COLORFIELDCONTAINER:"zcolorpicker__colorfieldcontainer",COLORFIELD:"zcolorpicker__colorfield",SMALLCOLORFIELD:"zcolorpicker__othercolormodefield",SMALLFIELDLABELCONTAINER:"zcolorpicker__othercolormodefieldlabelcontainer",SMALLFIELDLABEL:"zcolorpicker__othercolormodefieldlabel",HEXCOLORFIELD:"zcolorpicker__hexcolorfield",HEXFIELDLABELCONTAINER:"zcolorpicker__hexcolorfieldlabelcontainer",HEXFIELDLABEL:"zcolorpicker__hexcolorfieldlabel",CUSTOMISABLEPALETTE:"zcolorpicker__palette-customisable",ADDBUTTON:"zcolorpicker__addcolor",REMOVEBUTTON:"zcolorpicker__deletecolor",ADDCOLORICON:"zcolorpicker__addcoloricon",COMMANDBAR:"zcolorpicker__commandbar",COMMANDBAR_L:"zcolorpicker__commandbaractionsleft",COMMANDBAR_R:"zcolorpicker__commandbaractionsright",COMMANDBAR_C:"zcolorpicker__commandbaractionscenter"},_EVENTS:{ONCHANGE:"change",ONSELECT:"select",ONPICK:"pick",ONDRAGSTART:"dragstart",ONDRAGSTOP:"dragstop",ONDRAG:"drag",CANCEL:"cancel",BACK:"back",OK:"ok",ONBEFORECOLORPANADD:"beforecolorpanadd",ONCOLORPANADD:"colorpanadd",ONBEFORECOLORPANREMOVE:"beforecolorpanremove",ONCOLORPANREMOVE:"colorpanremove",ONMODECHANGE:"colorfieldlistchange"},_colorFieldsList:["hex","rgb","hsv","hsl","cmyk"],_TEMPLATES:{addColorIcon:'<svg viewBox="0 0 16 16"> <polygon points="13,7.3 8.7,7.3 8.7,3 7.3,3 7.3,7.3 3,7.3 3,8.7 7.3,8.7 7.3,13 8.7,13 8.7,8.7 13,8.7 "></polygon> </svg>'},_REGEX:{mode:/^(hue|saturation|value|red|green|blue)$/},_MODEPROPS:{hsv:["h","s","v"],rgb:["r","g","b"],hex:["hex"],hsl:["h","s","l"],cmyk:["c","m","y","k"],a:["a"]},_PROP_EXPANSION:{h:"hue",s:"saturation",v:"value",l:"lightness",r:"red",g:"green",b:"blue",a:"opacity",hex:"hex",c:"cyan",m:"magenta",y:"yellow",k:"key"},_bindEvents:function(){this._super()},_resetDimension:function(){},_setWidth:function(){if(!this.element[0].style.width){var width=this.options.width||this._swatch[0].offsetWidth;width&&(this.element[0].style.width=isNaN(width)?width:width+"px")}},_onKeyPress:function(origEvent){var code=origEvent.keyCode;if(code===ZC.keyCode.ENTER){var activeElement=document.activeElement;if("BUTTON"===activeElement.tagName)return;{$(activeElement)}if("INPUT"===activeElement.tagName)return void this._onOkButtonClick(origEvent);"LI"===activeElement.tagName&&activeElement.click()}},_onClick:function(origEvent){var target=$(origEvent.target).closest("."+this._CLASS.COLORBOX);target.length&&this._setValue(target[0].style.backgroundColor,origEvent)},_setColorMode:function(color){var colorInstance=this._getClrInstance(color||this.options.value);this._colorMode=this._REGEX.colorMode.test(this.options.valueColorModel)?this.options.valueColorModel:colorInstance.format},_constructMainBody:function(){this._container=this.element,this._configurePickerMethods(),this._constructPaletteArea(),this.options.colorPreview&&this._createPreview(),this.options.colorFields&&this._createColorField(),this.options.palettes&&this._createPalettes(),this.options.immediateCommit||this._createCommandBar(),this._setWidth()},_createCommandBar:function(){var options=this.options,handlers={OK:this._onOkButtonClick,cancel:this._onCancelButtonClick,back:this._onBackButtonClick},base=this;this._commandBarContainer=$("<div>",{"class":this._CLASS.COMMANDBAR});var commandBar=options.commandBar||$.zadvancedcolorpicker.prototype.options.commandBar,buttonList=[],classNames=[this._CLASS.COMMANDBAR_L,this._CLASS.COMMANDBAR_C,this._CLASS.COMMANDBAR_R];["leftColumn","centerColumn","rightColumn"].forEach(function(column,i){if(commandBar[column]){var buttonContainer,commands=commandBar[column].commands;commands.forEach(function(command){if(/(OK|back|cancel)/.test(command)&&-1===buttonList.indexOf(command)&&("back"!==command||options.isFromPicker)){var buttonClass="zbutton zbutton--small  zactionbutton--"+command;"OK"===command&&(buttonClass+=" zbutton--primary"),base.options[command+"ButtonClassName"]&&(buttonClass+=" "+base.options[command+"ButtonClassName"]);var label=options[command+"ButtonLabel"]||base._localize(command+"ButtonLabel"),button=$('<button  type=button role=button aria-label="'+label+'" class="'+buttonClass+'"> <span class="zbutton__text">'+label+"</span> </button>").on("click"+base._namespace,handlers[command].bind(base));base._handleFocus(button),buttonContainer||(buttonContainer=$("<div>",{"class":classNames[i]})),buttonContainer.append(button).appendTo(base._commandBarContainer),buttonList.push(command)}})}}),this._commandBarContainer.appendTo(this._container),this._commandButtonsDisplay()},_commandButtonsDisplay:function(){this.options.hideCancelButton&&this._commandBarContainer&&this._commandBarContainer.find(".zactionbutton--cancel").hide()},_onOkButtonClick:function(origEvent){this._triggerChange(origEvent),this._trigger("OK",origEvent),this.close(origEvent)},_onCancelButtonClick:function(origEvent){this._revertColor(origEvent),this._trigger("CANCEL",origEvent),this.close(origEvent)},_onBackButtonClick:function(origEvent){this._trigger("BACK",origEvent)},_revertColor:function(origEvent){this._selectedInstance.getColor()!==this._currentColor&&this._setValue(this._selectedInstance.getObject(),origEvent)},_createPalettes:function(){this._addPalettes(this.options.palettesList),this._addCustomLibraries(this.options.customColorLibraries)},_addPalettes:function(palettesList,action,relElement){this.options.palettes&&(this._paletteContainer||(this._paletteContainer=$("<div>").insertAfter(this._colorFieldPartition||this._sliderPartition)),this._super(palettesList,action,relElement))},_addCustomLibraries:function(palettes,action,relElement){if(this.options.palettes&&palettes){var base=this;action&&relElement||(action="append",this._customLibrariesContainer||(this._customLibrariesContainer=$("<div>").insertAfter(this._paletteContainer||this._colorFieldPartition||this._sliderPartition)),relElement=this._customLibrariesContainer),palettes=Array.isArray(palettes)?palettes:[palettes],"after"===action&&(palettes=palettes.reverse()),palettes.forEach(function(palette){base._addPalette(palette,action,relElement,!0)})}},_constructPaletteArea:function(){this._createSwatch(),this._sliderPartition=$("<div>",{"class":this._CLASS.COLORMODECONTAINER}).appendTo(this.element),this._sliderContainer=$("<div>",{"class":this._CLASS.SLIDERCONTAINER}).appendTo(this._sliderPartition),this._createBar(),this.options.opacity&&this._createOpacitySlider()},_createOpacitySlider:function(){this._super(this.options.slider),this._opacityBar.addClass(this._CLASS.OPACITYSLIDER).off(this._namespace).on("mousedown"+this._namespace,this._onMouseDown.bind(this,this._opacityBar,this._opacityPicker))},_setInitial:function(){this._super(),this.options.colorFields&&this._switchColorField(this.options.defaultColorField),this._updateSelectedColor(),this._updatePreviousPreview()},_createSwatch:function(){this._swatch=$('<div class="'+this._CLASS.SWATCH+'"> <canvas></canvas> </div>').appendTo(this.element),this._swatchPicker=this.options.mapMarkerIconClassName||this.options.mapMarkerSVGIconId?this._createIcon(this.options.mapMarkerIconClassName,this.options.mapMarkerSVGIconId):$('<span class="'+this._CLASS.PICKERPOINTER+'"></span>'),this._swatch.append(this._swatchPicker),this._swatchCanvas=this._swatch[0].children[0],this._swatchContext=this._swatchCanvas.getContext("2d"),this._swatch.on("mousedown"+this._namespace,this._onMouseDown.bind(this,this._swatch,this._swatchPicker))},_createBar:function(){var response=this._createSlider(this.options.slider);this._bar=response.slider.prependTo(this._sliderContainer).addClass(this._CLASS.BARSLIDER),this._barPicker=response.thumb,this._barContext=response.canvasContext,this._bar.on("mousedown"+this._namespace,this._onMouseDown.bind(this,this._bar,this._barPicker))},_createPreview:function(){var previewBox=$("<div>",{"class":this._CLASS.PREVIEWBOX}),newPreview=$('<div class="'+this._CLASS.NEWPREVIEW+" "+this._CLASS.TRANSPARENTBG+'"> <span class="'+this._CLASS.INNERPREVIEW+'"></span> </div>').appendTo(previewBox);if(this._previewBox=newPreview.find("."+this._CLASS.INNERPREVIEW),this.options.previousColorInPreview){var previousPreview=$('<div class="'+this._CLASS.PREVIOUSPREVIEW+" "+this._CLASS.TRANSPARENTBG+'"> <span class="'+this._CLASS.INNERPREVIEW+'"></span> </div>').appendTo(previewBox);this._previousPreview=previousPreview.find("."+this._CLASS.INNERPREVIEW).on("click",this._previousPreviewClick.bind(this))}this._sliderPartition.prepend(previewBox)},_previousPreviewClick:function(origEvent){this._setValue(origEvent.target.style.backgroundColor,origEvent)},_updatePreview:function(){this.options.colorPreview&&(this._previewBox[0].style.backgroundColor=this._currentColor)},_hueColors:["rgba(255, 0, 0, 1)","rgba(255, 255, 0, 1)","rgba(0, 255, 0, 1)","rgba(0, 255, 255, 1)","rgba(0, 0, 255, 1)","rgba(255, 0, 255, 1)","rgba(255, 0, 0, 1)"],_setHueStops:function(gradient){this._setGradientColors(gradient,this._hueColors)},_fillCanvas:function(context,gradient){context.fillStyle=gradient,context.fill()},_clearCanvas:function(){var rectContext=this._swatchContext,barContext=this._barContext;rectContext.clearRect(0,0,rectContext.canvas.width,rectContext.canvas.height),barContext.clearRect(0,0,barContext.canvas.width,barContext.canvas.height),rectContext.rect(0,0,rectContext.canvas.width,rectContext.canvas.height),barContext.rect(0,0,barContext.canvas.width,barContext.canvas.height)},_configurePickerMethods:function(){"HSL"===this.options.boxSelectionTypeDefaultColorModel?(this._paintPicker=this._HSLUtils.paintPicker.bind(this),this._axisProps=this._HSLUtils.getXYProps(this.options.boxSpectrumHSLColorModel)):(this._paintPicker=this._HSVUtils.paintPicker.bind(this),this._axisProps=this._HSVUtils.getXYProps(this.options.boxSpectrumHSVColorModel))},_HSLUtils:{fill:function(y,z,m,rgb){var context=z===m?this._barContext:this._swatchContext,vertical=z===m&&"vertical"===this.options.barOrientation||y===m,gradient=this._createGradient(context,vertical);switch(m){case"hue":this._setHueStops(gradient);break;case"saturation":this._setGradientColors(gradient,["rgba(128,128,128,1)",rgb||"rgba(128,128,128,0)"]);break;case"lightness":gradient.addColorStop(0,"rgb(0,0,0)"),rgb?gradient.addColorStop(.5,rgb):(gradient.addColorStop(.5,"rgba(0,0,0,0)"),gradient.addColorStop(.5,"rgba(255,255,255,0)")),gradient.addColorStop(1,"rgb(255,255,255)")}this._fillCanvas(context,gradient)},getLightnessLayer:function(lightness){return 50>lightness?"rgba(0, 0, 0, "+(1-lightness/50)+")":lightness>50?"rgba(255, 255, 255, "+(lightness-50)/50+")":void 0},paintPicker:function(x,y,z){this._clearCanvas();var hsl=this._getColorFromCoords(),rectContext=this._swatchContext,barContext=this._barContext,fill=this._HSLUtils.fill.bind(this,y,z),getLightnessLayer=this._HSLUtils.getLightnessLayer.bind(this,parseFloat(hsl.l));switch(z){case"lightness":fill("hue"),fill("saturation"),fill("lightness",this._getClrInstance({h:hsl.h,s:hsl.s,l:"50%"}).getColor());break;case"hue":this._fillCanvas(rectContext,this._getClrInstance({h:hsl.h,s:"100%",l:"50%"}).getColor()),fill("saturation"),fill("lightness"),fill("hue");break;case"saturation":fill("hue"),fill("lightness"),fill("saturation",this._getClrInstance({h:hsl.h,s:"100%",l:"50%"}).getColor());var lightnessLayer=getLightnessLayer();lightnessLayer&&this._fillCanvas(barContext,lightnessLayer)}},getXYProps:function(XYAxis){var x,y,z;switch(XYAxis.xAxis+"-"+XYAxis.yAxis){case"saturation-hue":x="saturation",y="hue",z="lightness";break;case"hue-lightness":x="hue",y="lightness",z="saturation";break;case"lightness-hue":x="lightness",y="hue",z="saturation";break;case"lightness-saturation":x="lightness",y="saturation",z="hue";break;case"saturation-lightness":x="saturation",y="lightness",z="hue";break;default:x="hue",y="saturation",z="lightness"}return{x:x,y:y,z:z}}},_HSVUtils:{fill:function(y,z,m,rgb){var context=z===m?this._barContext:this._swatchContext,vertical=z===m&&"vertical"===this.options.barOrientation||y===m,gradient=this._createGradient(context,vertical);switch(m){case"hue":this._setHueStops(gradient);break;case"saturation":this._setGradientColors(gradient,["rgba(255,255,255,1)",rgb||"rgba(255,255,255,0)"]);break;case"value":this._setGradientColors(gradient,["rgba(0,0,0,1)",rgb||"rgba(0,0,0,0)"])}this._fillCanvas(context,gradient)},getValueLayer:function(value){return"rgba(0, 0, 0, "+(1-value/100)+")"},paintPicker:function(x,y,z){this._clearCanvas();var hsv=this._colorInstance.getObject("hsv"),rectContext=this._swatchContext,barContext=this._barContext,fill=(this._axisProps,this._HSVUtils.fill.bind(this,y,z)),getValueLayer=this._HSVUtils.getValueLayer.bind(this,parseFloat(hsv.v));switch(z){case"value":fill("hue"),fill("saturation"),this._fillCanvas(rectContext,getValueLayer()),fill("value",this._getClrInstance({h:hsv.h,s:hsv.s,v:"100%"}).getColor());break;case"hue":this._fillCanvas(rectContext,this._getClrInstance({h:hsv.h,s:"100%",v:"100%"}).getColor()),fill("saturation"),fill("value"),fill("hue");break;case"saturation":fill("hue"),this._fillCanvas(rectContext,"rgba(255,255,255,"+(1-parseFloat(hsv.s)/100)+")"),fill("value"),fill("saturation",this._getClrInstance({h:hsv.h,s:"100%",v:"100%"}).getColor()),this._fillCanvas(barContext,getValueLayer())}},getXYProps:function(XYAxis){var x,y,z;switch(XYAxis.xAxis+"-"+XYAxis.yAxis){case"hue-saturation":x="hue",y="saturation",z="value";break;case"saturation-hue":x="saturation",y="hue",z="value";break;case"hue-value":x="hue",y="value",z="saturation";break;case"value-hue":x="value",y="hue",z="saturation";break;case"value-saturation":x="value",y="saturation",z="hue";break;default:x="saturation",y="value",z="hue"}return{x:x,y:y,z:z}}},_createGradient:function(context,vertical){return vertical?context.createLinearGradient(0,context.canvas.height,0,0):context.createLinearGradient(0,0,context.canvas.width,0)},_paintOpacity:function(){var context=this._opacityContext;context.clearRect(0,0,context.canvas.width,context.canvas.height),context.rect(0,0,context.canvas.width,context.canvas.height);var gradient=this._createGradient(context,"vertical"===this.options.barOrientation),rgbObj=this._colorInstance.getObject();this._setGradientColors(gradient,["rgba("+rgbObj.r+","+rgbObj.g+","+rgbObj.b+", 0)","rgb("+rgbObj.r+","+rgbObj.g+","+rgbObj.b+")"]),this._fillCanvas(context,gradient)},_getCoords:function(){var round=function(percent){return percent?Math.round(100*parseFloat(percent))/100:0},o=this.options,isVertical="vertical"===o.barOrientation;return{x:round(this._swatchPicker[0].style.left),y:100-round(this._swatchPicker[0].style.top),z:isVertical?100-round(this._barPicker[0].style.top):round(this._barPicker[0].style.left),o:o.opacity?isVertical?100-round(this._opacityPicker[0].style.top):round(this._opacityPicker[0].style.left):100}},_getCoordsFromColor:function(){var color=this._colorInstance.getPercentageObject(this.options.boxSelectionTypeDefaultColorModel.toLowerCase());return{x:parseFloat(color[this._axisProps.x[0]]),y:parseFloat(color[this._axisProps.y[0]]),z:parseFloat(color[this._axisProps.z[0]]),o:parseFloat(color.a)}},_updatePickerPosition:function(){if(!this._ignorePickerUpdate){var coords=this._getCoordsFromColor();return this._swatchPicker[0].style.left=coords.x+"%",this._swatchPicker[0].style.top=100-coords.y+"%","vertical"!==this.options.barOrientation?(this._barPicker[0].style.left=coords.z+"%",this.options.opacity&&(this._opacityPicker[0].style.left=coords.o+"%")):(this._barPicker[0].style.top=100-coords.z+"%",this.options.opacity&&(this._opacityPicker[0].style.top=100-coords.o+"%")),coords}},_addPalette:function(paletteData,insertBeforeElement,insertAfterElement,customisable){customisable&&(paletteData.hasTones=!1);var paletteHolder=this._super.apply(this,arguments);if(customisable){paletteHolder.addClass(this._CLASS.CUSTOMISABLEPALETTE).on("keydown"+this._namespace,this._onDeleteKeyPress.bind(this,paletteHolder));var expandButton=$('<button role=button aria-label="'+this._localize("addButtonLabel")+'">').append(this._createIcon(this.options.addIconClassName,this.options.addSVGIconId,this._TEMPLATES.addColorIcon).addClass(this._CLASS.ADDCOLORICON).removeClass(this._CLASS.ICON)),addColorIcon=$("<li>",{"class":this._CLASS.ADDBUTTON}).append(expandButton);addColorIcon.on("click",this._onAddIconClick.bind(this,addColorIcon,paletteHolder));var beforeElement=paletteHolder.find("li:last");beforeElement.length?addColorIcon.insertAfter(beforeElement):paletteHolder.find("ul:last").append(addColorIcon),this._repositionColorsInPalette(paletteHolder[0])}return paletteHolder},_onDeleteKeyPress:function(paletteHolder,origEvent){if(origEvent.keyCode===ZC.keyCode.DELETE){var colorbox=$(origEvent.target).closest("li."+this._CLASS.COLORBOX+":not([data-shade=true])");if(colorbox.length&&this._trigger("ONBEFORECOLORPANREMOVE",origEvent,{colorpan:colorbox[0],colorpanData:this._getColorPanData(colorbox)})){var nextFocussed=colorbox.next();nextFocussed=nextFocussed.is("."+this._CLASS.ADDBUTTON)?nextFocussed.find("button"):nextFocussed,this._removeColorBoxes(paletteHolder,colorbox[0]),nextFocussed.focus(),this._trigger("ONCOLORPANREMOVE",origEvent,{colorpan:colorbox[0],colorpanData:this._getColorPanData(colorbox)})}}},_onAddIconClick:function(addColorIcon,paletteHolder,origEvent){var paletteData=this._getPaletteData(paletteHolder);this._trigger("ONBEFORECOLORPANADD",origEvent,{paletteName:paletteData.name})&&(this._addColorsToPalette(paletteHolder,this._colorInstance.getObject(),void 0,addColorIcon),this._selectColorbox(),addColorIcon.find("button").focus(),this._trigger("ONCOLORPANADD",origEvent,{paletteName:paletteData.name}))},_createColorField:function(){this._colorFieldSelectbox=void 0,this._colorFieldPartition=$("<div>",{"class":this._CLASS.COLORFIELDCONTAINER}).insertAfter(this._sliderPartition);var base=this,supportedColorFieldModes=/^(hex|rgb|cmyk|hex|hsv|hsl)$/,defaultMode=this.options.defaultColorField,colorFieldsList=this.options.colorFieldsList||this._colorFieldsList,newLists=[];if(Array.isArray(colorFieldsList)&&colorFieldsList.forEach(function(mode){supportedColorFieldModes.test(mode)&&-1===newLists.indexOf(mode)&&newLists.push(mode)}),newLists.length){if(-1===newLists.indexOf(defaultMode)&&(defaultMode=newLists[0]),newLists.length>1){var selectboxHTML="";if(newLists.forEach(function(mode){selectboxHTML+="<option value="+mode+">"+base._localize(mode.toUpperCase()+"Label")+"</option>"}),""!==selectboxHTML){selectboxHTML="<select>"+selectboxHTML+"</select>",this._colorFieldSelectbox=$(selectboxHTML).appendTo(this._colorFieldPartition).zselectbox({selectedValue:defaultMode}).on("zselectboxchange",function(origEvent,data){base._switchColorField.call(base,data.selectedValue,origEvent)}).one("zselectboxbeforedropdownlistopen",function(origEvent,data){base._menu=data.dropdownList.on("click",function(){return!1})});var componentElement=this._colorFieldSelectbox.zselectbox("getElement");componentElement.removeAttribute("style")}}}else supportedColorFieldModes.test(defaultMode)||(defaultMode="hex"),newLists.push(defaultMode);this.options.colorFieldsList=Array.prototype.slice.call(newLists),this.options.defaultColorField=defaultMode,this.options.opacity&&newLists.push("a"),newLists.forEach(function(mode){base._MODEPROPS[mode].forEach(function(prop){base._createAndBindInput(prop,base._colorFieldPartition,mode)})}),this._switchableInputs=this._colorFieldPartition.find(".zinputfield"),this._valueChangableInputs=this._colorFieldPartition.find(">input, .zcolormode--hex input"),this._labelContainers={},newLists.forEach(function(mode){var labelContainer,opacity=base.options.opacity;"hex"===mode?(labelContainer=$("<div class='"+base._CLASS.HEXFIELDLABELCONTAINER+"'>"),labelContainer.append($("<label class='"+base._CLASS.HEXFIELDLABEL+"'>"+base._localize(base._PROP_EXPANSION[mode]+"FieldLabel")+"</label>"))):(labelContainer=$("<div class='"+base._CLASS.SMALLFIELDLABELCONTAINER+"'>"),base._MODEPROPS[mode].forEach(function(prop){labelContainer.append($("<label class='"+base._CLASS.SMALLFIELDLABEL+"'>"+base._localize(base._PROP_EXPANSION[prop]+"FieldLabel")+"</label>"))})),"cmyk"!==mode&&(opacity||base._colorFieldSelectbox)&&labelContainer.append($("<label class='"+base._CLASS.SMALLFIELDLABEL+"'>"+(opacity?base._localize("opacityFieldLabel"):"")+"</label>")),labelContainer.appendTo(base._colorFieldPartition),base._labelContainers[mode]=labelContainer}),this._colorFieldSelectbox||this._colorFieldPartition.addClass("h-aligncenter")},_switchColorField:function(mode,origEvent){mode=mode||this.options.defaultColorField,this._colorFieldSelectbox&&!origEvent&&this._colorFieldSelectbox.zselectbox("setAttribute","selectedValue",mode);var inputs=this._switchableInputs.hide().attr("aria-hidden",!0),selector=".zcolormode--"+mode;"cmyk"!==mode&&(selector+=",.zcolormode--a"),inputs.filter(selector).css("display","").attr("aria-hidden",!1),this._colorFieldPartition.find("."+this._CLASS.SMALLFIELDLABELCONTAINER+",."+this._CLASS.HEXFIELDLABELCONTAINER).hide().attr("aria-hidden",!0),this._labelContainers[mode]&&this._labelContainers[mode].show(),this.options.currentColorField!==mode&&(this.options.currentColorField=mode,this._trigger("ONMODECHANGE",origEvent,{currentColorField:mode}))},_inputFieldHTMLs:function(){var percentInput="<input type=measurement min=0 data-suffix='%' max=100>",rgbInput="<input type=number min=0 max=255>";return{hex:"<div class='zinputfield zcolormode--hex zcolorpicker__colorfield'> <input maxlength=7 class='zinputfield__textbox zcolormode--hex'> </div>",h:"<input type=number min=0 max=359>",s:percentInput,l:percentInput,v:percentInput,r:rgbInput,g:rgbInput,b:rgbInput,c:percentInput,m:percentInput,y:percentInput,k:percentInput,a:percentInput}}(),_createAndBindInput:function(prop,container,mode){var input,component,label=this._localize(this._PROP_EXPANSION[prop]+"FieldLabel"),changeEvent="change"+this._namespace+" input"+this._namespace;"hex"!==prop?(input="a"===prop&&"decimal"===this.options.opacityFieldType?"<input data-decimal-places=2 min=0 max=1 step=0.01>":this._inputFieldHTMLs[prop],input=$(input).addClass("zcolormode--"+mode).appendTo(container),changeEvent="znumberfieldchange znumberfieldspin znumberfieldinput znumberfieldspinend",input.znumberfield({className:this._CLASS.SMALLCOLORFIELD+" "+this._CLASS.COLORFIELD,spinButtons:"none",clearButton:"none",bindedSpinAndChange:!0,width:"a"===prop?"52px":"45px"}),component=input.znumberfield("getElement"),component.addClass("zcolormode--"+mode).removeAttr("style"),component.find("input").removeAttr("style").attr("aria-label",label)):(component=$(this._inputFieldHTMLs[prop]).appendTo(container),input=component.find("input").attr("aria-label",label).on("focus"+this._namespace,function(){component.addClass("has-focus")}).on("blur"+this._namespace,function(){component.removeClass("has-focus")}),this.options.opacity&&component.addClass(this._CLASS.HEXCOLORFIELD)),input.on(changeEvent,this._colorFieldChangeHandler.bind(this,prop,mode))},_colorFieldChangeHandler:function(prop,mode,origEvent,data){var color,value=data?data.value:origEvent.target.value;if("a"===mode)color=this._colorInstance.getObject(),color.a="decimal"===this.options.opacityFieldType?value:value/100;else if("hex"===mode)color=value;else{color=this._colorInstance.getObject(mode);var modeInputs=this._valueChangableInputs.filter(".zcolormode--"+mode);modeInputs.length&&this._MODEPROPS[mode].forEach(function(prop1,i){var propVal=$(modeInputs[i]).znumberfield("getValue");/(s|v|l|c|m|y|k)/.test(prop1)&&(propVal+="%"),color[prop1]=propVal})}var colorInstance=this._getClrInstance(color);colorInstance.isValid()&&("hex"===mode&&(colorInstance.setAlpha(this._colorInstance.getAlpha()),color=colorInstance.getColor()),this._activeColorFieldMode=mode,this._setValue(color,origEvent),this._activeColorFieldMode=!1)},_updateUI:function(){this._updatePreview(),this._updateColorFields(),this._updatePickerPosition(),this._selectColorbox(),this._updatePaletteColor()},_trigger:function(customEvent,origEvent,data){return this._frominit?void 0:(data=data||{},data.currentValue=this._colorInstance.getColor(this._colorMode),data.currentOpacity=this._colorInstance.getAlpha(),data.currentRGB=this._colorInstance.getColor(),this._super.call(this,customEvent,origEvent,data))},_onMouseDown:function(container,picker,origEvent){3!==origEvent.which&&(this._activeContainer={picker:picker,offset:container.offset(),height:container.height(),width:container.width(),isOpacity:container.is(this._opacityBar),isSwatch:container.is(this._swatch)},this._model=this.options.boxSelectionTypeDefaultColorModel.toLowerCase(),this._onPickerDragged(origEvent),this._trigger("ONDRAGSTART",origEvent),ZComponents.$document.off("mousemove"+this._namespace+" mouseup"+this._namespace).on("mousemove"+this._namespace,this._onMouseMove.bind(this)).on("mouseup"+this._namespace,this._onMouseUp.bind(this)),this.setFocus(),origEvent.preventDefault())},_onMouseMove:function(origEvent){return this._onPickerDragged(origEvent),this._trigger("ONDRAG",origEvent),!1},_onMouseUp:function(origEvent){this._onPickerDragged(origEvent),ZComponents.$document.off("mousemove"+this._namespace+" mouseup"+this._namespace),this._trigger("ONDRAGSTOP",origEvent)},_onPickerDragged:function(origEvent){origEvent.preventDefault();var cursorPos,totalPixel,container=this._activeContainer,isVertical="vertical"===this.options.barOrientation;cursorPos=origEvent.pageX-container.offset.left,totalPixel=container.width;var leftpercent=100*this._limit(cursorPos/totalPixel,0,1)+"%";cursorPos=origEvent.pageY-container.offset.top,totalPixel=container.height;var toppercent=100*this._limit(cursorPos/totalPixel,0,1)+"%";container.isSwatch?(container.picker[0].style.top=toppercent,container.picker[0].style.left=leftpercent):isVertical?container.picker[0].style.top=toppercent:container.picker[0].style.left=leftpercent;var updateValue=function(){var colorObj=this._getColorFromCoords();if(container.isOpacity){var a=colorObj.a;colorObj=this._colorInstance.getObject(this._model),colorObj.a=a}this._ignorePickerUpdate=!0,this._setValue(colorObj,origEvent),this._ignorePickerUpdate=!1};clearTimeout(this._updateTimer),!this._startTimer||this._delay<=0?(this._startTimer=(new Date).getTime(),this._delay=200):this._delay-=(new Date).getTime()-this._startTimer,this._delay<=0||"mouseup"===origEvent.type?(updateValue.call(this),this._startTimer=void 0):this._updateTimer=setTimeout(updateValue.bind(this),this._delay)},_getColorFromCoords:function(){var axisProps=this._axisProps,coords=this._getCoords(),color={};return color[axisProps.x[0]]=coords.x+"%",color[axisProps.y[0]]=coords.y+"%",color[axisProps.z[0]]=coords.z+"%",color.a=coords.o+"%",color},_updateColorFields:function(colorInstance){if(this.options.colorFields){var base=this;colorInstance=colorInstance||this._colorInstance;var getInputs=function(mode){return base._valueChangableInputs.filter(".zcolormode--"+mode)};if("a"!==this._activeColorFieldMode){if(["hsv","rgb","hsl","cmyk"].forEach(function(mode){if(base._activeColorFieldMode!==mode){var modeInputs=getInputs(mode);if(modeInputs.length){var color=colorInstance.getObject(mode);base._MODEPROPS[mode].forEach(function(prop,i){$(modeInputs[i]).znumberfield("setValue",parseInt(color[prop]))})}}}),"hex"!==this._activeColorFieldMode){var hexInput=getInputs("hex");hexInput.length&&hexInput.val(colorInstance.getColor("hex",void 0,!1))}if(!this._activeColorFieldMode){var alphaInput=getInputs("a");if(alphaInput.length){var alpha=colorInstance.getAlpha();alphaInput.znumberfield("setValue","decimal"===this.options.opacityFieldType?alpha:Math.round(100*alpha))}}}}},_triggerSelect:function(origEvent,prevColor,fromuser){prevColor!==this._currentColor&&this._trigger("ONSELECT",origEvent),!this.options.immediateCommit&&!fromuser||origEvent&&/^(mousedown|mousemove|znumberfieldspin|znumberfieldinput)$/.test(origEvent.type)||this._triggerChange(origEvent)},_triggerChange:function(origEvent){var prevColor=this._selectedInstance&&this._selectedInstance.getColor();this._updateSelectedColor(),!this.options.immediateCommit&&this._updatePreviousPreview(),prevColor!==this._currentColor&&this._trigger("ONCHANGE",origEvent),this._trigger("ONPICK",origEvent)},_updatePaletteColor:function(){this._paintPicker(this._axisProps.x,this._axisProps.y,this._axisProps.z),this.options.opacity&&this._paintOpacity()},_setValue:function(color,origEvent,fromuser){var colorInstance=this._getClrInstance("none"===color?"transparent":color);if(colorInstance.isValid()){var prevColor=this._currentColor;return this._colorInstance=colorInstance,this._currentColor=this._colorInstance.getColor(),this._updateUI(),this._triggerSelect(origEvent,prevColor,fromuser),!0}},_onClose:function(origEvent){this._unBindDocumentEvents(),clearTimeout(this._focusTimer),this._revertColor(origEvent),this.options.immediateCommit&&this._updatePreviousPreview(),this._trigger("ONCLOSE",origEvent)},_updatePreviousPreview:function(){this._previousPreview&&this._previousPreview.css("background-color",this._selectedInstance.getColor())},setValue:function(color,origEvent){this._setValue(color,origEvent,!0)},getColor:function(){return this.options.value},_getCustomLibraries:function(){return this.paletteHolders.filter("."+this._CLASS.CUSTOMISABLEPALETTE)},_getPalettes:function(){return this.paletteHolders.filter(":not(."+this._CLASS.CUSTOMISABLEPALETTE+")")},_getPaletteAt:function(indexes,iscustom){var palettes=iscustom?this._getCustomLibraries():this._getPalettes(),matchedPalettes=[];indexes=Array.isArray(indexes)?indexes:[indexes];return indexes.forEach(function(index){matchedPalettes.push(palettes[index])
}),matchedPalettes},_getCustomLibraryAt:function(indexes){return this._getPaletteAt(indexes,!0)},_updatePaletteOptions:function(){this.options.palettes&&(this.options.palettesList=this._getPaletteData(this._getPalettes().toArray()),this.options.customColorLibraries=this._getPaletteData(this._getCustomLibraries().toArray()))},addCustomColorsLibrary:function(paletteData){this._addCustomLibraries(paletteData),this._updatePaletteOptions()},insertCustomColorsLibraryBefore:function(paletteData,insertBeforeElement){this._addCustomLibraries(paletteData,"before",insertBeforeElement),this._updatePaletteOptions()},insertCustomColorsLibraryAt:function(paletteData,index){this.insertCustomColorsLibraryBefore(paletteData,this._getCustomLibraryAt(index)[0])},removeCustomColorsLibrary:function(palettes){this.removePalette(palettes)},removeCustomColorsLibraryAt:function(index){this.removeCustomColorsLibrary(this._getCustomLibraryAt(index))},destroy:function(){var _super=this._super;this._colorFieldSelectbox&&this._colorFieldSelectbox.zselectbox("destroy"),_super.call(this)},_setAttribute:function(optionName,value){var options=this.options,opacityOptions=/^(opacity|slider|opacityFieldType)$/,paletteOptions=/^(paletteColumns|palettes|palettesList|customColorLibraries|addIconClassName|addSVGIconId)$/,commandBarOptions=/^(immediateCommit|commandBar|OKButtonLabel|OKButtonClassName|cancelButtonLabel|cancelButtonClassName|hideCancelButton|backButtonLabel|backButtonClassName)$/,colorPreviewOptions=/^(colorPreview|previousColorInPreview)$/,colorFieldOptions=/^(colorFields|colorFieldsList)$/;if(/^(value|title|isTitleHTMLEncoded|closeButton|closeIconClassName|closeSVGIconId|draggable|displayType|appendTo|className)$/.test(optionName))return void this._super(optionName,value);var oldValue=options[optionName];if(/^(slider|animation|commandBar|boxSpectrumHSLColorModel|boxSpectrumHSVColorModel)$/.test(optionName)){if("object"==typeof value){if("object"==typeof oldValue&&(value=$.extend(!0,{},oldValue,value),this._isObjectEquals(value,oldValue)))return}else if(!/(animation)/.test(optionName))return}else if(/^(colorFieldsList)$/.test(optionName)&&Array.isArray(value)&&Array.isArray(oldValue)&&this._isArrayEquals(value,oldValue))return;return options[optionName]=value,/^(boxSelectionTypeDefaultColorModel|boxSpectrumHSLColorModel|boxSpectrumHSVColorModel)$/.test(optionName)?(options[optionName]=value,this._configurePickerMethods(),void this._updateUI()):void("valueColorModel"===optionName?(this._setColorMode(),options.value=this._selectedInstance.getColor(this._colorMode,void 0,!1)):opacityOptions.test(optionName)?(this._opacityBar&&(this._opacityBar.remove(),this._opacityBar=void 0),this.options.opacity&&this._createOpacitySlider(),"slider"===optionName&&(this._bar.remove(),this._createBar()),this._updatePaletteColor(),this._updatePickerPosition(),options.colorFields&&(this._setAttribute("colorFields",options.colorFields),this._switchColorField(this.options.currentColorField))):colorPreviewOptions.test(optionName)?(this.element.find("."+this._CLASS.PREVIEWBOX).remove(),this._previewBox=this._previousPreview=void 0,this.options.colorPreview&&(this._createPreview(),this._updatePreview(),this._updatePreviousPreview())):"currentColorField"===optionName?this.options.colorFields&&this._switchColorField(value):colorFieldOptions.test(optionName)?(this._colorFieldPartition&&(this._colorFieldPartition.remove(),this._colorFieldPartition=void 0),this.options.colorFields&&(this._createColorField(),this._updateColorFields(),this._switchColorField(this.options.defaultColorField))):paletteOptions.test(optionName)?(this._paletteContainer&&this._paletteContainer.empty(),this._customLibrariesContainer&&this._customLibrariesContainer.empty(),this.options.palettes&&this._createPalettes()):commandBarOptions.test(optionName)&&(this._commandBarContainer&&(this._commandBarContainer.remove(),this._commandBarContainer=void 0),this.options.immediateCommit||this._createCommandBar()))}};ZComponents.registerComponent("zadvancedcolorpicker",$.zcolorpicker,advancedcolorpickerPrototype),ZC.createAdvancedColorPicker=function(options){if("object"==typeof options){var element=$("#"+options.id);if(element.length){if(element.data("zadvancedcolorpicker"))return element}else element=$("<div>").appendTo($(options.appendTo).length?options.appendTo:"body").attr({id:options.id}),options.customAttributes&&element.attr(options.customAttributes);return element.zadvancedcolorpicker(options),element}}}(ZComponents),function(ZC){var $=ZC.DOMUtil,tooltipPrototype={options:{title:void 0,isMessageHTMLEncoded:!1,selector:void 0,displayType:"box",position:"at-cursor",margin:{left:0,top:0},showDelay:500,hideDelay:300,maxDisplayTime:5e3,reshowDelay:void 0,showShortcutKey:!0,animation:{show:{name:"fadeIn"},hide:{name:"fadeOut"}},className:void 0,innerHTML:void 0,pauseOnMouseOver:!1,positionAlterable:!1},_EVENTS:{ONSHOW:"show",ONHIDE:"hide"},_ANIMATION:{slide:{show:"slideDown",hide:"slideUp"},fade:{show:"fadeIn",hide:"fadeOut"},end:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"},_create:function(){this._namespace="."+this.componentName,this._tempNmspace=this._namespace+"-temp",this._bindEvents()},_bindEvents:function(){var base=this;ZC.ztooltipBinded||(ZC.ztooltipBinded=!0,ZC.$document.off("keydown"+this._namespace).on("keydown"+this._namespace,function(){ZC.ztooltipLastInstance&&ZC.ztooltipLastInstance.hide()}).off("mousedown"+this._namespace).on("mousedown"+this._namespace,function(event){ZC.ztooltipLastInstance&&ZC.ztooltipLastInstance.target&&!$(event.target).closest(ZC.ztooltipLastInstance.target).length&&!$(event.target).closest(ZC.ztooltipLastInstance.tooltip).length&&ZC.ztooltipLastInstance.hide()}),window.addEventListener("scroll",function(){ZC.ztooltipLastInstance&&(ZC.ztooltipLastInstance.hide(),ZC.ztooltipLastInstance=void 0)},!0));var stateChangeHandler=function(event,ui){var element=ui.button,title=element.attr("title");element.is("input")&&(element=element.next("label")),ui.disabled?(element.removeAttr("title"),element.data("ztooltip",title)):element.attr("title",element.data("ztooltip"))};this.element.on("mouseenter"+this._namespace+" mousemove"+this._namespace,function(event){base._targetEnter.call(base,event)}).on("zbuttonstatechange",stateChangeHandler).on("zmenubuttonstatechange",stateChangeHandler).on("zsplitbuttonstatechange",stateChangeHandler).on("zuploadbuttonstatechange",stateChangeHandler)},_targetEnter:function(event,customTarget,opt){var target,custom=!1,disabledSelector="button[disabled], input[disabled], textarea[disabled], fieldset[disabled], select[disabled], keygen[disabled] , output[disabled], option[disabled]";if(this.target&&(this.target.is(":hidden")||this.target.is(disabledSelector))&&this.hide(),event)target=$(event.target).closest("[title],[data-title-content-id]"),event.originalEvent?(this.pageX=event.pageX,this.pageY=event.pageY):custom=!0;else{if(!customTarget)return;custom=!0,target=$(customTarget)}if(target.length){if(!custom&&(!target.attr("title")&&!target.attr("data-title-content-id")||target.is(disabledSelector)))return void(target.is(this.target)&&this.tooltip&&this.hide());if(!this.options.selector||target.is(this.options.selector)){this.custom=custom,this.target&&this._clearTitle(!0,this.target);var titleOptions,base=this;this.target=target,titleOptions=this._getOptions(this.target),this.targetOpt=$.extend(!0,{},this.options,"object"==typeof titleOptions&&titleOptions,opt),this.targetOpt.pauseOnMouseOver=this.targetOpt.pauseOnMouseOver||this.targetOpt.pauseOnHover,!custom&&this._clearTitle(),this.target.off(this._tempNmspace).on("mouseleave"+this._tempNmspace,function(){base._targetLeave.call(base)}),this._clearHideTimer(),this._show(event)}}},_targetLeave:function(immediate){this._clearTitle(!0),this._clearShowTimer(),this.tooltip&&(this._completeAnimation(this.tooltip),this._removeTip(immediate))},_show:function(eventObj){var targetOpt=this.targetOpt;targetOpt.showDelay&&void 0===targetOpt.reshowDelay&&(this.targetOpt.reshowDelay=targetOpt.showDelay/5);var base=this;this.target.on("mousedown"+this._tempNmspace,function(){base._clearShowTimer(),base._removeTip(!0,base.target)}),this._showTooltip(eventObj)},_completeAnimation:function(element){return element&&(element.finish?element.finish():element.stop(!0,!0)),element},_clearShowTimer:function(){this._completeAnimation(this.tooltip),clearTimeout(this.showTimer)},_clearHideTimer:function(){this._completeAnimation(this.tooltip),clearTimeout(this.hideTimer)},_setTimer:function(target,opt){if(opt.maxDisplayTime){var base=this;this._clearHideTimer(),this.hideTimer=setTimeout(function(){base._removeTip(!0)},opt.maxDisplayTime)}},_showTooltip:function(eventObj){var base=this,opt=this.targetOpt,showFunc=function(){var animation=opt.animation;if(base._lastTip&&(base.tooltip&&base.tooltip.is(":visible")&&base.target.is(base._lastTip)?(opt.reshowDelay=void 0,animation=!1):base._trigger("ONHIDE",void 0,base.target)),base._lastTip=base.target,/^(auto|top|bottom|right|left|top-left|top-right|bottom-left|bottom-right|at-cursor|follow-cursor)$/.test(opt.position)||(opt.position=$.ztooltip.prototype.options.position),/^(at-cursor|follow-cursor)$/.test(opt.position)&&(base.custom?opt.position="top":opt.displayType="box"),base._createTooltip(),base.tooltip&&base.tooltip.length&&(base.target.is(":visible")||base.target.is("option"))){if(base._includeContent(opt),base._setTimer(base.target,opt),"follow-cursor"===opt.position){var mousemoveDelegate=function(){base._positionElement.apply(base,arguments),base._setTimer(base.target,opt)};base.target.off("mousemove"+base._tempNmspace).on("mousemove"+base._tempNmspace,mousemoveDelegate)}base._positionElement(eventObj),ZC.ztooltipLastInstance=base}base._completeAnimation(base.tooltip.hide()),base._animate(base.tooltip,animation,"show","show",function(){base._trigger("ONSHOW",eventObj)})};this.custom||opt.reshowDelay||void 0!==opt.showDelay?(this._clearShowTimer(),this.showTimer=setTimeout(function(){showFunc()},!this.custom&&this.tooltip?opt.reshowDelay:opt.showDelay)):showFunc()},_animate:function(element,animation,action,alterFn,callback){if(animation&&"object"==typeof animation){var effect,duration,className;"string"==typeof animation?effect=this._ANIMATION[animation][action]:animation.name?this._ANIMATION[animation.name]&&(effect=this._ANIMATION[animation.name][action]):animation[action]&&("string"==typeof animation[action]?effect=animation[action]:animation[action].name?effect=animation[action].name:animation[action].className&&(className=animation[action].className)),duration=animation.duration?animation.duration:animation[action]&&animation[action].duration?animation[action].duration:void 0,"object"==typeof effect?element.animate(effect,duration,callback):/^(fadeIn|fadeOut|slideDown|slideUp)$/.test(effect)?element[effect](duration,callback):"string"==typeof className?("show"===alterFn&&element.show(),element.removeClass(element.data("css-effect")).addClass(className).data("css-effect",className).off(this._ANIMATION.end).on(this._ANIMATION.end,function(){"hide"===alterFn&&element.hide(),element.removeClass(className).removeData("css-effect"),callback()})):element[alterFn]()&&callback()}else element[alterFn]()&&callback()},_includeContent:function(){var o=this.targetOpt;if("object"==typeof o&&this.tooltipContent&&this.tooltipContent.length){var content=o.title=o.title||o.content||"";if("string"==typeof o.innerHTML?(content=this._populateTemplate(o.innerHTML,o),o.isMessageHTMLEncoded=!0):"string"==typeof o.contentId&&(content=document.getElementById(o.contentId).innerHTML,o.isMessageHTMLEncoded=!0),o.showShortcutKey&&window.ZShortCut){var target=this.target;target=target.is("label.zbutton")?target.prev("input"):target;var data=ZC.getOptions(target),key=ZShortCut.getInfo(data.actionName,target,!1);key&&(key=o.shortcutKeyCustomHTML?o.shortcutKeyCustomHTML.replace(/(#key#)/gi,key):" ("+key+")",content+=key)}this.setContent(o,content)}},setContent:function(options,content){this.tooltipContent.html(options.isMessageHTMLEncoded?content:$("<div>").addClass("ztooltip__text").text(content))},_populateTemplate:function(template,data){if("string"==typeof template){var props=template.match(/#?#[^# ]+#?#/g);return props&&props.forEach(function(prop){template=template.replace(new RegExp(prop,"g"),function(match){return data[match.replace(/#/g,"")]})}),template}},_positionElement:function(eventObj){if(this.tooltip){var positionObject=this._getPosition(eventObj),direction=positionObject.direction.split("-")[0],elementPosition=positionObject.elementPosition;if(this.tooltip.removeClass("class").addClass("ztooltip ztooltip--"+direction),"object"==typeof this.targetOpt.margin){var margin={};if(margin.top=parseInt(this.targetOpt.margin.top),margin.left=parseInt(this.targetOpt.margin.left),"NaN"===margin.top&&(margin.top=0),"NaN"===margin.left&&(margin.left=0),/^(at-cursor|follow-cursor)$/.test(this.targetOpt.position)){var maxCorrection=positionObject.availableHeight-this.tooltip.outerHeight();elementPosition.left+=parseInt(this.targetOpt.margin.left),elementPosition.top+=parseInt(this.targetOpt.margin.top)+Math.min(18,maxCorrection)}else"top"===direction?elementPosition.top-=margin.top:"bottom"===direction?elementPosition.top+=margin.top:"right"===direction?elementPosition.left+=margin.left:"left"===direction&&(elementPosition.left-=margin.left)}this.tooltip.css(elementPosition),this.tooltipCallout&&this.tooltipCallout.css(positionObject.arrowPosition)}},_getPosition:function(eventObj){var eventTarget,opt=this.targetOpt,position=this.targetOpt.position,positionAlterable=this.targetOpt.positionAlterable?"flipallfit":!1,arrowCallback=function(element,direction){$(element).removeAttr("class").addClass("ztooltip__pointer h-"+direction)};if(ZPosition&&this.tooltip){this.tooltip.css({left:"auto",right:"auto"}),/^(at-cursor|follow-cursor)$/.test(opt.position)||opt.offset?(opt.offset?(this.pageX=parseInt(opt.offset.left),this.pageY=parseInt(opt.offset.top)):position="bottom-left",eventTarget=eventObj,eventTarget.pageX=this.pageX,eventTarget.pageY=this.pageY,positionAlterable="flipallfit"):"auto"===opt.position&&(position="bottom",positionAlterable="flipallfit");var tipPosition=ZPosition.get(eventTarget||this.target,this.tooltip,{direction:position,eventObj:eventObj,bufferSpace:this.tooltipCallout?10:0,positionAlterable:positionAlterable,arrowCallback:arrowCallback,arrow:"callout"===opt.displayType?{element:this.tooltipCallout,direction:!0,minSpace:8}:void 0})}return tipPosition||(tipPosition={elementPosition:{left:0,top:0},arrowPosition:{left:0,top:0}}),tipPosition},_removeTip:function(immediate,target,opt){if(opt=opt||this.targetOpt,this.tooltip){target=target||this.target;var base=this,remove=function(){base._animate(base._completeAnimation(base.tooltip),opt.animation,"hide","hide",function(){base.tooltip&&(base.tooltip.remove(),base.tooltip=base.tooltipCallout=base.tooltipTitle=base.tooltipContent=null,ZC.ztooltipLastInstance&&ZC.ztooltipLastInstance.element.is(base.element)&&(ZC.ztooltipLastInstance=void 0),base._trigger("ONHIDE"))})},removeFunc=function(){if(base.tooltip){if(base.tooltip.off("mouseleave"),base.target.is(base._lastTip)){if(!immediate&&base.targetOpt.pauseOnMouseOver&&base.tooltip.hasClass("on-hover"))return void base.tooltip.on("mouseleave",remove)}else base._lastTip=void 0;remove()}};this.isTargetCustom&&this._clearTitle(!0,this.target),immediate||!this.targetOpt.hideDelay?removeFunc():(this._clearHideTimer(),this.hideTimer=setTimeout(function(){removeFunc()},opt.hideDelay))}},_getOptions:function(target){var titledata=target.attr("title"),tooltipdata={};if($.each(target[0].attributes,function(){var name=this.nodeName,value=this.value;name.match(/^data-title-/)&&(name=name.replace(/^data-title-/,""),name=name.replace(/-([a-z])/g,function(g){return g[1].toUpperCase()}),name=name.replace(/(html)/gi,"HTML"),tooltipdata[name]="true"===value||"false"===value?"true"===value:-1!==value.indexOf("{")?ZC._getObject(value):value)}),isNaN(titledata))try{var titleObject=JSON.parse(titledata);tooltipdata=titleObject}catch(e){tooltipdata.content=titledata}else tooltipdata.content=titledata;return tooltipdata.targetElement=target,tooltipdata},_createTooltip:function(){return this.tooltip||(this.tooltip=$("<div>").appendTo("body").hover(function(){$(this).addClass("on-hover")},function(){$(this).removeClass("on-hover")}),this.tooltipContent=$("<div>").addClass("ztooltip__content").appendTo(this.tooltip)),this.tooltip.css("pointer-events",this.targetOpt.pauseOnMouseOver?"auto":"none"),this.tooltip.attr("class","ztooltip "+(this.targetOpt.className||"")),"callout"===this.targetOpt.displayType?this.tooltipCallout||(this.tooltipCallout=$("<div>").addClass("ztooltip__pointer").appendTo(this.tooltip)):this.tooltipCallout&&(this.tooltipCallout.remove(),this.tooltipCallout=void 0),this.tooltip},_clearTitle:function(reset,target){if(target=target||this.target,target&&target.length)if(reset){target.off(this._tempNmspace);var parents=$(target.data("zparents"));parents.add(target).each(function(i,tar){tar=$(tar);var titleData=void 0!==tar.attr("title")?tar.attr("title"):tar.data("ztitle");void 0!==titleData&&tar.attr("title",titleData).removeData("ztitle").removeAttr("aria-label")}),target.removeData("zparents")}else if(!reset){var parents=target.parents("[title]");parents.add(target).each(function(i,tar){tar=$(tar);var title=tar.attr("title");title&&tar.data("ztitle",title).removeAttr("title").attr("aria-label",title)}),target.data("zparents",parents)}},_isVisible:function(element){return element&&element.length?element.is(":visible")?!0:!1:void 0},_trigger:function(customEvent,origEvent,target){var data={target:target||this.target,tooltip:"ONSHOW"===customEvent?this.tooltip:void 0};return this._dispatchEvent(customEvent,origEvent,data)},show:function(target,opt){return target=$(target||this.element),target.length&&target[0].nodeType&&target.is(":visible")&&(this._clearTitle(!0,target),opt="object"==typeof opt?opt:{},opt.showDelay=0,this._targetEnter(void 0,target,opt)),target},hide:function(immediate){this._targetLeave(immediate)},_destroy:function(){ZC.ztooltipLastInstance&&ZC.ztooltipLastInstance.element.is(this.element)&&(ZC.ztooltipLastInstance.target&&ZC.ztooltipLastInstance.target.off(this._tempNmspace),ZC.ztooltipLastInstance=void 0),this.element.off(this._namespace),this.hide(!0),$(this.tooltip).remove()},setAttribute:function(optionName,value){"object"==typeof value?$.extend(this.options[optionName],value):this.options[optionName]=value}};ZC.registerComponent("ztooltip",tooltipPrototype)}(ZComponents),function($,ZC){var $=ZC.DOMUtil,colorfieldPrototype={options:{value:"rgba(0,0,0,1)",type:"selectbox",colorModel:"auto",pickerId:void 0,pickerOptions:{},pickerType:"basic",appliedFor:"fill",icon:!1,iconClassName:void 0,SVGIconId:void 0,arrowIcon:!0,arrowIconClassName:void 0,arrowSVGIconId:void 0,className:void 0,disabled:!1,previewBorderStyle:void 0,previewBorderWidth:void 0,resetPickerOptions:!1},_EVENTS:{ONCHANGE:"change",ONSELECT:"select",ONPICK:"pick",ONBEFOREOPEN:"beforepickeropen",ONOPEN:"pickeropen",ONBEFORECLOSE:"beforepickerclose",ONCLOSE:"pickerclose",ONCOLORMOUSEOVER:"colorpanmouseover",ONCOLORMOUSEOUT:"colorpanmouseout",ONCOLORPANCLICK:"colorpanclick",ONBEFOREFOCUS:"beforefocus",ONFOCUS:"focus",ONBLUR:"blur",ONCLICK:"click",ONARROWCLICK:"arrowclick",NOCOLORBUTTONCLICK:"nocolorbuttonclick",NOCOLORBUTTONMOUSEOVER:"nocolorbuttonmouseover",NOCOLORBUTTONMOUSEOUT:"nocolorbuttonmouseout",DEFAULTCOLORBUTTONCLICK:"defaultcolorbuttonclick",DEFAULTCOLORBUTTONMOUSEOVER:"defaultcolorbuttonmouseover",DEFAULTCOLORBUTTONMOUSEOUT:"defaultcolorbuttonmouseout"},_REGEX:{colorMode:/^(rgb|rgba|hsl|hsla|hsv|hsva|hex|hex8|cmyk)$/},_CLASS:{DISABLED:"is-disabled",ARROW:"zcolorfield__arrow",WITHOUTARROW:"zcolorselect--withoutarrow",PREVIEW:"zcolorfield__colorpreview",SELECTBOXCONTAINER:"zselectbox zcolorselect zselectbox--icononly",SELECTBOXOPTAREA:"zselectbox__selected",SELECTBOXICON:"zselectbox__icon",SPLITBUTTONCONTAINER:"zbutton--split zcolorbutton zbutton--splitnormal",BUTTON:"zbutton",ICONONLYBUTTON:"zbutton--icononly",BUTTONICON:"zbutton__icon",SELECTBOXPREVIEW:"zcolorselect__preview",SPLITBUTTONPREVIEW:"zcolorbutton__preview",TRANSPARENTBG:"h-transparentbg"},_TEMPLATE:{SPLITBUTTONARROW:'<svg class="zbutton__svg zbutton__splitarrow" viewBox="0 0 48 48" width="100%" height="100%"> <path class="cls-1" d="M12,19.478L15.571,16l9.286,9.739L34.143,16,37,19.478,24.857,32Z"></path> </svg>',SELECTBOXARROW:'<svg class="zselectbox__arrow" viewBox="0 0 48 48" width="100%" height="100%"> <path class="cls-1" d="M12,19.478L15.571,16l9.286,9.739L34.143,16,37,19.478,24.857,32Z"></path> </svg>'},_create:function(){this.element.hide(),this._frominit=!0,this._namespace="."+this.componentName,this._constructContainer(),this._setInitial(),this._bindEvents(),this._frominit=!1},_bindEvents:function(){if(this.container.on("focusin"+this._namespace,this._onFocus.bind(this)).on("click"+this._namespace,this._onClick.bind(this)).on("focusout"+this._namespace,this._onBlur.bind(this)),this._toggler.on("mousedown"+this._namespace,this._togglePicker.bind(this)).on("keydown"+this._namespace,this._onKeyDown.bind(this)),"splitbutton"===this.options.type){var buttons=this.container.find("button");this._handleFocus($(buttons[0])),this._handleFocus($(buttons[1]))}else this._handleFocus(this.container)},_onKeyDown:function(origEvent){var code=origEvent.keyCode;code!==ZC.keyCode.DOWN&&(code!==ZC.keyCode.ENTER||"splitbutton"===this.options.type)||this._lastActiveColorField===this.element[0]&&this._picker&&this._picker.is(":visible")||this._open(void 0,origEvent)},_onFocus:function(origEvent){this._trigger("ONFOCUS",origEvent)},_onBlur:function(origEvent){this._trigger("ONBLUR",origEvent)},_onClick:function(origEvent){this._trigger("ONCLICK",origEvent)},_constructContainer:function(){this._previewBox=this._createPreviewIcon(),"splitbutton"===this.options.type?(this.container=$("<div class='"+this._CLASS.SPLITBUTTONCONTAINER+"'><button class='"+this._CLASS.BUTTON+"  "+this._CLASS.ICONONLYBUTTON+"'></button><button class='"+this._CLASS.BUTTON+"  "+this._CLASS.ICONONLYBUTTON+"'></button></div>"),$(this.container[0].children[0]).append(this._previewBox),this._arrowButton=$(this.container[0].children[1]),this._arrowButton.append(this._createArrowIcon()).attr("aria-haspopup",!0),this._toggler=this._arrowButton):(this.container=$('<div class="'+this._CLASS.SELECTBOXCONTAINER+'"> <div class="'+this._CLASS.SELECTBOXOPTAREA+'"></div></div>'),this.container.find("."+this._CLASS.SELECTBOXOPTAREA).append(this._previewBox),this.options.arrowIcon?(this._arrowIcon=this._createArrowIcon(),this.container.append(this._arrowIcon)):this.container.addClass(this._CLASS.WITHOUTARROW),this._toggler=this.container,this._setTabIndex()),this.options.className&&this.container.addClass(this.options.className),this.container.insertAfter(this.element)},_setTabIndex:function(){void 0===this.element.attr("tabindex")&&this.container.attr("tabindex",0)},_createIcon:function(className,SVGId,template){var icon=$('<i class="'+("splitbutton"===this.options.type?this._CLASS.BUTTONICON:this._CLASS.SELECTBOXICON)+'">');return className||SVGId?ZC.createIcon(icon,className,SVGId):icon[0].innerHTML=template,icon},_createArrowIcon:function(){return this._createIcon(this.options.arrowIconClassName,this.options.arrowSVGIconId,this._TEMPLATE["splitbutton"===this.options.type?"SPLITBUTTONARROW":"SELECTBOXARROW"]).addClass(this._CLASS.ARROW)},_createPreviewIcon:function(){var preview=$("<span>",{"class":"splitbutton"===this.options.type?this._CLASS.SPLITBUTTONPREVIEW:this._CLASS.SELECTBOXPREVIEW});this.options.icon||"stroke"===this.options.appliedFor||preview.addClass(this._CLASS.TRANSPARENTBG).append($("<canvas>"));var icon;return icon=this.options.icon?this._createIcon(this.options.iconClassName,this.options.SVGIconId):$('<i class="'+("splitbutton"===this.options.type?this._CLASS.BUTTONICON:this._CLASS.SELECTBOXICON)+'">'),preview.append(icon)},_setInitial:function(){var o=this.options;(this.element[0].disabled||o.disabled)&&this._setAttribute("disabled",!0),this.element[0].title&&this.container.attr("title",this.element[0].title);var display=this.element[0].style.display;this.element[0].style.display="";var style=this.element.attr("style");this.element[0].style.display=display,style&&this.container.attr("style",style);var colorInstance=this._getClrInstance(o.value),value=this.element.attr("value");value&&(o.value=value),o.value="none"===o.value||colorInstance.isValid()?o.value:$[this.componentName].prototype.options.value,colorInstance=this._getClrInstance(o.value),this._colorMode=this._REGEX.colorMode.test(o.colorModel)?o.colorModel:colorInstance.format,this._setValue(o.value)},_getClrInstance:function(color){return new zoho.zcolor(color)},_createPicker:function(){var options=this.options;this._pickerComponent="advanced"===options.pickerType?"zadvancedcolorpicker":"zcolorpicker",options.pickerId&&(this._picker=$("#"+options.pickerId),this._toggler.attr("aria-owns",options.pickerId)),this._picker&&this._picker.length||(this._picker=$("<div>",{id:options.pickerId}).appendTo("body"))},_setPickerAttributes:function(){var options=this.options,pickerOptions={valueColorModel:options.colorModel,type:"popup"};options.pickerOptions&&(pickerOptions=$.extend(!0,{},options.pickerOptions,pickerOptions)),pickerOptions.noColorButtonLabel||(pickerOptions.noColorButtonLabel="stroke"===options.appliedFor?"No Stroke":"No Fill"),this._picker||this._createPicker(),this._picker.off(".zcolorfield");var componentName=this._picker.data().componentName;if(componentName){if(this._pickerComponent===componentName)return void(options.pickerId&&(options.resetPickerOptions&&(pickerOptions=$.extend({},$[this._pickerComponent].prototype.options,pickerOptions),delete pickerOptions.otherUsedColorsList,delete pickerOptions.value),"zcolorpicker"===this._pickerComponent?(pickerOptions.advancedPickerOptions||(pickerOptions.advancedPickerOptions={}),pickerOptions.advancedPickerOptions.currentColorField=this._currentColorField||!1):pickerOptions.currentColorField=this._currentColorField||!1,this._picker[this._pickerComponent]("setAttributes",pickerOptions)));this._picker[componentName]("destroy")}this._picker.show().css({width:"",height:""}),this._picker[this._pickerComponent](pickerOptions),this._picker.hide()},_destroyPicker:function(){this._picker&&(this._picker[this._pickerComponent]("destroy"),this._picker.remove(),this._picker=void 0)},_bindPickerEvents:function(){var base=this;this._picker.off(".zcolorfield").on(this._pickerComponent+"change.zcolorfield",function(){base._opened&&base._onChange.apply(base,arguments)}).on(this._pickerComponent+"select.zcolorfield",function(){base._opened&&base._onSelect.apply(base,arguments)}).on(this._pickerComponent+"pick.zcolorfield",function(){base._opened&&base._onPick.apply(base,arguments)}).on(this._pickerComponent+"close.zcolorfield",this._onClose.bind(this)).on(this._pickerComponent+"beforeclose.zcolorfield",this._onBeforeClose.bind(this)).on(this._pickerComponent+"open.zcolorfield",this._onOpen.bind(this)).on(this._pickerComponent+"beforeopen.zcolorfield",this._onBeforeOpen.bind(this)).on(this._pickerComponent+"colorpanmouseover.zcolorfield",this._onColorPanMouseOver.bind(this)).on(this._pickerComponent+"colorpanmouseout.zcolorfield",this._onColorPanMouseOut.bind(this)).on(this._pickerComponent+"colorpanclick.zcolorfield",this._onColorPanClick.bind(this)).on(this._pickerComponent+"colorfieldlistchange.zcolorfield",this._onColorFieldListChange.bind(this)).on(this._pickerComponent+this._EVENTS.NOCOLORBUTTONCLICK+".zcolorfield",this._onNoColorClick.bind(this)).on(this._pickerComponent+this._EVENTS.DEFAULTCOLORBUTTONCLICK+".zcolorfield",this._defaultButtonClick.bind(this)).on(this._pickerComponent+this._EVENTS.NOCOLORBUTTONMOUSEOUT+".zcolorfield",this._onNoColorMouseOut.bind(this)).on(this._pickerComponent+this._EVENTS.DEFAULTCOLORBUTTONMOUSEOUT+".zcolorfield",this._defaultButtonMouseOut.bind(this)).on(this._pickerComponent+this._EVENTS.NOCOLORBUTTONMOUSEOVER+".zcolorfield",this._onNoColorMouseOver.bind(this)).on(this._pickerComponent+this._EVENTS.DEFAULTCOLORBUTTONMOUSEOVER+".zcolorfield",this._defaultButtonMouseOver.bind(this))},_onNoColorClick:function(origEvent,data){this._trigger("NOCOLORBUTTONCLICK",origEvent,data)},_onNoColorMouseOver:function(origEvent,data){this._trigger("NOCOLORBUTTONMOUSEOVER",origEvent,data)},_onNoColorMouseOut:function(origEvent,data){this._trigger("NOCOLORBUTTONMOUSEOUT",origEvent,data)},_defaultButtonClick:function(origEvent,data){this._trigger("DEFAULTCOLORBUTTONCLICK",origEvent,data)},_defaultButtonMouseOver:function(origEvent,data){this._trigger("DEFAULTCOLORBUTTONMOUSEOVER",origEvent,data)},_defaultButtonMouseOut:function(origEvent,data){this._trigger("DEFAULTCOLORBUTTONMOUSEOUT",origEvent,data)},_onColorFieldListChange:function(origEvent,data){this._currentColorField=data.currentColorField},_onColorPanMouseOver:function(origEvent,data){this._trigger("ONCOLORMOUSEOVER",origEvent,data)},_onColorPanMouseOut:function(origEvent,data){this._trigger("ONCOLORMOUSEOUT",origEvent,data)},_onColorPanClick:function(origEvent,data){this._trigger("ONCOLORPANCLICK",origEvent,data)},_onOpen:function(origEvent,data){this._opened=!0,this._toggler.attr("aria-expanded",!0),ZC._lastActiveColorField=this.element[0],ZC._lastActiveColorFieldComponent=this.componentName,this._trigger("ONOPEN",origEvent,data)},_onBeforeOpen:function(origEvent,data){var response=this._trigger("ONBEFOREOPEN",origEvent,data);return response&&this._picker[this._pickerComponent]("setValue",this._noFill?"none":this.getValue()),response},_onClose:function(origEvent,data){this._toggler.attr("aria-expanded",!1),this._picker.off(".zcolorfield"),ZC._lastActiveColorField=ZC._lastActiveColorFieldComponent=void 0,this._opened=!1,this._trigger("ONCLOSE",origEvent,data)},_onBeforeClose:function(origEvent,data){var response=this._trigger("ONBEFORECLOSE",origEvent,data);if(response){origEvent=origEvent&&origEvent.originalEvent;var focussableElements=this.container.add(this._picker);origEvent&&$(document.activeElement).closest(focussableElements).length&&$(origEvent.target).closest(focussableElements).length&&this.setFocus(origEvent)}return response},_open:function(options,origEvent){ZC._lastActiveColorField&&$(ZC._lastActiveColorField)[ZC._lastActiveColorFieldComponent]("closePicker"),this._opened=!1,this._setPickerAttributes(),this._bindPickerEvents(),this._picker[this._pickerComponent]("open",{forElement:this.options.forElement||this.container},origEvent)},_close:function(origEvent){this._picker&&this._picker[this._pickerComponent]("close",origEvent)},_onChange:function(){},_onPick:function(origEvent,data){this._setValue(data.rgb,origEvent,data),this._trigger("ONPICK",origEvent,data)},_onSelect:function(origEvent,data){this._trigger("ONSELECT",origEvent,data)},_applyPreviewBorder:function(){var borderStyle=this.options.previewBorderStyle,borderWidth=this.options.previewBorderWidth;borderStyle||(borderStyle="solid"),borderWidth||(borderWidth=this.options.icon?"0px 0px 2px 0px":"3px"),this._previewBox[0].style.borderStyle=borderStyle,this._previewBox[0].style.borderWidth=borderWidth},_updateUI:function(color){if(this._previewBox){color=color||this._selectedInstance.getColor(),this._previewBox.removeAttr("style"),this._previewBox.removeClass("h-nofill "+this._CLASS.TRANSPARENTBG);var iconClass="splitbutton"===this.options.type?this._CLASS.BUTTONICON:this._CLASS.SELECTBOXICON;if(this.options.icon)this._applyPreviewBorder(),this._previewBox[0].style.borderColor=color;else if("stroke"===this.options.appliedFor)this._noFill?(this._previewBox[0].style.borderColor="",this._previewBox.addClass("h-nofill"),this._previewBox.find("i").remove()):(this._previewBox[0].style.borderColor=color,this._previewBox.find("i").length||(this._previewBox[0].innerHTML="<i class='"+iconClass+"'></i>"),this._applyPreviewBorder());
else if(this._noFill)this._previewBox.addClass("h-nofill"),this._previewBox.find("canvas, i").remove();else{var canvas=this._previewBox.find("canvas");canvas.length?canvas.css("backgroundColor",color):this._previewBox[0].innerHTML="<canvas style='background-color:"+color+";' ></canvas><i class='"+iconClass+"'></i>",this._previewBox.addClass(this._CLASS.TRANSPARENTBG)}}},_setValue:function(color,origEvent,data){var colorInstance=this._getClrInstance("none"===color?"transparent":color);if(colorInstance.isValid()){var prevColor=this._selectedInstance&&this._selectedInstance.getColor();this._selectedInstance=colorInstance,this._noFill=data&&data.noColorButtonClick||"none"===color,this._updateElementValue(),this._updateUI(),prevColor!==this._selectedInstance.getColor()&&this._trigger("ONCHANGE",origEvent,data)}},_updateElementValue:function(){this.options.value=this._noFill?"transparent":this._selectedInstance.getColor(this._colorMode,void 0,!1),this.element[0].value=this._selectedInstance.getColor("hex",void 0,!1)},_trigger:function(customEvent,origEvent,data){return this._frominit?void 0:(data=data||{},data.value=data.color=this.getValue(),data.rgb=this._selectedInstance.getColor(),data.opacity=this._selectedInstance.getAlpha(),data.colorData=this._selectedInstance.getObject(this._colorMode),data.picker=this._picker,origEvent=origEvent&&origEvent.originalEvent?origEvent.originalEvent:void 0,this._dispatchEvent(customEvent,origEvent,data,void 0,!!origEvent))},_togglePicker:function(origEvent){this._isDisabled()||(ZC._lastActiveColorField===this.element[0]&&this._picker&&this._picker.is(":visible")?this._close(origEvent):this._open(origEvent))},_isDisabled:function(){return this.container.hasClass(this._CLASS.DISABLED)},_setAttribute:function(optionName,value){var options=this.options;if("disabled"===optionName){options[optionName]=value,this.closePicker(),this.element[0].disabled=value;var elements=this.container;"splitbutton"!==this.options.type?value?this.container.removeAttr("tabindex"):this._setTabIndex():elements=this.container.find("button").prop("disabled",value),elements[value?"addClass":"removeClass"](this._CLASS.DISABLED).attr("aria-disabled",value)}else if("value"===optionName)this.setValue(value);else if(/^(pickerId|pickerType)$/.test(optionName))options[optionName]=value,this._destroyPicker();else if("pickerOptions"===optionName)"object"==typeof value&&(o.pickerOptions&&$.extend(o.pickerOptions,value),this._picker&&this._picker[this._pickerComponent]("setAttributes",value));else if("appliedFor"===optionName){options[optionName]=value;var label;label="stroke"===value?"No Stroke":"No Fill",options.pickerOptions&&options.pickerOptions.noColorButtonLabel||this._picker&&this._picker[this._pickerComponent]("setAttribute","noColorButtonLabel",label),this._setAttribute("icon",this.options.icon)}else if(/^(icon|iconClassName|SVGIconId)$/.test(optionName)){options[optionName]=value;var previewBox=this._createPreviewIcon();this._previewBox.replaceWith(previewBox),this._previewBox=previewBox,this._updateUI()}else/^(arrowIcon|arrowIconClassName|arrowSVGIconId)$/.test(optionName)?(options[optionName]=value,"arrowIcon"===optionName?"splitbutton"!==options.type&&(this.container.find("."+this._CLASS.ARROW).remove(),value?this.container.removeClass(this._CLASS.WITHOUTARROW).append(this._createArrowIcon()):this.container.addClass(this._CLASS.WITHOUTARROW)):this.container.find("."+this._CLASS.ARROW).replaceWith(this._createArrowIcon())):"className"===optionName?(this.container.removeClass(options.className),"string"==typeof value&&(options[optionName]=value,this.container.addClass(value))):"colorModel"===optionName&&(this._REGEX.colorMode.test(value)||(value=this._colorMode),options[optionName]=value,this._updateElementValue())},setFocus:function(origEvent){if(this._trigger("ONBEFOREFOCUS",origEvent)){clearTimeout(this._focusTimer);var base=this;this._focusTimer=setTimeout(function(){$(document.activeElement).closest(base.container).length||base._toggler.focus()},100)}},openPicker:function(options,origEvent){this._open(options,origEvent)},closePicker:function(origEvent){this._picker&&this._close(origEvent)},getValue:function(){return this.options.value},setValue:function(color,origEvent){this._setValue(color,origEvent),ZC._lastActiveColorField===this.element[0]&&this._picker[this._pickerComponent]("setValue",color)},setAttribute:function(optionName,value){value!==this.options[optionName]&&(value="string"==typeof value?value.trim():value,this._setAttribute(optionName,value))},destroy:function(){this._destroyPicker(),this.container.remove(),this.element.removeData(this.componentName)}};ZC.registerComponent("zcolorfield",colorfieldPrototype);var colorSelectboxPrototype={options:$.extend({},colorfieldPrototype.options,{tabindex:0}),_create:function(){this.options.type="selectbox",this._super()}};ZC.registerComponent("zcolorselectbox",$.zcolorfield,colorSelectboxPrototype);var colorSplitButtonPrototype={options:$.extend({},colorfieldPrototype.options),_create:function(){this.options.type="splitbutton",this._super()},_onClick:function(origEvent){$(origEvent.target).closest(this._toggler).length?this._trigger("ONARROWCLICK",origEvent):(this._trigger("ONCLICK",origEvent),this._close(origEvent))}};ZC.registerComponent("zcolorsplitbutton",$.zcolorfield,colorSplitButtonPrototype);var createColorField=function(options,componentName){if("object"==typeof options){var element=$("#"+options.id);if(element.length){if(element.data(componentName))return element}else element=$("<input>").appendTo($(options.appendTo).length?options.appendTo:"body").attr("id",options.id),options.customAttributes&&element.attr(options.customAttributes);return element[componentName](options),element}};ZC.createColorSplitButton=function(options){createColorField(options,"zcolorsplitbutton")},ZC.createColorSelectbox=function(options){createColorField(options,"zcolorselectbox")}}(jQuery,ZComponents),function(ZC){var $=ZC.DOMUtil,colorInputPrototype={options:$.extend({},$.zcolorfield.prototype.options,{forElement:void 0}),_constructContainer:function(){this._toggler=this.container=this.element.show().addClass("zcolorfield "+(this.options.className||""))},_updateElementValue:function(){this.options.value=this._noFill?"transparent":this._formattedValue(this._selectedInstance.getColor(this._colorMode,void 0,!1))},_onSelect:function(origEvent,data){var superMethod=this._super;this._updateUI(data.currentRGB),superMethod.call(this,origEvent,data)},_formattedValue:function(value){return value&&value.replace(/#/,"")},_trigger:function(customEvent,origEvent,data){var superMethod=this._super;return data&&(data.currentValue=this._formattedValue(data.currentValue)),superMethod.call(this,customEvent,origEvent,data)},_updateUI:function(color){this.options.fillClassName&&this.element.find("."+this.options.fillClassName).css("background-color",color||this._selectedInstance.getColor())}};ZC.registerComponent("zcolorchooser",$.zcolorfield,colorInputPrototype)}(ZComponents),function(ZC){function buttonElement(){ZB_DOM._text=document.createElement("span"),ZB_DOM._label=document.createElement("label"),ZB_DOM._arrow=document.createElement("i"),ZB_DOM._text.className="zbutton__text",ZB_DOM._arrow.className="zbutton__icon h-floatright"}function createElement(initObject){var tagName=initObject.tagName?initObject.tagName:"button",element=document.createElement(tagName);return element.setAttribute("id",initObject.id),initObject.customAttributes&&$(element).attr(initObject.customAttributes),initObject.appendTo&&$(initObject.appendTo)[0].appendChild(element),$(element)[initObject.componentName](initObject)}var $=ZC.DOMUtil,buttonPrototype={options:{appearance:"normal",text:void 0,icon:void 0,iconClassName:void 0,SVGIconId:void 0,size:"medium",disabled:!1,checked:!1,actionInProgress:!1,progressIndicator:{type:"circular",position:"left",direction:"left-to-right",loadingText:"",value:5,iconClassName:void 0,SVGIconId:void 0},constructButton:!0,className:""},attributeList:["data-appearance","data-icon","data-text","data-size","data-disabled","disabled","data-action-in-progress","data-progress-indicator"],_EVENTS:{CLICK:"click",CHANGE:"change",STATECHANGE:"statechange"},_CIRCLEX:{medium:"8px",large:"10.5px",small:"7.5px",mini:"7px"},_CIRCLEY:{medium:"8px",large:"10.5px",small:"7.5px",mini:"7px"},_CIRCLER:{medium:"7",large:"9.5px",small:"6.5px",mini:"6px"},_create:function(){void 0===ZB_DOM._text&&buttonElement(),this.options.icon=this.options.icons&&this.options.icons.primary||this.options.icon,this.options.disabled=this.options.disabled||this.element[0].disabled,this.options.checked=this.options.checked||this.element[0].checked,this.element[0].setAttribute("role","button"),this.container="INPUT"===this.element[0].tagName?this._getLabelElement(this.element):this.element,this.options.constructButton&&this._construct(),this.element[0].type||(this.element[0].type="button"),this._checkAndDisable(),this._bindEvents(),this._handleFocus()},_construct:function(){if(this.options.text=this.options.text?this.options.text:this.options.label?this.options.label:this.element.text().trim(),this.options.text&&""!==this.options.text){var textSpan=ZB_DOM._text.cloneNode();textSpan.textContent=this.options.text,this.container[0].innerHTML="",this.container[0].appendChild(textSpan)}(this.options.icon||this.options.iconClassName||this.options.SVGIconId)&&this._setIcons(),this.container[0].className+=" zbutton "+("normal"!==this.options.appearance?"zbutton--"+this.options.appearance:"")+" zbutton--"+this.options.size+" "+this.options.className,this.container[0].setAttribute("aria-label",this.options.text?this.options.text:this.element.attr("title"))},_setIcons:function(){if(!this.options.actionInProgress||!this.container.find(".zeffects--rotate").length){this.container.find(".zbutton__mainicon").remove();var iconEle=$("<i class='zbutton__icon zbutton__mainicon '></i>"),iconSpan=this._handleIcon(iconEle,void 0,void 0,this.options.iconClassName,this.options.SVGIconId,this.options.icon);this.container.prepend(iconSpan),(this.options.icon||this.options.iconClassName||this.options.SVGIconId)&&""===this.options.text&&(this.container[0].className+=" zbutton--icononly")}},_bindEvents:function(){var base=this,componentName=this.componentName;if(this.container.on("click."+componentName,function(event){base._handleButtonClick(event),base._mouseup=!0}),this._input){var base=this;this.container.off("keydown."+componentName).on("keydown."+componentName,function(event){if(event.keyCode===ZC.keyCode.ENTER||event.keyCode===ZC.keyCode.SPACE)base.container.trigger("click"),event.preventDefault();else if(event.keyCode===ZC.keyCode.LEFT||event.keyCode===ZC.keyCode.DOWN){var groupName=base._input.attr("name"),navigateTo=base._input.prevAll("input[type=radio][name="+groupName+"]")[0];navigateTo||(navigateTo=base._input.nextAll("input[type=radio][name="+groupName+"]:last")),$("label[for='"+$(navigateTo).attr("id")+"']").trigger("click").trigger("focus")}else if(event.keyCode===ZC.keyCode.RIGHT||event.keyCode===ZC.keyCode.UP){var groupName=base._input.attr("name");navigateTo=base._input.nextAll("input[type=radio][name="+groupName+"]")[0],navigateTo||(navigateTo=base._input.prevAll("input[type=radio][name="+groupName+"]:last")),$("label[for='"+$(navigateTo).attr("id")+"']").trigger("click").trigger("focus")}})}window.ZShortCut&&ZShortCut.register(this.element)},_handleButtonClick:function(event){this.container.hasClass("is-disabled")||(this.options.actionInProgress&&this.showProgressIndicator(),this.container.is("label")&&this._check(!0,event),this._dispatchEvent("CLICK",event,{button:this.element}))},_checkAndDisable:function(){this.options.disabled?(this.container.addClass("is-disabled").attr({"aria-disabled":!0}),this.container.attr("disabled")||this.container[0].setAttribute("disabled",!0)):(this.container.removeClass("is-disabled").removeAttr("aria-disabled"),this.container.attr("disabled")&&this.container.removeAttr("disabled")),this._dispatchEvent("STATECHANGE",{},{button:this.element,disabled:this.options.disabled}),this.options.checked?(this.container.addClass("is-selected").prop("checked",!0).attr("aria-checked",!0),this._input.prop("checked",!0)):(this.container.removeClass("is-selected").removeAttr("checked aria-checked").prop("checked",!1),this._input&&this._input.prop("checked",!1))},_check:function(isChecked,event){if(!this.container.hasClass("is-disabled")){var groupName=this._input.attr("name"),buttonGroup=$("input[type=radio][name="+groupName+"]");isChecked&&"radio"==this._input[0].type&&buttonGroup.each(function(i,button){$(button).prop("checked",!1).next("label").prop("checked",!1),$(button).next(".zbutton").removeClass("is-selected"),$(button).data("zbutton").options.checked=!1}),"radio"===this._input[0].type?this.options.checked=isChecked:this.container.prop("checked")||!isChecked?this.options.checked=!1:isChecked&&(this.options.checked=isChecked),this._checkAndDisable(),event&&this._dispatchEvent("CHANGE",event,{button:this.element})}},_getLabelElement:function(element){var _label=element.next("label");return _label.length||(_label=$("<label>").text(this.options.text).insertAfter(element),this._labelCreated=!0),_label.attr({"for":element.attr("id"),tabindex:void 0!==this.element.attr("tabindex")?this.element.attr("tabindex"):0,"class":element.attr("class"),title:element.attr(element.attr("title")?"title":"data-title"),role:element[0].type}),this._input=element.addClass("h-dnone"),_label},_createLoaderElement:function(position){var iconEle=$("<i class='zbutton__icon "+("right"!==position||this.container.is(".zbutton--icononly")?"":"h-floatright")+"'></i>"),loaderInfo=this.options.progressIndicator,SVGIconId=loaderInfo.SVGIconId,iconClassName=loaderInfo.iconClassName;if(SVGIconId||iconClassName)this._handleIcon(iconEle,void 0,void 0,iconClassName,SVGIconId);else{var loaderEle=ZC.createSVGElement("svg",{"class":"zbutton__svg zbutton__loader zeffects--rotate"},[{circle:{"class":"circle__track",cx:this._CIRCLEX[this.options.size],cy:this._CIRCLEY[this.options.size],r:this._CIRCLER[this.options.size]}},{circle:{"class":"circle__load",cx:this._CIRCLEX[this.options.size],cy:this._CIRCLEY[this.options.size],r:this._CIRCLER[this.options.size]}}]);iconEle[0].appendChild(loaderEle)}return iconEle},setProgressValue:function(value){this._progressElement&&(value>100&&(value=100),this._progressElement.css("width",parseInt(value)+"%"),this.options.progressIndicator.value=value)},getProgressValue:function(){return this._progressElement?100*parseFloat(this._progressElement.outerWidth(!0)/(this.element.outerWidth(!0)-2*parseInt(this.element.css("border")))):0},showProgressIndicator:function(options){var options=options||{},loaderInfo=this.options.progressIndicator,type=options.type||loaderInfo.type,position=options.position||loaderInfo.position,direction=options.direction||loaderInfo.direction,btnText=options.loadingText||loaderInfo.loadingText,percentage=options.value||loaderInfo.value;this.container.find(".zbutton__loader").length||("circular"===type?((this.options.icon||this.options.iconClassName||this.options.SVGIconId)&&("left"===position||this.container.is(".zbutton--icononly"))&&this.container.find("i:first").remove(),this.container.prepend(this._createLoaderElement(position))):"linear-bar"===type?(this._progressElement=$("<span class='"+("top"===position?"zbutton__topline":"zbutton__bottomline")+"'/>"),this.setProgressValue(percentage)):"linear-fill"===type&&(this._progressElement=$("<span class='"+("right-to-left"===direction?"zbutton__bgprogress--fromright":"zbutton__bgprogress")+"'/>"),this.setProgressValue(percentage)),""!==btnText&&this.container.find(".zbutton__text").text(btnText),this.container.append(this._progressElement).addClass("is-disabled zbutton--loading h-transition"),this.options.actionInProgress=!0)},hideProgressIndicator:function(){this._progressElement&&(this._progressElement.remove(),this._progressElement=void 0),this.options.icon||this.options.iconClassName||this.options.SVGIconId?(this.container.find(".zbutton__icon").remove(),this.container.find(".zbutton__icon").length||this._setIcons()):this.container.find(".zbutton__icon").remove(),this.container.removeClass("zbutton--loading h-transition"),this.options.disabled||this.container.removeAttr("disabled").removeClass("is-disabled"),this.options.text?this.container.find(".zbutton__text").text(this.options.text):(this.container.find(".zbutton__text").remove(),(this.options.icon||this.options.iconClassName||this.options.SVGIconId)&&this.container.addClass("zbutton--icononly"))},destroy:function(){return this._super(),this.container.off("."+this.componentName).empty().removeClass("zbutton zbutton--icononly is-disabled is-selected"),this.container.off("."+this.componentName),this._input&&(this._input.removeClass("h-dnone").removeData("zbutton"),this._input=void 0,this._labelCreated&&this.container.remove()),this.element.text(this.options.text).removeData("zbutton")},setAttribute:function(optionName,value){if("appearance"===optionName&&value!==this.options.appearance)this.container.removeClass("zbutton--"+this.options.appearance).addClass("zbutton--"+value);else if("text"!==optionName&&"label"!==optionName&&"data-text"!==optionName||value===this.options.text)if("size"!==optionName&&"data-size"!==optionName||value===this.options.size)if("disabled"===optionName&&this.options.disabled!==value)"string"==typeof value&&(value="true"===value||"disabled"===value),this.options.disabled=value,this._checkAndDisable();else if("icon"!==optionName&&"data-icon"!==optionName&&"iconClassName"!==optionName&&"SVGIconId"!==optionName||value===this.options[optionName]){if("checked"===optionName&&value!==this.options.checked)this._input&&this._check(value,void 0);else if("actionInProgress"===optionName&&value!==this.options.actionInProgress)this.options[optionName]=value,value?this.showProgressIndicator():this.hideProgressIndicator();else if("progressIndicator"===optionName&&this.options.actionInProgress){var options=this.options;options.progressIndicator=$.extend({},options.progressIndicator,value),this.destroy(),this.element.zbutton(options),this.showProgressIndicator()}}else(this.options.icon||this.options.iconClassName||this.options.SVGIconId)&&this.container.find("i:first").remove(),this.options[optionName]=value,value&&this._setIcons();else this.options.size&&this.container.removeClass("zbutton--"+this.options.size),this.container.addClass("zbutton--"+value),this.options.actionInProgress&&(value=""===value.trim()||"default"===value?"medium":value,this.container.find(".zbutton__loader circle").attr({cx:this._CIRCLEX[value],cy:this._CIRCLEY[value],r:this._CIRCLER[value]}));else if(this.options.text&&""!==this.options.text)this.options.actionInProgress||(value&&""!==value?this.container.find(".zbutton__text").text(value):(this.container.find(".zbutton__text").remove(),this.container.find("i").length&&(this.options.icon||this.options.iconClassName||this.options.SVGIconId)&&this.container.addClass("zbutton--icononly")));else{var textSpan=$("<span class='zbutton__text'>"+value+"</span>");this.options.actionInProgress||(this.container.find("i").length&&(this.options.icon||this.options.iconClassName||this.options.SVGIconId)?textSpan.insertAfter(this.container.find(".zbutton__icon:first")):textSpan[this.container.find("i").length?"prependTo":"appendTo"](this.container),this.container.removeClass("zbutton--icononly"))}this.options[optionName]=value}},menubuttonPrototype={options:{menuId:void 0,delay:0,showArrowIcon:!0,arrowIconClassName:void 0,arrowSVGIconId:void 0,activeClass:"is-selected"},_construct:function(){this._super(),this.element[0].className+=" zbutton--menu",this.element[0].setAttribute("aria-haspopup",!0);var iconEle=ZB_DOM._arrow.cloneNode();if(this.options.showArrowIcon){var className=this.options.splitbutton?"zbutton__svg zbutton__splitarrow":"zbutton__svg zbutton__menuarrow",svgData={props:{"class":className,viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{polygon:{points:"3.5,6.5 4.5,5.5 8,9 11.5,5.5 12.5,6.5 8,11"}}]};this._handleIcon($(iconEle),svgData,"arrow",this.options.arrowIconClassName,this.options.arrowSVGIconId),this.element[0].appendChild(iconEle)}},destroy:function(){this._super(),this.element.off("."+this.componentName).removeClass("zbutton--menu").removeData("zmenubutton").removeAttr("aria-haspopup")},_bindEvents:function(){var base=this,componentName=this.componentName,key=ZC.keyCode;this.element.on("mousedown."+componentName,function(){base.element.hasClass("is-disabled")||base.options.menuId&&$.fn.zmenu&&(base.options.delay?window.setTimeout(function(){base._showHideMenu()},base.options.delay):base._showHideMenu()),base._mouseup=!1}).on("click."+componentName,function(event){base._dispatchEvent("CLICK",event,{button:base.element}),base._mouseup=!0}).on("keydown."+componentName,function(event){var prevent=!1,menu=$("#"+base.options.menuId);event.keyCode===key.DOWN||event.keyCode===key.UP||event.keyCode===key.LEFT||event.keyCode===key.RIGHT?(prevent=!0,menu.is(":visible")?menu.zmenu("handleKeyCode",event.keyCode,event):(event.keyCode===key.UP||event.keyCode===key.DOWN)&&base._showHideMenu()):(event.keyCode===key.ENTER||event.keyCode===key.SPACE)&&base.options.menuId&&$.fn.zmenu?document.activeElement===base.element[0]&&(prevent=!0,menu.find(".on-hover").length?menu.zmenu("handleKeyCode",event.keyCode,event):base._showHideMenu()):(event.keyCode===key.ESCAPE||event.keyCode===key.TAB)&&menu.is(":visible")&&(menu.find(".on-hover").hasClass("zmenu--submenu")?menu.zmenu("handleKeyCode",event.keyCode,event):(menu.zmenu("hide"),event.keyCode===key.ESCAPE&&event.stopPropagation())),prevent&&(event.preventDefault(),event.stopPropagation())}),window.ZShortCut&&ZShortCut.register(this.element)},_showHideMenu:function(){var base=this,menu=$("#"+this.options.menuId);!menu.is(":visible")||base.options.splitbutton&&menu.data("forElement")&&menu.data("forElement")[0]!==base.element.closest(".zbutton--split").get(0)||!base.options.splitbutton&&menu.data("forElement")&&menu.data("forElement")[0]!==base.element.get(0)?(menu.zmenu("hide"),menu.on("zmenuhide",function(event,ui){!base.options.splitbutton&&event.originalEvent&&("mouseup"===event.originalEvent.type?(ui&&ui.menuitem&&ui.menuitem.is(".is-fixed")||base.element.focus(),base.element.removeClass("has-focus")):ui&&ui.menuitem&&ui.menuitem.is(".is-fixed")&&base.element.removeClass("has-focus")),base.element.removeClass(base.options.activeClass)}).on("zmenubeforefocus",function(){return!1}),menu.zmenu(),menu.zmenu("show",{forElement:base.options.splitbutton?base.element.closest(".zbutton--split"):base.element}),base.element.addClass(base.options.activeClass),ZC.$window.on("resize."+this.componentName,function(){menu.zmenu("hide")})):(base.element.removeClass(base.options.activeClass),menu.zmenu("hide"))}},splitbuttonPrototype={_initialShow:!0,attributeList:["data-appearance","data-icon","data-text","data-size","data-disabled","disabled","data-menu-id"],options:{size:"medium",disabled:!1,updateButtonOnMenuItemClick:!0},_create:function(button,options){var buttonId=button.attr("id"),menuButtonId=void 0,menuButton=button.next(),splitPair=document.createElement("div");this.splitPair=splitPair,splitPair.setAttribute("class","zbutton--split "+options.className),splitPair.setAttribute("role","splitbutton"),"primary"!==options.appearance&&(splitPair.className+=" zbutton--splitnormal"),buttonId&&(splitPair.setAttribute("id",buttonId+"Container"),menuButtonId=buttonId+"DropDown"),button[0].parentNode.insertBefore(splitPair,button[0]),!options.menuId&&menuButton.length&&"BUTTON"===menuButton[0].tagName?menuButton=menuButton[0]:(menuButton=document.createElement("button"),menuButton.setAttribute("id",menuButtonId)),this.menuButton=$(menuButton),menuButton.setAttribute("class","zbutton--icononly");var _data={appearance:options.appearance,size:options.size,disabled:void 0!==options.disabled?options.disabled:!1,delay:options.delay,splitbutton:!0,showArrowIcon:options.showArrowIcon,arrowIconClassName:options.arrowIconClassName,arrowSVGIconId:options.arrowSVGIconId};splitPair.appendChild(button[0]),splitPair.appendChild(menuButton),options.menuId&&menuButton.setAttribute("data-menu-id",options.menuId),button.disabled&&menuButton.setAttribute("disabled",!0),options.splitbuttonAttributes&&$(menuButton).attr(options.splitbuttonAttributes),options.appData&&(_data.appData=options.appData),button.removeAttr("data-menu-id"),options.className="",button.attr("title")&&splitPair.setAttribute("title",button.attr("title")),button.removeAttr("title"),button.zbutton(options),this.element=button,$(menuButton).zmenubutton(_data),this.options=options,this._bindEvents(),this.container=$(this.splitPair)},_bindEvents:function(){var base=this,menu=$("#"+this.options.menuId);this.element.off("click.zbutton"),$(this.splitPair).off("click.zbutton").on("click."+this.componentName,function(event){var element=$(event.target).closest(".zbutton"),ui={dropdownButton:base.menuButton};element.hasClass("zbutton--menu")?ui.isMenuButton=!0:$.fn.zmenu&&menu.zmenu("hide"),base._dispatchEvent("CLICK",event,ui)}),window.ZShortCut&&(ZShortCut.register(this.element),ZShortCut.register(this.menuButton)),menu.on("zmenubeforeshow",function(){base.options.updateButtonOnMenuItemClick&&base._initialShow?base._hideMenuItem(base.options.menuId,!0):$.noop}).on("zmenushow",function(event,ui){if(menu.data("forElement")[0]==base.splitPair){var className=ui.menu.attr("class");className.match("top")?(base.element.css("border-bottom-left-radius",window.getComputedStyle(base.splitPair,null).borderBottomLeftRadius),base.menuButton.css("border-bottom-right-radius",window.getComputedStyle(base.splitPair,null).borderBottomRightRadius)):className.match("bottom")&&(base.element.css("border-top-left-radius",window.getComputedStyle(base.splitPair,null).borderTopLeftRadius),base.menuButton.css("border-top-right-radius",window.getComputedStyle(base.splitPair,null).borderTopRightRadius)),base._initialShow=!1}}).on("zmenuhide",function(){base.element.css({"border-bottom-left-radius":"","border-top-left-radius":"","border-bottom-right-radius":"","border-top-right-radius":""}),base.menuButton.css({"border-bottom-right-radius":"","border-top-right-radius":"","border-top-left-radius":"","border-bottom-left-radius":""})}),this.options.updateButtonOnMenuItemClick&&menu.on("zmenuitemclick",function(event,ui){var menuData=ui.menu.data("zmenu").options,menuType=menuData.contentType,buttonType=(base.options.icon||base.options.iconClassName||base.options.SVGIconId)&&base.element.data("zbutton").options.text?"icon-text":base.options.icon||base.options.iconClassName||base.options.SVGIconId?"icon":"text";menuType===buttonType&&(base._hideMenuItem(base.options.menuId,!1),menu.zmenu("hideMenuItems",[ui.menuitem]),(base.options.icon||base.options.iconClassName||base.options.SVGIconId)&&base.setAttribute("icon",ui.data.icon),base.element.data("zbutton").options.text&&base.setAttribute("text",ui.data.label),base._dispatchEvent("CHANGE",event,ui))})},_hideMenuItem:function(menuId,hide){for(var menu=$("#"+menuId),currentText=this.element.data("zbutton").options.text,currentIcon=this.options.icon||this.options.iconClassName||this.options.SVGIconId,menuItems=menu.find("li"),i=0;i<menuItems.length;i++){var metadata=this.getData(menuItems[i]),iconMatch=metadata.icon&&currentIcon?0===metadata.icon.indexOf(currentIcon):!0,textMatch=metadata.label&&currentText?metadata.label===currentText:!0;iconMatch&&textMatch&&menu.zmenu(hide?"hideMenuItems":"showMenuItems",[menuItems[i]])}},getElement:function(){return $(this.splitPair)},setAttribute:function(optionName,value){return("disabled"===optionName||"menuId"===optionName||"data-menu-id"===optionName||"size"===optionName||"data-size"===optionName||"appearance"===optionName||"data-appearance"===optionName&&this.options[optionName]!==value)&&($(this.menuButton).zmenubutton("setAttribute",optionName,value),"appearance"===optionName&&$(this.splitPair)["primary"===value?"removeClass":"addClass"]("zbutton--splitnormal")),this.options[optionName]=value,this.element.zbutton("object"==typeof optionName?"setAttributes":"setAttribute",optionName,value)},destroy:function(){this._super(),$(this.menuButton).remove(),this.element.unwrap().zbutton("destroy").removeData("zsplitbutton")}},ZB_DOM={};ZC.createButton=function(initObject){return initObject.componentName="zbutton",createElement(initObject)},ZC.createSplitbutton=ZC.createSplitButton=function(initObject){return initObject.componentName="zsplitbutton",createElement(initObject)},ZC.createMenubutton=ZC.createMenuButton=function(initObject){return initObject.componentName="zmenubutton",createElement(initObject)},ZC.createUploadbutton=ZC.createUploadButton=function(initObject){return initObject.componentName="zuploadbutton",initObject.tagName="input",initObject.customAttributes=initObject.customAttributes?initObject.customAttributes:{},initObject.customAttributes.type="file",createElement(initObject)},ZC.registerComponent("zbutton",buttonPrototype),ZC.registerComponent("zmenubutton",$.zbutton,menubuttonPrototype),ZC.registerComponent("zsplitbutton",$.zbutton,splitbuttonPrototype)}(ZComponents),function(ZC){var $=ZC.DOMUtil,buttonSetPrototype={options:{appearance:"normal",disabled:!1,size:void 0,selectors:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, div",nospriteIcon:!1,spriteIconClassName:"",label:"",labelPosition:"",constructButtonSet:!0},attributeList:["data-appearance","data-disabled","disabled","data-size","data-sprite-icon-class-name"],_EVENTS:{SELECTIONCHANGE:"change"},_create:function(){this._initItems(),this._bindEvents(),this.options.disabled&&this._disable(!0)},_initItems:function(){var base=this;if("bottom"!==this.options.labelPosition&&this.options.label){var groupBtn=$("<button>").attr({disabled:"true","class":"zbutton--group__label"}).text(this.options.label);"right"===this.options.labelPosition?groupBtn.insertAfter(this.element.children(":last")):groupBtn.insertBefore(this.element.children(":first"))}this._items=this.element[0].querySelectorAll(this.options.selectors+":not([ctype])"),this.element[0].className+=" zbutton--group "+this.options.className,this.element[0].setAttribute("role","buttongroup"),this.element.data("zbuttongroup",!0),this.element.data("componentName",this.componentName);for(var index in this._items)if(this._items.hasOwnProperty(index)&&"length"!==index){var btnElement=$(this._items[index]),btnData=base.getData(btnElement);if(btnData.constructButton=base.options.constructButtonSet,!base.options.nospriteIcon&&!btnData.nospriteIcon&&btnData.icon&&base.options.spriteIconClassName&&(btnData.icon=base.options.spriteIconClassName+" "+btnData.icon),"zbuttonset"===btnData.ctype)base.element.data("mainButtonset",!0),btnElement.data("innerButtonset",!0).addClass("zbutton--group__inner"),btnElement.append($("<span>").attr("class","ui-components-icon zc-btn-group-separator ui-icon-dot-separator")),btnElement.zbuttonset(btnData);else{btnData.appearance=base.options.appearance,btnData.size=base.options.size;var tagName=btnElement[0].tagName;("INPUT"===tagName||"BUTTON"===tagName||"A"===tagName||"DIV"===tagName)&&("INPUT"===tagName&&btnElement.attr("data-ignoretrack","true"),"zmenubutton"===btnData.ctype?btnElement.zmenubutton(btnData):"zsplitbutton"===btnData.ctype?btnElement.zsplitbutton(btnData):btnElement.zbutton(btnData))}}},_bindEvents:function(){var base=this;this.element.on("zbuttonchange."+this.componentName,function(event,ui){base._dispatchEvent("SELECTIONCHANGE",event,ui)})},destroy:function(){var base=this;$.each(this._items,function(index,button){var options=base.getData($(button));options.buttonset?$(button).zbuttonset("destroy"):$(button).zbutton("destroy")}),this.element.removeAttr("role aria-disabled").removeClass("zbutton--group").off(".zbuttonset").removeData("zbuttonset")
},_disable:function(disable){this.element[disable?"addClass":"removeClass"]("is-disabled").attr("aria-disabled",disable),this.setButtonsAttribute(this._items,"disabled",disable)},_changeAppearance:function(appearance){this.setButtonsAttribute(this._items,"appearance",appearance)},_changeSizes:function(value){this.setButtonsAttribute(this._items,"size",value)},setButtonsAttribute:function(buttonIds,optionName,value){var buttons="string"==typeof buttonIds?buttonIds.split(","):buttonIds;$.each(buttons,function(i,element){$(element).length&&$(element).zbutton("option",optionName,value)})},setAttribute:function(optionName,value){if("disabled"===optionName&&value!==this.options.disabled)this._disable(value);else if("appearance"===optionName&&value!==this.options.appearance)this._changeAppearance(value);else if("size"===optionName&&value!==this.options.size)this._changeSizes(value);else if("spriteIconClassName"!==optionName&&"data-no-sprite-icon"!==optionName||value===this.options.spriteIconClassName){if("selectors"===optionName&&this.options.selectors!==value)this.destroy(),this.options.selectors=value,this.element.zbuttonSet(this.options);else if("labelPosition"===optionName&&this.options.labelPosition!==value)if(""===this.options.labelPosition){var groupBtn=$("<button>").attr({disabled:"true","class":"zbutton--group__label"}).text(this.options.label);"right"===this.options.labelPosition?groupBtn.insertAfter(this.element.children(":last")):groupBtn.insertBefore(this.element.children(":first"))}else this.element.find(".zbutton--group__label")["right"===value?"append":"prepend"](this.element)}else{var base=this;$.each(this._items,function(index,button){var btnData=base.getData($(button)),btnInstance=$(button).is("input")?$(button).next("label.zbutton"):$(button).zbutton("getElement");btnData.nospriteIcon||btnInstance.find(".zbutton__icon").removeClass(base.options.spriteIconClassName+" "+btnData.icon).addClass(value+" "+btnData.icon)})}this.options[optionName]=value}};ZC.createButtonset=ZC.createButtonSet=function(initObject){var childElement,element=document.createElement("div");element.setAttribute("id",initObject.id),initObject.customAttributes&&$(element).attr(initObject.customAttributes),initObject.appendTo&&$(initObject.appendTo)[0].appendChild(element);for(var i=0;i<initObject.buttons.length;i++)tagName=initObject.buttons[i].tagName?initObject.buttons[i].tagName:"button",childElement=document.createElement(tagName),childElement.setAttribute("id",initObject.buttons[i].id),initObject.buttons[i].customAttributes&&$(childElement).attr(initObject.buttons[i].customAttributes),$(childElement).data("metadata",initObject.buttons[i]),element.appendChild(childElement);return $(element).zbuttonset(initObject)},ZC.registerComponent("zbuttonset",buttonSetPrototype)}(ZComponents),function(ZC){var $=ZC.DOMUtil,uploadbuttonPrototype={options:{directory:!1,accept:"",maxAllowedSize:void 0,maxAllowedFiles:void 0,multiple:!1,labels:{exceedsAllowedSize:"File size exceeds the maximum allowed limit of {0}",exceedsAllowedFiles:"Number of Files Exceeded"},errorMessage:{exceedsAllowedSize:void 0,exceedsAllowedFiles:void 0}},attributeList:["data-appearance","data-disabled","disabled","data-size","data-icon","data-text","data-multiple","multiple","data-directory","directory","accept","data-accept","data-sprite-icon-class-name","data-error-message","data-max-allowed-size","data-max-allowed-files"],_construct:function(){this._super(),this.container.attr("role","uploadbutton");var base=this;if(!this.container.is("label")){this._input=$("<input type='file' class='h-dnone'/>"),$(["accept","disabled","multiple","directory"]).each(function(index,name){base.element.attr(name)&&base._input.attr(name,base.element.attr(name))}),base.element[0].type&&(base._input[0].type=base.element[0].type);var elementWidth=this.container.outerWidth();this.container.append(this._input.css("width",elementWidth)).css("position","relative")}this.options.multiple&&this._input.attr("multiple",!0),this.options.directory&&this._input.attr({webkitdirectory:"",directory:"",mozdirectory:"",odirectory:"",msdirectory:""}),""!==this.options.accept&&this._setAcceptAttribute()},_setAcceptAttribute:function(){var formats=this.options.accept.split(","),filteredResults="";if(""!==this.options.accept)for(var i=0;i<formats.length;i++)filteredResults=filteredResults+formats[i]+",";this._input.attr("accept",filteredResults)},_bindEvents:function(){var base=this,componentName=this.componentName;this._input.on("change."+componentName,function(event){base._mouseup=!0;var files=base._input.prop("files"),validatedFiles={},size=(parseInt(base.options.maxAllowedSize),0);return base.options.maxAllowedFiles&&files.length>parseInt(base.options.maxAllowedFiles)?(base.value="",void(ZAlertDialog?(ZAlertDialog.close(),ZAlertDialog.open({type:"error",primaryMessage:base.options.errorMessage.exceedsAllowedFiles||base._localize("exceedsAllowedFiles")})):alert(base.options.errorMessage.exceedsAllowedFiles||base._localize("exceedsAllowedFiles")))):(base.options.maxAllowedSize&&$.each(files,function(i,file){return size+=parseFloat(file.size),base._checkMaximumAllowedSize(size)?void(ZAlertDialog?(ZAlertDialog.close(),ZAlertDialog.open({type:"error",primaryMessage:(base.options.errorMessage.exceedsAllowedSize||base._localize("exceedsAllowedSize")).replace("{0}",base.options.maxAllowedSize)})):alert((base.options.errorMessage.exceedsAllowedSize||base._localize("exceedsAllowedSize")).replace("{0}",base.options.maxAllowedsize))):(validatedFiles[i]=files[i],void(validatedFiles.length=i+1))}),void((validatedFiles.length||void 0==base.options.maxAllowedSize)&&base._dispatchEvent("change",event,{input:base._input,value:base._input.val(),files:validatedFiles.length<files.length?validatedFiles:files},base._input)))}),this.container.off("keydown."+componentName).on("keydown."+componentName,function(event){(event.keyCode===ZC.keyCode.ENTER||event.keyCode===ZC.keyCode.SPACE)&&(base.container.trigger("click"),event.stopImmediatePropagation(),event.stopPropagation())}),window.ZShortCut&&ZShortCut.register(this.element)},_checkMaximumAllowedSize:function(totalSize){var allowedSize=this.options.maxAllowedSize,allowedSizeInLowerCase=allowedSize,kilobytesIndex=allowedSizeInLowerCase.indexOf("kb"),megabytesIndex=allowedSizeInLowerCase.indexOf("mb"),gigabytesIndex=allowedSizeInLowerCase.indexOf("gb"),terabytesIndex=allowedSizeInLowerCase.indexOf("tb");return allowedSize=-1!==kilobytesIndex?1024*parseInt(allowedSizeInLowerCase.split("kb")[0]):allowedSize,allowedSize=-1!==megabytesIndex?1024*parseInt(allowedSizeInLowerCase.split("mb")[0])*1024:allowedSize,allowedSize=-1!==gigabytesIndex?1024*parseInt(allowedSizeInLowerCase.split("gb")[0])*1024*1024:allowedSize,allowedSize=-1!==terabytesIndex?1024*parseInt(allowedSizeInLowerCase.split("tb")[0])*1024*1024*1024:parseInt(allowedSize),Math.ceil(totalSize)>Math.ceil(allowedSize)?!0:!1},setAttribute:function(optionName,value){if("directory"===optionName||"data-directory"===optionName&&this.options.directory!==value)value?this._input.attr({webkitdirectory:"",directory:"",mozdirectory:"",odirectory:"",msdirectory:""}):this._input.removeAttr("webkitdirectory directory mozdirectory odirectory msdirectory");else if("accept"===optionName||"data-accept"===optionName&&this.options.accept!==value)this.options.accept=value,this._setAcceptAttribute();else if("multiple"===optionName||"data-multiple"===optionName&&this._input.attr("multiple")!==value)this._input[value?"attr":"removeAttr"]("multiple","");else{if("disabled"!==optionName||this.options.disabled===value)return this._super(optionName,value);this._super(optionName,value),this._input[value?"attr":"removeAttr"]("disabled","")}}};ZC.registerComponent("zuploadbutton",$.zbutton,uploadbuttonPrototype)}(ZComponents),function(ZC){var $=ZC.DOMUtil,tabpanelPrototype={options:{tabAlignment:"left",tabPosition:"top",tabLabelType:"text",openOn:"click",activeTab:void 0,panelAnimation:!1,tabAnimation:!1,lazyLoadContent:!0,cacheContent:!0,tabs:void 0,className:void 0,messages:{serverError:"Server not available."},keyboardNavigation:!0,eventPrefix:"ztabpanel"},_CLASS:{ACTIVE:"is-selected",DISABLED:"is-disabled",ICONONLY:"ztabpanel--icononly",TEXT:"ztabpanel__text",NAV:"ztabpanel__nav",NAVCONTENT:"ztabpanel__navcontent",PANEL:"ztabpanel__content",ICON:"ztabpanel__icon",FOCUS:"has-focus"},_EVENTS:{ONTABADD:"tabadd",ONREMOVETAB:"tabremove",ONBEFORESWITCH:"beforeswitch",ONSWITCH:"switch",ONTABSHOW:"tabshow",ONTABHIDE:"tabhide",ONINIT:"init"},_ANIMATION:{slide:{open:"slideDown",close:"slideUp",show:"slideDown",hide:"slideUp"},fade:{open:"fadeIn",close:"fadeOut",show:"fadeIn",hide:"fadeOut"},end:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"},_REGEX:{vertical:/^(left|right)$/,horizontal:/^(top|bottom)$/,verticalAlign:/^(top|bottom|middle)$/,horizontalAlign:/^(left|right|center)$/},_create:function(element){this.element=element.attr("tabindex",0),this.options.height=this.options.height||this.element[0].style.height,this.defaultClass=this.element.attr("class"),this._eventPrefix="."+this.options.eventPrefix,this._constructContainer(),this._initTabs(),this._handleDS(),this._fixNavBarWidth(),this._setInitial(),this._bindEvents(),this._trigger("ONINIT")},_constructContainer:function(){var baseClass="ztabpanel "+("string"==typeof this.options.className?this.options.className:""),panelDiv=this.element.addClass(baseClass).children("*:not(ul, [data-custom])"),customFirst=this.element.children("[data-custom=true]:not([data-position=last])"),customLast=this.element.children("[data-custom=true][data-position=last]");this.navBar=$("<div></div>").addClass(this._CLASS.NAV).appendTo(this.element),this.tabsBar=this.element.children("ul:first"),this.tabsBar.length||(this.tabsBar=$("<ul>")),this.tabsBar.addClass("ztabpanel__list").attr("role","tablist").appendTo(this.navBar),this.contentPanel=$('<div class="ztabpanel__contentscroll"></div>').append(panelDiv),this.tabsPanel=$("<div>").addClass(this._CLASS.PANEL).append(this.contentPanel).appendTo(this.element),customLast.length&&(this.customright=$("<div>").addClass(this._CLASS.NAVCONTENT+" h-floatright").append(customLast).prependTo(this.navBar)),customFirst.length&&(this.customleft=$("<div>").addClass(this._CLASS.NAVCONTENT).append(customFirst).prependTo(this.navBar)),"icon"===this.options.tabLabelType&&this.element.addClass(this._CLASS.ICONONLY),this._fixPosition()},_fixDimension:function(){this.options.height&&(this.element[0].style.height=isNaN(this.options.height)?this.options.height:this.options.height+"px"),this.options.width&&(this.element[0].style.width=isNaN(this.options.width)?this.options.width:this.options.width+"px");var occupiedHeight=this._isVertical()?0:this.navBar.outerHeight(!0);this.tabsPanel.css("height","calc(100% - "+occupiedHeight+"px)"),this.contentPanel[0].style.height="100%",ZC.Browser.isSafari()&&this._isVertical()&&(this.element.css("display","inline-block"),this.contentPanel.height(this.element.height()),this.element.css("display","table"))},_fixNavBarWidth:function(){if(this._isVertical())this.navBar.css("height","calc(100%)");else{var occupiedWidth=(this.customleft?this.customleft.outerWidth(!0):0)+(this.customright?this.customright.outerWidth(!0):0);this.navBar.css("width","calc(100% - "+occupiedWidth+"px)")}},_fixPosition:function(){var o=this.options;/^(left|right|top|bottom)$/.test(o.tabPosition)||(o.tabPosition=$.ztabpanel.prototype.options.tabPosition),this._isVertical()?(this._REGEX.verticalAlign.test(o.tabAlignment)||(o.tabAlignment="center"===o.tabAlignment?"middle":"top"),this.element.addClass("ztabpanel--vertical")):this._REGEX.horizontalAlign.test(o.tabAlignment)||(o.tabAlignment="left"),this.element.addClass("ztabpanel--"+o.tabPosition+o.tabAlignment),this.tabsPanel[/^(bottom|right)$/.test(o.tabPosition)?"prependTo":"appendTo"](this.element),this._fixDimension()},_isVertical:function(){return this._REGEX.vertical.test(this.options.tabPosition)},_handleDS:function(){this.options.tabs&&this._addTabs(this.options.tabs)},_initTabs:function(){var base=this;$.each(this._getTabs(),function(index,tab){base._initTab($(tab))})},_setInitial:function(){this.initialTab&&this.initialTab.length?this.initialTab=this.initialTab.filter(":not([data-disabled=true],[data-hidden=true])"):void 0===this.options.activeTab?this.initialTab=this._getTabs().filter(":not([data-disabled=true],[data-hidden=true])").first():"none"!==this.options.activeTab&&(this.initialTab=this._getTab(this.options.activeTab)),this.initialTab&&this.initialTab.length&&this._selectTab(this.initialTab)},_initTab:function(tab){var tabData=ZC.getOptions(tab);tabData.customAttributes&&tab.attr(tabData.customAttributes),tabData.selected&&(tabData.hidden||tabData.disabled?this.initialTab||(this.initialTab=tab):this.initialTab=tab),tabData.selected=void 0,tabData.id=tab.attr("id")||"tabid"+Math.floor(1e6*Math.random()),tab.attr("role","tab").attr("id",tabData.id).addClass("ztabpanel__item").removeAttr("data-selected selected").find("a").attr("tabindex",-1).on("click"+this._eventPrefix,function(event){event.preventDefault()}),tabData.hidden&&tab.hide().attr({"data-hidden":!0,"aria-hidden":!0}),tabData.disabled&&tab.attr({"data-disabled":!0,"aria-disabled":!0}).addClass(this._CLASS.DISABLED),this._includeTabContent(tab,tabData),tabData.panelId||(tabData.panelId=tab.find("a").attr("href")||""),tabData.panelId=tabData.panelId.replace(/^\#*/,"").replace(/\s/g,""),tabData.panelId||(tabData.panelId="paneid"+Math.floor(1e4*Math.random())),$("#"+tabData.panelId,this.element).hide(),tabData.width&&(tab[0].style.width=isNaN(tabData.width)?tabData.width:tabData.width+"px"),this.options.lazyLoadContent||this._loadPane(tab)},_includeTabContent:function(tab,tabData){var alink=$("a",tab);tabData.label=tabData.label||alink.text(),alink.empty(),this.options.tabLabelType.match("icon")&&this._includeIcon(alink,tabData),this.options.tabLabelType.match("text")&&$("<span>").addClass(this._CLASS.TEXT).text(tabData.label).appendTo(alink),"icon"===this.options.tabLabelType&&tab.attr("title",tabData.label)},_includeIcon:function(alink,tabData){ZC.createIcon($('<i class="ztabpanel__icon">').prependTo(alink),tabData.icon,tabData.SVGIconId,tabData.iconClassName)},_animate:function(element,animation,action,alterFn,callback){if(animation&&"object"==typeof animation){var effect,duration,className;"string"==typeof animation?effect=this._ANIMATION[animation][action]:animation.name?this._ANIMATION[animation.name]&&(effect=this._ANIMATION[animation.name][action]):animation[action]&&("string"==typeof animation[action]?effect=animation[action]:animation[action].name?effect=animation[action].name:animation[action].className&&(className=animation[action].className)),duration=animation.duration?animation.duration:animation[action]&&animation[action].duration?animation[action].duration:void 0,"object"==typeof effect?element.animate(effect,duration,callback):/^(fadeIn|fadeOut|slideDown|slideUp)$/.test(effect)?element[effect](duration,callback):"string"==typeof className?("show"===alterFn&&element.show(),element.removeClass(element.data("css-effect")).addClass(className).data("css-effect",className).off(ZBanner._ANIMATION.end).on(ZBanner._ANIMATION.end,function(){"hide"===alterFn&&element.hide(),element.removeClass(className).removeData("css-effect"),callback()})):element[alterFn]()&&callback()}else element[alterFn]()&&callback()},_bindEvents:function(){var base=this;this._setAttribute("openOn",this.options.openOn),this.options.keyboardNavigation&&this.element.on("keydown"+this._eventPrefix,function(event){base.element.hasClass(base._CLASS.DISABLED)||base._keyPress(event)})},_keyPress:function(event){if(event.shiftKey&&16!==event.keyCode){var keyCode=event.keyCode||event.charCode;switch(keyCode){case ZC.keyCode.RIGHT:case ZC.keyCode.DOWN:this._selectNextPreviousTab(!1,void 0,!0),event.preventDefault();break;case ZC.keyCode.LEFT:case ZC.keyCode.UP:this._selectNextPreviousTab(!0,void 0,!0),event.preventDefault();break;case ZC.keyCode.HOME:this._selectNextPreviousTab(!1,this._getTabs().length,!0),event.preventDefault();break;case ZC.keyCode.END:this._selectNextPreviousTab(!0,0,!0),event.preventDefault();break;default:return}}},_isHidden:function(element){return $(element).is("[data-hidden=true]")},_getTabs:function(){return this.tabsBar.children("li:not([data-custom=true])")},_getTab:function(identifier){return isNaN(identifier)?$(identifier,this.tabsBar):$(this._getTabs()[identifier])},_deleteTab:function(tab,origevent){if(tab){var base=this,deleteFn=function(){var tabData=ZC.getOptions(tab);$("#"+tabData.panelId).remove(),tab.remove(),base._trigger("ONREMOVETAB",tab,origevent,tabData)};return this._isHidden(tab)?deleteFn():this._hideTab(tab,!1,deleteFn),tab}},_loadPane:function(tab){var tabData=ZC.getOptions(tab),pane=$("#"+tabData.panelId,this.element).attr("role","panel"),content=tabData.panelContent||{};if(!tabData.contentLoaded||!this.options.cacheContent&&content.URL){if(tabData.contentLoaded=!0,!pane.length&&(pane=$("<div>").attr("id",tabData.panelId.replace(/^\#*/,"")).appendTo(this.contentPanel),!content))return pane;if(content)if("string"==typeof content||content.nodeType||content instanceof $){var dataContent=/^(\.|\#)$/.test(content)?$(content).clone():content;pane.html(dataContent)}else if(content.URL){var base=this;!function(tab,url,data,pane,successFn,errorMessage,failureFn){var promise=$.ajax({url:url,data:data});promise.success(function(content){$.isFunction(successFn)&&(content=successFn.call(tab,content)),pane.html(content)}).fail(function(){var failureContent=errorMessage||base._localize("serverError");$.isFunction(failureFn)&&(failureContent=failureFn.call(arguments));var tabData=ZC.getOptions(tab);tabData.contentLoaded=!1,pane.html(failureContent)})}(tab,content.URL,content.queryParam,pane,content.success,content.errorMessage,content.fail)}}return pane},_activateTab:function(tab){this.options.activeTab=tab.addClass(this._CLASS.ACTIVE).attr("aria-selected",!0)[0],this._loadPane(tab).show().attr("aria-expanded",!0)},_selectTab:function(tab,origevent,trigger){return tab=$(tab,this.tabsBar).filter(":not([data-hidden=true],[data-disabled=true])").first(),tab.length?!trigger||this._trigger("ONBEFORESWITCH",tab,origevent)?tab.hasClass(this._CLASS.ACTIVE)?tab:(this.deselectAllTabs(),this._activateTab(tab),trigger&&this._trigger("ONSWITCH",tab,origevent),tab):void 0:!1},_selectNextPreviousTab:function(isPrevious,index,trigger){var nextTab=this._getNextPreviousTab(isPrevious,index);this._selectTab(nextTab,void 0,trigger)===!1&&this.deselectAllTabs()},_getNextPreviousTab:function(isPrevious,index){var tabs=this._getTabs(),selectedIndex=tabs.index(this.options.activeTab);index=void 0!==index||selectedIndex;var nextTab=$(tabs[selectedIndex])[isPrevious?"prevAll":"nextAll"](":not(."+this._CLASS.DISABLED+"):visible:first");return nextTab=nextTab.length?nextTab:tabs.filter(":not(."+this._CLASS.DISABLED+"):visible"),nextTab.filter(isPrevious?":last":":first")},_showTab:function(tab,trigger){if(tab&&tab.length&&this._isHidden(tab)){var base=this;return this._animate(tab,this.options.tabAnimation,"show","show",function(){tab.removeAttr("data-hidden aria-hidden"),trigger&&base._trigger("ONTABSHOW",tab)}),!0}return!1},_hideTab:function(tab,trigger,callback){if(tab&&tab.length&&!this._isHidden(tab)){var base=this,visibleTab=this._getTabs().filter(":not([data-hidden])");return visibleTab.length<2?!1:(this._animate(tab,this.options.tabAnimation,"hide","hide",function(){tab.attr({"data-hidden":!0,"aria-hidden":!0}),tab.hasClass(base._CLASS.ACTIVE)&&(tab.removeClass(base._CLASS.ACTIVE),base._selectNextPreviousTab(void 0,void 0,!0)),trigger&&base._trigger("ONTABHIDE",tab),$.isFunction(callback)&&callback()}),!0)}return!1},_enableTab:function(tab){return tab&&tab.length?(tab.removeClass(this._CLASS.DISABLED).removeAttr("data-disabled aria-disabled"),!0):!1},_disableTab:function(tab){return tab&&tab.length?(tab.attr({"data-disabled":!0,"aria-disabled":!0}),tab.hasClass(this._CLASS.ACTIVE)&&(tab.removeClass(this._CLASS.ACTIVE),this._selectNextPreviousTab(void 0,void 0,!0)),tab.addClass(this._CLASS.DISABLED),!0):!1},_trigger:function(customevent,tab,origevent,dataobject){var data={element:this.element[0],activeTab:this.options.activeTab};return tab&&(tab.length>1?data.tabs=tab:(data.tab=tab[0],data.metadata=ZC.getOptions(tab))),dataobject&&$.extend(data,dataobject),this._dispatchEvent(customevent,origevent,data)},_createTab:function(tabData){var tab;if("string"==typeof tabData||tabData instanceof $||tabData.nodeType)try{tab=$(tabData)}catch(e){tab=void 0}if(tab&&tab.length){if(!tab.is("li"))return;tab=tab.first(),tabData={}}else tab=$("<li>").append($('<a href=""></a>')),"string"==typeof tabData&&(tabData={label:tabData});return tab.appendTo(this.tabsBar),$.extend(ZC.getOptions(tab),tabData),this._initTab(tab),tab},_addTabs:function(tabData,action,rtab,trigger){var base=this,addedtabs=$();$.each($.isArray(tabData)?tabData:[tabData],function(i,_tabdata){addedtabs=addedtabs.add(base._createTab(_tabdata))});var rtab=$(rtab,this.tabsBar).filter(".ztabpanel__item");return rtab.length&&/^(after|before)$/.test(action)?rtab[action](addedtabs):this.tabsBar.append(addedtabs),trigger&&this._trigger("ONTABADD",addedtabs),addedtabs},_arrayLoopThrough:function(callback,identifier){if(void 0!==identifier&&$.isFunction(callback)){var base=this,tabs=$();identifier=$.isArray(identifier)?identifier:[identifier],$.each(identifier,function(index,selector){var tab;if("string"==typeof selector||"number"==typeof selector)tab=base._getTab(selector);else if(selector instanceof $)tab=selector;else{if(!selector.nodeType)return;tab=$(selector,base.tabsBar)}tab&&tab.length&&(tabs=tabs.add(tab))});var args=Array.prototype.slice.call(arguments,1);return"function"==typeof callback&&tabs.each(function(index,tab){args[0]=$(tab),callback.apply(base,args)}),tabs}},openTab:function(tabSelector,trigger){return this._selectTab(this._getTab(tabSelector),void 0,trigger),this.getActiveTab()},openNextTab:function(){return this._selectNextPreviousTab(),this.getActiveTab()},openPreviousTab:function(){return this._selectNextPreviousTab(!0),this.getActiveTab()},getActiveTab:function(){return this.options.activeTab},deselectAllTabs:function(){var base=this;if(base.options.activeTab&&"LI"===base.options.activeTab.tagName){{var tabData=ZC.getOptions($(base.options.activeTab).removeClass(this._CLASS.ACTIVE).attr("aria-selected",!1));$("#"+tabData.panelId,base.element).hide().attr("aria-expanded",!1)}base.options.activeTab="none"}},showTab:function(tabSelector){return this._arrayLoopThrough(this._showTab,tabSelector,!0)},hideTab:function(tabSelector){return this._arrayLoopThrough(this._hideTab,tabSelector,!0)},enableTab:function(tabSelector){return this._arrayLoopThrough(this._enableTab,tabSelector)},disableTab:function(tabSelector){return this._arrayLoopThrough(this._disableTab,tabSelector)},addTab:function(){return this._addTabs.apply(this,arguments)},removeTab:function(tabSelector){return this._arrayLoopThrough(this._deleteTab,tabSelector)},_setTabAttribute:function(tab,optionName,value){var tabData=ZC.getOptions(tab),oldVal=tabData[optionName];tabData[optionName]=value,"icon"===optionName?/^(icon|icon-text)$/.test(this.options.tabLabelType)&&(tab.find(".ztabpanel__icon").remove(),this._includeIcon(tab.find("a"),tabData)):"label"===optionName?value.length&&tab.find("a span."+this._CLASS.TEXT).text(value):"panelId"===optionName?($("#"+oldVal,this.tabsPanel).hide(),tabData.panelId=value.replace(/^\#*/,""),tab.hasClass(this._CLASS.ACTIVE)&&this._loadPane(tab).show()):"panelContent"===optionName?tabData.contentLoaded&&(tabData.contentLoaded=!1,tab.hasClass(this._CLASS.ACTIVE)&&this._loadPane(tab).show()):"disabled"===optionName?this[value?"disableTab":"enableTab"](tab):"hidden"===optionName?this[value?"hideTab":"showTab"](tab):"width"===optionName?(this.options[optionName]=value,tab[0].style.width=isNaN(value)?value:value+"px"):"customAttributes"===optionName?tab.attr(value):"selected"===optionName&&(value?this.openTab(tab):tab.is(this.options.activeTab)&&this.deselectAllTabs())},_setAttribute:function(optionName,value){switch(optionName){case"openOn":-1===["click","hover"].indexOf(value)&&(value="click");var base=this,selectHandler=function(event){var tab=$(event.currentTarget).filter(":not([data-hidden=true],[data-disabled=true])");tab.length&&base._selectTab(tab,event,!0)===!1&&base.deselectAllTabs()};this.tabsBar.off(this._eventPrefix).on(value.replace("hover","mouseenter")+this._eventPrefix,"li:not(.is-disabled):not(.is-selected)",selectHandler),this.options[optionName]=value;break;case"activeTab":"none"===value?this.deselectAllTabs():this.openTab(value);break;case"tabLabelType":if(/^(text|icon-text|icon)$/.test(value)||(value="text"),this.options.tabLabelType!==value){this.options.tabLabelType=value;var base=this;this._getTabs().each(function(index,tab){base._includeTabContent.call(base,$(tab),ZC.getOptions(tab))}),this.element["icon"===value?"addClass":"removeClass"](this._CLASS.ICONONLY)}break;case"tabPosition":case"tabAlignment":this.element.removeClass("ztabpanel--vertical ztabpanel--topright ztabpanel--topleft ztabpanel--topcenter ztabpanel--bottomright ztabpanel--bottomleft ztabpanel--bottomcenter ztabpanel--lefttop ztabpanel--leftmiddle ztabpanel--leftbottom ztabpanel--righttop ztabpanel--rightmiddle ztabpanel--rightbottom"),this.options[optionName]=value,this._fixPosition();break;case"tabs":"object"==typeof value&&(this.tabsBar.find("li").remove(),this.contentPanel.children().remove(),this.options[optionName]=value,this._handleDS());break;case"className":"string"==typeof value&&(this.element.removeClass(this.options[optionName]).addClass(value),this.options[optionName]=value);break;default:this.options[optionName]=value}},setTabAttributes:function(tabSelector,optionName,value){var base=this;"object"!=typeof optionName||$.isEmptyObject(optionName)?optionName&&void 0!==value&&this._arrayLoopThrough(this._setTabAttribute,tabSelector,optionName,value):$.each(optionName,function(o,v){base.setTabAttributes(tabSelector,o,v)})},setAttribute:function(optionName,value){value!==this.options[optionName]&&(value="string"==typeof value?value.trim():value,this._setAttribute(optionName,value))},destroy:function(){var panels=this.contentPanel.children();this.tabsPanel.remove(),this.element.prepend(this.tabsBar).removeAttr("class").addClass(this.defaultClass),panels.insertAfter(this.tabsBar),this.customright&&this.customright.remove().children().insertAfter(this.tabsBar),this.customleft&&this.customleft.remove().children().insertBefore(this.tabsBar),$.each(this._getTabs(),function(){$(this).removeAttr("class").find(".ztabpanel__icon").remove()}),this.navBar.remove(),this.tabsBar.add(this.element).off(this._eventPrefix),this.element.removeData("ztabpanel")}};ZC.registerComponent("ztabpanel",tabpanelPrototype),ZC.createTab=function(options){if("object"==typeof options){var element=$("#"+options.id);if(element.length){if(element.data("ztabpanel"))return element}else element=$("<div>").appendTo($(options.appendTo).length?options.appendTo:"body"),options.id&&element.attr("id",options.id);return element.ztabpanel(options),element}}}(ZComponents),function(ZC){var $=ZC.DOMUtil,resizablePrototype={_EVENTS:{START:"start",STOP:"stop",RESIZE:"resize"},options:{disabled:!1,minHeight:10,minWidth:10,maxWidth:!1,maxHeight:!1,container:"window",handle:"s,e,se",alsoResize:!1,zIndex:1e3},_create:function(){this.element.addClass("zresizable"),this._addHandlers(),this.options.disabled?this.element.addClass("is-disabled"):this._bindEvents()},_addHandlers:function(){for(var handles=this.options.handle.split(","),i=0;i<handles.length;i++){var handle=$.trim(handles[i]),hname="zresizable__"+handle,axis=$("<div class='zresizable__handle "+hname+"'></div>");if("se"===handle){var iconEle=$("<i class='zresizable__icon'></i>"),svgEle=ZC.createSVGElement("svg",{"class":"zresizable__svg resizablecolor",viewBox:"0 0 12 12",width:"100%",height:"100%"},[{line:{"class":"st0",x1:"11",y1:"1",x2:"1",y2:"11"}},{line:{"class":"st0",x1:"11",y1:"5",x2:"5",y2:"11"}},{line:{"class":"st0",x1:"11",y1:"9",x2:"9",y2:"11"}}]);iconEle[0].appendChild(svgEle),axis.append(iconEle)}axis.css("zIndex",this.options.zIndex),this.element.append(axis)}},_bindEvents:function(){var currentLeft,currentTop,handles=this.element.find(".zresizable__handle"),base=this,componentName=this.componentName;handles.on("mousedown."+componentName,function(event){event.preventDefault(),base._mousePressed=!0,base.originalSize={width:parseInt(base.element.outerWidth(!0)),height:parseInt(base.element.outerHeight(!0))},base.size={width:parseInt(base.element.outerWidth(!0)),height:parseInt(base.element.outerHeight(!0))},base.options.container&&base._saveContainerData(),currentTop=parseInt(base.element.offset().top)||0,currentLeft=parseInt(base.element.offset().left)||0,base.offset=base.element.offset(),base.originalPosition={left:currentLeft,top:currentTop},base.position={left:currentLeft,top:currentTop},base.originalMousePosition={left:event.pageX,top:event.pageY},base.sizeDiff={width:base.element.outerWidth(!0)-base.element.width(),height:base.element.outerHeight(!0)-base.element.height()},base.options.alsoResize&&base._cacheProperties(base.options.alsoResize),base._target=event.target.closest(".zresizable__handle"),base._dispatchEvent("START",event,{originalPosition:base.originalPosition,originalSize:base.originalSize})}).on("mouseup."+componentName,function(event){base._mousePressed&&(base._dispatchEvent("STOP",event,{originalPosition:base.originalPosition,originalSize:base.originalSize}),$("body").css("cursor","default"),base._mousePressed=!1)}),ZC.$document.on("mousemove."+componentName,function(event){if(base._mousePressed){(base.element[0].style.right||base.element[0].style.bottom)&&(base.element.css({right:"",bottom:""}),base.element.css({top:currentTop,left:currentLeft}));var dx=event.pageX-base.originalMousePosition.left||0,dy=event.pageY-base.originalMousePosition.top||0,a=$(base._target).attr("class").slice(31),data=base._computePosition(a,dx,dy);data=base._checkLimit(data,a),base.options.container&&(data=base._checkContainerLimit(data)),base.options.alsoResize&&base._resizeOthers(a,dx,dy),("n"===a||"ne"===a||"nw"===a||"w"===a||"sw"===a)&&base.element.offset({top:base.position.top,left:base.position.left}),base.element.outerWidth(base.size.width),base.element.outerHeight(base.size.height),$("body").css("cursor",a+"-resize"),base._updateCache(data),base._dispatchEvent("RESIZE",event,{originalPosition:base.originalPosition,originalSize:base.originalSize})}}).on("mouseup."+componentName,function(event){base._mousePressed&&(base._dispatchEvent("STOP",event,{originalPosition:base.originalPosition,originalSize:base.originalSize}),$("body").css("cursor","default"),base._mousePressed=!1)})},_cacheProperties:function(selectors){$(selectors).each(function(){var element=$(this);element.data("resizable-alsoresize",{width:parseInt(element.outerWidth(!0)),height:parseInt(element.outerHeight(!0)),left:parseInt(element.css("left"),10),top:parseInt(element.css("top"),10)})})},_resizeOthers:function(){var diff={height:this.size.height-this.originalSize.height||0,width:this.size.width-this.originalSize.width||0,top:this.position.top-this.originalPosition.top||0,left:this.position.left-this.originalPosition.left||0};$(this.options.alsoResize).each(function(){var element=$(this),data=element.data("resizable-alsoresize"),style={},css=element.closest(this.element).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,property){var sum=(data[property]||0)+(diff[property]||0);sum&&sum>=0&&("width"===property||"height"===property?element["outer"+property[0].toUpperCase()+property.substr(1)](sum):style[property]=sum||null)}),element.css(style)})},_updateCache:function(data){data.left&&(this.position.left=data.left),data.top&&(this.position.top=data.top),data.height&&(this.size.height=data.height),data.width&&(this.size.width=data.width)
},_computePosition:function(a,dx,dy){var os=this.originalSize,op=this.originalPosition;switch(a){case"n":var computedTop=op.top+dy,computedHeight=os.height-dy;return{top:computedTop,height:computedHeight};case"s":return{height:os.height+dy};case"e":return{width:os.width+dx};case"w":return{left:op.left+dx,width:os.width-dx};case"se":return $.extend(this._computePosition("s",dx,dy),this._computePosition("e",dx,dy));case"sw":return $.extend(this._computePosition("s",dx,dy),this._computePosition("w",dx,dy));case"ne":return $.extend(this._computePosition("n",dx,dy),this._computePosition("e",dx,dy));case"nw":return $.extend(this._computePosition("n",dx,dy),this._computePosition("w",dx,dy))}},_saveContainerData:function(){var containerElement="parent"===this.options.container?this.element.parent().get(0):this.options.container;if("document"===containerElement)this.containerOffset={left:0,top:0},this.parentData={top:0,left:0,element:ZC.$document,width:ZC.$document.width(),height:ZC.$document.height()};else if("window"===containerElement)this.containerOffset={left:0,top:0},this.parentData={top:0,left:0,element:ZC.$window,width:ZC.$window.width(),height:ZC.$window.height()};else{var element=$(containerElement),p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=parseInt(element.css("padding"+name))||0}),this.containerOffset=element.offset(),this.containerSize={height:element.innerHeight()-p[3]-($(containerElement).height()-$(containerElement)[0].scrollHeight),width:element.innerWidth()-p[1]-($(containerElement).width()-$(containerElement)[0].scrollWidth)},this.parentData={element:containerElement,left:this.containerOffset.left,top:this.containerOffset.top,width:this.containerSize.width,height:this.containerSize.height}}},_checkContainerLimit:function(data){if(this.position.top+data.height-$(this.parentData.element).scrollTop()>=this.parentData.top+this.parentData.height){var totalHeight=this.position.top+data.height-$(this.parentData.element).scrollTop(),diff=totalHeight-this.parentData.top-this.parentData.height+(this._target?parseInt($(this._target).height())/2:0);data.height=data.height-diff}if(this.position.left+data.width-$(this.parentData.element).scrollLeft()>=this.parentData.left+this.parentData.width){var totalWidth=this.position.left+data.width-$(this.parentData.element).scrollLeft(),diff=totalWidth-this.parentData.left-this.parentData.width+(this._target?parseInt($(this._target).width())/2:0);data.width=data.width-diff}return data.top<this.parentData.top&&(data.top=this.parentData.top,data.height=this.size.height),data.left<this.parentData.left&&(data.left=this.parentData.left,data.width=this.size.width),data},_checkLimit:function(data,axis){var options=this.options,hasLesserWidth=data.width&&options.minWidth&&data.width<options.minWidth,hasLesserHeight=data.height&&options.minHeight&&data.height<options.minHeight,hasGreaterWidth=data.width&&options.maxWidth&&data.width>options.maxWidth,hasGreaterHeight=data.height&&options.maxHeight&&data.height>options.maxHeight;hasLesserWidth&&(data.width=options.minWidth),hasLesserHeight&&(data.height=options.minHeight),hasGreaterWidth&&(data.width=options.maxWidth),hasGreaterHeight&&(data.height=options.maxHeight);var diffWidth=this.originalPosition.left+this.originalSize.width,diffHeight=this.element.position.top+this.originalSize.height,changeWidth=/sw|nw|w/.test(axis),changeHeight=/nw|ne|n/.test(axis);return hasLesserWidth&&changeWidth&&(data.left=diffWidth-options.minWidth),hasGreaterWidth&&changeWidth&&(data.left=diffWidth-options.maxWidth),hasLesserHeight&&changeHeight&&(data.top=diffHeight-options.minHeight),hasGreaterHeight&&changeHeight&&(data.top=diffHeight-options.maxHeight),data},destroy:function(){this.element.find(".zresizable__handle").remove(),ZC.$document.off("."+this.componentName),this.element.removeClass("zresizable").removeData("zresizable")},setAttribute:function(optionName,value){var componentName=this.componentName;return"container"===optionName&&this.options.container!==value?(this.options.container=value,void this._saveContainerData()):("handle"===optionName&&this.options.handle!==value?(this.element.find(".zresizable__handle").remove(),ZC.$document.off("."+componentName),this._addHandlers(),this.options.disabled||this._bindEvents()):"disabled"===optionName&&value!==this.options.disabled&&(this.element[value?"addClass":"removeClass"]("is-disabled"),value?(this.element.find(".zresizable__handle").off("."+componentName),ZC.$document.off("."+componentName)):this._bindEvents()),void(this.options[optionName]=value))}};ZC.registerComponent("zresizable",resizablePrototype)}(ZComponents),function(ZC){var $=ZC.DOMUtil,dialogPrototype={options:{type:"modal",title:!1,icon:!1,content:void 0,autoOpen:!1,closeOnEscKey:!0,width:void 0,height:void 0,closeButton:!0,buttons:void 0,className:"",overlayClassName:"",minimizable:!1,maximizable:!1,resizable:{minHeight:300,minWidth:300,maxHeight:!1,maxWidth:!1,container:"window",direction:"s,e,se"},draggable:!0,position:"center",footer:"",isTitleHTMLEncoded:!1,isContentHTMLEncoded:!1,isFooterHTMLEncoded:!1,animation:!1,defaultActionButton:".zbutton--primary",labels:{minimize:"Minimize",maximize:"Maximize",minimizeRestore:"Restore",maximizeRestore:"Restore",close:"Close"},minimizeButtonLabel:void 0,maximizeButtonLabel:void 0,minimizeRestoreButtonLabel:void 0,maximizeRestoreButtonLabel:void 0,restoreButtonLabel:void 0,closeButtonLabel:void 0,buttonsAlignment:"right",icons:{minimize:void 0,maximize:void 0,restore:void 0,minimizeRestore:void 0,maximizeRestore:void 0,close:void 0},excludeFocus:void 0,handleFocusNavigation:!0,submitOnEnter:!0},_ALIGNMENTS:{right:"",left:"zdialogfooter--invert",center:"h-center"},_EVENTS:{ONDRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",ONRESIZE:"resize",RESIZESTART:"resizestart",RESIZEEND:"resizeend",ONMINIMIZE:"minimize",ONMAXIMIZE:"maximize",ONCLOSE:"close",ONOPEN:"open",BEFORECLOSE:"beforeclose",RESTORE:"restore",ACTIONBUTTONCLICK:"actionbuttonclick"},_EFFECTS:{slide:{open:"slideDown",close:"slideUp"},fade:{open:"fadeIn",close:"fadeOut"}},ANIMATION_EVENTS:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend transitionend",_create:function(){var excludeBtn=".zbutton--action";this.options.excludeFocus=this.options.excludeFocus?this.options.excludeFocus+" ,"+excludeBtn:""+excludeBtn,this._isComponentInited=!1,this._construct(),this._bindEvents()},_construct:function(){if(this.container=$("<div>").attr({"class":"zdialog "+this.options.className,tabIndex:-1,role:"dialog"}),this.container.attr("aria-modal","modal"===this.options.type),this.options.icon&&(this._iconSpan=$("<span class='zc-icon-primary zc-icon "+this.options.icon+"'></span>"),this.element.prepend(this._iconSpan)),this._createTitleBar(),this.container.append(this._titleBar),this.options.closeButton&&this._createTitleBarButtons(),"object"==typeof this.options.content){var base=this;$.ajax(this.options.content).success(function(data){base._setContent(data)})}else this._setContent()},_setContent:function(ajaxData){ajaxData?this.element.append(ajaxData):this.options.content&&this.element.html(this.options.isHTMLEncoded||this.options.isContentHTMLEncoded?this.options.content:ZC.encodeHTML(this.options.content)),this.container.append(this.element.show().addClass("zdialog__content").removeAttr("title")),void 0!==this.options.buttons&&this.container.append(this._createButtonPane()),this.options.footer&&""!==this.options.footer&&""!==this.options.footer.trim()&&this.container.append(this._createFooterMessage(this.options.footer)),$("body").append(this.container),this.options.resizable&&$.fn.zresizable&&(this.options.resizable="object"==typeof this.options.resizable?this.options.resizable:{},this._makeResizable()),(this.options.title||this.options.closeButton)&&this.options.draggable&&$.fn.zdraggable&&this._makeDraggable(),this.options.autoOpen&&this.open()},_makeResizable:function(){var base=this,resizeOptions=this.options.resizable;this.container.zresizable({minHeight:resizeOptions.minHeight,maxHeight:resizeOptions.maxHeight,minWidth:resizeOptions.minWidth,maxWidth:resizeOptions.maxWidth,container:"modal"===this.options.type?"parent":resizeOptions.container,alsoResize:this.element,handle:resizeOptions.direction,start:function(event,ui){base._triggerEvent("RESIZESTART",event,ui)},stop:function(event,ui){base.actualWidth=base.container.width(),base._triggerEvent("RESIZEEND",event,ui)},resize:function(event,ui){base.container.css("height","auto"),base._triggerEvent("ONRESIZE",event,ui)}})},_makeDraggable:function(){var base=this;this.container.zdraggable({ignore:".zdialog__actiongroup",handle:".zdialog__header",container:"window",start:function(event,ui){base._triggerEvent("DRAGSTART",event,ui)},end:function(event,ui){base._triggerEvent("DRAGEND",event,ui)},drag:function(event,ui){base._triggerEvent("ONDRAG",event,ui)}})},_createTitleBar:function(){var titleDiv=this._titleBar=$("<div>").attr("class","zdialog__header");if(this.options.title){var titleText=$("<span></span>").attr("class","zdialog__title");titleText.html(this.options.isTitleHTMLEncoded||this.options.isHTMLEncoded?this.options.title:ZC.encodeHTML(this.options.title)),titleDiv.append(titleText)}var base=this;titleDiv.on("dblclick.zdialog",function(event){$(event.target).closest(".zdialog__actiongroup").length||(base.isMinimized()&&"modal"!==base.options.type?base._toggleMinimize(event,base._minimizeButton,!0):base.isMaximized()?base._toggleMaximize(event,base._maximizeButton,!0):base.options.maximizable?base._toggleMaximize(event,base._maximizeButton,!0):base.options.minimizable&&"modal"!==base.options.type&&base._toggleMinimize(event,base._minimizeButton,!0))})},_createTitleBarButtons:function(){this._titleBarButtonContainer=$("<div/>").attr("class","zdialog__actiongroup"),this.options.minimizable&&"modal"!==this.options.type&&(this._minimizeButton=this._createMinimizeButton(),this._titleBarButtonContainer.append(this._minimizeButton)),this.options.maximizable&&(this._maximizeButton=this._createMaximizeButton(),this._titleBarButtonContainer.append(this._maximizeButton)),this._closeButton=this._createCloseButton(),this._titleBarButtonContainer.append(this._closeButton),this._titleBar.append(this._titleBarButtonContainer)},_createCloseButton:function(){var closeButton=$("<button type='button' ></button>").attr({tabindex:-1,"class":"zbutton zbutton--action",title:this.options.closeButtonLabel||this._localize("close")}),base=this,componentName=this.componentName;closeButton.on("click."+componentName,function(event){base._closeDialog(event,{closeButton:!0})}).on("keydown."+componentName,function(event){event.keyCode===ZC.keyCode.ENTER&&base._closeDialog(event,{closeButton:!0})});var iconEle=$("<i class='zbutton__icon'></i"),svgData={props:{"class":"zbutton__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)","class":"st0",width:"13",height:"1.1"}},{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)","class":"st0",width:"13",height:"1.1"}}]};return this._handleIcon(iconEle,svgData,"close",this.options.closeIconClassName,this.options.closeSVGIconId),closeButton.append(iconEle),closeButton},_createButtonPane:function(){var base=this,buttonPane=$("<div>").attr({"class":"zdialog__footer"});return $.each(this.options.buttons,function(i,buttonObj){var buttonEle=$("<button>").attr({id:buttonObj.id?buttonObj.id:"dlgbutton"+i});if(buttonObj.name&&buttonEle.attr("name",buttonObj.name),buttonEle[0].type=buttonObj.type?buttonObj.type:"button",buttonObj.customAttributes&&buttonEle.attr(buttonObj.customAttributes),"function"===$.type(buttonObj.action)||"CLOSE"!==buttonObj.action&&"CANCEL"!==buttonObj.action||(buttonEle.addClass("h--clickonescape"),buttonObj.action=function(event){base._closeDialog(event,{button:buttonEle})}),$.fn.zbutton)buttonEle.zbutton(buttonObj);else{var spanEle=$("<span class='zbutton__text'>"+buttonObj.text+"</span>");buttonEle.append(spanEle),buttonEle.addClass("zbutton"+("primary"===buttonObj.appearance?" zbutton--primary":"")),buttonObj.disabled&&buttonEle.attr("disabled",!0).addClass("is-disabled"),base._handleFocus(buttonEle)}buttonEle.on("click."+base.componentName,function(event){(!buttonEle.hasClass("is-disabled")||buttonEle.find(".zbutton__loader").length)&&(buttonObj.action&&("function"!=typeof buttonObj.action?base._triggerFunction(buttonObj.action,buttonEle,[event,{button:buttonEle,options:buttonObj}]):buttonObj.action.apply(base,[event])),base._triggerEvent("ACTIONBUTTONCLICK",event,{button:$(event.target).closest(".zbutton")}))}),buttonPane.append(buttonEle)}),buttonPane.addClass(this._ALIGNMENTS[this.options.buttonsAlignment]),buttonPane},_createCommandBar:function(buttonPane){{var layout=this.options.commandBar,commandBar=$("<div class='zdialog__commandbar zdialog__footer' ></div>");this.options.buttons}if(layout.leftColumn){var leftColumn=$("<div class='zdialog__commandbaractionsleft'></div>"),leftButtonNames=layout.leftColumn.commands;layout.leftColumn.className&&leftColumn.addClass(layout.leftColumn.className);for(var i=0;i<leftButtonNames.length;i++)leftColumn.append(buttonPane.find(".zbutton[name="+leftButtonNames[i]+"]"));commandBar.append(leftColumn)}if(layout.centerColumn){var centerColumn=$("<div class='zdialog__commandbaractionscenter'></div>"),middleButtonNames=layout.centerColumn.commands;layout.centerColumn.className&&centerColumn.addClass(layout.centerColumn.className);for(var i=0;i<middleButtonNames.length;i++)centerColumn.append(buttonPane.find(".zbutton[name="+middleButtonNames[i]+"]"));commandBar.append(centerColumn)}if(layout.rightColumn){var rightColumn=$("<div class='zdialog__commandbaractionsright'></div>"),rightButtonNames=layout.rightColumn.commands;layout.rightColumn.className&&rightColumn.addClass(layout.rightColumn.className);for(var i=0;i<rightButtonNames.length;i++)rightColumn.append(buttonPane.find(".zbutton[name="+rightButtonNames[i]+"]"));commandBar.append(rightColumn)}return commandBar},_createFooterMessage:function(footerContent){return this._footer=$("<div class='zdialog__footnote'></div>"),this._footer.html(this.options.isHTMLEncoded||this.options.isFooterHTMLEncoded?footerContent:ZC.encodeHTML(footerContent)),this._footer},_createMinimizeButton:function(){var minimizeBtn=$("<button type='button'></button>").attr({tabindex:-1,"class":"zbutton zbutton--action",title:this.options.minimizeButtonLabel||this._localize("minimize")}),base=this,componentName=this.componentName;minimizeBtn.on("click."+componentName+" keydown."+componentName,function(event){("click"===event.type||"keydown"===event.type&&event.which===ZC.keyCode.ENTER||event.which===ZC.keyCode.SPACE)&&(base._toggleMinimize(event,$(this),!0),"keydown"===event.type&&(event.preventDefault(),event.stopPropagation()))}).on("mousedown."+componentName,function(){base._activeOnMinimize||(base._activeOnMinimize=$(document.activeElement))});var iconEle=$("<i class='zbutton__icon'></i"),svgData={props:{"class":"zbutton__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{rect:{x:2,y:12,width:12,height:1}}]};return this._handleIcon(iconEle,svgData,"minimize",this.options.minimizeIconClassName,this.options.minimizeSVGIconId),minimizeBtn.append(iconEle),minimizeBtn},_createMaximizeButton:function(){var maximizeBtn=$("<button type='button'></button>").attr({tabindex:-1,"class":"zbutton zbutton--action",title:this.options.maximizeButtonLabel||this._localize("maximize")}),base=this,componentName=this.componentName;maximizeBtn.off("click."+componentName+" keydown."+componentName).on("click."+componentName+" keydown."+componentName,function(event){("click"===event.type||"keydown"===event.type&&event.which===ZC.keyCode.ENTER||event.which===ZC.keyCode.SPACE)&&(base._toggleMaximize(event,$(this),!0),"keydown"===event.type&&(event.preventDefault(),event.stopPropagation()))}).on("mousedown."+componentName,function(){base._activeOnMaximize||(base._activeOnMaximize=$(document.activeElement))});var iconEle=$("<i class='zbutton__icon'></i"),svgData={props:{"class":"zbutton__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{g:{props:{transform:"translate(0,-1036.3622)"},nodes:[{g:{nodes:[{path:{d:"M13,1040.4v8H3v-8H13 M14,1039.4H2v10h12V1039.4L14,1039.4z"}}]}}]}}]};return this._handleIcon(iconEle,svgData,"maximize",this.options.maximizeIconClassName,this.options.maximizeSVGIconId),maximizeBtn.append(iconEle),maximizeBtn},_animateAction:function(animation,action,completeFunction,showElement){if(animation[action]){var effect,duration,base=this,animationClass=animation[action].className;"object"==typeof animation[action]&&(effect=animation[action].name,duration=animation[action].duration),animationClass?(showElement&&this.container.show(),this.container.addClass(animationClass).on(this.ANIMATION_EVENTS,function(){base.container.removeClass(animationClass),completeFunction&&completeFunction(),completeFunction=void 0})):"object"==typeof effect?(showElement&&this.container.show(),this.container.animate(effect,duration,completeFunction)):this.container[effect](duration,completeFunction)}},_changeIcon:function(button,iconName){var iconEle=button.find(".zbutton__icon"),svgData=void 0,iconClass=-1!==iconName.indexOf("Restore")?this.options[iconName+"IconClassName"]||this.options.restoreIconClassName:this.options[iconName+"IconClassName"],svgIconId=-1!==iconName.indexOf("Restore")?this.options[iconName+"SVGIconId"]||this.options.restoreSVGIconId:this.options[iconName+"SVGIconId"];iconEle.remove(),iconEle=$("<i class='zbutton__icon'>"),"minimize"===iconName?svgData={props:{"class":"zbutton__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{rect:{x:2,y:12,width:12,height:1}}]}:"maximize"===iconName?svgData={props:{"class":"zbutton__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{g:{props:{transform:"translate(0,-1036.3622)"},nodes:[{g:{nodes:[{path:{d:"M13,1040.4v8H3v-8H13 M14,1039.4H2v10h12V1039.4L14,1039.4z"}}]}}]}}]}:("minimizeRestore"===iconName||"maximizeRestore"===iconName)&&(svgData={props:{"class":"zbutton__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{g:{props:{transform:"translate(0,-1036.3622)"},nodes:[{path:{d:"M2,1041.4v8h10v-8H2z M11,1048.4H3v-6h8V1048.4z"}}]}},{g:{props:{transform:"translate(0,-1036.3622)"},nodes:[{path:{d:"M4,1039.4v3h1v-2h8v6h-2v1h3v-8H4z"}}]}}]}),this._handleIcon(iconEle,svgData,iconName,iconClass,svgIconId),button.append(iconEle)},_toggleMinimize:function(event,button,triggerEvent){var isMinimized=this.isMinimized(),base=this;this.isMaximized()&&this._toggleMaximize(event,this._maximizeButton,triggerEvent);var completeFunction=function(){isMinimized||(base.actualWidth=parseFloat(base.container.css("width")),base.actualHeight=base.element.height()),base.container.find(".zdialog__footnote")[isMinimized?"show":"hide"](),base.element[isMinimized?"show":"hide"](),base.container[isMinimized?"removeClass":"addClass"]("zdialog--minimized"),$.fn.zdraggable&&base.options.draggable?base.container.zdraggable("setAttribute","disabled",isMinimized?!1:!0):$.noop;var titleText=base.options[isMinimized?"minimizeButtonLabel":"minimizeRestoreButtonLabel"]||base._localize(isMinimized?"minimize":"minimizeRestore");button.attr("title",titleText),base._changeIcon(button,isMinimized?"minimize":"minimizeRestore"),isMinimized?(base.container.css({width:base.actualWidth}).css(base.bottomRightPosition.bottom?base.bottomRightPosition:base.actualPosition),base.enableButton("maximize")):(base.container.css({width:"",height:"",bottom:"",right:""}),base.disableButton("maximize")),base._overlay&&base._overlay[isMinimized?"show":"hide"]();var appendedElement=base._overlay?base._overlay:$("body");base._overlay&&isMinimized&&(ZC.zIndex+=1,appendedElement.css("zIndex",ZC.zIndex)),base.container.appendTo(isMinimized?appendedElement:base._getMinimizablePane()),base._overlay&&base._hideDocumentScroll(isMinimized?!0:!1),isMinimized&&(base._activeOnMinimize&&base._activeOnMinimize.length?(base._activeOnMinimize.trigger("focus"),base._activeOnMinimize=void 0):base.container.find(".zdialog__header").trigger("focus")),triggerEvent&&base._triggerEvent(isMinimized?"RESTORE":"ONMINIMIZE",event,{from:"minimize"})};isMinimized||(base.actualPosition=base.container.position(),base.bottomRightPosition={bottom:base.container[0].style.bottom,right:base.container[0].style.right}),this.container.css({top:"",left:""});var animationInfo=this.options.animation;!isMinimized&&animationInfo.minimize?this._animateAction(animationInfo,"minimize",completeFunction):isMinimized&&animationInfo.minimizeRestore?this._animateAction(animationInfo,"minimizeRestore",completeFunction):completeFunction()},_getMinimizablePane:function(){var paneClass="zdialog--wrapper",pane=$("."+paneClass);return pane.length||(pane=$("<div>").attr("class",paneClass),$("body").append(pane)),pane},_hideDocumentScroll:function(hide){$("body")[hide?"addClass":"removeClass"]("h-overflowhidden")},_toggleMaximize:function(event,button,triggerEvent){var isMaximized=this.isMaximized(),base=this;this.isMinimized()&&this._toggleMinimize(event,this._minimizeButton,triggerEvent);var completeFunction=function(){base.container[isMaximized?"removeClass":"addClass"]("zdialog--maximized"),$.fn.zdraggable&&base.options.draggable?base.container.zdraggable("setAttribute","disabled",isMaximized?!1:!0):$.noop;var titleText=base.options[isMaximized?"maximizeButtonLabel":"maximizeRestoreButtonLabel"]||base._localize(isMaximized?"maximize":"maximizeRestore",base.options.labels);if(base._changeIcon(button,isMaximized?"maximize":"maximizeRestore"),button.attr("title",titleText),isMaximized)base.container.css(base.bottomRightPosition.bottom?base.bottomRightPosition:base.actualPosition).css({width:base.actualWidth}),base.element.height(base.actualHeight),base.element.css("width","");else{base.container.css({width:"auto",height:"auto",top:"0px",left:"0px",bottom:"",right:""});var headerHeight=base.container.find(".zdialog__header").length?base.container.find(".zdialog__header").outerHeight(!0):0,footerHeight=base.container.find(".zdialog__footer").length?base.container.find(".zdialog__footer").outerHeight(!0):0,footnoteHeight=base.container.find(".zdialog__footnote").length?base.container.find(".zdialog__footnote").outerHeight(!0):0,computed=Math.abs(ZC.windowObject.height-(headerHeight+footerHeight+footnoteHeight+parseInt(base.element.css("padding-top"))+parseInt(base.element.css("padding-bottom"))+parseInt(base.container.css("border-top-width"))+parseInt(base.container.css("border-bottom-width")))),computedWidth=ZC.windowObject.width-parseInt(base.element.css("padding-left"))-parseInt(base.element.css("padding-right"))-parseInt(base.element.css("margin-right"))-parseInt(base.element.css("margin-left"))-parseInt(base.container.css("border-left-width"))-parseInt(base.container.css("border-right-width"));base.element.width(computedWidth),base.element.height(computed)}triggerEvent&&base._triggerEvent(isMaximized?"RESTORE":"ONMAXIMIZE",event,{from:"maximize"}),base._activeOnMaximize&&base._activeOnMaximize.length?(base._activeOnMaximize.trigger("focus"),base._activeOnMaximize=void 0):base.container.find(".zdialog__header").trigger("focus")};isMaximized||(this.actualPosition=this.container.position(),this.bottomRightPosition={bottom:this.container[0].style.bottom,right:this.container[0].style.right},this.actualHeight=this.element.height()),this.container.css({top:"",left:"",width:"",height:""});var animationInfo=this.options.animation;!isMaximized&&animationInfo.maximize?this._animateAction(animationInfo,"maximize",completeFunction):isMaximized&&animationInfo.maximizeRestore?this._animateAction(animationInfo,"maximizeRestore",completeFunction):completeFunction()},_bindEvents:function(){var base=this,componentName=this.componentName;this.container.on("keydown."+componentName,function(event){if(ZC.activeDialog&&ZC.activeDialog[0]!==base.container[0]&&(ZC.activeDialog=base.container),event.keyCode===ZC.keyCode.ESCAPE&&base.options.closeOnEscKey){var cancelBtn=base.container.find(".zdialog__footer .h--clickonescape");cancelBtn.length?(cancelBtn.focus(),cancelBtn.trigger("click")):base._closeDialog(event),event.stopPropagation()}else if(event.keyCode===ZC.keyCode.TAB)event.preventDefault();else if(event.keyCode===ZC.keyCode.ENTER&&base.options.submitOnEnter&&base.element.find("form").length){var includedList=".zbutton:not(.zbutton--menu), input:not(.ztokenfield__textbox):not(.zsuggestfield-element)";if($(event.target).closest(includedList).length){var primaryBtn=base.container.find(".zdialog__footer").find(base.options.defaultActionButton);primaryBtn.length&&$(event.target).closest("button")[0]!==primaryBtn[0]&&($(primaryBtn[0]).focus(),$(primaryBtn[0]).trigger("click"))}}}).on("focus."+componentName,function(){ZC.activeDialog&&ZC.activeDialog[0]!==base.container[0]&&(ZC.activeDialog=base.container)}),ZC.$window.off("resize."+componentName).on("resize."+componentName,function(event){"center"!==base.options.position||"resize"!==event.originalEvent.type||base.isMinimized()||base.isMaximized()||(base._positionDialog(),base.container.css(base._dialogPosition))})},open:function(options){if(this.isMinimized())return void this._toggleMinimize({},this._minimizeButton,!1);if(this.isMaximized())return void this._toggleMaximize({},this._maximizeButton,!1);(!this.container.attr("style")||this.container.attr("style")&&-1===this.container.attr("style").indexOf("width"))&&(this.container.css({width:"auto"}),this.options.width&&this.container.css({width:this.options.width}));var dOpacity=this.container.css("opacity");this.container.css("opacity",0),this.container.show(),this._isComponentInited||(this._isComponentInited=!0,ZC.init(this.element)),this.container.hide(),this.container.css("opacity",dOpacity),this._positionDialog(options),this.container.css(this._dialogPosition),"modal"!==this.options.type||this._overlay||this._createOverlay();var animationInfo=this.options.animation;if(animationInfo||options&&options.animation){var animation=animationInfo?animationInfo:options.animation,base=this;this._animateAction(animation,"open",function(){base._handleDialogOpen()},!0)}else this.container.show(),this._handleDialogOpen()},_handleDialogOpen:function(){ZC.zIndex=this.options.zIndex?ZC.zIndex:ZC.zIndex+1,this.container.css({zIndex:this.options.zIndex?parseInt(this.options.zIndex):ZC.zIndex}),this.options.handleFocusNavigation&&ZFocusHandler.init(this.container,this.options.excludeFocus),this.actualWidth=parseFloat(this.container.css("width")),this.actualHeight=this.element.height(),this.actualPosition=this.container.position(),this.bottomRightPosition={bottom:this.container[0].style.bottom,right:this.container[0].style.right},this.container.attr("aria-expanded",!0),this._triggerEvent("ONOPEN",{},{position:this.actualPosition}),ZC.activeDialog=this.container},_createOverlay:function(){ZC.zIndex+=1,this._overlay=$("<div class='zdialog--overlay "+this.options.overlayClassName+"' ></div>").css("zIndex",ZC.zIndex),$("body").append(this._overlay.append(this.container)),this._hideDocumentScroll(!0);var base=this;this._overlay.attr("tabindex",1).on("keydown."+this.componentName,function(event){event.keyCode===ZC.keyCode.ESCAPE&&base.options.closeOnEscKey?base._closeDialog(event,{overlay:!0}):event.keyCode===ZC.keyCode.TAB&&event.preventDefault()})},_positionDialog:function(options){var top=0,left=0,isVisible=this.container.is(":visible");if(isVisible||this.container.show(),this.options.height){this.container.height(this.options.height);var dialogHeight=this.container.outerHeight(!0),contentHeight=parseInt(this.element.height()),paddingTop=parseInt(this.element.css("padding-top").split("px")[0]),paddingBottom=parseInt(this.element.css("padding-bottom").split("px")[0]),titleBarHeight=void 0!==this._titleBar?parseInt(this._titleBar.outerHeight(!0)):0,buttonPanelHeight=this.container.find(".zdialog__footer").length?this.container.find(".zdialog__footer").outerHeight(!0):0,footerNoteHeight=this.container.find(".zdialog__footnote").length?this.container.find(".zdialog__footnote").outerHeight(!0):0;contentHeight=dialogHeight-(paddingTop+paddingBottom+titleBarHeight+buttonPanelHeight+footerNoteHeight+parseInt(this.container.css("border-top-width"))+parseInt(this.container.css("border-bottom-width"))+parseInt(this.element.css("margin-top"))+parseInt(this.element.css("margin-bottom"))),this.element.height(contentHeight),this.container.css("height","auto")}var elemWidth=this.container.outerWidth(!0),elemHeight=this.container.outerHeight(!0),windowWidth=ZC.windowObject.width,windowHeight=ZC.windowObject.height;if(options&&options.position&&(this.options.position=options.position),top=windowHeight/2-elemHeight/2-window.pageYOffset,left=windowWidth/2-elemWidth/2-window.pageXOffset,options&&options.target){var offset=$(options.target).offset();top=offset.top+$(options.target).outerHeight(!0),left=offset.left}else if("string"==typeof this.options.position)if("golden-mean"===this.options.position){var phi=1.618,halfWindow=windowHeight/2,smallerPortion=halfWindow-halfWindow/phi;top=smallerPortion-parseFloat(elemHeight/2)+window.pageYOffset,left=windowWidth/2+window.pageXOffset-parseFloat(elemWidth/2)}else if("center"!==this.options.position){var values=this.options.position.split(",");top=values[1]?values[1]:top,left=values[0]?values[0]:left}var hasBottom=!1;"object"==typeof this.options.position?this.options.position.right||this.options.position.bottom?hasBottom=!0:(top=this.options.position.top?this.options.position.top:top,left=this.options.position.left?this.options.position.left:left):(0>top?top=0:top>=ZC.documentObject.height&&(top=ZC.documentObject.height-this.container.outerHeight(!0)),0>left?left=0:left>ZC.documentObject.width&&(left=ZC.documentObject.width-this.container.outerWidth(!0))),isVisible||this.container.hide(),this._dialogPosition=hasBottom?this.options.position:{top:top,left:left}},close:function(data){this._closeDialog({},data,void 0)},_closeDialog:function(event,data,triggerEvent){event=void 0===event?{}:event;var returnValue=triggerEvent?!0:this._triggerEvent("BEFORECLOSE",event);if(returnValue)if(!this.options.animation||data&&void 0!==data.animation&&data.animation===!1)this._handleDialogClose(event,data,triggerEvent);else{var base=this;this._animateAction(this.options.animation,"close",function(){base._handleDialogClose(event,data,triggerEvent)})}},_triggerCloseEvent:function(event,data,triggerEvent){this._overlay&&this._overlay.length&&this._overlay.remove(),this._overlay=void 0,$("body").find(".zdialog--overlay").length||this._hideDocumentScroll(!1),ZC.zIndex=ZC.zIndex-1,triggerEvent||(this._triggerEvent("ONCLOSE",event,data),ZC.$window.off("resize."+this.componentName))},_handleDialogClose:function(event,data,triggerEvent){if(this.container.hide(),this.container.attr("aria-expanded",!1),"modal"===this.options.type&&this._overlay)if($("body").append(this.container),!this._overlay.is(":visible")||data&&void 0!==data.animation&&data.animation===!1)this._overlay.is(":visible")&&this._overlay.hide(),this._triggerCloseEvent(event,data,triggerEvent);else{var base=this;this._overlay.fadeOut(50,this._triggerCloseEvent.bind(base,event,data,triggerEvent))}else ZC.zIndex=ZC.zIndex-1,triggerEvent||this._triggerEvent("ONCLOSE",event,data);ZC.activeDialog&&ZC.activeDialog[0]===this.container[0]&&(ZC.activeDialog=void 0)},isMinimized:function(){return this.container.is(".zdialog--minimized")},isMaximized:function(){return this.container.is(".zdialog--maximized")},refreshContent:function(setFocus){return this.options.handleFocusNavigation?ZFocusHandler.refresh(this.container,this.options.excludeFocus,setFocus):void 0},minimize:function(){!this.isMinimized()&&this.options.minimizable&&this._toggleMinimize({},this._minimizeButton,!1)},restore:function(triggerEvent){this.isMinimized()&&this._toggleMinimize({},this._minimizeButton,triggerEvent),this.isMaximized()&&this._toggleMaximize({},this._maximizeButton,triggerEvent)
},disableButton:function(keyword){this._toggleButton(keyword,"disabled",!0)},enableButton:function(keyword){this._toggleButton(keyword,"disabled",!1)},_toggleButton:function(keyword,attrName,attrValue){var button="minimize"===keyword?this._minimizeButton:"maximize"===keyword?this._maximizeButton:this._closeButton;button&&(attrValue?(button.attr("disabled",!0).removeAttr("title"),button.addClass("is-disabled")):(button.removeAttr("disabled").attr("title",this.options.maximizeButtonLabel||this._localize("maximize")),button.removeClass("is-disabled")))},_triggerEvent:function(eventName,eventObj,componentObj){return componentObj=$.extend({},{dialog:this.container,wrapper:this.container},componentObj),this._dispatchEvent(eventName,eventObj,componentObj)},maximize:function(){!this.isMaximized()&&this.options.maximizable&&this._toggleMaximize({},this._maximizeButton,!1)},getElement:function(){return this.container},setButtonAttributes:function(identifiers,attrName,attrValue){var base=this;return"string"!=typeof identifiers?$.each(identifiers,function(key,value){base.setButtonAttributes(value.id,value)}):"object"==typeof attrName?$.each(attrName,function(key,value){base.setButtonAttributes(identifiers,key,value)}):(identifiers=identifiers.split(","),$.each(identifiers,function(i,id){var button=base.container.find(".zdialog__footer").find("#"+id);switch(attrName){case"id":button.attr("id",attrValue);break;case"text":button.find(".zbutton__text").text(attrValue);break;case"appearance":"primary"===attrValue?button.addClass("zbutton--primary"):button.removeClass("zbutton--primary");break;case"disabled":attrValue?button.attr("disabled",!0).addClass("is-disabled"):button.removeAttr("disabled").removeClass("is-disabled");break;case"customAttributes":button.attr(attrValue);break;case"actionInProgress":$.fn.zbutton&&button.zbutton("setAttribute","actionInProgress",attrValue);break;case"progressIndicator":$.fn.zbutton&&button.zbutton("setAttribute","progressIndicator",attrValue)}}),void this.refreshContent())},destroy:function(){this.options.handleFocusNavigation&&ZFocusHandler.destroy(this.container),this.element.removeClass("zdialog__content").appendTo("body"),this._overlay&&this._overlay.length&&(this._overlay.remove(),this._overlay=void 0),this.options.title&&this.element.attr("title",this.options.title),this.element.off("."+this.componentName).removeData("zdialog").css("width","auto").hide(),this.container.removeAttr("role aria-modal aria-expanded").remove()},setAttribute:function(optionName,value){if("title"===optionName&&this.options.title!==value)if(this.options.title)if(value){var titleSpan=this._titleBar.find(".zdialog__title");titleSpan.html(this.options.isHTMLEncoded||this.options.isTitleHTMLEncoded?value:ZC.encodeHTML(value))}else this._titleBar.remove(),this._titleBar=void 0;else{this.options.title=value;var titleText=$("<span></span>").attr("class","zdialog__title");titleText.html(this.options.isTitleHTMLEncoded||this.options.isHTMLEncoded?value:ZC.encodeHTML(value)),this._titleBar.prepend(titleText),this.options.icon&&this.element.find(".zc-icon-primary").remove()}else if("icon"===optionName&&this.options.icon!==value)this.options.icon?value?this._iconSpan.removeClass(this.options.icon).addClass(value):(this._iconSpan.remove(),this._iconSpan=void 0):(this._iconSpan=$("<span class='zc-icon-primary zc-icon "+value+"'></span>"),void 0!==this._titleBar?this._titleBar.prepend(this._iconSpan):this.element.prepend(this._iconSpan));else if("content"===optionName&&this.options.content!==value)if(this.element.empty(),"object"==typeof value){var base=this;$.ajax(value).success(function(data){base.element.append(data)})}else this.element.html(this.options.isHTMLEncoded||this.options.isContentHTMLEncoded?value:ZC.encodeHTML(value));else if("closeOnEscKey"===optionName&&this.options.closeOnEscKey!==value)value?this._bindEvents():this.container.off("."+this.componentName);else if("width"===optionName&&this.options.width!==value)this.container.css({width:value}),this.actualWidth=parseInt(value);else if("height"===optionName&&this.options.height!==value)this.element.css("height",value),this.actualHeight=parseInt(value);else if("type"===optionName&&this.options.type!==value&&this.container.is(":visible"))"modal"===value?this._createOverlay():($("body").append(this.container),this._overlay.remove(),this._overlay=void 0),this.container.attr("aria-modal","modal"===value);else if("closeButton"===optionName&&this.options.closeButton!==value)value?(this._createTitleBarButtons(),this.refreshContent()):(this._titleBarButtonContainer.remove(),this._closeButton=this._minimizeButton=this._maximizeButton=void 0);else if("closeSVGIconId"===optionName||"closeIconClassName"===optionName&&this._closeButton){this.options[optionName]=value;var iconEle=this._closeButton.find(".zbutton__icon"),svgData={props:{"class":"zbutton__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)","class":"st0",width:"13",height:"1.1"}},{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)","class":"st0",width:"13",height:"1.1"}}]};this._handleIcon(iconEle,svgData,"close",this.options.closeIconClassName,this.options.closeSVGIconId)}else"className"===optionName&&this.options.className!==value?this.container.removeClass(this.options.className).addClass(value):"overlayClassName"===optionName&&this.options.overlayClassName!==value?this._overlay&&this._overlay.removeClass(this.options.overlayClassName).addClass(value):"minimizable"===optionName&&this.options.minimizable!==value&&this.options.closeButton&&"modal"!==this.options.type?(value?(this.options.minimizable=value,this._minimizeButton=this._createMinimizeButton(),this._titleBarButtonContainer.prepend(this._minimizeButton)):(this._minimizeButton.remove(),this._minimizeButton=void 0),this.refreshContent()):"maximizable"===optionName&&this.options.maximizable!==value&&this.options.closeButton?(value?(this.options.maximizable=value,this._maximizeButton=this._createMaximizeButton(),this._minimizeButton?this._maximizeButton.insertAfter(this._minimizeButton):this._titleBarButtonContainer.prepend(this._maximizeButton)):(this._maximizeButton.remove(),this._maximizeButton=void 0),this.refreshContent()):"resizable"===optionName&&this.options.resizable!==value?"object"==typeof value?(this.container.zresizable("setAttribute","minHeight",value.minHeight?value.minHeight:this.options.resizable.minHeight),this.container.zresizable("setAttribute","maxHeight",value.maxHeight?value.maxHeight:this.options.resizable.maxHeight),this.container.zresizable("setAttribute","minWidth",value.minWidth?value.minWidth:this.options.resizable.minWidth),this.container.zresizable("setAttribute","maxWidth",value.maxWidth?value.maxWidth:this.options.resizable.maxWidth),this.container.zresizable("setAttribute","handle",value.direction?value.direction:this.options.resizable.direction),this.container.zresizable("setAttribute","container",value.container?value.container:this.options.resizable.container)):value&&$.fn.zresizable?this._makeResizable():this.container.zresizable("destroy"):"draggable"===optionName&&this.options.draggable!==value?$.fn.zdraggable&&(value?this._makeDraggable():this.container.zdraggable("destroy")):"buttons"===optionName?(this.options.buttons&&this.container.find(".zdialog__footer").remove(),void 0!==value&&(this.options.buttons=value,this.options.footer?this._createButtonPane().insertBefore(this._footer):this.container.append(this._createButtonPane())),this.refreshContent()):"position"===optionName&&this.options.position!==value?(this.options.position=value,this._positionDialog(),this.container.css(this._dialogPosition)):"footer"===optionName&&this.options.footer!==value?""!==value&&""!==value.trim()?this._createFooterMessage(value).insertAfter(this.container.find(this.container.find(".zdialog__footer").length?".zdialog__footer":".zdialog__content")):this.container.find(".zdialog__footnote").remove():"buttonsAlignment"===optionName&&this.options.buttonsAlignment!==value&&this.container.find(".zdialog__footer").removeClass(this._ALIGNMENTS[this.options.buttonsAlignment]).addClass(this._ALIGNMENTS[value]);this.options[optionName]=value}};ZC.registerComponent("zdialog",dialogPrototype),ZC.createDialog=function(initObject){var element=$("<div>").attr("id",initObject.id);return element.appendTo("body"),element.zdialog(initObject)}}(ZComponents),function(ZC){function createProgressIndicator(cname,options){var element=$("<div>");return options.customAttributes&&element.attr(options.customAttributes),options.id&&element.attr("id",options.id),element=element[cname](options),options.appendTo&&element.appendTo($(options.appendTo)),element}var $=ZC.DOMUtil,progressIndicatorPrototype={options:{type:"linear",mode:"determinate",value:0,autoIncrement:!1,incrementInterval:100,step:1,progressColor:"#4190F2",fillGradient:void 0,progressClassName:"",trackColor:"#DBDBDB",trackGradient:void 0,trackClassName:"",size:"medium",strokeWidth:"3px",progressTooltipText:"#value#%",trackTooltipText:"100 - #value#%"},_MODES:{indeterminate:"zprogress zprogress--indeterminate",determinate:"zprogress"},_TYPES:{linear:"",circular:"zprogress--circle"},_PROGRESS:{linear:"zprogress__bar",circular:"zprogress__loader"},_BAR_POSITIONS:{top:"zprogress__labeltop",left:"zprogress__labelleft",bottom:"zprogress__labelbottom",right:"zprogress__labelright",center:"zprogress__labelcenter"},_CIRCULAR_LABEL_POSITIONS:{top:"zprogresscircular--labeltop",left:"zprogresscircular--labelleft",bottom:"zprogresscircular--labelbottom",right:"zprogresscircular--labelright",center:"zprogresscircular--labelcenter"},_SIZES:{micro:16,mini:20,small:24,medium:40,large:48,mega:64},_STROKE_WIDTH:{micro:"2px",mini:"2px",small:"2px",medium:"3px",large:"3px",mega:"4px"},_EVENTS:{COMPLETED:"complete",CHANGE:"change"},_create:function(){this.componentName="linear"===this.options.type?"zlinearprogress":"zcircularprogress",this._createProgressIndicator(),this._updateProgressTint(),"indeterminate"!==this.options.mode?this._updateValue(this.options.value):"circular"===this.options.type?this._progressValue.setAttribute("class","zprogress__loader zeffects--rotate"):this._progressValue.addClass("zeffects--move"),this._autoIncrement()},_autoIncrement:function(){if(this.options.autoIncrement){var base=this,value=this.options.value;this._timer=window.setInterval(function(){value=base.options.value,base.options.value>100&&clearTimeout(base._timer),base.increment()},parseInt(this.options.incrementInterval))}else this._timer&&clearTimeout(this._timer)},_createProgressIndicator:function(){if(this.options.statusMessage&&void 0!==this.options.statusMessage){var messageProp=this.options.statusMessage;if("inline"===messageProp.displayType&&"linear"===this.options.type&&"determinate"===this.options.mode){if(this._progressBar=this._createProgressElement(this.element),this.options.statusMessage.position=messageProp.position="left"===messageProp.position||"right"===messageProp.position?messageProp.position:"center",this.element.addClass("zprogress__labelinside"),!this.element.is(":visible")){var target=this.element.clone(!1);target.css({visibility:"hidden",position:"absolute"}),target.appendTo("body")}this.element.prepend(this._createMessageElement(messageProp.text).addClass("center"===messageProp.position?"h-reversecolor":"h-reversecolor h-align"+messageProp.position).css("width",this.element.width())),this._progressValue.append(this._createMessageElement(messageProp.text).addClass("center"===messageProp.position?"":"h-align"+messageProp.position).css("width",this.element.width()))}else if("callout"===messageProp.displayType&&"linear"===this.options.type&&"determinate"===this.options.mode)this.element.addClass("zprogress--group"),this._progressBar=this._createProgressElement($("<div class='zprogress'>")),this.element.append(this._progressBar),this._createTooltip(messageProp);else{"linear"===this.options.type?this.options.statusMessage.position=messageProp.position=messageProp.position&&"center"!==messageProp.position?messageProp.position:"top":(this.options.statusMessage.position=messageProp.position=messageProp.position?messageProp.position:"center",("micro"===this.options.size||"mini"===this.options.size||"small"===this.options.size&&"center"===this.options.statusMessage.position)&&(this.options.statusMessage.position="top"));var className="linear"===this.options.type?this._BAR_POSITIONS[messageProp.position]:this._CIRCULAR_LABEL_POSITIONS[messageProp.position];this.element.addClass("zprogress--group "+className);{var messageEle=this._createMessageElement(messageProp.text);messageEle.outerWidth(!0)}switch(this._progressBar=this._createProgressElement($("<div class='zprogress'>")),this.element.append(this._progressBar),messageProp.position){case"top":case"left":this.element.prepend(messageEle);break;case"right":case"bottom":this.element.append(messageEle);break;case"center":"circular"===this.options.type&&this._progressBar.prepend(messageEle)}"circular"===this.options.type||"left"!==messageProp.position&&"right"!==messageProp.position||this._progressBar.css("width","calc(100% - "+Math.ceil(messageEle.outerWidth(!0)+1)+"px)")}}else this._progressBar=this._createProgressElement(this.element);this._progressBar.attr("role",this.options.type+"progress")},_createTooltip:function(messageProp){this.options.statusMessage.position=messageProp.position="top"===messageProp.position||"bottom"===messageProp.position?messageProp.position:"bottom",this._tooltipElement=$("<div class='"+("top"===messageProp.position?"ztooltip ztooltip--top":"ztooltip")+"'><div class='ztooltip__content'><div class='ztooltip__text'></div></div></div>"),this._tooltipPointer=$("<div class='ztooltip__pointer h-"+("top"===messageProp.position?"bottom":"top")+"'></div>"),this.element.append(this._tooltipElement.append(this._tooltipPointer)),this._tooltipElement.css("top","top"===messageProp.position?-parseInt(this.element.height()+30):parseInt(this.element.height()+5))},_createProgressElement:function(element){element.width();return element.addClass(this._MODES["indeterminate"===this.options.mode?"indeterminate":"determinate"]),this._createInnerElement(),element.addClass(this._TYPES[this.options.type]),element.append(this._progressValue),element},_createInnerElement:function(){if("circular"===this.options.type){var diameter=isNaN(this.options.size)?this._SIZES[this.options.size]:parseInt(this.options.size),radius=diameter/2,strokeWidth=isNaN(this.options.size)?this._STROKE_WIDTH[this.options.size]:this.options.strokeWidth;this._circumference=2*(radius-parseInt(strokeWidth))*(22/7),this._progressValue=ZC.createSVGElement("svg",{"class":"zprogress__loader",style:"width:"+diameter+"px;height:"+diameter+"px;"});var circle1=ZC.createSVGElement("circle",{"class":"circle__track",cx:radius,cy:radius,r:radius-parseInt(strokeWidth),"stroke-dasharray":this._circumference,"stroke-dashoffset":0,"stroke-width":strokeWidth},[{title:{}}]),circle2=ZC.createSVGElement("circle",{"class":"circle__load",cx:radius,cy:radius,r:radius-parseInt(strokeWidth),"stroke-dasharray":this._circumference,"stroke-dashoffset":"indeterminate"===this.options.mode?this._calculateStrokeOffset():this._circumference,"stroke-width":strokeWidth},[{title:{}}]);this._progressValue.appendChild(circle1),this._progressValue.appendChild(circle2)}else this._progressValue=$("<div class="+this._PROGRESS[this.options.type]+"></div>")},_calculateStrokeOffset:function(){return this._circumference?this._circumference-parseFloat(this._circumference/4):void 0},_createMessageElement:function(text){var className="inline"===this.options.statusMessage.displayType?"zprogress__text":"zprogress__label";return this._messageElement=$("<span class="+className+"></span>").html(this.options.statusMessage.isTextHTMLEncoded?text:ZC.encodeHTML(text)),this._messageElement},_updateValue:function(value){if(this.element.is(":hidden")&&this.element.show(),!isNaN(value)){var base=this;value=parseInt(value),value>100&&(value=100),"linear"===this.options.type?this.options.value!==value?(this.options.value=value,this._progressValue.css("width",value+"%").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend transitionend",function(){base.options.statusMessage&&base._updateStatusMessage(base.options.statusMessage),base._triggerEvent()})):(this._progressValue.css("width",value+"%"),base.options.statusMessage&&base._updateStatusMessage(base.options.statusMessage)):(this.options.value=value,value=this._circumference-value*this._circumference/100,value=value>=0?value:0,$(this._progressValue).find(".circle__load").attr("stroke-dashoffset",value),base.options.statusMessage&&base._updateStatusMessage(base.options.statusMessage),$(this._progressValue).find(".circle__load title").text(this.options.progressTooltipText.replace("#value#",this.options.value)),$(this._progressValue).find(".circle__track title").text(this.options.trackTooltipText.replace("100 - #value#",100-this.options.value).replace("#value#",this.options.value)),this._triggerEvent())}},_triggerEvent:function(){this._progressBar.attr("aria-valuenow",this.options.value),this._dispatchEvent("CHANGE",{},{indicator:this.element,value:this.options.value}),100===this.options.value&&this._dispatchEvent("COMPLETED",{},{indicator:this.element,value:this.options.value})},_updateStatusMessage:function(messageProp){var formattedText=messageProp.text.replace(/#value#/g,this.options.value);"callout"===messageProp.displayType?this._updateTooltipText(formattedText):this.element.find(".zprogress__text").length?this.element.find(".zprogress__text").html(this.options.statusMessage.isTextHTMLEncoded?formattedText:ZC.encodeHTML(formattedText)):this.element.find(".zprogress__label").html(this.options.statusMessage.isTextHTMLEncoded?formattedText:ZC.encodeHTML(formattedText)),this._progressBar&&this._progressBar.attr("aria-valuetext",messageProp.text.replace(/#value#/g,this.options.value))},_updateTooltipText:function(formattedText){this._tooltipElement.find(".ztooltip__text").html(this.options.statusMessage.isTextHTMLEncoded?formattedText:ZC.encodeHTML(formattedText)),this._tooltipElement.css({left:this._progressValue.width()-Math.ceil(this._tooltipElement.outerWidth(!0)/2),"-webkit-transition":"all 0.2s ease","-moz-transition":"all 0.2s ease","-o-transition":"all 0.2s ease","-ms-transition":"all 0.2s ease",transition:"all 0.2s ease"}),this._tooltipPointer.css("left","calc(50% - "+this._tooltipPointer.width()/2+"px)")},_updateProgressTint:function(){"linear"===this.options.type?(this._elementBg=this.element.css("background"),this.element.hasClass("zprogress")?this.element.css({background:this.options.trackColor,border:this.options.trackBorder,"border-color":this.options.trackBorderColor}).addClass(this.options.trackClassName):this.element.find(".zprogress").css({background:this.options.trackColor,border:this.options.trackBorder,"border-color":this.options.trackBorderColor}).addClass(this.options.trackClassName),this._progressValue.css("background",this.options.fillGradient?this.options.fillGradient:this.options.progressColor).addClass(this.options.progressClassName)):(this.element.find(".circle__track").css("stroke",this.options.trackGradient?this.options.trackGradient:this.options.trackColor).removeClass(this.options.trackClassName).addClass(this.options.trackClassName),this.element.find(".circle__load").css("stroke",this.options.fillGradient?this.options.fillGradient:this.options.progressColor).removeClass(this.options.progressClassName).addClass(this.options.progressClassName))},setValue:function(value){"indeterminate"!==this.options.mode&&this._updateValue(value)},getValue:function(){return"indeterminate"!==this.options.mode?this.options.value:void 0},startProgress:function(){"indeterminate"===this.options.mode&&(this.element.closest(".zprogress").addClass("zprogress--indeterminate"),"circular"===this.options.type&&this._progressValue.setAttribute("class","zprogress__loader zeffects--rotate"))},stopProgress:function(){"indeterminate"===this.options.mode&&this.element.closest(".zprogress").removeClass("zprogress--indeterminate")},increment:function(){this.setValue(this.options.value+this.options.step)},destroy:function(){this._timer&&clearTimeout(this._timer),this.element.removeAttr("role aria-valuenow").empty(),this.element.removeClass("zprogress zprogress--group zprogress__labelinside zprogress--circle zprogress--indeterminate zprogress__labeltop zprogress__labelbottom zprogress__labelcenter zprogress__labelleft zprogress__labelright zprogresscircular--labelright zprogresscircular--labelleft zprogresscircular--labeltop zprogresscircular--labelbottom zprogresscircular--labelcenter"),this._progressValue&&this._progressValue.remove(),this._progressValue=this._messageElement=this._progressBar=void 0,this.element.removeData("zprogressindicator").css("background",this._elementBg&&-1===this._elementBg.indexOf("none")?this._elementBg:"none")},setAttribute:function(optionName,value){if("type"===optionName&&this.options.type!==value){var options=this.options;options.type=value,this.destroy(),this.element.zprogressindicator(options)}else if("mode"===optionName&&this.options.mode!==value)if(!this.options.statusMessage||"inline"!==this.options.statusMessage.displayType&&"callout"!==this.options.statusMessage.displayType){var isIndeterminate="indeterminate"===value;this.element.is(".zprogress")?this.element.removeClass(this._MODES[isIndeterminate?"determinate":"indeterminate"]).addClass(this._MODES[isIndeterminate?"indeterminate":"determinate"]):this.element.find(".zprogress").removeClass(this._MODES[isIndeterminate?"indeterminate":"determinate"]).addClass(this._MODES[value?"indeterminate":"determinate"]),"linear"===this.options.type?this._progressValue[isIndeterminate?"addClass":"removeClass"]("zeffects--move"):this._progressValue.setAttribute("class",isIndeterminate?"zprogress__loader zeffects--rotate":"zprogress__loader"),isIndeterminate&&"linear"===this.options.type&&this._progressValue&&this._progressValue.css("width",""),"circular"==this.options.type&&$(this._progressValue).find(".circle__load").attr("stroke-dashoffset",this._calculateStrokeOffset()),isIndeterminate||this._updateValue(this.options.value)}else{var options=this.options;options.mode=value,options.statusMessage.displayType="adjacent",this.destroy(),this.element.zprogressindicator(options)}else if("value"===optionName&&this.options.value!==value)this.setValue(value);else if("progressColor"===optionName||"trackColor"===optionName||"fillGradient"===optionName||"trackGradient"===optionName||"progressClassName"===optionName||"trackClassName"===optionName)"trackClassName"===optionName?this.element.hasClass("zprogress")?this.element.removeClass(this.options.trackClassName):this.element.find(".zprogress").removeClass(this.options.trackClassName):"progressClassName"===optionName&&this._progressValue.removeClass(this.options.progressClassName),this.options[optionName]=value,this._updateProgressTint();else if("size"===optionName){var options=this.options;options[optionName]=value,this.destroy(),this.element.zprogressindicator(options)}else if("autoIncrement"===optionName&&this.options.autoIncrement!==value)this.options[optionName]=value,this._autoIncrement();else if("statusMessage"===optionName&&this.options.statusMessage!==value){var options=this.options;options[optionName]=value&&null!==value&&""!==value?$.extend({},options[optionName],value):void 0,this.destroy(),this.element.zprogressindicator(options)}this.options[optionName]=value}};ZC.createLinearProgress=function(options){return createProgressIndicator("zlinearprogress",options)},ZC.createCircularProgress=function(options){return createProgressIndicator("zcircularprogress",options)},ZC.registerComponent("zprogressindicator",progressIndicatorPrototype),$.fn.zlinearprogress=function(){if(arguments[0]&&"object"!=typeof arguments[0])return $.fn.zprogressindicator.apply($(this),arguments);arguments[0]=$.extend({},arguments[0],{type:"linear"});var data=$(this).zprogressindicator(arguments[0]);return data},$.fn.zcircularprogress=function(){if(arguments[0]&&"object"!=typeof arguments[0])return $.fn.zprogressindicator.apply($(this),arguments);var parameters=arguments[0]?arguments[0]:{};arguments[0]=$.extend({},parameters,{type:"circular"});var data=$(this).zprogressindicator(arguments[0]);return data}}(ZComponents),function(ZC){var $=ZC.DOMUtil,sliderPrototype={options:{orientation:"horizontal",locale:void 0,thumbIconStyle:"circle",thumbIconClassName:void 0,thumbSVGIconId:void 0,min:0,max:100,step:1,valuesType:"range",value:0,minValueAllowed:void 0,maxValueAllowed:void 0,values:[],showTooltip:"never",tooltip:{position:"top",displayType:"callout",text:"#value#",isHTMLEncoded:!1},showTicks:!1,ticks:{splitBy:"count",count:4,step:void 0,randomValues:void 0,position:"bottom",showLabels:!0,showLabelsFor:void 0,labelPattern:"#value#",customLabels:void 0,isLabelHTMLEncoded:!1},valueDisplayFormat:{type:"number",currencyCode:void 0,prefix:void 0,suffix:void 0,decimalPlaces:void 0,thousandSeparator:!1},snapToTicks:!0,rangeGroups:{groups:[],isLabelHTMLEncoded:!1,labelPosition:"top"},animation:{slide:{className:void 0,duration:200}},stepBehavior:"w3",selectionStartValue:void 0,blurOnRelease:!1,className:void 0,disabled:!1,tabIndex:0,widgetEventPrefix:"zslider"},_MEASUREMENTS:["minValueAllowed","maxValueAllowed"],_CLASS:{SLIDER:"zslider",VERTICAL:"zslider--vertical",HANDLE:"zslider__thumb",TRACK:"zslider__track",FILL:"zslider__selection",PIPES:"zslider__scale",PIPE:"zslider__tick",LABELS:"zslider__labels",LABEL:"zslider__label",DISABLED:"is-disabled"},_EVENTS:{ONINIT:"init",ONFOCUS:"focus",ONBLUR:"blur",ONCHANGE:"change",ONSLIDESTART:"slidestart",ONSLIDE:"slide",ONSLIDEEND:"slideend"},_TEMPLATE:{bottom:'<svg class="zslider__pointerthumbsvg" viewBox="0 0 21 32" width="22" height="32"> <path class="pointerthumb__border" d="M16.5,15.2l-6.5,7l-6.5-7V5c0-0.9,0.7-1.6,1.6-1.6H15c0.8,0,1.5,0.7,1.5,1.6V15.2z"></path> <path class="pointerthumb__innerborder" d="M15.5,14.4l-5.5,6l-5.5-6V5.7c0-0.7,0.6-1.3,1.3-1.3h8.3c0.8,0,1.4,0.6,1.4,1.3V14.4z"></path> <path class="pointerthumb" d="M14.5,13.9L10,18.8l-4.5-4.9V6.5c0-0.6,0.5-1.1,1.1-1.1h6.8c0.6,0,1.1,0.5,1.1,1.1V13.9z"></path> </svg>',top:'<svg class="zslider__pointerthumbsvg" viewBox="0 0 21 32" width="22" height="32"><path class="pointerthumb__border" d="M3.5,12.8l6.5-7l6.5,7V23c0,0.9-0.7,1.6-1.6,1.6H5c-0.8,0-1.5-0.7-1.5-1.6V12.8z"></path> <path class="pointerthumb__innerborder" d="M4.5,13.6l5.5-6l5.5,6v8.7c0,0.7-0.6,1.3-1.3,1.3H5.9c-0.8,0-1.4-0.6-1.4-1.3V13.6z"></path> <path class="pointerthumb" d="M5.5,14.1L10,9.2l4.5,4.9v7.4c0,0.6-0.5,1.1-1.1,1.1H6.6c-0.6,0-1.1-0.5-1.1-1.1V14.1z"></path> </svg>',left:'<svg class="zslider__pointerthumbsvg" viewBox="0 0 32 21"  width="32" height="22"><path class="pointerthumb__border" d="M12.8,16.5l-7-6.5l7-6.5l10.2,0c0.9,0,1.6,0.7,1.6,1.6l0,9.9c0,0.8-0.7,1.5-1.6,1.5L12.8,16.5z"></path> <path class="pointerthumb__innerborder" d="M13.6,15.5l-6-5.5l6-5.5l8.7,0c0.7,0,1.3,0.6,1.3,1.3l0,8.3c0,0.8-0.6,1.4-1.3,1.4L13.6,15.5z"></path> <path class="pointerthumb" d="M14.1,14.5L9.2,10l4.9-4.5l7.4,0c0.6,0,1.1,0.5,1.1,1.1l0,6.8c0,0.6-0.5,1.1-1.1,1.1L14.1,14.5z"></path> </svg>',right:'<svg class="zslider__pointerthumbsvg" viewBox="0 0 32 21" width="32" height="22"><path class="pointerthumb__border" d="M15.2,3.5l7,6.5l-7,6.5L5,16.5c-0.9,0-1.6-0.7-1.6-1.6V5c0-0.8,0.7-1.5,1.6-1.5L15.2,3.5z"></path> <path class="pointerthumb__innerborder" d="M14.4,4.5l6,5.5l-6,5.5H5.7c-0.7,0-1.3-0.6-1.3-1.3l0-8.3c0-0.8,0.6-1.4,1.3-1.4H14.4z"></path> <path class="pointerthumb" d="M13.9,5.5l4.9,4.5l-4.9,4.5H6.5c-0.6,0-1.1-0.5-1.1-1.1l0-6.8c0-0.6,0.5-1.1,1.1-1.1H13.9z"></path> </svg>'},_create:function(element,options){this._frominit=!0,this.element.hide(),this._eventNamespace="."+options.widgetEventPrefix;var base=this;["min","max","step","value","title","tabIndex"].forEach(function(attr){null!==base.element[0].getAttribute(attr)&&(options[attr]=base.element[0][attr])}),this.element[0].disabled&&(options.disabled=!0),/^(range|fixed)$/.test(options.valuesType)||(options.valuesType="range"),/^(never|always|onslide)$/.test(options.showTooltip)||(options.showTooltip="never"),"vertical"===options.orientation&&(this.vertical=!0),options.locale=options.locale||ZC.locale,this._cacheMeasurements(),this._setFixedValues(),this._validateProperty(),this._constructLayout(),this._showHiddenParent(),this._constructThumb(),this._constructScale(),this._constructRangeLabels(),this._constructLimitLayout(),this._positionHandle(),this._resetParent(),this._bindEvents(),this._setInitial(),options.disabled&&this._setAttribute("disabled",!0),this._trigger("ONINIT"),this._frominit=!1},_getFromLocale:function(prop,currency){var value=this["_"+prop];if(void 0===value)if(currency)"currency_code"===prop?value=this.options.valueDisplayFormat.currencyCode?this.options.valueDisplayFormat.currencyCode:ZC.localeInfo?ZC.localeInfo[this.options.locale].currency.code:void 0:(!this._currencyData&&ZC.currencyInformation&&(this._currencyData=ZC.currencyInformation[this._getFromLocale("currency_code",!0)]),this._currencyData&&(value=this._currencyData[prop.replace("currency_","")]));else if(ZC.localeInformation){var base=this;Object.keys(ZC.localeInformation[prop]).some(function(separator){var locales=ZC.localeInformation[prop][separator];return-1!==locales.indexOf(base.options.locale)?value=separator:!1})}return this["_"+prop]=value?value:!1},_cacheMeasurements:function(){this.actualProps={};var base=this;this._MEASUREMENTS.forEach(function(opt){base.actualProps[opt]=base.options[opt]})},_constructLayout:function(){var options=this.options,baseClass=this.element[0].className+" "+this._CLASS.SLIDER+(this.vertical?" zslider--vertical":" ")+("string"==typeof options.className?" "+options.className:" ");this.container=$(document.createElement("div")).attr({"class":baseClass,style:this.element[0].getAttribute("style"),title:options.title}).insertAfter(this.element),this.container[0].style.display="",this.container[0].innerHTML='<div class="zslider__shadowtrack"></div><div class="'+this._CLASS.TRACK+'"> <div class="'+this._CLASS.FILL+'"></div></div>',this._innerSlider=$(this.container[0].querySelector("."+this._CLASS.TRACK)),this._range=$(this.container[0].querySelector("."+this._CLASS.FILL)),this._shadowTrack=$(this.container[0].querySelector(".zslider__shadowtrack"))},_constructThumb:function(){this.container.append(this._createThumb()),this._handles=Array.prototype.slice.call(this.container[0].querySelectorAll("."+this._CLASS.HANDLE),0),this._updateDimensions()},_createThumb:function(){var o=this.options,thumb=$('<div role="slider" class="'+this._CLASS.HANDLE+'" aria-orientation="'+o.orientation+'" aria-valuemin="'+o.min+'" aria-valuemax="'+o.max+'"></div>');if(o.disabled?thumb.addClass(this._CLASS.DISABLED).attr("aria-disabled",!0):thumb[0].tabIndex=o.tabIndex,o.thumbIconClassName||o.thumbSVGIconId)return ZC.createIcon(thumb,void 0,o.thumbSVGIconId,o.thumbIconClassName);if("pointer"===o.thumbIconStyle){thumb.addClass("zslider__pointerthumb");var scalePosition=o.showTicks?o.ticks.position:"",dir="";/^(left|top)$/.test(scalePosition)?(dir=this.vertical?"left":"top",thumb.addClass("h-inverted")):dir=this.vertical?"right":"bottom",thumb.html(this._TEMPLATE[dir])}else thumb.addClass("zslider__circlethumb");return thumb},_updateDimensions:function(){this.vertical?(this.innerDim="height",this.outerDim="outerHeight",this.marginDir="bottom",this.oppOuterDim="outerWidth",this.oppMargin="left"):(this.innerDim="width",this.outerDim="outerWidth",this.marginDir="left",this.oppOuterDim="outerHeight",this.oppMargin="top");var handle=$(this._handles[0]);this.sliderDim={height:this._innerSlider.height(),width:this._innerSlider.width(),outerHeight:this._innerSlider.outerHeight(),outerWidth:this._innerSlider.outerWidth()},this.handleDim={outerHeight:handle.outerHeight(),outerWidth:handle.outerWidth()}
},_showHiddenParent:function(){if(document.body.contains(this.container[0])&&this.container.is(":hidden")){var i=1;this.hiddenParents=[],this.prevStyles=[];for(var parent=this.container;i&&parent&&!parent.is("body");)"none"===parent.css("display")&&(this.hiddenParents.push(parent),this.prevStyles.push(parent.attr("style")||""),parent.css({display:"block",position:"absolute",visibility:"hidden"}),i=parent.is(":hidden")),parent=parent.parent()}},_resetParent:function(){if(this.hiddenParents){var base=this;this.hiddenParents.forEach(function(parent,i){parent.attr("style",base.prevStyles[i])}),this.hiddenParents=this.prevStyles=void 0}},_positionHandle:function(){var innersliderOffset=this._innerSlider.position(),trackTop=parseInt(innersliderOffset[this.oppMargin]),trackHalfHt=this.sliderDim[this.oppOuterDim]/2,handleHalfHt=this.handleDim[this.oppOuterDim]/2,shadowTrackHalfHt=this._shadowTrack[this.oppOuterDim]()/2;$(this._handles).css(this.oppMargin,trackTop-(handleHalfHt-trackHalfHt)+"px").css("margin-"+this.marginDir,-this.handleDim[this.outerDim]/2+"px"),this._shadowTrack.css(this.oppMargin,trackTop-(shadowTrackHalfHt-trackHalfHt)+"px"),!this._frominit&&this._updateTip()},_setInitial:function(){this._setInitialValue(),this._updateLayout()},_setInitialValue:function(){this.setValue(this.options.value)},_constructLimitLayout:function(){var o=this.options;"fixed"!==o.valuesType&&(o.minValueAllowed!==o.min&&this._createLimitBox(o.min,o.minValueAllowed,"zslider__selected"),o.maxValueAllowed!==o.max&&this._createLimitBox(o.maxValueAllowed,o.max,"zslider__notallowedrange"))},_constructRangeLabels:function(){var groups,o=this.options;if("fixed"!==o.valuesType&&Array.isArray(groups=this._parseArray(o.rangeGroups.groups))&&groups.length){var base=this;this._range.hide(),this.container.addClass("zslider--range"),this._rangeLayout=$('<div class="zslider__rangelabels"></div>'),this._rangeBgs=[],this._rangeTicks=[];var lastPer=0,labelHtmls=[],rangeHtmls=[],getPercent=function(value){if(void 0!==value){if(/%$/.test(value)&&(value=o.min+(o.max-o.min)*parseFloat(value)/100),isNaN(value)||value<o.min||value>o.max)return;if(+value!==o.max)return base._getPercent(+value)}};o.rangeGroups.groups.forEach(function(rangeLabel){var fromPer=0;rangeLabel.from!==o.min&&(fromPer=getPercent(rangeLabel.from)),isNaN(fromPer)||(lastPer=fromPer);var curPer=100;if(rangeLabel.to!==o.max&&(curPer=getPercent(rangeLabel.to)),!isNaN(curPer)){var style=base.marginDir+":"+lastPer+"%;"+base.innerDim+":"+(curPer-lastPer)+"%;";if(rangeHtmls.push('<div class="zslider__rangegroup '+(rangeLabel.className?rangeLabel.className:"")+'" style="'+style+(rangeLabel.background?"background:"+rangeLabel.background:"")+';" ></div>'),base.vertical){var innerStyle="max-"+base.innerDim+":"+base.sliderDim[base.outerDim]*(curPer-lastPer)/100+"px";labelHtmls.push('<div class="zslider__rangelabel" style="'+style+'"><span class="zslider__textcontainer" > <span class="zslider__text" style="'+innerStyle+'">'+rangeLabel.label+"</span></span></div>")}else labelHtmls.push('<div class="zslider__rangelabel" style="'+style+'">'+rangeLabel.label+"</div>");lastPer=curPer}});var childselector=".zslider__rangelabel";this.vertical&&(rangeHtmls=rangeHtmls.reverse().join(""),labelHtmls=labelHtmls.reverse().join(""),childselector=".zslider__text"),this._innerSlider.prepend(rangeHtmls),this._rangeLayout.append(labelHtmls),this._positionRangeLabels(),Array.prototype.slice.call(this._rangeLayout[0].querySelectorAll(childselector),0).forEach(function(label){(label.offsetWidth<label.scrollWidth-2||label.offsetHeight<label.scrollHeight-2)&&label.setAttribute("title",label.textContent)})}},_positionRangeLabels:function(){var rangeGpSettings=this.options.rangeGroups;if(this._rangeLayout){var position=rangeGpSettings.labelPosition;/^(bottom|right)$/.test(position)?(this.container.append(this._rangeLayout),this._rangeLayout.addClass("h-inverted")):(this.container.prepend(this._shadowTrack,this._rangeLayout),this._rangeLayout.removeClass("h-inverted"))}},_createLimitBox:function(min,max,className){var props={},range=$('<div class="'+(className||"")+'"></div>');this._innerSlider.append(range);var minPercent=parseFloat(min)===this.options.min?0:this._getPercent(min),maxPercent=parseFloat(max)===this.options.max?100:this._getPercent(max);props[this.marginDir]=minPercent+"%",props[this.innerDim]=maxPercent-minPercent+"%",range.css(props);var o=this.options;Array.prototype.slice.call(this.container[0].querySelectorAll(".zslider__tick,.zslider__label"),0).forEach(function(node){var val=+node.getAttribute("data-val");min>val||val>max||val===min&&min!==o.min||val===max&&max!==o.max||$(node).addClass("is-disabled")})},_bindEvents:function(){this.container.on("mousedown"+this._eventNamespace,".zslider__shadowtrack,.zslider__track,.zslider__thumb,.zslider__tick,.zslider__label",this._onMouseDown.bind(this)).on("keydown"+this._eventNamespace,"."+this._CLASS.HANDLE,this._onSlide.bind(this)).on("keyup"+this._eventNamespace,"."+this._CLASS.HANDLE,this._onSlideEnd.bind(this)).on("mouseup"+this._eventNamespace,this._onSlideEnd.bind(this)).on("mouseenter"+this._eventNamespace,"."+this._CLASS.HANDLE,this._onThumbEnter.bind(this)).on("mouseleave"+this._eventNamespace,"."+this._CLASS.HANDLE,this._onThumbLeave.bind(this)).on("focusin"+this._eventNamespace,this._onFocus.bind(this)).on("focusout"+this._eventNamespace,this._onFocusout.bind(this))},_onFocus:function(){this.container.addClass("has-focus"+(this._mouseActive?"":" on-tabfocus")),this._trigger("ONFOCUS")},_onFocusout:function(){var base=this;clearTimeout(this.blurtimer),this.blurtimer=setTimeout(function(){$(base._handles).is(":focus")||$(document.activeElement).closest(".zslider").length||(base.container.removeClass("is-active on-tabfocus has-focus"),$(base._activeHandle).removeClass("is-active"),base._mouseActive=base._animate=!1,base._trigger("ONBLUR"))},1)},_onThumbEnter:function(origEvent){if(!this.container.hasClass(this._CLASS.DISABLED)){var target=$(origEvent.target).closest("."+this._CLASS.HANDLE);target.addClass("on-mouseover"),this._showTip(origEvent)}},_onThumbLeave:function(origEvent){if(!this.container.hasClass(this._CLASS.DISABLED)){var target=$(origEvent.target).closest("."+this._CLASS.HANDLE);target.removeClass("on-mouseover"),!this._dragStarted&&!this._dragSelectionStarted&&this._hideTip()}},_showTip:function(origEvent){var o=this.options;"fixed"!==o.valuesType&&"never"!==o.showTooltip&&this._tooltip&&(this._tooltip[0].style.display="","at-cursor"===o.tooltip.position&&origEvent&&("vertical"===o.orientation?this._tooltip[0].style.top=Math.max(Math.min(origEvent.pageY-this.container.offset().top,this.sliderDim.outerHeight),0)+"px":this._tooltip[0].style.left=Math.max(Math.min(origEvent.pageX-this.container.offset().left,this.sliderDim.outerWidth),0)+"px"))},_hideTip:function(){"always"!==this.options.showTooltip&&this._tooltip&&(this._tooltip[0].style.display="none")},_keyPress:function(origEvent){var value,keyCode=origEvent.keyCode;if(keyCode===ZC.keyCode.HOME)value=this.options.minValueAllowed;else if(keyCode===ZC.keyCode.END)value=this.options.maxValueAllowed;else if(keyCode===ZC.keyCode.RIGHT||keyCode===ZC.keyCode.UP||keyCode===ZC.keyCode.PAGE_UP)value=this._increase(this.options.value);else{if(keyCode!==ZC.keyCode.LEFT&&keyCode!==ZC.keyCode.DOWN&&keyCode!==ZC.keyCode.PAGE_DOWN)return;value=this._decrease(this.options.value)}return origEvent.preventDefault(),value},_getActiveHandle:function(){return this._handles[0]},_onMouseDown:function(origEvent){this.container.hasClass(this._CLASS.DISABLED)||(this._mouseActive=!0,this.container.removeClass("on-tabfocus").addClass("is-active"),$(this._activeHandle).removeClass("is-active"),this._activeHandle=this._getActiveHandle(origEvent),$(this._activeHandle).addClass("is-active"),!this.options.blurOnRelease&&this._activeHandle.focus(),$(origEvent.target).closest(".zslider__thumb").length||this._onSlide(origEvent),this._bindDocumentEvent(origEvent))},_bindDocumentEvent:function(origEvent){ZC.$document.off(this._eventNamespace).on("mousemove"+this._eventNamespace,this._onSlide.bind(this)).on("mouseup"+this._eventNamespace,this._onSlideEnd.bind(this)),origEvent.preventDefault()},_onSlide:function(origEvent){if(!this.container.hasClass(this._CLASS.DISABLED)){var value=this._getValueFromEvent(origEvent);this._showTip(origEvent),void 0!==value&&(this._animate="mousemove"!==origEvent.type,this._dragStarted||(this._storeInitialValue(),this._dragStarted=!0,this._trigger("ONSLIDESTART",origEvent)),this._setValue(value,origEvent),this._trigger("ONSLIDE",origEvent),origEvent.preventDefault())}},_onSlideEnd:function(origEvent){this.container.hasClass(this._CLASS.DISABLED)||(ZC.$document.off(this._eventNamespace),this._dragStarted&&(this._trigger("ONSLIDEEND",origEvent),this._isChangeInValue()&&this._updateLayout(origEvent)),!$(this._activeHandle).hasClass("on-mouseover")&&this._hideTip(),this.container.removeClass("is-active"),this._animate=this._mouseActive=this._dragStarted=!1)},_storeInitialValue:function(){this._startValue=this.getValue()},_isChangeInValue:function(){return this._startValue!==this.getValue()},_getValueFromEvent:function(origEvent){var target=$(origEvent.target);if("mousedown"===origEvent.type&&target.hasClass("zslider__label")){if(target.hasClass("is-disabled"))return;return this._getInnerVal(target[0].getAttribute("data-val"))}if("keydown"===origEvent.type)return this._keyPress(origEvent);var offset,cursorPercent,getCustomVal,sliderLength=this.sliderDim[this.innerDim],handleLength=this.handleDim[this.outerDim],totalpixel=sliderLength-handleLength,operator=1,slideroffset=this._innerSlider.offset();if("function"==typeof this.options.getCustomValue&&(getCustomVal=this.options.getCustomValue,handleLength=0),this.vertical?(offset=origEvent.pageY-(slideroffset.top+handleLength/2),operator=-1,cursorPercent=1-offset/totalpixel):(offset=origEvent.pageX-(slideroffset.left+handleLength/2),cursorPercent=offset/totalpixel),0>cursorPercent?cursorPercent=0:cursorPercent>1&&(cursorPercent=1),getCustomVal)return getCustomVal(100*cursorPercent,this.options.min,this.options.max,this._handles.indexOf(this._activeHandle));var value=this.options.min+cursorPercent*(this.options.max-this.options.min);return value=this._trimDecimal(this.options.min,this.options.step,value),this.options.snapToTicks&&this._dragStarted&&(value=this._trimForSnap(value,offset+handleLength/2)),value},_trimValue:function(value){var o=this.options,mod=(parseFloat(value)-o.min)%o.step;if(0!==mod){var adjustedVal=parseFloat(value)-mod;2*Math.abs(mod)>o.step&&(adjustedVal+=mod>0?o.step:-o.step),value=adjustedVal}return this._trimDecimal(o.min,o.step,value)},_trimForSnap:function(value,left){if(this._ticksLayout&&this._gridValues&&this._gridValues.length){value=parseFloat(value);for(var nearestPt=this._gridValues[0],min_dis=Math.abs(this._gridValues[0]-value),i=1;i<this._gridValues.length;i++){var dis=Math.abs(this._gridValues[i]-value);min_dis>dis&&(nearestPt=this._gridValues[i],min_dis=dis)}if(nearestPt%this.options.step===0&&nearestPt!==value){var gridLeft,nearestGrid=this._ticksLayout.find('[data-val="'+nearestPt+'"]');gridLeft=this.vertical?nearestGrid.position().top:nearestGrid.position().left,Math.abs(gridLeft-left)<7&&(value=this._getActualVal(nearestPt))}}return value},_trimDecimal:function(min,step,value){var minDecimal=String(min).split(".")[1],stepDecimal=String(step).split(".")[1],decimalplace=Math.max(minDecimal&&minDecimal.length||0,stepDecimal&&stepDecimal.length||0);return+(+value).toFixed(decimalplace)},_validateProperty:function(){var o=this.options;if("fixed"!==o.valuesType)o.step=parseFloat(o.step),o.min=parseFloat(o.min),o.max=parseFloat(o.max),o.value=parseFloat(o.value),o.minValueAllowed=parseFloat(o.minValueAllowed),o.maxValueAllowed=parseFloat(o.maxValueAllowed),(isNaN(o.step)||o.step<=0)&&(o.step=1),isNaN(o.min)&&(o.min=0),isNaN(o.max)&&(o.max=100),o.max<=o.min&&(o.max=o.min+o.step),o.max-o.min<o.step&&(o.step=o.max-o.min),(isNaN(o.minValueAllowed)||o.minValueAllowed<o.min||o.max-o.minValueAllowed<o.step)&&(o.minValueAllowed=o.min),(isNaN(o.maxValueAllowed)||o.maxValueAllowed>o.max||o.maxValueAllowed<o.minValueAllowed||o.maxValueAllowed-o.minValueAllowed<o.step)&&(o.maxValueAllowed=o.max),isNaN(o.value)||o.value<o.minValueAllowed?o.value=o.minValueAllowed:o.value>o.maxValueAllowed&&(o.value=o.maxValueAllowed);else{o.step=1,o.min=o.minValueAllowed=0,o.max=o.maxValueAllowed=o.values.length-1;var index=this._getInnerVal(o.value);0>index&&(o.value=this._getInnerVal(0))}},_setValue:function(value,origEvent){var prevVal=this.options.value;this.options.value=this._getActualVal(this._getCorrectedValue(value,this.options.minValueAllowed,this.options.maxValueAllowed)),prevVal!==this.options.value&&this._updateLayout(origEvent)},_getCorrectedValue:function(value,min,max){value=+value;var o=this.options;if("fixed"===o.valuesType?(min=o.min,max=o.max):(min<o.min&&(min=o.min),max>o.max&&(max=o.max)),"default"===o.stepBehavior&&(min>=value||value>=max||isNaN(value)))min>value||isNaN(value)?value=min:value>max&&(value=max);else{if(value=this._trimValue(value),min>value||isNaN(value)){var mod=(min-o.min)%o.step||o.step;value=min+o.step-mod}else value>max&&(value=max-(max-o.min)%o.step);value=this._trimDecimal(o.min,o.step,value)}return value},_setFixedValues:function(){if("fixed"===this.options.valuesType){this._values=[],this._labels=[];var base=this;this.options.values.forEach(function(obj){"string"==typeof obj||"number"==typeof obj?(base._values.push(String(obj)),base._labels.push(obj)):void 0!==obj.value&&(base._values.push(String(obj.value)),base._labels.push(obj.label||obj.value))})}},_getInnerVal:function(actualVal){return"fixed"===this.options.valuesType?this._values.indexOf(String(actualVal)):actualVal},_getActualVal:function(value){return"fixed"===this.options.valuesType?this._values[value]:value},_updateLayout:function(origEvent){var handleObj={},o=this.options,oncomplete=function(){this._animate=!1,this._frominit||origEvent&&/(keydown|mousedown|mousemove)/.test(origEvent.type)||this._trigger("ONCHANGE",origEvent)},valPer=this._getPercent(o.value);handleObj[this.marginDir]=valPer+"%";var rangeObj={},left=0,width=valPer,progressFrom=parseFloat(o.selectionStartValue);!isNaN(progressFrom)&&progressFrom>o.min&&progressFrom<=o.max&&(left=progressFrom===o.max?100:this._getPercent(o.selectionStartValue),o.selectionStartValue>=o.value&&(width=[left,left=width][0])),rangeObj[this.marginDir]=left+"%",rangeObj[this.innerDim]=width-left+"%";var attr={"data-val":this._getInnerVal(o.value),"aria-valuenow":this._getInnerVal(o.value),"aria-valuetext":o.value};this._handleAnimation($(this._handles[0]).attr(attr),handleObj),this._handleAnimation(this._range,rangeObj,oncomplete.bind(this)),this._updateTip(handleObj)},_handleAnimation:function(element,object,callback){var duration=this.options.animation.slide.duration,className=this.options.animation.slide.className;element.stop();var animationEndEvent="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";this._animate&&(duration||className)?className?element.addClass(className).off(animationEndEvent).on(animationEndEvent,function(){element.removeClass(className),callback&&callback()}):element.animate(object,duration,callback):(element.css(object),callback&&callback())},_updateTip:function(handleObj){if(this._tooltip||this._createTooltip(),this._tooltip&&"fixed"!==this.options.valuesType){this._tooltip.find(".ztooltip__content").text(this._getTipText());var pos=this._getTipPosition(handleObj);this._handleAnimation(this._tooltip,pos)}},_getLabel:function(template,label,encode){return label=this._getFormattedLabel(label),"string"==typeof template&&""!==template.trim()&&(label=template.replace(new RegExp("#value#","gi"),label)),encode?ZC.encodeHTML(label):label},_getFormattedLabel:function(label){if("fixed"!==this.options.valuesType&&void 0!==label){var base=this,formatter=this.options.valueDisplayFormat,precision=parseInt(formatter.decimalPlaces),thousandSep=this._getFromLocale("thousandSeparator"),decimalSep=this._getFromLocale("decimalSeparator");label=label.toString(),precision>=0&&20>=precision&&!isNaN(precision)&&(label=(+label).toFixed(precision));var splits=label.split(".");formatter.thousandSeparator&&(splits[0]=splits[0].replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+(thousandSep||","))),label=splits.join(decimalSep||".");var pattern=label;"string"==typeof formatter.prefix?pattern=formatter.prefix+pattern:"currency"===formatter.type&&(pattern="#symbol#"+pattern),"string"==typeof formatter.suffix&&(pattern+=formatter.suffix),pattern!==label&&(label=pattern.replace(/#value#/gi,label),"currency"===formatter.type&&["code","symbol","name"].forEach(function(prop){var regex=new RegExp("#"+prop+"#","gi");if(regex.test(pattern)){var value=base._getFromLocale("currency_"+prop,!0);value&&(label=label.replace(regex,value))}}))}return label},_resetLocaleData:function(){this._thousandSeparator=this._decimalSeparator=this._currencyData=this._currency_code=this._currency_name=this._currency_symbol=void 0},_getTipText:function(){var o=this.options;return this._getLabel(o.tooltip.text,o.value,!o.tooltip.isHTMLEncoded)},_getTipPosition:function(handleObj){var pos={},position=this.options.tooltip.position,operator=/^(top|left)$/.test(position)?-1:1,length="outerHeight",adjLength="outerWidth",mainDir="top";/^(left|right)$/.test(position)&&(length="outerWidth",adjLength="outerHeight",mainDir="left");var sliderLn=this.sliderDim[length],tooltipLn=this._tooltip[length](),pointerLn=this.pointer?this.pointer[length]():0,handleLn=this.handleDim[length],totalLn=(sliderLn>handleLn?0:(handleLn-sliderLn)/2)+pointerLn+0;return totalLn+=position===mainDir?tooltipLn:sliderLn,pos[mainDir]=this._innerSlider.position()[mainDir]+totalLn*operator+"px","at-cursor"!==position&&(pos["margin-"+this.marginDir]=-(this._tooltip[adjLength]()/2)+"px",pos[this.marginDir]=handleObj?handleObj[this.marginDir]:this._handles[0].style[this.marginDir]),pos},_createTooltip:function(){var o=this.options;if("fixed"!==o.valuesType&&"never"!==o.showTooltip){var position=o.tooltip.position;this.pointer=!1;var pointerClass={left:"h-right",right:"h-left",top:"h-bottom",bottom:"h-top","at-cursor":"h-top"};"at-cursor"===position&&"onslide"===o.showTooltip?o.tooltip.displayType="box":this.vertical?/^(left|right)$/.test(position)||(position="bottom"===position?"right":"left"):/^(top|bottom)$/.test(position)||(position="right"===position?"bottom":"top"),o.tooltip.position=position,this._tooltip=$("<div class='ztooltip ztooltip--"+("at-cursor"===position?"bottom":position)+"'><div class='ztooltip__content'></div>"+("callout"===o.tooltip.displayType?'<div class="ztooltip__pointer '+pointerClass[position]+'"></div>':"")+"</div>").appendTo(this.container),"callout"===o.tooltip.displayType&&(this.pointer=$(this._tooltip[0].querySelector(".ztooltip__pointer")),this.vertical&&this.pointer.css({top:"auto"}),this.pointer[0].style[this.marginDir]="calc(50% - "+this.pointer[this.outerDim]()/2+"px)"),"always"!==o.showTooltip&&this._hideTip()}},_getPercent:function(value){if(value=this._getInnerVal(value),this.options.getCustomPosition)return this.options.getCustomPosition(value,this.options.min,this.options.max);var percent=(parseFloat(value)-this.options.min)/(this.options.max-this.options.min),sliderLength=this.sliderDim[this.innerDim],handleLength=this.handleDim[this.outerDim];return percent=100*(percent*(1-handleLength/sliderLength)+.5*handleLength/sliderLength)},_constructScale:function(){(this.options.showTicks||"fixed"===this.options.valuesType)&&(this._ticksLayout=$("<div>",{"class":this._CLASS.PIPES}).appendTo(this.container),this._constructGrids(),this._constructLabel(),this._positionScale())},_positionScale:function(){if(this.options.showTicks){var scalePosition=this.options.ticks.position,elements=$(this._handles).add(this._ticksLayout).add(this._labelsLayout);/^(left|top)$/.test(scalePosition)?(elements.addClass("h-inverted"),this._innerSlider.before(this._labelsLayout,this._ticksLayout)):(elements.removeClass("h-inverted"),this._innerSlider.after(this._ticksLayout,this._labelsLayout))}},_constructGrids:function(){var random,base=this,o=this.options,values=this._gridValues=[],splitBy=o.ticks.splitBy;if("fixed"===o.valuesType&&(o.ticks.step=1,splitBy="step"),"step"===splitBy&&o.ticks.step>0){o.ticks.step=parseFloat(o.ticks.step);for(var val=o.min;val<=o.max;val+=o.ticks.step)values.push(base._getActualVal(base._trimDecimal(o.min,o.ticks.step,val)))}else if("random"===splitBy&&Array.isArray(random=this._parseArray(o.ticks.randomValues)))random.forEach(function(val){val=parseFloat(val),!isNaN(val)&&val>=o.min&&val<=o.max&&-1===values.indexOf(val)&&values.push(val)}),this._gridValues=values=values.sort(function(a,b){return+a-+b});else{o.ticks.count=parseInt(o.ticks.count);for(var count=o.ticks.count>1?o.ticks.count:4,step=(o.max-o.min)/(count-1),i=0;count>i;i++){var value;value=0===i?o.min:i===count-1?o.max:this._trimDecimal(o.min,step,i*step+o.min),values.push(value)}}var html="";values.forEach(function(val){var percent=base._getPercent(val)+"%";html=html+"<div class='"+base._CLASS.PIPE+"' data-val='"+val+"' style='"+base.marginDir+":"+percent+"'></div>"}),this._ticksLayout[0].innerHTML=html,this._ticks=Array.prototype.slice.call(this._ticksLayout[0].children,0);var gridlength=$(this._ticks[0])[this.outerDim]();$(this._ticks).css("margin-"+this.marginDir,-gridlength/2+"px")},_constructLabel:function(){var o=this.options;if(o.showTicks&&o.ticks.showLabels||"fixed"===o.valuesType){this._labelsLayout=$("<div>",{"class":this._CLASS.LABELS}).appendTo(this.container);var grids=this._ticks;if(grids&&grids.length){var base=this,sliderLength=this.sliderDim[this.innerDim],labels="fixed"===o.valuesType?this._labels:this._parseArray(o.ticks.customLabels),finalLabels=[],_labelledGrids=[],labelDimensions=[],showFor=this._parseArray(o.ticks.showLabelsFor),tempspan=$("<div>",{"class":this._CLASS.LABEL}).appendTo(this._labelsLayout),pushToArray=function(label){tempspan.text(label),labelDimensions.push(tempspan[base.outerDim]()+1),finalLabels.push(label)};if(Array.isArray(labels)&&labels.length)for(var labelCount=0,i=0;i<grids.length&&labelCount!==labels.length;i++){var value=grids[i].getAttribute("data-val");if(!Array.isArray(showFor)||!showFor.length||showFor.indexOf(value)>-1){var label=labels[labelCount++];pushToArray(o.ticks.isLabelHTMLEncoded?label:ZC.encodeHTML(label)),_labelledGrids.push(grids[i])}}else _labelledGrids=grids,grids.forEach(function(grid){var value=grid.getAttribute("data-val");(!Array.isArray(showFor)||!showFor.length||showFor.indexOf(value)>-1)&&pushToArray(base._getLabel(o.ticks.labelPattern,value,!o.ticks.isLabelHTMLEncoded))});if(tempspan.remove(),_labelledGrids.length){if(this.vertical)_labelledGrids.forEach(function(grid,i){var label=$('<div class="'+base._CLASS.LABEL+'" data-val="'+grid.getAttribute("data-val")+'" style="bottom:"'+grid.style.bottom+'";">'+finalLabels[i]+"</div>").appendTo(base._labelsLayout);label[0].style.bottom="calc("+grid.style.bottom+" - "+label[0].offsetHeight/2+"px)"});else{for(var EXTRADIM=60,labelHtml="",length=_labelledGrids.length,prevDim=parseInt($(_labelledGrids[0]).css(this.marginDir))+EXTRADIM,i=0;length>i;i++){var curGrid=$(_labelledGrids[i]),nextGrid=$(_labelledGrids[i+1]),nextDim=Math.abs((nextGrid.length?parseInt(nextGrid.css(this.marginDir)):sliderLength+EXTRADIM)-parseInt(curGrid.css(this.marginDir)));nextGrid.length&&labelDimensions[i+1]<nextDim&&(nextDim=Math.abs(nextDim+(nextDim-labelDimensions[i+1])));var labelDim=Math.min(prevDim,nextDim,labelDimensions[i]);if(labelDim){prevDim=nextDim+(nextDim-labelDim);var percent=base._getPercent(curGrid.attr("data-val"))+"%";percent="calc("+percent+" - "+labelDim/2+"px)",labelHtml=labelHtml+"<div  class='"+this._CLASS.LABEL+"' data-val='"+curGrid[0].getAttribute("data-val")+"' style = '"+this.innerDim+":"+labelDim+"px; "+this.marginDir+":"+percent+"'>"+finalLabels[i]+"</div>"}}this._labelsLayout.append(labelHtml)}Array.prototype.slice.call(this._labelsLayout[0].children,0).forEach(function(label){label.offsetWidth<label.scrollWidth&&label.setAttribute("title",label.textContent)})}}}},_increase:function(value,step){return step=step||this.options.step,value=this._getInnerVal(value),value+=step-(value-this.options.min)%step},_decrease:function(value,step){return step=step||this.options.step,value=this._getInnerVal(value),value-=step-(value-this.options.min)%step},_trigger:function(customEvent,origEvent,data){return data=data||{},data.slider=this.getElement(),data.options=this.options,data.value=this.getValue(),this._dispatchEvent(customEvent,origEvent,data,void 0,!!origEvent)},_restoreMeasurements:function(){var base=this;this._MEASUREMENTS.forEach(function(opt){base.options[opt]=base.actualProps[opt]})},_resetValues:function(){this._values=this._labels=void 0,this._setFixedValues(),this._validateProperty(),$(this._handles).attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max}),this._setInitial(),this._resetScale(),this._resetRangeLabels(),this._resetLimitLayout(),this._resetTooltip(),this._positionHandle()},_resetLimitLayout:function(){$(this.container[0].querySelectorAll(".zslider__notallowedrange,.zslider__selected")).remove(),$(this.container[0].querySelectorAll(".zslider__label, .zslider__tick")).removeClass("is-disabled"),this._constructLimitLayout()},_resetScale:function(){this._ticksLayout&&this._ticksLayout.remove(),this._labelsLayout&&this._labelsLayout.remove(),this._ticks=this._ticksLayout=this._labelsLayout=this._gridValues=void 0,this._constructScale(),this._resetLimitLayout(),this._positionHandle()},_resetThumb:function(){$(this._handles).remove(),this._constructThumb()},_resetRangeLabels:function(){this._rangeLayout&&($(this._innerSlider[0].querySelectorAll(".zslider__rangegroup")).remove(),this.container.removeClass("zslider--range"),this._rangeLayout.remove(),this._rangeLayout=this._rangeBgs=this._rangeTicks=void 0),this._range.show(),this._constructRangeLabels()},_resetTooltip:function(){this._tooltip&&this._tooltip.remove(),this._tooltip=void 0,this._updateTip()},_parseArray:function(value){if("string"==typeof value)try{value=JSON.parse(value)}catch(e){}return value},_setAttribute:function(optionName,value){this._showHiddenParent();var o=this.options;switch(optionName){case"disabled":o[optionName]=!!value;{this.container.add(this._handles)}value?(this.element[0].setAttribute("disabled","disabled"),this.container.add($(this._handles).removeAttr("tabIndex").attr("aria-disabled",!0)).addClass(this._CLASS.DISABLED),this._tooltip&&this._tooltip.remove()):(this.element[0].removeAttribute("disabled"),this.container.add($(this._handles).attr("tabIndex",o.tabIndex).removeAttr("aria-disabled")).removeClass(this._CLASS.DISABLED),"always"===o.showTooltip&&this._resetTooltip());break;case"orientation":/^(horizontal|vertical)$/.test(value)&&(o[optionName]=value,this.vertical="vertical"===value,this.container[this.vertical?"addClass":"removeClass"](this._CLASS.VERTICAL),this._range.removeAttr("style"),this._shadowTrack.css({left:"auto",top:"auto"}),this._resetThumb(),this._resetValues());break;case"className":"string"==typeof value&&(this.container.removeClass(o[optionName]).addClass(value),o[optionName]=value);break;case"min":case"max":case"minValueAllowed":case"maxValueAllowed":case"step":this._restoreMeasurements(),o[optionName]=value,this._cacheMeasurements(),this._resetValues();break;case"locale":o.locale=value||ZC.locale,this._resetLocaleData(),this._setAttribute("showTicks",o.showTicks);break;case"selectionStartValue":o[optionName]=value,this._updateLayout();break;case"value":this.setValue(value);break;case"valuesType":/^(range|fixed)$/.test(value)&&(o[optionName]=value,"range"===value?o.ticksStep=this.actualProps.ticksStep:this.actualProps.ticksStep=o.ticksStep,this._resetValues());break;case"values":Array.isArray(value)&&(o[optionName]=value,this._resetValues());break;case"showTooltip":o[optionName]=value,this._resetTooltip();break;case"tooltip":var update;Object.keys(value).forEach(function(key){/^(position|displayType|text|isHTMLEncoded)$/.test(key)&&(o.tooltip[key]=value[key],update=!0)}),update&&this._setAttribute("showTooltip",o.showTooltip);break;case"ticks":var update;Object.keys(value).forEach(function(key){/^(splitBy|step|count|randomValues|position|showLabels|showLabelsFor|customLabels|labelPattern|isLabelHTMLEncoded)$/.test(key)&&(o.ticks[key]=value[key],update=!0)}),update&&this._setAttribute("showTicks",o.showTicks);break;case"valueDisplayFormat":var update;Object.keys(value).forEach(function(key){/^(type|decimalPlaces|thousandSeparator|pattern)$/.test(key)&&(o.valueDisplayFormat[key]=value[key],update=!0)}),update&&(this._resetLocaleData(),this._setAttribute("showTicks",o.showTicks));break;case"rangeGroups":var update;Object.keys(value).forEach(function(key){/^(groups|isLabelHTMLEncoded|labelPosition)$/.test(key)&&(o.rangeGroups[key]=value[key],update=!0)}),update&&(this._resetRangeLabels(),this._positionHandle());break;case"width":o[optionName]=value,this.container.width(value),this._resetThumb(),this._resetValues();break;case"showTicks":case"thumbIconStyle":case"thumbSVGIconId":case"thumbIconClassName":o[optionName]=value,this._resetThumb(),this._resetValues();break;default:o[optionName]=value}this._resetParent()},increase:function(origEvent){this._setValue(this._increase(this.options.value),origEvent)},decrease:function(origEvent){this._setValue(this._decrease(this.options.value),origEvent)},setValue:function(value,origEvent){void 0!==value&&(value=this._getInnerVal(value),this._setValue(value,origEvent))},getValue:function(){return this.options.value},destroy:function(){this.container.remove(),this.element.show().removeData(this.options.widgetEventPrefix)},setAttribute:function(optionName,value){value="string"==typeof value?value.trim():value,value!==this.options[optionName]&&this._setAttribute(optionName,value)}};ZC.registerComponent("zslider",sliderPrototype),ZC.createSlider=function(options){if("object"==typeof options){var element=$("#"+options.id);if(element.length){if(element.data("zslider"))return element}else element=$("<input>").appendTo($(options.appendTo).length?options.appendTo:"body").attr({id:options.id,style:options.style,title:options.title,tabIndex:options.tabIndex});return element.zslider(options),element}}}(ZComponents),function(ZC){var $=ZC.DOMUtil,doubleSliderPrototype={options:$.extend({},$.zslider.prototype.options,{fromValue:0,toValue:0,tooltip:{text:"#fromvalue# - #tovalue#"},isFromValueFixed:!1,isToValueFixed:!1,minFromValueAllowed:void 0,maxFromValueAllowed:void 0,minToValueAllowed:void 0,maxToValueAllowed:void 0,isSelectionDraggable:!1,minRangeDiff:0,maxRangeDiff:0,widgetEventPrefix:"zdoubleslider"}),_MEASUREMENTS:["minValueAllowed","maxValueAllowed","minFromValueAllowed","maxFromValueAllowed","minToValueAllowed","maxToValueAllowed"],_create:function(element,options){options.valuesType="range",options.minValueAllowed=options.maxValueAllowed=void 0,this._super.apply(this,arguments),this.options.isSelectionDraggable&&this._setAttribute("isSelectionDraggable",!0),this._range.attr("tabindex",-1)},_constructThumb:function(){this.container.append(this._createThumb()),this.container.append(this._createThumb()),this._handles=Array.prototype.slice.call(this.container[0].querySelectorAll("."+this._CLASS.HANDLE));var fixedHandle;this.options.isFromValueFixed?fixedHandle=this._handles[0]:this.options.isToValueFixed&&(fixedHandle=this._handles[1]),fixedHandle&&$(fixedHandle).addClass("zslider__fixedthumb"),this._updateDimensions()},_setInitialValue:function(){this._setBoth(this.options.fromValue,this.options.toValue)},_validateProperty:function(){this._super();var o=this.options;"fixed"!==o.valuesType?(o.minFromValueAllowed=parseFloat(o.minFromValueAllowed),o.maxFromValueAllowed=parseFloat(o.maxFromValueAllowed),o.minToValueAllowed=parseFloat(o.minToValueAllowed),o.maxToValueAllowed=parseFloat(o.maxToValueAllowed),o.minRangeDiff=parseFloat(o.minRangeDiff),o.maxRangeDiff=parseFloat(o.maxRangeDiff),(isNaN(o.minFromValueAllowed)||o.minFromValueAllowed<o.minValueAllowed||o.maxValueAllowed-o.minFromValueAllowed<=o.step)&&(o.minFromValueAllowed=o.minValueAllowed),(isNaN(o.maxToValueAllowed)||o.maxToValueAllowed>o.maxValueAllowed||o.maxToValueAllowed-o.minFromValueAllowed<=o.step)&&(o.maxToValueAllowed=o.maxValueAllowed),(isNaN(o.maxFromValueAllowed)||o.maxFromValueAllowed<=o.minFromValueAllowed||o.maxFromValueAllowed>o.maxToValueAllowed)&&(o.maxFromValueAllowed=o.maxToValueAllowed),(isNaN(o.minToValueAllowed)||o.minToValueAllowed<=o.minFromValueAllowed||o.minToValueAllowed>=o.maxToValueAllowed)&&(o.minToValueAllowed=o.minFromValueAllowed),(isNaN(o.minRangeDiff)||o.max-o.min<o.minRangeDiff||o.minRangeDiff>o.maxToValueAllowed-o.minFromValueAllowed)&&(o.minRangeDiff=0),(isNaN(o.maxRangeDiff)||o.max-o.min<o.maxRangeDiff||o.maxRangeDiff<o.minRangeDiff||o.maxRangeDiff<o.minToValueAllowed-o.maxFromValueAllowed)&&(o.maxRangeDiff=0),Math.abs(o.maxRangeDiff-o.minRangeDiff)<o.step&&(o.maxRangeDiff=o.minRangeDiff=0)):(o.minToValueAllowed=o.minFromValueAllowed=o.min,o.maxToValueAllowed=o.maxFromValueAllowed=o.max,o.minRangeDiff=o.maxRangeDiff=0)
},_constructLimitLayout:function(){var o=this.options;o.minFromValueAllowed!==o.minValueAllowed&&this._createLimitBox(o.min,o.minFromValueAllowed,"zslider__notallowedrange"),o.maxFromValueAllowed<o.minToValueAllowed&&this._createLimitBox(o.maxFromValueAllowed,o.minToValueAllowed,"zslider__selected"),o.maxToValueAllowed!==o.maxValueAllowed&&this._createLimitBox(o.maxToValueAllowed,o.maxValueAllowed,"zslider__notallowedrange")},_getTipPosition:function(rangeObj){var position=this._super();if(position&&"at-cursor"!==this.options.tooltip.position){var rangeWidth=parseFloat(rangeObj?rangeObj[this.innerDim]:this._range[0].style[this.innerDim]),offset=parseFloat(rangeObj?rangeObj[this.marginDir]:this._range[0].style[this.marginDir]);position[this.marginDir]=offset+rangeWidth/2+"%"}return position},_getTipText:function(){var label="",template=this.options.tooltip.text;return"string"==typeof template&&""!==template.trim()&&(label=template.replace(new RegExp("#fromvalue#","gi"),this._getFormattedLabel(this.options.fromValue)).replace(new RegExp("#tovalue#","gi"),this._getFormattedLabel(this.options.toValue))),this.options.tooltip.isHTMLEncoded?label:ZC.encodeHTML(label)},_onFocus:function(origEvent){this._activeHandle=origEvent.target,this._super()},_onMouseDown:function(origEvent){if(!this.container.hasClass(this._CLASS.DISABLED)){this._mouseActive=!0;var o=this.options;if($(origEvent.target).is(this._range)&&o.isSelectionDraggable){if(o.isFromValueFixed||o.isToValueFixed)return!1;this._dragSelectionStarted=!0,o.snapToTicks=!1,this.tempminRangeDiff=o.minRangeDiff,this.tempmaxRangeDiff=o.maxRangeDiff,this.vertical?this.offsetY=origEvent.pageY-this._range.offset().top:this.offsetX=origEvent.pageX-this._range.offset().left,o.maxRangeDiff=o.minRangeDiff=o.toValue-o.fromValue,this.container.removeClass("on-tabfocus").addClass("is-active"),this._bindDocumentEvent(origEvent),this._range.focus()}else this._super.apply(this,arguments)}},_onSlide:function(origEvent){if(!this.container.hasClass(this._CLASS.DISABLED)){if(!this._dragSelectionStarted&&(!this._activeHandle||$(this._activeHandle).hasClass("zslider__fixedthumb")))return;this._animate="mousemove"!==origEvent.type,this._showTip(origEvent),this._dragSelectionStarted&&(this.vertical?origEvent.pageY=origEvent.pageY+this.offsetY:origEvent.pageX=origEvent.pageX-this.offsetX);var value=this._getValueFromEvent(origEvent);if(void 0!==value){if(this._dragStarted||(this._storeInitialValue(),this._trigger("ONSLIDESTART",origEvent),this._dragStarted=!0),this._dragSelectionStarted)this._setBoth(value,void 0,origEvent);else{var handleindex=this._handles.indexOf(this._activeHandle);0===handleindex?this._setFromValue(value,origEvent):1===handleindex&&this._setToValue(value,origEvent)}this._trigger("ONSLIDE",origEvent),origEvent.preventDefault()}}},_onSlideEnd:function(origEvent){this.container.hasClass(this._CLASS.DISABLED)||(this._dragSelectionStarted&&(this.options.minRangeDiff=this.tempminRangeDiff,this.options.maxRangeDiff=this.tempmaxRangeDiff,this.options.snapToTicks=!0,this._dragSelectionStarted=!1),this._super(origEvent))},_storeInitialValue:function(){this._startToValue=this.getToValue(),this._startFromValue=this.getFromValue()},_isChangeInValue:function(){return this._startToValue!==this.getToValue()||this._startFromValue!==this.getFromValue()},_getValueFromEvent:function(origEvent){return this._dragSelectionStarted&&(origEvent=$.extend({},origEvent),origEvent.target=null),this._super(origEvent)},_keyPress:function(origEvent){if(this._activeHandle&&!$(this._activeHandle).hasClass("zslider__fixedthumb")){var value,keyCode=origEvent.which,activeindex=this._handles.indexOf(this._activeHandle);if(keyCode===ZC.keyCode.HOME)value=this.options.minValueAllowed;else if(keyCode===ZC.keyCode.END)value=this.options.maxValueAllowed;else if(keyCode===ZC.keyCode.RIGHT||keyCode===ZC.keyCode.UP||keyCode===ZC.keyCode.PAGE_UP)value=this._increase(activeindex?this.options.toValue:this.options.fromValue);else{if(keyCode!==ZC.keyCode.LEFT&&keyCode!==ZC.keyCode.DOWN&&keyCode!==ZC.keyCode.PAGE_DOWN)return;value=this._decrease(activeindex?this.options.toValue:this.options.fromValue)}return origEvent.preventDefault(),value}},_getActiveHandle:function(origEvent){var target=$(origEvent.target).closest(".zslider__thumb")[0],activeHandleIndex=this._handles.indexOf(target);if(-1===activeHandleIndex)if(this.options.isFromValueFixed)activeHandleIndex=1;else if(this.options.isToValueFixed)activeHandleIndex=0;else{var prop,cursorPos;this.vertical?(prop="top",cursorPos=origEvent.pageY-this._innerSlider.offset().top):(prop="left",cursorPos=origEvent.pageX-this._innerSlider.offset().left);var diff1=parseInt($(this._handles[0]).css(prop))-cursorPos,diff2=parseInt($(this._handles[1]).css(prop))-cursorPos;activeHandleIndex=Math.abs(diff1)===Math.abs(diff2)?(this.vertical?diff1>0:0>diff1)?1:0:Math.abs(diff1)>Math.abs(diff2)?1:0}return this._handles[activeHandleIndex]},_setBoth:function(fromvalue,tovalue,origEvent){if(void 0!==fromvalue||void 0!==tovalue){var o=this.options,prevFrom=o.fromValue,prevTo=o.toValue;this._setFrom(fromvalue),this._setTo(tovalue),(prevFrom!==o.fromValue||prevTo!==o.toValue)&&this._updateLayout(origEvent)}},_setTo:function(value){var o=this.options,min=Math.max(o.minToValueAllowed,o.minValueAllowed,o.fromValue+o.minRangeDiff),max=Math.min(o.maxToValueAllowed,o.maxValueAllowed,o.maxRangeDiff?o.fromValue+o.maxRangeDiff:o.maxValueAllowed);return o.toValue=this._getActualVal(this._getCorrectedValue(value,min,max)),o.toValue},_setFrom:function(value,considerToVal){var o=this.options,min=Math.max(o.minFromValueAllowed,o.minValueAllowed,o.maxRangeDiff?(considerToVal?o.toValue:o.minToValueAllowed)-o.maxRangeDiff:o.minFromValueAllowed),max=Math.min(o.maxFromValueAllowed,(considerToVal?o.toValue:o.maxToValueAllowed)-o.minRangeDiff);return o.fromValue=this._getActualVal(this._getCorrectedValue(value,min,max)),o.fromValue},_setFromValue:function(value,origEvent){var o=this.options,prevVal=o.fromValue;return this._setFrom(value,!0),prevVal!==o.fromValue&&this._updateLayout(origEvent),o.fromValue},_setToValue:function(value,origEvent){var o=this.options,prevVal=o.toValue;return this._setTo(value),prevVal!==o.toValue&&this._updateLayout(origEvent),o.toValue},_updateLayout:function(origEvent){var object={},o=this.options,oncomplete=(o.animation.slide.duration,o.animation.slide.className,function(){this._frominit||origEvent&&/(keydown|mousedown|mousemove)/.test(origEvent.type)||this._trigger("ONCHANGE",origEvent)}),leftPer=this._getPercent(o.fromValue),rightPer=this._getPercent(o.toValue);object={},object[this.marginDir]=leftPer+"%";var attr={"data-val":o.fromValue,"aria-valuenow":o.fromValue,"aria-valuetext":this._getTipText()};this._handleAnimation($(this._handles[0]).attr(attr),object),object={},object[this.marginDir]=rightPer+"%";var attr={"data-val":o.toValue,"aria-valuenow":o.toValue,"aria-valuetext":this._getTipText()};this._handleAnimation($(this._handles[1]).attr(attr),object),object={},object[this.marginDir]=leftPer+"%",object[this.innerDim]=rightPer-leftPer+"%",this._handleAnimation(this._range,object,oncomplete.bind(this)),this._updateTip(object)},_trigger:function(customEvent,origEvent){var data={slider:this.getElement(),fromValue:this.getFromValue(),toValue:this.getToValue()};return this._dispatchEvent(customEvent,origEvent,data)},_setAttribute:function(optionName,value){if(!/^(value|valuesType|values|minValueAllowed|maxValueAllowed)$/.test(optionName))switch(optionName){case"fromValue":this._setFromValue(value);break;case"toValue":this.setToValue(value);break;case"isFromValueFixed":this.options[optionName]=value,value&&(this._setAttribute("isToValueFixed",!1),this._setAttribute("isSelectionDraggable",!1)),$(this._handles[0])[value?"addClass":"removeClass"]("zslider__fixedthumb");break;case"isToValueFixed":this.options[optionName]=value,value&&(this._setAttribute("isFromValueFixed",!1),this._setAttribute("isSelectionDraggable",!1)),$(this._handles[1])[value?"addClass":"removeClass"]("zslider__fixedthumb");break;case"isSelectionDraggable":this.options[optionName]=value,this.container[value?"addClass":"removeClass"]("zslider--selectiondraggable");break;case"minFromValueAllowed":case"maxFromValueAllowed":case"minToValueAllowed":case"maxToValueAllowed":case"minRangeDiff":case"maxRangeDiff":this._restoreMeasurements(),this.options[optionName]=value,this._cacheMeasurements(),this._resetValues(),this._resetScale();break;default:this._super(optionName,value)}},setFromValue:function(value){void 0!==value&&(value=this._getInnerVal(value),this._setFromValue(value))},setToValue:function(value){void 0!==value&&(value=this._getInnerVal(value),this._setToValue(value))},increaseFromValue:function(){this._setFromValue(this._increase(this.options.fromValue))},increaseToValue:function(){this._setToValue(this._increase(this.options.toValue))},decreaseFromValue:function(){this._setFromValue(this._decrease(this.options.fromValue))},decreaseToValue:function(){this._setToValue(this._decrease(this.options.toValue))},getFromValue:function(){return this.options.fromValue},getToValue:function(){return this.options.toValue}};ZC.registerComponent("zdoubleslider",$.zslider,doubleSliderPrototype),ZC.createDoubleSlider=function(options){if("object"==typeof options){var element=$("#"+options.id);if(element.length){if(element.data("zdoubleslider"))return element}else element=$("<input>").appendTo($(options.appendTo).length?options.appendTo:"body").attr({id:options.id,style:options.style,title:options.title});return element.zdoubleslider(options),element}}}(ZComponents);var ZAlertBanner={};!function(ZC){var $=ZC.DOMUtil;ZC.notifierCount=0;var alertbannerPrototype={options:{type:"info",icon:void 0,message:"Default alert banner",isMessageHTMLEncoded:!1,position:"top",align:"center",positionAlterable:!0,hideDelay:void 0,closeButton:!1,display:"fixed",target:"body",displayAfter:void 0,displayBefore:void 0,displayInside:void 0,hideOnClick:!1,left:void 0,right:void 0,bottom:void 0,top:void 0,margin:void 0,pauseOnMouseOver:!1,height:"auto",width:"auto",className:void 0,animation:!1,closePreviousBanner:!0,icons:{close:void 0,error:void 0,info:void 0,warning:void 0,success:void 0},labels:{close:"Close"},widgetEventPrefix:"zalertbanner"},_TEMPLATE:{close:"<svg class='zalertbanner__svg' viewBox='0 0 16 16'><g><rect x='1.5' y='7.4' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)' class='st0' width='13' height='1.1'></rect><rect x='1.5' y='7.4' transform='matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)' class='st0' width='13' height='1.1'></rect></g></svg>",info:"<svg class='zalertbanner__svg' viewBox='0 0 48 48'><g><g><path d='M23.9,17.4c1.5,0,2.5-1.1,2.4-2.3c0-1.3-0.9-2.4-2.3-2.4s-2.4,1.1-2.4,2.4C21.6,16.3,22.6,17.4,23.9,17.4z'></path><path d='M26.2,35.5V21.8c0-1.2-1.4-1.3-1.8-1.3h-0.7c0,0-1.7,0-1.7,1.1v14.3c0,0.3,0.2,0.9,1.3,0.9h1.6C25.3,36.7,26.2,36.5,26.2,35.5z'></path></g><path d='M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24S37.3,0,24,0z M24,44C13,44,4,35,4,24S13,4,24,4s20,9,20,20S35,44,24,44z'></path></g></svg>",error:"<svg class='zalertbanner__svg' viewBox='0 0 48 48'><path d='M41.2,7.2C31.9-2.2,16.7-2.5,7.3,6.9c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.8,41.2,7.2z M37.9,38.2C30,46,17.4,45.9,9.7,38S2.1,17.5,10,9.8S30.5,2.1,38.2,10C45.9,17.9,45.8,30.5,37.9,38.2z'></path><path d='M31.7,17.5l-1.1-1.1c-0.8-0.8-1.7-0.1-2,0.1L24,21l-4.6-4.7c-0.3-0.3-1.1-0.8-1.9,0l-1.1,1.1c-0.8,0.8-0.1,1.7,0.1,2L21,24l-4.7,4.6c-0.9,0.9-0.3,1.6-0.1,1.8l1.3,1.3c0.2,0.2,0.9,0.8,1.8-0.1L24,27l4.6,4.7c0.9,0.9,1.6,0.3,1.8,0.1l1.3-1.3c0.2-0.2,0.8-0.9-0.1-1.8L27,24l4.7-4.6C32,19.1,32.5,18.4,31.7,17.5z'></path></svg>",warning:"<svg class='zalertbanner__svg' viewBox='0 0 48 48'><g><path d='M47.3,36.6L27.7,2.5c-0.9-1.4-2.4-2.2-3.9-2.1c-1.6,0-2.9,0.9-3.7,2.2L0.7,36.5c-0.9,1.3-1,3-0.2,4.4c0.8,1.5,2.3,2.4,4,2.4h39c1.6,0,3.1-0.8,3.9-2.2C48.2,39.7,48.2,38,47.3,36.6z M43.9,39.2c-0.1,0.1-0.2,0.2-0.4,0.2h-39c-0.3,0-0.4-0.2-0.5-0.3c-0.1-0.2,0-0.3,0-0.4L23.5,4.6c0,0,0.1-0.2,0.3-0.2c0,0,0,0,0,0c0.1,0,0.3,0,0.4,0.2l19.6,34C44,38.8,44,39,43.9,39.2z'></path></g><circle cx='24' cy='33.4' r='2'></circle><path d='M24.1,28.4L24.1,28.4c-0.8,0-1.3-0.4-1.4-1l-1-10c-0.1-1.1,1-2,2.4-2l0,0c1.4,0,2.5,0.9,2.4,2l-1,10C25.4,27.9,24.9,28.4,24.1,28.4z'></path></svg>",success:'<svg class="zalertbanner__svg" viewBox="0 0 48 48"><path d="M41.2 7.2C31.9-2.3 16.7-2.5 7.3 6.8c-9.5 9.3-9.7 24.5-0.4 33.9 9.3 9.5 24.5 9.7 33.9 0.4C50.3 31.9 50.4 16.7 41.2 7.2zM37.9 38.2c-7.9 7.7-20.5 7.6-28.2-0.3S2.1 17.4 10 9.7 30.5 2.1 38.2 10C45.9 17.8 45.8 30.5 37.9 38.2z"></path><path d="M35 20.3L23.1 32.2c-1.1 1.1-2.9 1.1-4 0l-1-1 -4.5-4.6c-0.2-0.2-1-1.1-0.1-2l1.1-1.1c0.8-0.8 1.6-0.3 1.9 0l4.6 4.7 11-10.8c0.2-0.2 1.1-1 2-0.1l1.1 1.1C35.8 19.2 35.3 19.9 35 20.3z"></path></svg>'},_EVENTS:{ONSHOW:"show",ONHIDE:"hide",ONBEFORESHOW:"beforeshow",ONBEFOREHIDE:"beforehide"},_ANIMATION:{slide:{show:"slideDown",hide:"slideUp"},fade:{show:"fadeIn",hide:"fadeOut"},end:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"},_CLASS:{SUCCESS:"zalertbanner--success",INFO:"zalertbanner--info",WARNING:"zalertbanner--warning",ERROR:"zalertbanner--error"},_create:function(element,options){this._initialize(element,options),this._createNotifier(),this._positionNotifier(),this.notifier.hide()&&this._open(),this._bindEvents()},_initialize:function(element,options){if(this.notifier=element,options.hideOnClick=options.closeButton?!1:options.hideOnClick,options.hideDelay=this._hideDelay=parseInt(void 0!==options.hideDelay?options.hideDelay:options.closeButton?0:5e3),this.eventNameSpace="."+options.widgetEventPrefix,"number"==typeof options.margin||"string"==typeof options.margin){var number=isNaN(parseInt(options.margin))?0:parseInt(options.margin);options.margin={left:number,top:number,right:number,bottom:number}}else"object"==typeof options.margin?(void 0===options.margin.left&&(options.margin.left="inline"===options.display?0:10),void 0===options.margin.right&&(options.margin.right="inline"===options.display?0:10),void 0===options.margin.top&&(options.margin.top="inline"===options.display?0:10),void 0===options.margin.bottom&&(options.margin.bottom="inline"===options.display?0:10)):(options.margin={},options.margin.left=options.margin.right=options.margin.bottom=options.margin.top="inline"===options.display?0:10)},_createNotifier:function(){var o=this.options,holder=this.notifier;clearTimeout(this.autoHideTimer),/^(success|info|warning|error|custom)$/.test(o.type)||(o.type="success");var baseClass="zalertbanner "+("custom"===o.type?"":this._CLASS[o.type.toUpperCase()])+" "+("string"==typeof o.className?o.className:"");if(this.notifier.addClass(baseClass),o.icon){holder=$('<div class="zalertbanner__table">').appendTo(this.notifier);var notifierIcon=$('<i class="zalertbanner__icon"></i>').prependTo(holder);o[o.type+"SVGIconId"]||o[o.type+"IconClassName"]?ZC.createIcon(notifierIcon,void 0,o[o.type+"SVGIconId"],o[o.type+"IconClassName"]):"string"==typeof o.icon?ZC.createIcon(notifierIcon,o.icon):notifierIcon.html(this._TEMPLATE[o.type])}if(o.closeButton){var base=this,notifierClose=$('<i class="zalertbanner__icon"></i>');o.closeSVGIconId||o.closeIconClassName?ZC.createIcon(notifierClose,void 0,o.closeSVGIconId,o.closeIconClassName):notifierClose[0].innerHTML=this._TEMPLATE.close;var closeButton=$('<button type=button class="zalertbanner__close"></button').append(notifierClose).on("click"+this.eventNameSpace,function(){base._close()});$('<div class="zalertbanner__action"></div>').append(closeButton).appendTo(holder).attr("title",this._localize("close"))}if(holder.append('<span class="zalertbanner__text">'+(o.isMessageHTMLEncoded?String(o.message):ZC.encodeHTML(String(o.message)))+"</span>"),"inline"===o.display?this.options.displayInside?(this.target=$(this.options.displayInside),this.notifier.appendTo(this.target)):this.options.displayAfter?(this.target=$(this.options.displayAfter),this.notifier.insertAfter(this.target)):this.options.displayBefore&&(this.target=$(this.options.displayBefore),this.notifier.insertBefore(this.target)):(this.target=$(o.target),this.notifier.appendTo(this.target).css({position:this.target.is("body")?"fixed":"absolute"})),this.notifier.css("text-align",o.textAlign),"inline"===o.display){var actualWidth=this.notifier.outerWidth()+1;this.notifier.css("display","block");var maxWidth=this.notifier.outerWidth();actualWidth>maxWidth&&(actualWidth=maxWidth,o.align="center"),this.notifier[0].style.width=actualWidth+"px"}},_bindEvents:function(){this.options.hideOnClick&&this.notifier.on("click"+this.eventNameSpace,this._close.bind(this)),(this.options.pauseOnMouseOver||this.options.pauseOnHover)&&this._hideDelay&&this.notifier.on("mouseenter"+this.eventNameSpace,this._pauseTimer.bind(this)).on("mouseleave"+this.eventNameSpace,this._setHideTimer.bind(this))},_setHideTimer:function(){this._hideDelay&&(clearTimeout(this.autoHideTimer),this._startTimer=(new Date).getTime(),this.autoHideTimer=setTimeout(this._close.bind(this),this._hideDelay))},_pauseTimer:function(){this._startTimer&&(clearTimeout(this.autoHideTimer),this._hideDelay-=(new Date).getTime()-this._startTimer,this._startTimer=void 0)},_showComplete:function(){this._trigger("ONSHOW"),this._setHideTimer()},_open:function(){this._trigger("ONBEFORESHOW")&&this._animate(this.notifier,this.options.animation,"show","show",this._showComplete.bind(this))},_closeComplete:function(){var base=this;this._trigger("ONHIDE");var id=this.target.data("previous-bannerId");id===this.notifier.attr("id")&&this.target.removeData("previous-bannerId"),setTimeout(function(){base.notifier&&base.notifier.remove()},100)},_close:function(immediate){this._trigger("ONBEFOREHIDE")&&(clearTimeout(this.autoHideTimer),this._animate(this.notifier,immediate?void 0:this.options.animation,"hide","hide",this._closeComplete.bind(this)))},_animate:function(element,animation,action,alterFn,callback){if(animation&&"object"==typeof animation){var effect,className;"string"==typeof animation?effect=this._ANIMATION[animation][action]:animation.name?this._ANIMATION[animation.name]&&(effect=this._ANIMATION[animation.name][action]):animation[action]&&("string"==typeof animation[action]?effect=animation[action]:animation[action].name?effect=animation[action].name:animation[action].className&&(className=animation[action].className));var duration=animation.duration?animation.duration:animation[action]&&animation[action].duration?animation[action].duration:void 0;"object"==typeof effect?element.animate(effect,duration,callback):/^(fadeIn|fadeOut|slideDown|slideUp)$/.test(effect)?element[effect](duration,callback):"string"==typeof className?("show"===alterFn&&element.css("display",""),element.removeClass(element.data("css-effect")).addClass(className).data("css-effect",className).off(this._ANIMATION.end).on(this._ANIMATION.end,function(){"hide"===alterFn&&element.hide(),element.removeClass(className).removeData("css-effect"),callback()})):(element.css("display","hide"===alterFn?"none":"block"),callback())}else element.css("display","hide"===alterFn?"none":"block"),callback()},_trigger:function(customEvent,origEvent){return this._dispatchEvent(customEvent,origEvent)},_positionNotifier:function(){var o=this.options,position=this._getPosition();["left","right","top","bottom"].forEach(function(prop){o[prop]&&(position[prop]=o[prop])}),this.notifier.css(position)},_getPosition:function(){var position,align,cssPos={},margin={top:this.options.margin.top,bottom:this.options.margin.bottom,left:this.options.margin.left,right:this.options.margin.right};return/^(left|right|center)$/.test(this.options.align)||(this.options.align=$.zalertbanner.prototype.options.align),align=this.options.align,"fixed"===this.options.display?(/^(top|bottom|middle)$/.test(this.options.position)||(this.options.position=$.zalertbanner.prototype.options.position),position=this.options.position,/^(top|bottom)$/.test(position)?cssPos[position]=parseInt(margin[position]):cssPos.top="calc(50% - "+this.notifier.outerHeight()/2+"px)",this.notifier.attr("data-position",position+"-"+align)):(margin.top&&(cssPos["margin-top"]=margin.top),margin.bottom&&(cssPos["margin-bottom"]=margin.bottom)),"left"===align?margin.left&&(cssPos.left=parseInt(margin.left)):"right"===align?"fixed"!==this.options.display?cssPos.left="calc(100% - "+(this.notifier.outerWidth()+parseInt(margin.right))+"px)":cssPos.right=parseInt(margin.right):"fixed"===this.options.display?cssPos.left="calc(50% - "+this.notifier.outerWidth()/2+"px)":(cssPos["margin-left"]="auto",cssPos["margin-right"]="auto"),cssPos}};ZC.registerComponent("zalertbanner",alertbannerPrototype),ZAlertBanner.show=function(options){var target;"fixed"===options.display?(target=$(options.target),target.length||(options.target=target=$("body"))):(options.displayInside?target=$(options.displayInside):options.displayAfter?target=$(options.displayAfter):options.displayBefore&&(target=$(options.displayBefore)),target&&target.length||(target=$("body"),options.display="fixed"));var previousID=target.data("previous-bannerId");if(previousID){var element=$("#"+previousID);element.finish?element.finish():element.stop(!0,!0),element.is(":visible")&&element.length&&(ZAlertBanner.hide(element,!0),"inline"===options.display&&options.animation&&options.animation.show&&(options.animation.show=!1))}var id="zalertbanner_"+ZC.notifierCount++;return target.data("previous-bannerId",id),$('<div id="'+id+'" role="status" ></div>').zalertbanner("string"===options?{message:options}:options),id},ZAlertBanner.hide=function(notifierId,imm){if(notifierId){var notifiers=$(notifierId);notifiers.length&&notifiers.each(function(i,notifier){var data=$(notifier).data("zalertbanner");data&&data._close.call(data,imm)})}},ZC.AlertBanner=ZAlertBanner}(ZComponents),function(ZC){var $=ZC.DOMUtil,sortablePrototype={_create:function(element,options){this._initialize(element,options),this._constructComponent()},options:{sortableItems:"> *",disabled:!1,sortAxis:!1,zIndex:1e3,scrollSensitivity:20,scrollSpeed:20,cancel:"input,textarea,button,select,option",leave:null},_EVENTS:{DRAGSTART:"dragstart",MOUSEDRAG:"drag",DRAGSTOP:"dragstop"},_initialize:function(){this.document=$(this.element[0].ownerDocument),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)},_constructComponent:function(){this.saveContainerData={},this.element.addClass("zc-sortable"),this.refresh(),this._offsetPos=this.element.offset(),this._bindMouseEvents(),this._setHandleClassName(),this.ready=!0},refresh:function(orgEvent){return this._refreshItems(orgEvent),this._setHandleClassName(),this._refreshPositions(),this},_handleMouseDown:function(orgEvent){var componentName=this.componentName;this._dispatchEvent("DRAGSTART",orgEvent.target,orgEvent),this._isMouseMoved=!1,this._mouseStarted&&this._handleMouseUp(orgEvent),this._mouseDownEvent=orgEvent;var base=this,leftButtonClicked=1===orgEvent.which,elementToNeglect="string"==typeof this.options.cancel&&orgEvent.target.nodeName?$(orgEvent.target).closest(this.options.cancel).length:!1,leaveElem="string"==typeof this.options.leave&&$(orgEvent.target).hasClass(this.options.leave)?!0:!1,isInValidElement=this.options.sortWith?$(orgEvent.target).closest(this.options.sortWith).length:!0;if(!isInValidElement||!leftButtonClicked||elementToNeglect||leaveElem||!this._captureMouseAction(orgEvent))return!0;!0===$.data(orgEvent.target,componentName+".preventClickEvent")&&$.removeData(orgEvent.target,componentName+".preventClickEvent");var base=this;return this.document.on("mousemove."+componentName,function(orgEvent){base._handleMouseMove(orgEvent)}).on("mouseup."+componentName,function(orgEvent){base._handleMouseUp(orgEvent)}),orgEvent.preventDefault(),!0},_handleMouseMove:function(orgEvent){return this._dispatchEvent("MOUSEDRAG",orgEvent.target,orgEvent),this._isMouseMoved&&ZC.Browser.isIE()&&(!document.documentMode||document.documentMode<9)&&!orgEvent.button?this._handleMouseUp(orgEvent):((orgEvent.which||orgEvent.button)&&(this._isMouseMoved=!0),this._mouseStarted?(this._onMouseDrag(orgEvent),orgEvent.preventDefault()):(ZC.$document.on("keydown."+this.componentName,this._keydownHandler.bind(this,orgEvent)),this._mouseStarted=this._handleMouseMoveStart(this._mouseDownEvent,orgEvent)!==!1,this._mouseStarted?this._onMouseDrag(orgEvent):this._handleMouseUp(orgEvent),!this._mouseStarted))},_keydownHandler:function(mouseMoveEvent,orgEvent){orgEvent.keyCode===ZC.keyCode.ESCAPE&&this._handleMouseUp(this._mouseDownEvent,!0),ZC.$document.off("keydown."+this.componentName)},_dispatchEvent:function(customEvent,ui,orgEvent){var content={value:ui};return this._super(customEvent,orgEvent,content)},_handleMouseMoveStart:function(orgEvent){this.currentContainer=this,this._refreshPositions(),this._draggableElement=this._createDraggableElement(),this._saveDraggableElementSize(),this._saveMargins(),this._scrollParent=this._getScrollParent(this._draggableElement),this._offsetPos=this._selectedItem.offset(),this._offsetPos={top:this._offsetPos.top-this._margins.top,left:this._offsetPos.left-this._margins.left};var base=this;return $.extend(this._offsetPos,{click:{left:orgEvent.pageX-base._offsetPos.left,top:orgEvent.pageY-base._offsetPos.top},parent:base._getParentOffset(),relative:base._getRelativeOffset()}),this._draggableElement.css("position","absolute"),this._cssPosition=this._draggableElement.css("position"),this._elementPosition=this._fixPosition(orgEvent),this._eventPageX=orgEvent.pageX,this._eventPageY=orgEvent.pageY,this._formerDomElements={prev:this._selectedItem.prev()[0],parent:this._selectedItem.parent()[0]},this._createPlaceHolder(),this.options.containment&&this._setContainment(),this.options.zIndex&&(this._draggableElement.css("zIndex")&&(this._savedZIndex=this._draggableElement.css("zIndex")),this._draggableElement.css("zIndex",this.options.zIndex)),this._preserveDraggableElementSize||this._saveDraggableElementSize(),this._draggableElement.addClass("zc-sortable-helper"),this._onMouseDrag(orgEvent),!0},_setContainment:function(){"parent"===this.options.containment&&(this.options.containment=this._draggableElement[0].parentNode);var contaimentElement=$(this.options.containment)[0],containmentOffset=$(this.options.containment).offset(),isOverFlowHidden="hidden"!==$(contaimentElement).css("overflow");this._containment=[containmentOffset.left+parseInt($(contaimentElement).css("borderLeftWidth"))+parseInt($(contaimentElement).css("paddingLeft"))-this._margins.left,containmentOffset.top+parseInt($(contaimentElement).css("borderTopWidth"))+parseInt($(contaimentElement).css("paddingTop"))-this._margins.top,containmentOffset.left+(isOverFlowHidden?Math.max(contaimentElement.scrollWidth,contaimentElement.offsetWidth):contaimentElement.offsetWidth)-parseInt($(contaimentElement).css("borderLeftWidth"))-parseInt($(contaimentElement).css("paddingRight"))-this._draggableElementSize.width-this._margins.left,containmentOffset.top+(isOverFlowHidden?Math.max(contaimentElement.scrollHeight,contaimentElement.offsetHeight):contaimentElement.offsetHeight)-parseInt($(contaimentElement).css("borderTopWidth"))-parseInt($(contaimentElement).css("paddingBottom"))-this._draggableElementSize.height-this._margins.top]},_onMouseDrag:function(orgEvent){var item,intersection,itemElement,scrolled=!1;this._position=this._fixPosition(orgEvent),this._changeToAbsolute=this._changePosition("absolute"),this._lastAbsolutePos||(this._lastAbsolutePos=this._changeToAbsolute),orgEvent.pageY-this.document.scrollTop()<this.options.scrollSensitivity?scrolled=this.document.scrollTop(this.document.scrollTop()-this.options.scrollSpeed):this.window.height()-(orgEvent.pageY-this.document.scrollTop())<this.options.scrollSensitivity&&(scrolled=this.document.scrollTop(this.document.scrollTop()+this.options.scrollSpeed)),orgEvent.pageX-this.document.scrollLeft()<this.options.scrollSensitivity?scrolled=this.document.scrollLeft(this.document.scrollLeft()-this.options.scrollSpeed):this.window.width()-(orgEvent.pageX-this.document.scrollLeft())<this.options.scrollSensitivity&&(scrolled=this.document.scrollLeft(this.document.scrollLeft()+this.options.scrollSpeed)),this._changeToAbsolute=this._changePosition("absolute"),this.options.axis&&"y"===this.options.axis||(this._draggableElement[0].style.left=this._position.left+"px"),this.options.axis&&"x"===this.options.axis||(this._draggableElement[0].style.top=this._position.top+"px");for(var i=this.items.length-1;i>=0;i--)if(item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item),intersection&&itemElement!==this._selectedItem[0]&&this._placeHolder[1===intersection?"next":"prev"]()[0]!==itemElement&&!$.contains(this._placeHolder[0],itemElement)){if(this._direction=1===intersection?"down":"up",!this._intersectsWithSides(item)||"INPUT"===item.item[0].nodeName)break;this._reArrangeItems(orgEvent,item);break}return this._lastAbsolutePos=this._changeToAbsolute,!1},_reArrangeItems:function(orgEvent,item,appendTo,hardRefresh){if(appendTo)appendTo[0].appendChild(this._placeHolder[0]);else{var position;position="down"===this._direction?item.item[0]:item.item[0].nextSibling,item.item[0].parentNode.insertBefore(this._placeHolder[0],position)}this._counter=this._counter?++this._counter:1;var base=(this._counter,this);setTimeout(function(){base._refreshPositions(!hardRefresh)},0)},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this._changeToAbsolute.top+this._offsetPos.click.top,item.top+item.height/2,item.height),isOverRightHalf=this._isOverAxis(this._changeToAbsolute.left+this._offsetPos.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection(),intersectsContainment=!1;if(!horizontalDirection&&!verticalDirection)return!1;if(!this.floating||!horizontalDirection){this._containment&&(intersectsContainment=this._changeToAbsolute.top<=this._containment[1]||this._changeToAbsolute.top>=this._containment[3]);var value=intersectsContainment||verticalDirection&&("down"==verticalDirection&&isOverBottomHalf||"up"==verticalDirection&&!isOverBottomHalf);return value}this._containment&&(intersectsContainment=this._changeToAbsolute.left<=this._containment[0]||this._changeToAbsolute.left>=this._containment[2]);var value=intersectsContainment||"right"==horizontalDirection&&isOverRightHalf||"left"==horizontalDirection&&!isOverRightHalf},_intersectsWithPointer:function(item){var isOnElementHeight="x"===this.options.axis||this._isOverAxis(this._changeToAbsolute.top+this._offsetPos.click.top,item.top,item.height,"x"),isOnElementWidth="y"===this.options.axis||this._isOverAxis(this._changeToAbsolute.left+this._offsetPos.click.left,item.left,item.width,"y"),isOverElement=isOnElementHeight&&isOnElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return isOverElement?this.floating?horizontalDirection&&"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1):!1},_isOverAxis:function(x,reference,size,axis){var value="x"===axis?this._selectedItem.height():0;return x+value>=reference&&reference+size>x},_getDragVerticalDirection:function(){var delta=this._changeToAbsolute.top-this._lastAbsolutePos.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this._changeToAbsolute.top-this._lastAbsolutePos.top;return 0!==delta&&(delta>0?"right":"left")},_changePosition:function(pos){var isScrollRootNode,mod="absolute"===pos?1:-1,scroll="absolute"!==this._cssPosition||this._scrollParent[0]!==this.document[0]&&$.contains(this._scrollParent[0],this._offsetParent[0])?this._scrollParent:this._offsetParent;return("html"===scroll[0].tagName.toLowerCase()||"body"===scroll[0].tagName.toLowerCase())&&(isScrollRootNode=!0),{top:this._position.top+this._offsetPos.relative.top*mod+this._offsetPos.parent.top*mod-("fixed"===this._cssPosition?-this._scrollParent.scrollTop():isScrollRootNode?0:scroll.scrollTop())*mod,left:this._position.left+this._offsetPos.relative.left*mod+this._offsetPos.parent.left*mod-("fixed"===this._cssPosition?-this._scrollParent.scrollLeft():isScrollRootNode?0:scroll.scrollLeft())*mod}
},_createPlaceHolder:function(){var selectedNodeName=this._selectedItem[0].nodeName.toLowerCase();this._placeHolder=$("<"+selectedNodeName+">",this.document[0]).addClass(this._selectedItem[0].className+" zc-sortable-placeholder"),this._placeHolder.css("visibility","hidden"),this._selectedItem.after(this._placeHolder),this._placeHolder.width()||this._placeHolder.width(this._selectedItem.innerWidth()-parseInt(this._selectedItem.css("paddingLeft")||0,10)-parseInt(this._selectedItem.css("paddingRight")||0,10)),this._placeHolder.height()||this._placeHolder.height(this._selectedItem.height())},_fixPosition:function(orgEvent){var isScrollRootNode,pageX=orgEvent.pageX,pageY=orgEvent.pageY,scroll="absolute"!==this._cssPosition||this._scrollParent[0]!==this.document[0]&&$.contains(this._scrollParent[0],this._offsetParent[0])?this._scrollParent:this._offsetParent;return this._containment&&(orgEvent.pageX-this._offsetPos.click.left<this._containment[0]&&(pageX=this._containment[0]+this._offsetPos.click.left),orgEvent.pageY-this._offsetPos.click.top<this._containment[1]&&(pageY=this._containment[1]+this._offsetPos.click.top),orgEvent.pageX-this._offsetPos.click.left>this._containment[2]&&(pageX=this._containment[2]+this._offsetPos.click.left),orgEvent.pageY-this._offsetPos.click.top>this._containment[3]&&(pageY=this._containment[3]+this._offsetPos.click.top)),("html"===scroll[0].tagName.toLowerCase()||"body"===scroll[0].tagName.toLowerCase())&&(isScrollRootNode=!0),{top:pageY-this._offsetPos.click.top-this._offsetPos.relative.top-this._offsetPos.parent.top+("fixed"===this._cssPosition?-this._scrollParent.scrollTop():isScrollRootNode?0:scroll.scrollTop()),left:pageX-this._offsetPos.click.left-this._offsetPos.relative.left-this._offsetPos.parent.left+("fixed"===this._cssPosition?-this._scrollParent.scrollLeft():isScrollRootNode?0:scroll.scrollTop())}},_getScrollParent:function(element,includeHidden){var position=element.css("position"),excludeStaticParent="absolute"===position,overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=element.parents().filter(function(){var parent=$(this);return excludeStaticParent&&"static"===parent.css("position")?!1:overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(element[0].ownerDocument||document)},_getParentOffset:function(){this._offsetParent=this._draggableElement.offsetParent();var po=this._offsetParent.offset();return"absolute"===this.cssPosition&&this._scrollParent[0]!==this.document[0]&&$.contains(this._scrollParent[0],this._offsetParent[0])&&(po.left+=this._scrollParent.scrollLeft(),po.top+=this._scrollParent.scrollTop()),(this._offsetParent[0]===this.document[0].body||this._offsetParent[0].tagName&&"html"===this._offsetParent[0].tagName.toLowerCase()&&ZC.Browser.isIE())&&(po={top:0,left:0}),{top:po.top+(parseInt(this._offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this._offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this._selectedItem.position();return{top:p.top-(parseInt(this._draggableElement.css("top"),10)||0)+this._scrollParent.scrollTop(),left:p.left-(parseInt(this._draggableElement.css("left"),10)||0)+this._scrollParent.scrollLeft()}}return{top:0,left:0}},_saveMargins:function(){this._margins={left:parseInt(this._selectedItem.css("marginLeft"),10)||0,top:parseInt(this._selectedItem.css("marginTop"),10)||0}},_createDraggableElement:function(){var draggableItem=this._selectedItem;return this._savedCSS={width:this._selectedItem[0].style.width,height:this._selectedItem[0].style.height,position:this._selectedItem.css("position"),top:this._selectedItem.css("top"),left:this._selectedItem.css("left")},draggableItem.width(this._selectedItem.width()).height(this._selectedItem.height()),draggableItem},_saveDraggableElementSize:function(){this._draggableElementSize={width:this._draggableElement.outerWidth(),height:this._draggableElement.outerHeight()}},_captureMouseAction:function(orgEvent){var _selectedItem=null,base=this;return this._isPrev=!1,this.reverting?!1:this.options.disabled?!1:(this._refreshItems(orgEvent),$(orgEvent.target).parents().each(function(){return $.data(this,base.componentName+"-item")===base?(_selectedItem=$(this),!1):void 0}),$.data(orgEvent.target,this.componentName+"-item")===base&&(_selectedItem=$(orgEvent.target)),_selectedItem?(this._selectedItem=_selectedItem,this._selectedItem.prev().length?(this._adjacentElement=this._selectedItem.prev(),this._isPrev=!0):this._adjacentElement=this._selectedItem.next(),!0):!1)},_handleMouseUp:function(orgEvent,escKeyPressed){var componentName=this.componentName;return this.document.off("mousemove."+componentName),this.document.off("mouseup."+componentName),this._mouseStarted&&(this._mouseStarted=!1,orgEvent.target===this._mouseDownEvent.target&&$.data(orgEvent.target,componentName+".preventClickEvent",!0),this._dropDraggedElement(orgEvent,escKeyPressed)),!1},_dropDraggedElement:function(orgEvent,escKeyPressed){orgEvent&&this._placeElement(orgEvent,escKeyPressed)},_placeElement:function(orgEvent,escKeyPressed){var i;if(this.reverting=!1,escKeyPressed?this._isPrev?this._selectedItem.insertAfter(this._adjacentElement):this._selectedItem.insertBefore(this._adjacentElement):!this._noFinalSort&&this._selectedItem.parent().length&&this._placeHolder.before(this._selectedItem),this._noFinalSort=null,this._draggableElement[0]===this._selectedItem[0]){for(i in this._savedCSS)("auto"===this._savedCSS[i]||"static"===this._savedCSS[i])&&(this._savedCSS[i]="");this._selectedItem.css(this._savedCSS).removeClass("zc-sortable-helper")}else this._selectedItem.show();return this._savedZIndex&&this._draggableElement.css("zIndex","auto"===this._savedZIndex?"":this._savedZIndex),this.dragging=!1,this._placeHolder[0].parentNode.removeChild(this._placeHolder[0]),this.fromOutside=!1,this._dispatchEvent("DRAGSTOP",orgEvent.target,orgEvent),!this.cancelHelperRemoval},_bindMouseEvents:function(){var base=this,componentName=this.componentName;this.element.on("mousedown."+componentName,function(orgEvent){return base._handleMouseDown(orgEvent)}),this.element.on("click."+componentName,function(orgEvent){return $.data(orgEvent.target,componentName+".preventClickEvent")===!0?($.removeData(orgEvent.target,componentName+".preventClickEvent"),orgEvent.stopImmediatePropagation(),!1):void 0}),this.started=!1},_refreshItems:function(){this.items=[],this.containers=[this];for(var targetData,item,query,queries=[[$(this.options.sortableItems,this.element),this]],i=queries.length-1;i>=0;i--){targetData=queries[i][1],query=queries[i][0];for(var j=0;j<query.length;j++)item=$(query[j]),item.data(this.componentName+"-item",targetData),this.items.push({item:item,width:0,height:0,left:0,top:0})}},_setHandleClassName:function(){this.element.find(".zc-sortable-handle").removeClass("zc-sortable-handle");for(var i=0;i<this.items.length;i++){var elementsToNeglect=this.options.cancel.split(","),elementPosition=elementsToNeglect.indexOf(this.items[i].item[0].nodeName.toLowerCase());-1==elementPosition&&this.items[i].item.addClass("zc-sortable-handle")}},_refreshPositions:function(fast){this.floating=this.items.length?"x"===this.options.sortAxis||this._isFloating(this.items[0].item):!1;for(var item,itemSize,offsetPos,i=this.items.length-1;i>=0;i--)item=this.items[i],itemSize=item.item,fast||(item.width=itemSize.outerWidth(),item.height=itemSize.outerHeight()),offsetPos=itemSize.offset(),item.left=offsetPos.left,item.top=offsetPos.top;for(var i=this.containers.length-1;i>=0;i--)offsetPos=this.containers[i].element.offset(),this.containers[i].saveContainerData.left=offsetPos.left,this.containers[i].saveContainerData.top=offsetPos.top,this.containers[i].saveContainerData.width=this.containers[i].element.outerWidth(),this.containers[i].saveContainerData.height=this.containers[i].element.outerHeight();return this},_isFloating:function(item){return"left"===item.css("float").toLowerCase()||"right"===item.css("float").toLowerCase()||"table-cell"===item.css("display").toLowerCase()||"inline"===item.css("display").toLowerCase()},destroy:function(){var componentName=this.componentName;this.element.removeData(componentName),this.element.off("mousedown."+componentName).off("click."+componentName),this.document.off("mousemove."+componentName).off("mouseup."+componentName)},disable:function(){var componentName=this.componentName;this.element.off("mousedown."+componentName).off("click."+componentName),this.document.off("mousemove."+componentName).off("mouseup."+componentName)},enable:function(){this._bindMouseEvents()}};ZC.registerComponent("zsortable",sortablePrototype)}(ZComponents),function(ZC){var $=ZC.DOMUtil,suggestfieldPrototype={options:{dataSource:{dataType:"json",type:"GET"},searchIcon:!1,dataMapping:void 0,cacheServerResponse:!0,searchKeywordSubsetsInCache:!1,isResponseFiltered:!1,isResponsePaginated:!1,search:{minKeywordLength:0,maxKeywordLength:50,by:void 0,criteria:"contains",delay:100},autoComplete:!1,placeholder:!1,isImageSourceSprited:!1,dropdownList:{contentType:"text",progressIndicatorSVGIconId:void 0,progressIndicatorIconClassName:void 0,height:350,width:void 0,moreResultsAction:!1,appendTo:void 0,sortResults:!0,position:"auto",maxDisplayResults:void 0,animation:void 0,focusFirstItem:!0,highlightKeyword:!1,menuClassName:void 0,showNoResultsMessage:!1},showDropDownListOnFocus:!1,lazyLoadData:!0,className:void 0,disabled:!1,messages:{noResults:"No results found.",moreAction:"See more results",serverError:"Server request failed. Please try again later"}},_EVENTS:{ITEMSELECT:"listitemselect",FOCUS:"focus",ITEMFOCUS:"listitemfocus",MENUBEFOREOPEN:"dropdownlistbeforeopen",MENUAFTEROPEN:"dropdownlistopen",MENUBEFORECLOSE:"dropdownlistbeforeclose",MENUAFTERCLOSE:"dropdownlistclose",CHANGE:"change",BEFORESEARCH:"beforesearch",SEARCHSUCCESS:"searchsuccess",SEARCHERROR:"searcherror",MOREACTIONSELECT:"moreactionclick",BLUR:"blur"},_CONSTANTS:{minKeywordLength:20,maxResults:10},_create:function(element,options){this._constructContainer(),this._initialize(element,options),this._bindEvents(),this._bindMenuEvents(),this._initSource(),this._cachedData={},this.options.isResponsePaginated&&(this._params={pages:void 0})},_constructContainer:function(){this.options.dropdownList.forElement=this.element,this._element=this.element,this._element.addClass("zsuggestfield-element"),this._input=this.element,this._elementId=(this.element.attr("id")?this.element.attr("id"):Math.floor(1e6*Math.random()))+this.componentName,this._input.attr({"aria-haspopup":"true","aria-expanded":"false","aria-owns":this._elementId+"-menu",role:"search"}),this.options.className&&this._element.addClass(this.options.className)},_initialize:function(){this._dataMapping=this.options.dataMapping;var menu=this.options.dropdownList,isImageSprite=this.options.isImageSourceSprited;switch(this.options.placeholder&&this.element.attr("placeholder",this.options.placeholder),menu.contentType){case"image-text-desc":case"image-text":this._type="icon-text";break;case"text":case"text-desc":this._type="checkbox"===menu.itemType?"icon-text":"text"}this.options.dataSource instanceof Array&&"string"==typeof this.options.dataSource[0]&&(this._type="text");var menuId=(this.element.attr("id")||Math.floor(1e6*Math.random()))+"-"+this.componentName+"-menu",menuElement=$("#"+menuId);menuElement.length&&(menuElement.data("zmenu")&&menuElement.zmenu("destroy"),menuElement.remove()),this._menu=ZC.createMenu(menuId,{},{forElement:menu.forElement,scroll:"default",contentType:this._type,direction:"after-cursor"!==menu.position?menu.position:"auto"}),"icon-text"!==this._type||"text"===menu.contentType||"text-desc"===menu.contentType||isImageSprite||(this._menu.addClass("zsuggestfield"),"image-text-desc"===menu.contentType&&this._menu.addClass("zmenu--withhint")),"image-text"===menu.contentType&&"checkbox"===menu.itemType&&isImageSprite&&this._menu.addClass("zsuggestfield--withicon"),"image-text-desc"===menu.contentType&&"checkbox"===menu.itemType&&isImageSprite&&this._menu.addClass("zsuggestfield zsuggestfield--withiconandhint"),this._dataMapping&&this._dataMapping.groupLabel&&(this.options.lazyLoadData=!1),this.options.search.minKeywordLength>this._CONSTANTS.minKeywordLength&&(this.options.search.minKeywordLength=this._CONSTANTS.minKeywordLength),void 0===menu.maxDisplayResults&&this.options.lazyLoadData&&(menu.maxDisplayResults=this._CONSTANTS.maxResults),menu.appendTo&&this._menu.zmenu("option","appendTo",menu.appendTo),menu.menuClassName&&this._menu.addClass(menu.menuClassName),void 0!==menu.height&&this._menu.zmenu("option","height",menu.height),void 0!==menu.width&&this._menu.zmenu("option","width",menu.width)},_bindEvents:function(){var componentName=this.componentName;this._element.on("keydown."+componentName,this._keydowHandler.bind(this)).on("keyup."+componentName,this._keyupHandler.bind(this)).on("mousedown."+componentName,this._mousedownHandler.bind(this)).on("paste."+componentName,this._pasteHandler.bind(this)),ZC.$document.on("mousedown."+componentName,this._docClickHandler.bind(this))},_docClickHandler:function(orgEvent){var target=$(orgEvent.target),value=this._element.val(),activeElement=$(document.activeElement);if(target.closest(".zsuggestfield-element")[0]!==this._element[0]&&activeElement!==this._element[0]&&target.closest(".zmenu").attr("id")!==this._menu.attr("id")&&value!==this._oldVal){var data=this._currentData?{}:void 0;data=this._getData(this._currentData),this._dispatchEvent("CHANGE",{value:value,data:data},orgEvent),this._oldVal=this._element.val()}},_pasteHandler:function(orgEvent){setTimeout(this._searchTimeout.bind(this,this._element.val(),this._element,orgEvent),200)},_mousedownHandler:function(orgEvent){var query=this._element.val();query=query.substring(0,this._element[0].selectionStart),this._searchTimeout(query,this._element,orgEvent)},_keydowHandler:function(orgEvent){var keyCode=ZC.keyCode;if(void 0!==this._menu&&!this._menu.is(":visible"))return orgEvent.keyCode!==keyCode.DOWN||this._ajaxSource||this._search("",this._element,orgEvent),orgEvent.keyCode===keyCode.ENTER&&ZC.$document.trigger("mousedown"),!0;switch(orgEvent.keyCode){case keyCode.UP:case keyCode.DOWN:case keyCode.TAB:case keyCode.ESCAPE:orgEvent.preventDefault(),!this._isLoaderInited&&this._menu.zmenu("handleKeyCode",orgEvent.keyCode);break;case keyCode.ENTER:orgEvent.preventDefault(),!this._isLoaderInited&&this._menu.zmenu("handleKeyCode",orgEvent.keyCode),ZC.$document.trigger("click")}},_keyupHandler:function(orgEvent){var query=this._element.val(),keyCode=ZC.keyCode;(orgEvent.keyCode>=186&&orgEvent.keyCode<=192||orgEvent.keyCode>=219&&orgEvent.keyCode<=222||orgEvent.keyCode>=48&&orgEvent.keyCode<=57||orgEvent.keyCode>=65&&orgEvent.keyCode<=90||orgEvent.keyCode===keyCode.SPACE||orgEvent.keyCode===keyCode.BACKSPACE||orgEvent.keyCode===keyCode.DELETE)&&this._searchTimeout(query,this._element,orgEvent),orgEvent.keyCode===keyCode.TAB&&this._menu.is(":visible")&&this._menu.zmenu("selectHoveredMenuItem")},_bindMenuEvents:function(){this._menu.off("zmenuitemclick").on("zmenuitemclick",this._handleItemClick.bind(this)).off("zmenubeforefocus").on("zmenubeforefocus",function(){return!1}).off("zmenuitemhover").on("zmenuitemhover",this._handleItemHover.bind(this)).off("zmenubeforeshow").on("zmenubeforeshow",this._handleMenuBeforeShow.bind(this)).off("zmenushow").on("zmenushow",this._handleMenShow.bind(this)).off("zmenubeforehide").on("zmenubeforehide",this._handleMenuBeforeHide.bind(this)).off("zmenuhide").on("zmenuhide",this._handleMenuHide.bind(this))},_handleMenuBeforeHide:function(orgEvent,ui){this._dispatchEvent("MENUBEFORECLOSE",{value:ui},orgEvent)},_handleMenuHide:function(orgEvent,ui){this._input&&this._input.attr("aria-expanded","false"),this._dispatchEvent("MENUAFTERCLOSE",{value:ui},orgEvent),orgEvent.stopImmediatePropagation()},_handleMenShow:function(orgEvent,ui){this._input&&this._input.attr("aria-expanded","true"),this._dispatchEvent("MENUAFTEROPEN",{value:ui},orgEvent)},_handleMenuBeforeShow:function(orgEvent,ui){!this.options.isImageSourceSprited||"checkbox"!==this.options.dropdownList.itemType||"image-text"!==this.options.dropdownList.contentType&&"image-text-desc"!==this.options.dropdownList.contentType?this.options.isImageSourceSprited||"image-text"!==this.options.dropdownList.contentType&&"image-text-desc"!==this.options.dropdownList.contentType||this._menu.removeClass("zmenu--iconwithtext"):this._menu.removeClass("zmenu--iconwithtext"),this._dispatchEvent("MENUBEFOREOPEN",{value:ui},orgEvent)},_handleItemHover:function(orgEvent,ui){var elementId=this._elementId;return ui.menuitem.attr("id")===elementId+"noresults"||ui.menuitem.attr("id")===elementId+"loaderror"||ui.menuitem.attr("id")===elementId+"loader"?!1:(this.options.autoComplete&&this._handleHover(orgEvent,ui),void this._dispatchEvent("ITEMFOCUS",{value:ui.menuitem},orgEvent))},_handleItemClick:function(orgEvent,ui){this._handleSelection(orgEvent,ui)},_mapJSONToData:function(data,valueObj){if(void 0!==valueObj&&void 0!==data){for(var valueObj=valueObj.split("."),i=0;i<valueObj.length;i++)data=data[valueObj[i]];return data}},_getData:function(currentData){var data={};if(currentData)for(var key in currentData)this._dataMapping[key]&&(data[this._dataMapping[key]]=this._mapJSONToData(currentData,key));return data},_handleHover:function(orgEvent,ui){var elementId=this._elementId;ui.menuitem.attr("id")===elementId+"noresults"||ui.menuitem.hasClass("zmenu__title")||ui.menuitem.attr("id")===elementId+"moreaction"||this._element.val(this._isJSONSource?ui.menuitem.data().itemValue.text:ui.menuitem.data().metadata.label)},_initSource:function(){var dataSource=this.options.dataSource;if($.isArray(dataSource)?(this._isJSONSource="object"==typeof dataSource[0],this._responseData=this.options.dataSource):"object"==typeof dataSource&&dataSource.URL&&(this._ajaxSource=!0,this._isJSONSource=!0),!this._isJSONSource){var options=this.options;this._initialContentType=this.options.dropdownList.contentType,options.isImageSourceSprited=options.isResponsePaginated=options.isResponseFiltered=!1,options.dropdownList.contentType="text"}},_searchTimeout:function(query,container,orgEvent){this._newQuery=!0,clearTimeout(this._searchTimer),this.options.search.delay&&(this._searchTimer=setTimeout(this._search.bind(this,query,container,orgEvent),this.options.search.delay))},_addLoaderIcon:function(iconElement){var dropdown=this.options.dropdownList;if(dropdown.progressIndicatorIconClassName||dropdown.progressIndicatorSVGIconId)if(dropdown.progressIndicatorIconClassName)iconElement.addClass(dropdown.progressIndicatorIconClassName);else{var svgConfig=dropdown.progressIndicatorSVGIconId,svgId=svgConfig.split(" ")[0],customClass=svgConfig.slice(svgId.length).trim();iconElement.append($("<svg class='"+customClass+"'><use xlink:href='"+svgId+"'></use></svg>"))}else{var svgElement=ZC.createSVGElement("svg",{"class":"zmenu__svg zmenu__loader zeffects--rotate"}),circleElement1=ZC.createSVGElement("circle",{"class":"circle__track"}),circleElement2=ZC.createSVGElement("circle",{"class":"circle__load"});svgElement.appendChild(circleElement1),svgElement.appendChild(circleElement2),iconElement[0].appendChild(svgElement)}return iconElement},_initLoader:function(container,orgEvent){this._isLoaderInited=!0;var iconElement=$("<i class='zmenu__icon h-loading'>");iconElement=this._addLoaderIcon(iconElement),this._loader=this._menu.zmenu("addMenuItem",{id:this._elementId+"loader",fixed:!0,innerHTML:iconElement,itemType:"custom",itemCssClass:"zsuggestfield__nonselectable"}),this._loader.closest(".zmenu__footer").removeClass("zmenu__footer").addClass("zmenu--loading"),this._menu.zmenu("show",{mustBeShown:!0,preventHover:!0}),this._makeAjaxRequest(container,orgEvent)},_search:function(query,container,orgEvent){this._filteredResult=[];var def=$.Deferred();this._currentData=void 0,this._request&&(this._request.abort(),this._removeLoader(),this.options.isResponsePaginated&&this._params&&(this._params.pages=void 0)),this.options.lazyLoadData&&(this._pageIndex=0,this.options.isResponsePaginated&&this._params&&(this._params.pages=void 0));var dataSource=this.options.dataSource;if(this._params=$.extend(!0,{},this._params,{query:query}),void 0!==query&&query.length>=this.options.search.minKeywordLength&&query.length<this.options.search.maxKeywordLength){var returnValue=this._dispatchEvent("BEFORESEARCH",{data:this._params},orgEvent);if(this._ajaxSource)if(returnValue)if(query in this._cachedData)this._responseData=this._cachedData[query],this.options.isResponseFiltered?this._filteredResult=this._responseData:this._filterSuggestions(query),this._renderSuggestions(container,orgEvent);else if(dataSource.queryParam&&dataSource.searchKeywordSubsetsInCache&&this.options.cacheServerResponse&&!this.options.isResponsePaginated){for(var flag=!1,i=this._params.query.length-1;i>=1;i--){var query=this._params.query.slice(0,i);if(query in this._cachedData){this._responseData=this._cachedData[query],flag=!0;break}}flag?(this._filterSuggestions(this._params.query),this._cachedData[this._params.query]=this._filteredResult,this._renderSuggestions(container,orgEvent)):(this._menu.zmenu("removeMenuItems"),this._callLoader(container,orgEvent))}else this._menu.zmenu("removeMenuItems"),dataSource.queryParam?this._callLoader(container,orgEvent):this._requestInitialized?(this._filterSuggestions(query),this._renderSuggestions(container,orgEvent)):(this._callLoader(container,orgEvent),this._requestInitialized=!0);else this._menu.is(":visible")&&this._hideSuggestions();else this._responseData=this.options.dataSource,this._filterSuggestions(query),this._renderSuggestions(container,orgEvent)}else"string"==typeof query&&0===query.length&&0===this.options.search.minKeywordLength?this._ajaxSource?this.options.showDropDownListOnFocus?(this._menu.zmenu("removeMenuItems"),dataSource.queryParam?this._callLoader(container,orgEvent):this._requestInitialized?(this._filteredResult=this._responseData,this._renderSuggestions(container,orgEvent)):(this._callLoader(container,orgEvent),this._requestInitialized=!0)):(this._removeLoader(),this._menu.is(":visible")&&this._hideSuggestions()):(this._params={query:query},this._filteredResult=this.options.dataSource.slice(),this._sortResults(),this._renderSuggestions(container,orgEvent)):(this._removeLoader(),this._menu.is(":visible")&&this._hideSuggestions());return this._newQuery=!1,def.promise()},_callLoader:function(container,orgEvent){this._initLoader(container,orgEvent),this._menu.css("height","70px"),this._menu.find(".zmenu--loading").find("ul").css("height","100%")},_handleSelection:function(orgEvent,ui){if(this._oldVal=this.element.val(),ui.menuitem.attr("id")===this._elementId+"noresults"||ui.menuitem.hasClass("zmenu__title")||ui.menuitem.hasClass("zsuggestfield__nonselectable"))this._element.focus();else if(ui.menuitem.attr("id")===this._elementId+"moreaction"){var action=this.options.dropdownList.moreResultsAction;this._dispatchEvent("MOREACTIONSELECT",{value:ui.menuitem,query:this._params.query}),action&&$.isFunction(action)&&action()}else{if(this._isJSONSource){var itemData=ui.menuitem.data().metadata,result=void 0!==itemData.itemValue?itemData.itemValue.text:this._mapJSONToData(itemData,this._dataMapping.text);this._currentData=itemData.itemValue,this._element.val(result)}else this._element.val(ui.menuitem.data().metadata.label);var data={};data=this._getData(this._currentData),this._dispatchEvent("ITEMSELECT",{value:ui.menuitem,data:data}),this._element.focus()}},_makeAjaxRequest:function(container,orgEvent){var dataSource=this.options.dataSource;dataSource.sourceURL="function"==typeof dataSource.URL?dataSource.URL.call(this.element,this._params):dataSource.URL,dataSource.data="function"==typeof dataSource.queryParam?dataSource.queryParam.call(this.element,this._params):dataSource.queryParam,this._requestData(container,orgEvent)},_successCallback:function(container,orgEvent,data){var dataSource=this.options.dataSource;if(this._filteredResult=[],this._request=void 0,this._isLoaderInited=!1,this._response=dataSource.success(data,this._params),this._responseData=this._response.results,this._isJSONSource=this._responseData?this._responseData.length?"object"==typeof this._responseData[0]:this._isJSONSource:!1,this._dispatchEvent("SEARCHSUCCESS",this._responseData,orgEvent),this._response.more&&void 0!==this._params.pages&&this.options.lazyLoadData){this._cacheResponse(this._responseData),this._filteredResult=this._responseData,this._totalResponse=this._filteredResult,this._spliceResults(),this._pageIndex=0;var scrollTop=this._menu.find("ul").scrollTop();this._removeLoader(),this._renderMenu(container),this._menu.find("ul").scrollTop(scrollTop)}else{if(void 0!==this._params.pages)return void this._removeLoader();this._cacheResponse(this._responseData),this.options.isResponseFiltered?this._filteredResult=this._responseData:this._filterSuggestions(this._params.query),this._renderSuggestions(container,orgEvent)}},_spliceResults:function(){var maxResults=this.options.dropdownList.maxDisplayResults;maxResults&&(this._totalPages=Math.ceil(this._filteredResult.length/maxResults),this._filteredResult=this._filteredResult.slice(0,maxResults))},_cacheResponse:function(response){var data=this._cachedData[this._params.query];this.options.cacheServerResponse&&(this._cachedData[this._params.query]=data&&data.length?data.concat(response):response)},_removeLoader:function(){this._loader&&(this._menu.find(".zmenu--loading").remove(),this._loader=null),this._menu.removeData("fixedArea")},_failureCallback:function(orgEvent,jqXHR,exception){if("abort"!==jqXHR.statusText){var dataSource=this.options.dataSource;this._isLoaderInited=!1,this._removeLoader(),this._menu.zmenu("removeMenuItems"),this._menu.zmenu("addMenuItem",{label:ZC.encodeHTML(this._localize("serverError")),index:0,id:this._elementId+"loaderror",itemCssClass:"zsuggestfield__nonselectable"}),this._menu.zmenu("show",{mustBeShown:!0,preventHover:!0,positionAlterable:!0}),dataSource.fail&&$.isFunction(dataSource.fail)&&dataSource.fail(jqXHR,exception),this._dispatchEvent("SEARCHERROR",{jqXHR:jqXHR,exception:exception},orgEvent)}},_requestData:function(container,orgEvent){this._request=ZC.AJAX.transport(this.options.dataSource,this._successCallback.bind(this,container,orgEvent),this._failureCallback.bind(this,orgEvent))},_checkIfItemExists:function(valueToCheck){var validPush=!1,sourceData=this._filteredResult;if(sourceData.length){for(var i=0;i<sourceData.length;i++){var sourceKey=this._mapJSONToData(sourceData[i],this._dataMapping.value),valueKey=this._mapJSONToData(valueToCheck,this._dataMapping.value);if(sourceKey===valueKey){validPush=!1;break}validPush=!0}validPush&&sourceData.push(valueToCheck)}else sourceData.push(valueToCheck)},_filterSuggestions:function(query){var searchByField;switch(this._isJSONSource&&"string"==typeof this.options.search.by&&(searchByField=this.options.search.by.split(",")),this.options.search.criteria){case"contains":if(this._isJSONSource&&searchByField)for(var i=0;i<this._responseData.length;i++)for(var j=0;j<searchByField.length;j++){var value=this._mapJSONToData(this._responseData[i],searchByField[j]);void 0!==value&&(value=value.toString(),value.toLowerCase().indexOf(query.toLowerCase())>-1&&this._checkIfItemExists(this._responseData[i]))}else this._filteredResult=this._responseData.filter(function(item){return(void 0!==item&&item.toLowerCase().indexOf(query.toLowerCase()))>-1});break;case"startsWith":this._getFilteredResult(new RegExp("^"+query,"gi"));break;case"endsWith":this._getFilteredResult(new RegExp(query+"$","gi"));break;case"equals":if(this._isJSONSource)for(var i=0;i<this._responseData.length;i++)for(var j=0;j<searchByField.length;j++){var value=this._mapJSONToData(this._responseData[i],searchByField[j]).toString().toLowerCase();void 0!==value&&value===query.toLowerCase()&&this._checkIfItemExists(this._responseData[i])}else this._filteredResult=this._responseData.filter(function(item){return void 0!==item&&item.toString().toLowerCase()===query.toString().toLowerCase()})}this._sortResults()},_getFilteredResult:function(regEx){var searchByField;if(this._isJSONSource&&"string"==typeof this.options.search.by&&(searchByField=this.options.search.by.split(",")),this._isJSONSource&&searchByField)for(var i=0;i<this._responseData.length;i++)for(var j=0;j<searchByField.length;j++){var value=this._mapJSONToData(this._responseData[i],searchByField[j]).toString().toLowerCase();void 0!==value&&value.match(regEx)&&value.match(regEx).length&&this._checkIfItemExists(this._responseData[i])}else this._filteredResult=this._responseData.filter(function(item){var value=item.toString().toLowerCase();return void 0!==value&&value.match(regEx)&&value.match(regEx).length})},_sortResults:function(){if(this.options.dropdownList.sortResults){var base=this;this._isJSONSource?this._filteredResult.sort(function(itemA,itemB){var valueA=base._mapJSONToData(itemA,base.options.dataMapping.text).toLowerCase(),valueB=base._mapJSONToData(itemB,base.options.dataMapping.text).toLowerCase();return valueA>valueB?1:valueB>valueA?-1:0}):this._filteredResult.sort()}},_removeSpecialChar:function(string){return string?string.toString().replace(/[^a-zA-Z0-9]/g,""):void 0},_lazyLoadContent:function(container){if(this._totalPages>1){var base=this;this._menu.find("ul").on("scroll."+this.componentName,function(orgEvent){if(!base._request&&base._menu.find("ul").scrollTop()>=base._menu.find("ul")[0].scrollHeight-base._menu.find("ul").outerHeight()){var scrollTop=base._menu.find("ul").scrollTop();++base._pageIndex,base._pageIndex>=base._totalPages?base.options.isResponsePaginated&&base._response&&base._response.more!==!1&&(base._params.pages++,base._initLoader(container,orgEvent),base._menu.find(".zmenu--loading").find("ul").css("height","100%")):(base._filteredResult=base._totalResponse.slice(base._pageIndex*base.options.dropdownList.maxDisplayResults,base._pageIndex*base.options.dropdownList.maxDisplayResults+base.options.dropdownList.maxDisplayResults),base._renderMenu(container)),base._menu.find("ul").scrollTop(scrollTop)}})}},_renderSuggestions:function(container,orgEvent){if(this._focusSet=!1,this.options.isResponsePaginated&&(this._params.pages=1),this._menu.zmenu("removeMenuItems"),this.options.allowDuplicateValues||"none"!==this.options.dropdownList.itemType||this._removeAddedItem&&this._removeAddedItem(),this._isJSONSource&&this._dataMapping&&this._dataMapping.groupLabel&&this._filteredResult.length){this._groupedResult={};for(var i=0;i<this._filteredResult.length;i++){var title=this._mapJSONToData(this._filteredResult[i],this._dataMapping.groupLabel);title in this._groupedResult?this._groupedResult[title].push(this._filteredResult[i]):(this._groupedResult[title]=[],this._groupedResult[title].push(this._filteredResult[i]))}}this._totalResponse=this._filteredResult,this._spliceResults(),this.options.lazyLoadData&&this._lazyLoadContent(container),this._renderMenu(container,orgEvent).done(this._handleEnterPressed&&this._handleEnterPressed(orgEvent))},_getItemJSON:function(data){var itemImage=this._mapJSONToData(data,this._dataMapping.image),itemText=this._mapJSONToData(data,this._dataMapping.text),itemValue=this._mapJSONToData(data,this._dataMapping.value),itemSecondaryText=this._mapJSONToData(data,this._dataMapping.informativeText),itemIdentifier=this._mapJSONToData(data,this._dataMapping.itemIdentifier),itemTitle=this._mapJSONToData(data,this._dataMapping.titleText),customValues=this._mapJSONToData(data,this._dataMapping.customValues);return{icon:itemImage,name:itemText,key:itemValue,description:itemSecondaryText,identifier:itemIdentifier,customValues:customValues,title:itemTitle}},_renderMenu:function(container){this._lastSelectedMenuItem=null;var content,def=$.Deferred(),menuJSON=[],numId=0;
if((this.options.isImageSourceSprited&&("image-text"===this.options.dropdownList.contentType||"image-text-desc"===this.options.dropdownList.contentType)||this.options.isImageSourceSprited&&"checkbox"===this.options.dropdownList.itemType||!this.options.isImageSourceSprited&&"text"===this.options.dropdownList.contentType&&"checkbox"===this.options.dropdownList.itemType)&&(this._menu.hasClass("zmenu--iconwithtext")||this._menu.addClass("zmenu--iconwithtext")),this._filteredResult&&this._filteredResult.length){if(this._isJSONSource){var template=this.options.dropdownList.template;if("custom"===this.options.dropdownList.contentType&&template){for(var menuJSON=[],i=0;i<this._filteredResult.length;i++){var htmlContent,itemObj,jsonData=this._filteredResult[i],mappedData=this._getItemJSON(jsonData);htmlContent=template(jsonData),itemObj={itemType:"custom",innerHTML:htmlContent,id:ZC.encodeHTML(this._elementId+this._removeSpecialChar(mappedData.key)),isCustomHTMLEncoded:!1,itemValue:{text:mappedData.name,image:mappedData.icon,informativeText:mappedData.description,value:mappedData.key,itemIdentifier:mappedData.identifier,customValues:mappedData.customValues,titleText:mappedData.title}},menuJSON.push(itemObj)}this._menu.zmenu("addMenuItems",menuJSON)}else if("text"!==this.options.dropdownList.contentType)if(this._isJSONSource&&this._dataMapping&&this._dataMapping.groupLabel){for(var key in this._groupedResult){numId++;var jsonObj={label:key,itemType:"itemgroup",id:this._elementId+numId};menuJSON.push(jsonObj);for(var i=0;i<this._groupedResult[key].length;i++){var itemObj={},jsonItem=this._getItemJSON(this._groupedResult[key][i]),checkbox="checkbox"===this.options.dropdownList.itemType?!0:!1,type=this.options.dropdownList.contentType;"text-desc"===this.options.dropdownList.contentType?content="<div class='zmenu__content'><span class='zmenu__text'>{0}</span><span class='zmenu__hint'>{1}</span></div>":(content=this.options.isImageSourceSprited?"<div class='zmenu__iconcontainer'><i class='zmenu__icon "+jsonItem.icon+"'></i></div>":"<img src='"+jsonItem.icon+"' class='zsuggestfield__avatar'>",content="image-text"===type?content+"<div class='zmenu__content'><span class='zmenu__text'>{0}</span></div>":content+"<div class='zmenu__content'><span class='zmenu__text'>{0}</span><span class='zmenu__hint'>{1}</span></div>"),content=checkbox?"<div class='zmenu__iconcontainer'><i class='zmenu__icon'></i></div>"+content:content,itemObj={itemType:checkbox?"checkbox":"custom",custom:!0,innerHTML:{content:content,replaceArray:[jsonItem.name,jsonItem.description]},isCustomHTMLEncoded:!1,id:ZC.encodeHTML(this._elementId+this._removeSpecialChar(jsonItem.key)),name:jsonObj.id,itemValue:{text:jsonItem.name,image:jsonItem.icon,informativeText:jsonItem.description,value:jsonItem.key,itemIdentifier:jsonItem.identifier,customValues:jsonItem.customValues,titleText:jsonItem.title}},menuJSON.push(itemObj)}}this._menu.zmenu("addMenuItems",menuJSON)}else for(var jsonData={},i=0;i<this._filteredResult.length;i++){var jsonItem=this._getItemJSON(this._filteredResult[i]),checkbox="checkbox"===this.options.dropdownList.itemType?!0:!1,type=this.options.dropdownList.contentType;"text-desc"===this.options.dropdownList.contentType?content="<div class='zmenu__content'><span class='zmenu__text'>{0}</span><span class='zmenu__hint'>{1}</span></div>":(content=this.options.isImageSourceSprited?"<div class='zmenu__iconcontainer'><i class='zmenu__icon "+jsonItem.icon+"'></i></div>":"<img src='"+jsonItem.icon+"' class='zsuggestfield__avatar'>",content="image-text"===type?content+"<div class='zmenu__content'><span class='zmenu__text'>{0}</span></div>":content+"<div class='zmenu__content'><span class='zmenu__text'>{0}</span><span class='zmenu__hint'>{1}</span></div>"),content=checkbox?"<div class='zmenu__iconcontainer'><i class='zmenu__icon'></i></div>"+content:content,jsonData={itemType:checkbox?"checkbox":"custom",custom:!0,innerHTML:{content:content,replaceArray:[jsonItem.name,jsonItem.description]},id:ZC.encodeHTML(this._elementId+this._removeSpecialChar(jsonItem.key)),isCustomHTMLEncoded:!1,itemValue:{text:jsonItem.name,image:jsonItem.icon,informativeText:jsonItem.description,value:jsonItem.key,itemIdentifier:jsonItem.identifier,customValues:jsonItem.customValues,titleText:jsonItem.title}},this._menu.zmenu("addMenuItem",jsonData)}else if(this._isJSONSource&&this._dataMapping&&this._dataMapping.groupLabel){for(var key in this._groupedResult){numId++;var jsonObj={label:key,itemType:"itemgroup",id:this._elementId+numId};menuJSON.push(jsonObj);for(var i=0;i<this._groupedResult[key].length;i++){var itemObj={},jsonItem=this._getItemJSON(this._groupedResult[key][i]);itemObj={label:ZC.encodeHTML(jsonItem.name),itemValue:{text:jsonItem.name,image:jsonItem.icon,informativeText:jsonItem.description,value:jsonItem.key,itemIdentifier:jsonItem.identifier,customValues:jsonItem.customValues,titleText:jsonItem.title},name:jsonObj.id,itemType:"checkbox"===this.options.dropdownList.itemType?"checkbox":"text",id:ZC.encodeHTML(this._elementId+this._removeSpecialChar(jsonItem.key))},menuJSON.push(itemObj)}}this._menu.zmenu("addMenuItems",menuJSON)}else for(var itemObj={},i=0;i<this._filteredResult.length;i++){var jsonItem=this._getItemJSON(this._filteredResult[i]);itemObj={label:ZC.encodeHTML(jsonItem.name),itemValue:{text:jsonItem.name,image:jsonItem.icon,informativeText:jsonItem.description,value:jsonItem.key,itemIdentifier:jsonItem.identifier,customValues:jsonItem.customValues,titleText:jsonItem.title},itemType:"checkbox"===this.options.dropdownList.itemType?"checkbox":"text",id:ZC.encodeHTML(this._elementId+this._removeSpecialChar(jsonItem.key))},this._menu.zmenu("addMenuItem",itemObj)}}else for(var i=0;i<this._filteredResult.length;i++){var object={id:this._filteredResult[i],label:ZC.encodeHTML(this._filteredResult[i])};this._menu.zmenu("addMenuItem",object)}var text,moreAction=this.options.dropdownList.moreResultsAction;if(moreAction&&!this.options.lazyLoadData){var moreActionText=this._localize("moreAction");if(moreActionText=ZC.encodeHTML(moreActionText),"string"==typeof moreActionText){moreActionText.match(/#query#/g)?(text=moreActionText.replace(/#query#/g,this._params.query),moreActionText=moreActionText.replace(/#query#/g,"<b class='h-bold'>"+ZC.encodeHTML(this._params.query)+"</b>")):text=moreActionText;var container=$("<span class='zmenu__text'>").html(moreActionText)}var item=this._menu.zmenu("addMenuItem",{id:this._elementId+"moreaction",label:ZC.encodeHTML(text),fixed:!0,innerHTML:container,itemType:"custom"});item.css("min-height","inherit")}if(this._menu.zmenu("show",{mustBeShown:!0,preventHover:!0,positionAlterable:!0}),(!this.options.isImageSourceSprited||"image-text-desc"!==this.options.dropdownList.contentType||"none"!==this.options.dropdownList.itemType)&&"text-desc"!==this.options.dropdownList.contentType){var totalWidth=0;if(!this.options.isImageSourceSprited){var avatar=$(this._menu.find("li")[this._dataMapping&&this._isJSONSource&&this._dataMapping.groupLabel?1:0]).find(".zsuggestfield__avatar");avatar.length&&(totalWidth=avatar.outerWidth(!0))}var icon=$(this._menu.find("li")[this._dataMapping&&this._isJSONSource&&this._dataMapping.groupLabel?1:0]).find(".zmenu__iconcontainer");if(icon.length)for(var i=0;i<icon.length;i++)totalWidth+=$(icon[i]).outerWidth(!0);totalWidth=totalWidth&&totalWidth.toString(),"icon-text"===this._type&&"checkbox"===this.options.dropdownList.itemType&&this.options.isImageSourceSprited&&"image-text-desc"===!this.options.dropdownList.contentType||totalWidth&&this._menu.find(".zmenu__content").css("width","calc(100% - "+totalWidth+"px)")}if("after-cursor"===this.options.dropdownList.position){var pos=this._positionMenuAtCursorPosition(container);this._menu.css({top:pos.top+15,left:pos.left})}this.options.dropdownList.highlightKeyword&&this._highlightSearchQuery();var id,element;this._lastSelectedMenuItem&&(id=this._lastSelectedMenuItem.attr("id")),this._lastSelectedMenuItem&&(element=$("#"+id)),element&&element.length?(this._menu.zmenu("hoverMenuItem",element),this._lastSelectedMenuItem=null):this.options.dropdownList.focusFirstItem&&!this.options.autoComplete&&(this._focusSet||(this._focusSet=!0,this._menu.zmenu("hoverMenuItem",this._menu.find("li").eq(this._isJSONSource&&this._dataMapping&&this._dataMapping.groupLabel?1:0)))),this._removeLoader()}else if(this._removeLoader(),this.options.dropdownList.showNoResultsMessage){var noResultsText=this._localize("noResults");if(noResultsText=ZC.encodeHTML(noResultsText),"string"==typeof noResultsText&&noResultsText.match(/#query#/g)&&(noResultsText=noResultsText.replace(/#query#/g,"<b class='h-bold'>"+ZC.encodeHTML(this._params.query)+"</b>")),this._displayNoresults(noResultsText),"after-cursor"===this.options.dropdownList.position){var pos=this._positionMenuAtCursorPosition(container);this._menu.css({top:pos.top+15,left:pos.left})}}else this._menu.is(":visible")&&this._hideSuggestions();return this._newQuery=!1,def},_highlightSearchQuery:function(){var searchBy,menuItems,informativeText,text,groupLabel,elementId=this._elementId;if(this._isJSONSource&&("string"==typeof this.options.search.by&&(searchBy=this.options.search.by.split(",")),informativeText=this._dataMapping.informativeText,text=this._dataMapping.text,groupLabel=this._dataMapping.groupLabel),this._isJSONSource&&searchBy?searchBy.indexOf(groupLabel)>-1&&searchBy.indexOf(text)>-1&&-1===searchBy.indexOf(informativeText)?menuItems=this._menu.find(".zmenu__text:not('#"+elementId+"moreaction')"):searchBy.indexOf(groupLabel)>-1&&-1===searchBy.indexOf(text)?menuItems=this._menu.find(".zmenu__title").find(".zmenu__text"):-1===searchBy.indexOf(groupLabel)&&searchBy.indexOf(text)>-1&&searchBy.indexOf(informativeText)>-1?menuItems=this._menu.find(".zmenu__item:not('#"+elementId+"moreaction')").find(".zmenu__text,.zmenu__hint"):searchBy.indexOf(groupLabel)>-1&&searchBy.indexOf(text)>-1&&searchBy.indexOf(informativeText)>-1?menuItems=this._menu.find(".zmenu__text,.zmenu__hint:not('#"+elementId+"moreaction')"):searchBy.indexOf(groupLabel)>-1&&-1===searchBy.indexOf(text)&&searchBy.indexOf(informativeText)>-1?menuItems=this._menu.find(".zmenu__hint, .zmenu__title > .zmenu__text"):-1===searchBy.indexOf(text)&&searchBy.indexOf(informativeText)>-1?menuItems=this._menu.find(".zmenu__hint"):searchBy.indexOf(text)>-1&&-1===searchBy.indexOf(informativeText)&&-1===searchBy.indexOf(groupLabel)&&(menuItems=this._menu.find(".zmenu__item:not('#"+elementId+"moreaction')").find(".zmenu__text")):menuItems=this._menu.find(".zmenu__item:not('#"+elementId+"moreaction')").find(".zmenu__text"),menuItems)for(var i=0;i<menuItems.length;i++){var text=$(menuItems[i]).text();switch(text=ZC.encodeHTML(text),this.options.search.criteria){case"contains":$(menuItems[i]).html(text.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+this._params.query+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b class='h-bold'>$1</b>"));break;case"startsWith":$(menuItems[i]).html(text.replace(new RegExp("(^"+this._params.query+")","gi"),"<b class='h-bold'>$1</b>"));break;case"endsWith":$(menuItems[i]).html(text.replace(new RegExp("("+this._params.query+"$)","gi"),"<b class='h-bold'>$1</b>"))}}},_positionInputElement:function(domElement){var offsetCaretPosition,pos;return offsetCaretPosition=domElement.offset(),pos=this._getPositon(domElement),offsetCaretPosition={left:offsetCaretPosition.left+pos.left-domElement.scrollLeft(),top:offsetCaretPosition.top+pos.top-domElement.scrollTop(),height:pos.height}},_removeSpecialCharacters:function(value){return value=value.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(value=value.replace(/\s/g,"&nbsp;")),value},_duplicateElement:function(domElement){var simulatedCss;this._duplicateDiv=$("<div>");var cssProperties=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"];simulatedCss={position:"absolute",left:-9999,top:0,zIndex:-2e4};for(var i=0;i<cssProperties.length;i++)simulatedCss[cssProperties[i]]=domElement.css(cssProperties[i]);return this._duplicateDiv.css(simulatedCss),this._duplicateDiv},_getPositon:function(domElement){var spanElement,spanRelativePosition,elementWithCaret,dimensions,pos=domElement[0].selectionStart,startPos=domElement.val().slice(0,pos),endPos=domElement.val().slice(pos);return spanElement="<span style='position: relative; display: inline;'>"+this._removeSpecialCharacters(startPos)+"</span>",spanElement+="<span id='caret' style='position: relative; display: inline;'>|</span>",spanElement+="<span style='position: relative; display: inline;'>"+this._removeSpecialCharacters(endPos)+"</span>",this._duplicateElement(domElement),this._duplicateDiv.html(spanElement),domElement.after(this._duplicateDiv),elementWithCaret=this._duplicateDiv.find("#caret"),spanRelativePosition=elementWithCaret.position(),dimensions={left:spanRelativePosition.left,top:spanRelativePosition.top,height:elementWithCaret.height()},this._duplicateDiv.remove()&&(this._duplicateDiv=null),dimensions},_positionEditableDiv:function(domElement){var rangeCopy,boundingRect,offsetCaretPosition,sel=window.getSelection(),range=sel.getRangeAt(0);return sel&&(range.endOffset>-1&&range.endContainer!=domElement[0]&&(rangeCopy=range.cloneRange(),rangeCopy.setStart(range.endContainer,range.endOffset-1),rangeCopy.setEnd(range.endContainer,range.endOffset),boundingRect=rangeCopy.getBoundingClientRect(),offsetCaretPosition={height:boundingRect.height,left:boundingRect.left,top:boundingRect.top},rangeCopy.detach()),offsetCaretPosition&&(offsetCaretPosition.top+=ZC.$window.scrollTop(),offsetCaretPosition.left+=ZC.$window.scrollLeft())),offsetCaretPosition},_positionMenuAtCursorPosition:function(container){var offsetCaretPosition;return offsetCaretPosition=container.is("input")?this._positionInputElement(container):this._positionEditableDiv(container)},_hideSuggestions:function(){void 0!==this._menu&&this._menu.is(":visible")&&this._menu.zmenu("hide")},_displayNoresults:function(text){if(0!==this.options.search.minKeywordLength||0!==this._params.query.length){var container=$("<span class='zmenu__text'>").html(text);this._menu.zmenu("removeMenuItem",this._elementId+"moreaction"),this._menu.zmenu("addMenuItem",{label:ZC.encodeHTML(this._params.query),index:0,innerHTML:container,itemType:"custom",id:this._elementId+"noresults",itemCssClass:"zsuggestfield__nonselectable"}),this._menu.zmenu("show",{mustBeShown:!0,preventHover:!0,positionAlterable:!0}),this._menu.hasClass("zmenu--iconwithtext")&&this._menu.removeClass("zmenu--iconwithtext")}else this._menu.is(":visible")&&this._hideSuggestions()},_dispatchEvent:function(customEvent,ui,orgEvent){var content={value:ui},value=this._super(customEvent,orgEvent,content);return void 0!==content.value.modified?content.value:value},openDropdownList:function(){this._menu.zmenu("show",{mustBeShown:!0,preventHover:!0,positionAlterable:!0}),this._input.attr("aria-expanded","true")},closeDropdownList:function(){this._hideSuggestions()},getValue:function(){var data=this._currentData?{}:void 0;return data=this._getData(this._currentData)},search:function(query){this._searchTimeout(query,this._element)},clearCache:function(){this._cachedData={}},setAttribute:function(optionName,value){var oldValue=this.options[optionName];if(this.options[optionName]=value,"className"===optionName)oldValue&&this.element.removeClass(oldValue),this.element.addClass(value);else if("dataSource"===optionName){if("object"==typeof value||value instanceof Array){this._cachedData={};var oldSource=this._isJSONSource;value instanceof Array&&"object"==typeof oldValue?(this._isJSONSource="object"==typeof value[0],this._ajaxSource=!1):("object"==typeof value&&oldValue instanceof Array||"object"==typeof value)&&(this._ajaxSource=this._isJSONSource=!0,this._requestInitialized=!1),this._isJSONSource&&!oldSource&&(this.options.dropdownList.contentType=this._initialContentType)}}else if("autoComplete"===optionName)if(value){var base=this;this._menu.on("zmenuitemhover",function(orgEvent,ui){base._handleHover(orgEvent,ui),base._dispatchEvent("ITEMFOCUS",{value:ui.menuitem})})}else this._menu.off("zmenuitemhover");else if("search"===optionName)"object"==typeof value&&(this.options.search.minKeywordLength=value.minKeywordLength&&value.minKeywordLength<20?value.minKeywordLength:oldValue.minKeywordLength);else if("placeholder"===optionName)value?this.element.attr("placeholder",value):this.element.removeAttr("placeholder");else if("dropdownList"===optionName||"isImageSourceSprited"===optionName){if("dropdownList"===optionName&&void 0!==value.contentType||"checkbox"===value.itemType||"isImageSourceSprited"===optionName){switch(this._menu.removeClass("zsuggestfield zmenu--withhint zmenu--withicon zmenu--withiconandhint zmenu--iconwithtext"),this.options.dropdownList.contentType){case"image-text-desc":case"image-desc":this._type="icon-text";break;case"text":case"text-desc":"checkbox"===this.options.dropdownList.itemType?(this._type="icon-text",this._menu.addClass("zmenu--iconwithtext")):this._type="text"}this._menu.zmenu("option","contentType",this._type),"icon-text"!==this._type||"text"===this.options.dropdownList.contentType||"text-desc"===this.options.dropdownList.contentType||this.options.isImageSourceSprited||(this._menu.addClass("zsuggestfield"),"image-text-desc"===this.options.dropdownList.contentType&&this._menu.addClass("zmenu--withhint")),"checkbox"===this.options.dropdownList.itemType&&this.options.isImageSourceSprited&&("image-text"===this.options.dropdownList.contentType&&this._menu.addClass("zmenu--withicon"),"image-text-desc"===this.options.dropdownList.contentType&&this._menu.addClass("zsuggestfield zmenu--withiconandhint"))}void 0!==value.appendTo&&this._menu.zmenu("option","appendTo",value.appendTo),void 0!==value.position&&"after-cursor"!==value.position&&this._menu.zmenu("option","direction",value.position),void 0!==value.height&&this._menu.zmenu("option","height",value.height),void 0!==value.width&&this._menu.zmenu("option","width",value.width)}else"disabled"===optionName?(this.element.attr("disabled",value),this.element[value?"addClass":"removeClass"]("is-disabled"),this.element.focus()):"dataMapping"===optionName?this._dataMapping=value:"lazyLoadData"===optionName&&void 0===this.options.dropdownList.maxDisplayResults&&this.options.lazyLoadData&&(this.options.dropdownList.maxDisplayResults=this._CONSTANTS.maxResults)},updateDataSource:function(newData){if(this.options.dataSource instanceof Array&&newData instanceof Array)for(var len=this.options.dataSource.length,i=len,j=0;i<len+newData.length;i++)this.options.dataSource[i]=newData[j++]},destroy:function(){var componentName=this.componentName;this._element.val(""),this._oldVal="",this._currentData={},this.element.removeClass("zsuggestfield-element"),this._isLoaderInited=!1,this.element.removeData(componentName),this._element.off("."+componentName),this._menu.zmenu("destroy"),this._menu.remove(),this.element.show()}};ZC.registerComponent("zsuggestfield",suggestfieldPrototype)}(ZComponents),function(ZC){var $=ZC.DOMUtil,tokenfieldPrototype={options:{dropdownList:{itemType:"none",closeOnSelect:!0},allowDuplicateValues:!1,dataValidation:!1,tokens:{contentType:"text",removeSVGIconId:void 0,removeIconClassName:void 0,sortable:!1,editable:!1,animateOnRemove:!1,showRemoveButtonOnHover:!1},delimiter:",",maxAllowedValues:void 0,values:[],acceptNewValues:!1,newValuePattern:void 0,messages:{remove:"Remove",maxTokenLimitReached:"Max token limit reached"}},_TOKENFIELDEVENTS:{BEFORETOKENADD:"beforetokenadd",BEFORETOKENREMOVE:"beforetokenremove",AFTERTOKENADD:"tokenadd",AFTERTOKENREMOVE:"tokenremove",TOKENUPDATE:"tokenedit",TOKENDRAG:"tokendrag",TOKENADDFAIL:"tokenaddfail"},_CONSTANTS:{pattern:'"#value#" <#id#>',patterFormatError:"Invalid pattern for token. Pattern should contain #id# or #value# or both",minKeywordLength:20,maxResults:10},_create:function(){this._keyCode=ZC.keyCode,this._extendEvents(),this._constructContainer(),this._initialize(),this._initSource(),this._tokensCollection=[],this._performedStack=[],this._recallStack=[],this._tokensCount=0,this._cachedData={},!this.options.disabled&&this._bindEvents(),this._uniqueIndex=0,!this.options.disabled&&this._bindMenuEvents(),this.options.isResponsePaginated&&(this._params={pages:void 0}),this.options.values&&this.options.values.length&&(this._defaultSelected=!0,this.addTokens(this.options.values),this._defaultSelected=!1),this.options.disabled&&(this.element.attr("disabled",!0),this.container.addClass("is-disabled"),this.container.attr("aria-disabled","true"),this._input.attr("disabled",!0))},_constructContainer:function(){this._elementId=(this.element.attr("id")?this.element.attr("id"):Math.floor(1e6*Math.random()))+"-"+this.componentName,this.container=$("<div id='"+this._elementId+"-container' >").addClass("ztokenfield"),this._input=$("<input type='text' role='textbox' aria-haspopup='true' role='textbox' aria-expanded='false' aria-owns='"+this._elementId+"-menu' id='"+this._elementId+"-input' autocomplete='off' tabindex='"+(this.element.attr("tabindex")||0)+"'>").addClass("ztokenfield__textbox"),this._input.appendTo(this.container).blur(),this.container.insertAfter(this.element),this.options.className&&this.container.addClass(this.options.className),this._pasteHelperTextBox=$("<input type='text' style='position:absolute; left: -10000000px; height: 0px' tabindex='-1' id='"+this._elementId+"-copyhelper'>").appendTo(this.container),this._pasteRegExp=this._CONSTANTS.pattern,this.options.placeholder&&(this._resizeSearchArea(this._input,this.options.placeholder),this._input.attr("placeholder",this.options.placeholder)),this.options.dropdownList.forElement=this.container,!this.options.tokens.showRemoveButtonOnHover&&this.container.addClass("ztokenfield--closeshown"),this._prevContainerHeight=this.container.css("height"),this.element.hide()},_resizeSearchArea:function(textbox,value){var duplicateDiv,containerWidth,properties,inputWidth,styleBlock,style,width;styleBlock="position:absolute; left: -1000px; top: -1000px; display:none;",properties=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(var i=0;i<properties.length;i++)style=properties[i],styleBlock+=style+":"+textbox.css(style)+";";duplicateDiv=$("<div />",{style:styleBlock}),duplicateDiv.text(void 0!==value?value:textbox.val()),$("body").append(duplicateDiv);var inputWidth;if(containerWidth=this.container.outerWidth(),textbox.attr("id")==="dblclick-input-"+this.componentName)inputWidth=duplicateDiv.width()+30,width=inputWidth;else{inputWidth=duplicateDiv.width()+50,duplicateDiv.text(textbox.val());var inputWidth1=duplicateDiv.width()+50;duplicateDiv.remove(),width=inputWidth>inputWidth1?inputWidth:inputWidth1}return this.container.is(":visible")&&width>containerWidth-10&&(width=containerWidth-10),textbox.css({width:width+"px"})},_activateInputArea:function(){this._inputArea.val(this._inputArea.val()),this.container.addClass("has-focus")},_addCustomCloseIcon:function(){this._closeButton=$('<button type="button" class="ztokenfield__close" tabindex="-1" title='+this._localize("remove")+"></button>");var svgProps,iconElement=$('<i class="ztokenfield__icon"></i>'),tokens=this.options.tokens;svgProps={props:{viewBox:"0 0 16 16","class":"ztokenfield__svg",width:"100%",height:"100%"},nodes:[{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)","class":"st0",width:"13",height:"1.1"}},{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)","class":"st0",width:"13",height:"1.1"}}]},this._handleIcon(iconElement,svgProps,"closebutton",tokens.removeIconClassName,tokens.removeSVGIconId),iconElement.appendTo(this._closeButton)},_addErrorToken:function(value,orgEvent,index,tokenId){if(value=value.trim(),value.length){var textbox=void 0!==this._editTextBox?this._editTextBox:this._input;this._tokenContainer=$("<div class='ztokenfield__token' tabindex='-1'>"),this._addCustomCloseIcon(),this._tokenText=$("<span class ='ztokenfield__text' title='"+value+"'>").text(value),this._tokenContainer.addClass("has-error").data("invalidToken",!0),this._insertToken({errorValue:value},textbox,orgEvent,index,tokenId),textbox.val("")}},_checkTokenChange:function(orgEvent){if(this._tokensCollection.length>0&&this._tokensCollection.length===this._lastTokenUpdate.length){for(var current=this._tokensCollection,prev=this._lastTokenUpdate,flag=!1,i=0;i<current.length;i++)for(var j=0;j<prev.length;j++){var currentKey,prevKey,currentData=$(current[i]).data().metadata;void 0!==currentData&&(currentKey=this._mapJSONToData(currentData,this._dataMapping.itemIdentifier));var prevData=prev[j];if(void 0!==prevData&&(prevKey=this._mapJSONToData(prevData,this._dataMapping.itemIdentifier)),currentKey===prevKey){flag=!0;break}flag=!1}if(!flag){var token={prevTokenList:prev,currentTokenList:current};this._dispatchEvent("CHANGE",token,orgEvent),this._lastTokenUpdate=[];for(var i=0;i<this._tokensCollection.length;i++)this._lastTokenUpdate.push(this._tokensCollection[i].data().metadata)}}else if(this._tokensCollection.length!==this._lastTokenUpdate.length){var token={prevTokenList:this._lastTokenUpdate,currentTokenList:this._tokensCollection};this._dispatchEvent("CHANGE",token,orgEvent),this._lastTokenUpdate=[];for(var i=0;i<this._tokensCollection.length;i++)this._lastTokenUpdate.push(this._tokensCollection[i])}},_checkIsContentValid:function(value,keyCode){var acceptNewValues=this.options.acceptNewValues,pattern=this.options.newValuePattern;if(pattern&&pattern instanceof RegExp&&(pattern.lastIndex=0),void 0!==value&&value.length&&acceptNewValues){var tokenJSON={};if(tokenJSON.itemValue={},void 0!==pattern&&pattern instanceof RegExp&&pattern.test(value)||void 0===pattern){tokenJSON.itemValue.text=value,tokenJSON.itemValue.itemIdentifier=value,tokenJSON.itemValue.titleText=value,this._addToken(tokenJSON,keyCode,void 0,void 0,!0),this._checkTokenChange();var rawJSON=this._getData(tokenJSON.itemValue);this.options.dropdownList.acceptNewValues&&this.options.dataSource instanceof Array&&this.options.dataSource.push(rawJSON)}else this.options.dataValidation&&this._addErrorToken(value,keyCode)}},_handleEnterPressed:function(orgEvent){var noResultExists=this._menu.find("#"+this._elementId+"noresults").length;if(this._enterKeyPressed&&void 0!==this._menu&&(!this._menu.is(":visible")||noResultExists)){var val=this._input.val();if(this.options.tokens.editable&&this._pasteHelperTextBox&&$(orgEvent.target).attr("id")===this._pasteHelperTextBox.attr("id")){var activeToken=this.container.find(".is-selected");activeToken.length&&1===activeToken.length&&this._editToken(activeToken,orgEvent)}else!this.options.acceptNewValues&&this.options.dataValidation?($(orgEvent.target).attr("id")===this._input.attr("id")&&void 0!==val&&val.length&&this._addErrorToken(val),void 0!==this._editTextBox&&(this._reformToken(orgEvent),this._triggerInputFocus())):this.options.acceptNewValues?this._editTextBox&&$(orgEvent.target).attr("id")===this._editTextBox.attr("id")?(this._reformToken(orgEvent),this._triggerInputFocus()):this._checkIsContentValid(val):this._editTextBox&&$(orgEvent.target).attr("id")===this._editTextBox.attr("id")&&(this._reformToken(orgEvent),this._triggerInputFocus());noResultExists&&this._hideSuggestions()}this._enterKeyPressed=!1},_docClickHandler:function(orgEvent){var target=$(orgEvent.target),item=target.closest(".zmenu__item"),activeElement=$(document.activeElement),actualContainer=target.closest(".ztokenfield");if(actualContainer[0]!==activeElement.closest(".ztokenfield")[0]&&actualContainer[0]!==this.container[0]&&target.closest(".zmenu")[0]!==this._menu[0]){var val=this._input.val();if(this._focusOutside=!1,this.container.removeClass("has-focus"),!this._lastTokenUpdate.length&&this._tokensCollection.length){var token={prevTokenList:this._lastTokenUpdate,currentTokenList:this._tokensCollection};this._dispatchEvent("CHANGE",token);for(var i=0;i<this._tokensCollection.length;i++)this._lastTokenUpdate.push(this._tokensCollection[i].data().metadata)}else this._checkTokenChange(orgEvent);if(this._clickReset=!0,this.options.dropdownList.closeOnSelect?this._menu.is(":visible")&&this._hideSuggestions():this._menu[0].contains(item[0])?this._searchTimeout(this._params.query,this._input,orgEvent):this._menu.is(":visible")&&this._hideSuggestions(),void 0!==this._editTextBox&&$(orgEvent.target).attr("id")!==this._editTextBox.attr("id"))this._reformToken(orgEvent),this._menu.is(":visible")&&this._hideSuggestions();else if(!this._menu[0].contains(item[0])&&!this.options.acceptNewValues&&this.options.dataValidation&&void 0!==val&&val.length)this._addErrorToken(val);else if(this.options.acceptNewValues)this._checkIsContentValid(val);else{this._input[0].value="";var values=this.options.values;this._resizeSearchArea(this._input,values&&values.length?void 0:this.options.placeholder)}this.container.find(".is-selected").removeClass("is-selected")}!this.options.dropdownList.closeOnSelect&&this._menu[0].contains(item[0])&&this._searchTimeout(this._params.query,this._input,orgEvent)},_keydownHandler:function(orgEvent){if(this._metaKey=!1,this._checkMaxLimitReach(orgEvent),this._input.val().length<1&&!this._editTextBox){var allElements=this.container.find(".is-selected");switch(orgEvent.keyCode){case this._keyCode.LEFT:var ele,element=$(allElements[0]);if(allElements.length&&!(orgEvent.shiftKey||orgEvent.metaKey||orgEvent.ctrlKey)&&(allElements.removeClass("is-selected"),this._clickReset=!0),orgEvent.shiftKey){if(this._clickReset)if(this._element){var prevSelected;prevSelected=this._element.prev(),allElements.length>1?prevSelected.hasClass("is-selected")?(this._element.removeClass("is-selected"),this._element=prevSelected):ele=prevSelected:(element.length&&(ele=element.prev()),prevSelected=void 0)}else element.length&&(ele=element.prev()),prevSelected=void 0;else element.length&&(ele=element.prev());this._clickReset=!0}else element.length&&(ele=element.prev());if(void 0!==ele&&ele.length)ele.hasClass("ztokenfield__token")?(this._element=ele.addClass("is-selected"),this._element.focus(),this._triggerPasteHelper()):this._triggerInputFocus();else if(!prevSelected){var ele=this._input.prev();ele.hasClass("ztokenfield__token")&&(this._element=ele.addClass("is-selected"),this._element.focus(),this._triggerPasteHelper())}this._menu.is(":visible")&&this._hideSuggestions(),orgEvent.preventDefault();break;case this._keyCode.RIGHT:var ele,length=allElements.length,element=$(allElements[length-1]);if(allElements.length&&!(orgEvent.shiftKey||orgEvent.metaKey||orgEvent.ctrlKey)&&(allElements.removeClass("is-selected"),this._clickReset=!0),orgEvent.shiftKey){if(this._clickReset)if(this._element){var prevSelected;allElements.length>1?(prevSelected=this._element.next(),prevSelected.hasClass("is-selected")?(this._element.removeClass("is-selected"),this._element=prevSelected):ele=prevSelected):element.length&&(ele=element.next())}else element.length&&(ele=element.next());else element.length&&(ele=element.next());this._clickReset=!0}else element.length&&(ele=element.next());void 0!==ele&&ele.length&&(ele.hasClass("ztokenfield__token")?(this._element=ele.addClass("is-selected"),this._triggerPasteHelper()):(this._triggerInputFocus(),orgEvent.shiftKey&&this.container.find(".is-selected").removeClass("is-selected"))),this._menu.is(":visible")&&this._hideSuggestions(),orgEvent.preventDefault()}}else{var query=this._input.val(),cursorPos=this._input[0].selectionStart;query.length<this.options.search.maxKeywordLength&&(query=orgEvent.keyCode===this._keyCode.LEFT?query.substring(0,cursorPos-1):orgEvent.keyCode===this._keyCode.RIGHT?query.substring(0,cursorPos+1):void 0,void 0!==query&&this._searchTimeout(query,this._input,orgEvent),void 0!==query&&query.length===cursorPos&&orgEvent.preventDefault())
}if(orgEvent.keyCode===this._keyCode.BACKSPACE||orgEvent.keyCode===this._keyCode.DELETE){if(this._hasInput=!1,this.container.find(".is-selected").length)return orgEvent.preventDefault(),!1;var target=$(orgEvent.target),query=target.is("input")&&target.attr("id")!==this._pasteHelperTextBox.attr("id")&&target.val();void 0!==query&&query.length&&(this._hasInput=!0)}if(orgEvent.metaKey||orgEvent.ctrlKey){this._metaKey=!0;var target=$(orgEvent.target);if(65===orgEvent.keyCode&&($(orgEvent.target).attr("id")===this._pasteHelperTextBox.attr("id")||target.attr("id")===this._input.attr("id")&&0===this._input.val().length)&&orgEvent.preventDefault(),this._menu.is(":visible"))if("none"===this.options.dropdownList.itemType)this._hideSuggestions();else{var query=target.val();this._searchTimeout(query,target,orgEvent)}switch(orgEvent.keyCode){case 65:if(target.attr("id")===this._pasteHelperTextBox.attr("id")||target.attr("id")===this._input.attr("id")&&0===this._input.val().length){for(var allTokens=this.container.find(".ztokenfield__token"),i=0;i<allTokens.length;i++)$(allTokens[i]).addClass("is-selected").focus();this._triggerPasteHelper()}break;case 90:if(this._input.val().length||this._editTextBox)this._resizeSearchArea(target);else if(orgEvent.preventDefault(),this._performedStack.length){var undoAction=this._performedStack.pop();undoAction&&"Insert"===undoAction.action?this._removeToken($("#"+undoAction.tokenId).find(".ztokenfield__close"),orgEvent,undoAction.index):undoAction&&"Remove"===undoAction.action&&this._addToken(undoAction.tokenData,orgEvent,undoAction.index,undoAction.tokenId)}break;case 89:if(this._input.val().length||this._editTextBox)this._resizeSearchArea(target);else if(orgEvent.preventDefault(),this._recallStack.length){var redoAction=this._recallStack.pop();redoAction&&"Remove"===redoAction.action?this._removeToken($("#"+redoAction.tokenId).find(".ztokenfield__close"),orgEvent,redoAction.index):redoAction&&"Insert"===redoAction.action&&this._addToken(redoAction.tokenData,orgEvent,redoAction.index,redoAction.tokenId)}break;case 88:if(target.attr("id")!==this._input.attr("id")&&void 0!==this._activeTokens)for(var i=0;i<this._activeTokens.length;i++)this._removeToken($("#"+this._activeTokens[i]).find(".ztokenfield__close"));setTimeout(this._undoTimeoutHandler.bind(this),500)}}if(orgEvent.keyCode===this._keyCode.ESCAPE&&void 0!==this._editTextBox&&(this._escKeyPressed=!0,this._reformToken(orgEvent),this._triggerInputFocus()),orgEvent.keyCode===this._keyCode.TAB&&void 0!==this._editTextBox&&(this._reformToken(orgEvent),this._menu.is(":visible")&&this._hideSuggestions()),void 0!==this._menu&&(!this._menu.is(":visible")||this._menu.find("#"+this._elementId+"noresults").length)&&this._tokensCount!==this.options.maxAllowedValues)return orgEvent.keyCode!==this._keyCode.DOWN||this._ajaxSource||this.container.find(".ztokenfield__token").hasClass("is-selected")||this._searchTimeout(this._params.query,this._input,orgEvent),orgEvent.keyCode===this._keyCode.ENTER&&(orgEvent.preventDefault(),this._enterKeyPressed=!0,this._newQuery||this._handleEnterPressed(orgEvent)),!0;if(this._tokensCount!==this.options.maxAllowedValues)switch(orgEvent.keyCode){case this._keyCode.UP:case this._keyCode.DOWN:case this._keyCode.ENTER:case this._keyCode.ESCAPE:orgEvent.preventDefault(),this._newQuery||!this._isLoaderInited&&this._menu.zmenu("handleKeyCode",orgEvent.keyCode),this._menu.find(".on-hover").length||void 0!==this._editTextBox&&this._reformToken(orgEvent)}},_checkMaxLimitReach:function(orgEvent){var charInput=$(orgEvent.target).is("input")&&$(orgEvent.target).attr("id")!==this._pasteHelperTextBox.attr("id")&&!(orgEvent.metaKey||orgEvent.ctrlKey)&&(orgEvent.keyCode>=186&&orgEvent.keyCode<=192||orgEvent.keyCode>=219&&orgEvent.keyCode<=222||orgEvent.keyCode>=48&&orgEvent.keyCode<=57||orgEvent.keyCode>=65&&orgEvent.keyCode<=90||orgEvent.keyCode===this._keyCode.SPACE);charInput&&this.options.maxAllowedValues&&this._tokensCount===this.options.maxAllowedValues&&orgEvent.preventDefault()},_keyUpHandler:function(orgEvent){if(this.element.attr("disabled"))return!1;if($(orgEvent.target).is("input")&&$(orgEvent.target).attr("id")!==this._pasteHelperTextBox.attr("id")&&!orgEvent.metaKey&&!orgEvent.ctrlKey&&(orgEvent.keyCode>=186&&orgEvent.keyCode<=192||orgEvent.keyCode>=219&&orgEvent.keyCode<=222||orgEvent.keyCode>=48&&orgEvent.keyCode<=57||orgEvent.keyCode>=65&&orgEvent.keyCode<=90||orgEvent.keyCode===this._keyCode.SPACE)&&this._tokensCount!==this.options.maxAllowedValues){this.container.find(".is-selected").removeClass("is-selected"),this._clickReset=!0,this._resizeSearchArea($(orgEvent.target),this.options.placeholder?$(orgEvent.target).attr("placeholder"):void 0);var query=$(orgEvent.target).val();if(query.charCodeAt(query.length-1)===this.options.delimiter.charCodeAt(0)){orgEvent.target.value=query.slice(0,-1);var menuitem,isMenuVisible=this._menu.is(":visible");if(isMenuVisible&&(menuitem=this._menu.find("li:not(.zmenu__title)")),menuitem&&menuitem.length)1===menuitem.length&&(orgEvent.target.value=""),this.options.autoComplete&&this._menu.zmenu("hoverMenuItem",$(menuitem[0])),this._menu.zmenu("selectHoveredMenuItem");else{var query=query.substring(0,query.length-1);!this.options.acceptNewValues&&this.options.dataValidation?(void 0!==query&&query.length&&this._addErrorToken(query),void 0!==this._editTextBox&&this._reformToken(orgEvent)):this.options.acceptNewValues?this._editTextBox?this._reformToken(orgEvent):this._checkIsContentValid(query):this._editTextBox&&this._reformToken(orgEvent)}this.options.dropdownList.closeOnSelect&&this._menu.is(":visible")&&this._hideSuggestions()}else query.length<this.options.search.maxKeywordLength&&!this._metaKey&&(this._newQuery=!0,this._searchTimeout(query,$(orgEvent.target),orgEvent))}if(orgEvent.keyCode===this._keyCode.BACKSPACE||orgEvent.keyCode===this._keyCode.DELETE){var query,target=$(orgEvent.target),query=target.is("input")&&target.attr("id")!==this._pasteHelperTextBox.attr("id")&&target.val();target.is("input")&&target.attr("id")!==this._pasteHelperTextBox.attr("id")&&this._resizeSearchArea(target),query.length<this.options.search.maxKeywordLength?(!this._hasInput&&0===query.length&&this._handleTokenRemove($(orgEvent.target),orgEvent),query.length>=0&&this._hasInput&&this._searchTimeout(query,target,orgEvent)):this.container.find(".is-selected").length&&this._handleTokenRemove(this._input,orgEvent),0===this.options.values.length&&target.attr("id")===this._input.attr("id")&&0===target.val().length&&this.options.placeholder&&(this._input.attr("placeholder",this.options.placeholder),this._resizeSearchArea(this._input,this.options.placeholder))}},_mouseupHandler:function(orgEvent){var token=$(orgEvent.target).closest(".ztokenfield__token");token.length?(token.addClass("is-selected").focus(),this._menu.is(":visible")&&this._hideSuggestions()):document.activeElement!==this._input[0]&&this._input.focus()},_mousedownHandler:function(orgEvent){var val=this._editTextBox?this._editTextBox.val():this._input.val(),maxAllowed=this.options.maxAllowedValues,token=$(orgEvent.target).closest(".ztokenfield__token");(void 0===this._editTextBox||this._editTextBox.attr("id")===$(document.activeElement).attr("id"))&&!token.length&&val.length<this.options.search.maxKeywordLength&&(!maxAllowed||maxAllowed&&this._tokensCollection.length<maxAllowed)&&this._searchTimeout(val,this._input,orgEvent),void 0!==this._editTextBox&&$(orgEvent.target).attr("id")!==this._editTextBox.attr("id")&&(this._reformToken(orgEvent),this._menu.is(":visible")&&this._hideSuggestions()),orgEvent.metaKey||orgEvent.ctrlKey||orgEvent.shiftKey||(this.container.find(".is-selected").removeClass("is-selected"),this._clickReset=!0),token.length&&(token.addClass("is-selected").focus(),this._menu.is(":visible")&&this._hideSuggestions())},_pasteEventHandler:function(orgEvent){this._pasteTimeout&&clearTimeout(this._pasteTimeout),this._pasteTimeout=setTimeout(this._pasteHandler.bind(this,orgEvent),100)},_contextMenuHandler:function(orgEvent){orgEvent.preventDefault()},_inputFocusHandler:function(orgEvent){this.container.find(".is-selected").removeClass("is-selected"),this.container.addClass("has-focus"),this.options.showDropdownListOnFocus&&0===this.options.search.minKeywordLength&&!this._focusTriggered&&(this._searchTimeout("",orgEvent),this._focusTriggered=!1,this._dispatchEvent("FOCUS",orgEvent))},_inputBlurHandler:function(orgEvent){var val=this._input.val();this._menu.find("li").first().length||(!this.options.acceptNewValues&&this.options.dataValidation&&val&&val.length?this._addErrorToken(this._input.val(),{keyCode:this._keyCode.TAB}):this.options.acceptNewValues&&this._checkIsContentValid(this._input.val(),{keyCode:this._keyCode.TAB}));var target=orgEvent.relatedTarget||document.activeElement;0===$(target).closest(".zmenu").length&&this._hideSuggestions(),this.container.removeClass("has-focus")},_bindEvents:function(){var componentName=this.componentName;this._lastTokenUpdate=[],ZC.$document.on("mousedown."+componentName,this._docClickHandler.bind(this)),this.container.on("keydown."+componentName,this._keydownHandler.bind(this)).on("mouseup."+componentName,this._mouseupHandler.bind(this)).on("keyup."+componentName,this._keyUpHandler.bind(this)).on("mousedown."+componentName,this._mousedownHandler.bind(this)).on("paste."+componentName,this._pasteEventHandler.bind(this)).on("contextmenu."+componentName,this._contextMenuHandler.bind(this)),this._input.on("focus."+componentName,this._inputFocusHandler.bind(this)).on("blur."+componentName,this._inputBlurHandler.bind(this))},_undoTimeoutHandler:function(){this._triggerPasteHelper(),this._triggerInputFocus()},_focusTimeoutHandler:function(){!this._reverseTab&&this._triggerInputFocus()},_pasteHandler:function(orgEvent){var target=$(orgEvent.target),values=target.is("input")&&target.attr("id")!==this._pasteHelperTextBox.attr("id")&&target.val();values&&values.length&&this._resizeSearchArea(target,values);for(var tokenValues=values.split(this.options.delimiter),i=0;i<tokenValues.length;i++){var itemName=tokenValues[i].match(/\"(.*)\"/)&&tokenValues[i].match(/\"(.*)\"/).pop(),itemKey=tokenValues[i].match(/\<(.*)\>/)&&tokenValues[i].match(/\<(.*)\>/).pop(),jsonObj={};if(null!==itemKey&&null!==itemName)jsonObj.itemValue={},jsonObj.itemValue.itemIdentifier=itemKey,jsonObj.itemValue.text=itemName,jsonObj.itemValue.titleText=itemKey,this._addToken(jsonObj,orgEvent,void 0,void 0,!0);else{this._newQuery=!0;var value=this._search(tokenValues[i],target).done(this._convertPastedTextToTokens(tokenValues[i].trim()));if(0==value)return!1}}void 0!==this._editTextBox&&(this._editTextBox.remove(),this._editTextBox=void 0)},_extendEvents:function(){this._EVENTS=$.extend(!0,{},this._TOKENFIELDEVENTS,this._EVENTS)},_bindMenuEvents:function(){this._super();var base=this;this._menu.off("zmenubeforeitemchecked").on("zmenubeforeitemchecked",function(orgEvent,ui){"checkbox"===base.options.dropdownList.itemType&&"checked"!==ui.data.checked&&base.options.maxAllowedValues&&base._tokensCount>=base.options.maxAllowedValues&&(orgEvent.preventDefault(),base._dispatchEvent("TOKENADDFAIL",{failureType:"limit exceeded"},orgEvent))})},_convertPastedTextToTokens:function(tokenValue){!this._menu.is("visible")&&this.options.acceptNewValues&&this._checkIsContentValid(tokenValue)},_handleTokenRemove:function(textbox,orgEvent){var element=this.container.find(".is-selected");if(element.length)for(var i=0;i<element.length;i++)this._removeToken($(element[i]).find(".ztokenfield__close"),orgEvent),textbox.focus();else this._element=textbox.prev(),this._element.hasClass("ztokenfield__token")&&(this._element.addClass("is-selected"),this._removeToken(this._element.find(".ztokenfield__close"),orgEvent),textbox.focus()),void 0!==this._editTextBox&&(this._editTextBox.remove(),this._editTextBox=void 0,this._triggerInputFocus());"none"===this.options.dropdownList.itemType&&this._hideSuggestions(),textbox.attr("id")===this._input.attr("id")&&this._resizeSearchArea(textbox,this.options.placeholder?textbox.attr("placeholder"):void 0)},_handleSelection:function(orgEvent,ui){if(this._triggerInputFocus(),ui.menuitem.attr("id")!==this._elementId+"noresults"&&!ui.menuitem.hasClass("zmenu__title")&&ui.menuitem.attr("id")!==this._elementId+"loaderror"){var textbox=void 0!==this._editTextBox?this._editTextBox:this._input;if(ui.menuitem.attr("id")===this._elementId+"moreaction"){var action=this.options.dropdownList.moreResultsAction;action&&"function"==typeof action&&action(),this._dispatchEvent("MOREACTIONSELECT",{value:ui.menuitem,query:this._params.query},orgEvent)}else{var itemData=ui.menuitem.data().metadata;if(this.options.dropdownList.closeOnSelect&&"checkbox"!==this.options.dropdownList.itemType||orgEvent.preventDefault(),this._lastSelectedMenuItem=ui.menuitem,$(ui.menuitem).prop("checked")||"checkbox"!==this.options.dropdownList.itemType){if(!this._isJSONSource)return;var returnValue=this._dispatchEvent("ITEMSELECT",{value:ui.menuitem},orgEvent);if(returnValue){if(this._selectedItem=this.getData(ui.menuitem),this._editTextBox){var index=this._currentTokenData.metadata?this._currentTokenData.metadata.index:this._currentTokenData.index,id=this._currentTokenData.metadata?this._currentTokenData.metadata.id:this._currentTokenData.tokenId;this._buildToken(ui.menuitem,textbox,orgEvent,index,id)}else this._buildToken(ui.menuitem,textbox,orgEvent);void 0!==this._editTextBox&&(this._editTextBox.remove(),this._editTextBox=void 0)}}else{var itemKey=void 0!==itemData.itemValue?itemData.itemValue.itemIdentifier:this._mapJSONToData(itemData,this._dataMapping.itemIdentifier);this.removeToken(itemKey,orgEvent)}if("checkbox"===this.options.dropdownList.itemType&&"after-cursor"===this.options.dropdownList.position){this._triggerInputFocus();var pos=this._positionMenuAtCursorPosition(this._input);this._menu.css({top:pos.top+15,left:pos.left})}}}},_handleHover:function(orgEvent,ui){if(ui.menuitem.attr("id")===this._elementId+"noresults"||ui.menuitem.hasClass("zmenu__title")||ui.menuitem.attr("id")===this._elementId+"moreaction")this._input.val(this._params.query);else if(this._isJSONSource){var value=void 0!==ui.menuitem.data().itemValue?ui.menuitem.data().itemValue.text:this._mapJSONToData(ui.menuitem.data().metadata,this._dataMapping.text);this._input.val(value)}else this._input.val(ui.menuitem.data().metadata.label);this._resizeSearchArea(this._input)},_removeAddedItem:function(){if(this._tokensCollection.length){var addedTokens,base=this;addedTokens=this._tokensCollection.map(function(item){if(item.data("invalidToken")!==!0){var value=item.data().metadata[base._dataMapping.value];return value}});var base=this;$.each(addedTokens,function(index,item){base._filteredResult=$.grep(base._filteredResult,function(val){var value=base._mapJSONToData(val,base._dataMapping.value);return void 0===item||void 0!==item&&void 0!==value&&value.toString()!==item.toString()?!0:void 0})})}},_search:function(query,container,orgEvent){return this._super(query,container,orgEvent)},_updateCheckedState:function(){if("checkbox"===this.options.dropdownList.itemType){var selectedId=[];if(this._tokensCollection.length){for(var i=0;i<this._tokensCollection.length;i++){var id,tokenData=this._tokensCollection[i].data().metadata;void 0===tokenData||tokenData.isNewValue||(id=this._elementId+this._removeSpecialChar(this._mapJSONToData(tokenData,this._dataMapping.value))),this._menu.find("#"+id).length&&-1===selectedId.indexOf("#"+id)&&selectedId.push("#"+id)}selectedId.length&&this._menu.zmenu("setMenuItemsAttribute",selectedId,"checked",!0)}}},_renderSuggestions:function(container,orgEvent){this._super(container,orgEvent),this._loader&&(this._loader.closest(".zmenu--loading").remove(),this._loader=null),this._menu.removeData("fixedArea")},_renderMenu:function(container){var def=this._super(container);return this._updateCheckedState(),def},_buildToken:function(menuItem,textbox,orgEvent,currentIndex,currentId){var itemKey,itemName,itemTitle,itemImage,values,maxAllowed=this.options.maxAllowedValues;if((values=this._selectedItem.itemValue)&&(itemKey=values.itemIdentifier,itemName=values.text,itemTitle=values.titleText,itemImage="image-text"===this.options.tokens.contentType?values.image:!1),!maxAllowed||maxAllowed&&this._tokensCount<maxAllowed){if(this._addCustomCloseIcon(),this._tokenContainer=$("<div class='ztokenfield__token' tabindex='-1'>"),this._tokenText=$('<span class ="ztokenfield__text">').text(itemName),void 0!==itemTitle&&this._tokenText.attr("title",itemTitle),itemImage!==!1&&void 0!==itemImage){var tokenImage=this.options.isImageSourceSprited?$("<i class='ztokenfield__image'>").addClass(itemImage):$("<img class='ztokenfield__image' src='"+itemImage+"'>");tokenImage.appendTo(this._tokenContainer)}this._insertToken(menuItem,textbox,orgEvent,currentIndex,currentId)}else maxAllowed&&this._tokensCount>=maxAllowed&&this._dispatchEvent("TOKENADDFAIL",{failureType:"limit exceeded"},orgEvent)},_animateHandler:function(token,orgEvent){var base=this;token.addClass("on-remove").animate({width:0},"fast",function(){for(var tokenToRemove=token.data().metadata,selectedItems=base.options.values,i=0;i<selectedItems.length;i++){var itemKey=tokenToRemove.invalidToken?tokenToRemove.id:base._mapJSONToData(tokenToRemove,base._dataMapping.itemIdentifier),tokenToCompare=tokenToRemove.invalidToken?selectedItems[i].id:base._mapJSONToData(selectedItems[i],base._dataMapping.itemIdentifier);if(itemKey===tokenToCompare){selectedItems.splice(i,1);break}}if(token.remove(),token=null,base._checkContainerHeight(),"after-cursor"===base.options.dropdownList.position){base._triggerInputFocus();var pos=base._positionMenuAtCursorPosition(base._input);base._menu.css({top:pos.top+15,left:pos.left})}base.options.placeholder&&0===base.options.values.length&&0===base._input.val().length&&(base._input.attr("placeholder",base.options.placeholder),base._resizeSearchArea(base._input,base.options.placeholder)),base._dispatchEvent("AFTERTOKENREMOVE",tokenToRemove,orgEvent)})},_removeToken:function(element,orgEvent,index){var data,invalidToken,token,matchedId,id,canBeRemoved=this._dispatchEvent("BEFORETOKENREMOVE",$(element).parent(),orgEvent),tokenEncountered=!1;if(canBeRemoved&&element){for(var tokenToRemove=$(element).parent(),i=0;i<this._tokensCollection.length;i++)if(this._tokensCollection[i].attr("id")===tokenToRemove.attr("id")){if(tokenEncountered=!0,matchedId=tokenToRemove.attr("id"),data=this._tokensCollection[i].data().metadata,invalidToken=this._tokensCollection[i].data("invalidToken"),id=tokenToRemove.attr("id"),this._menu.is(":visible"))if("none"===this.options.dropdownList.itemType)this._hideSuggestions();else if($("#"+id).length&&!invalidToken&&!data.isNewValue){var id=this._elementId+this._removeSpecialChar(this._mapJSONToData(data,this._dataMapping.value));this._menu.zmenu("setMenuItemsAttribute",["#"+id],"checked",!1),this._lastSelectedMenuItem=$("#"+id),this._menu.zmenu("hoverMenuItem",this._lastSelectedMenuItem)}invalidToken&&(data.invalidToken=invalidToken);var token=this._tokensCollection[i];if(this.options.tokens.animateOnRemove&&(orgEvent&&"dblclick"!==orgEvent.type&&"Enter"!==orgEvent.key||void 0===orgEvent))token.animate({opacity:.01},"fast",this._animateHandler.bind(this,token,orgEvent));else if(this._tokensCollection[i].remove(),this._tokensCollection[i]=null,tokenToRemove=null,this._element=null,this._checkContainerHeight(),"after-cursor"===this.options.dropdownList.position){this._triggerInputFocus();var pos=this._positionMenuAtCursorPosition(this._input);this._menu.css({top:pos.top+15,left:pos.left})}this._tokensCollection.splice(i,1);for(var j=i;j<this._tokensCollection.length;j++)this._tokensCollection[j].data().metadata.index=j;void 0===this._editTextBox&&(void 0===index||orgEvent&&(orgEvent.metaKey||orgEvent.ctrlKey)&&89===orgEvent.keyCode)?(this._performedStack.splice(i,1),this._performedStack.push({action:"Remove",tokenData:data,tokenId:id,index:i})):void 0===this._editTextBox&&void 0!==index&&orgEvent&&(orgEvent.metaKey||orgEvent.ctrlKey)&&90===orgEvent.keyCode&&this._recallStack.push({action:"Insert",tokenData:data,tokenId:id,index:i}),!invalidToken&&this._tokensCount--;break}if(!this.options.tokens.animateOnRemove||this.options.tokens.animateOnRemove&&orgEvent&&("dblclick"===orgEvent.type||"Enter"===orgEvent.key)){for(var tokenToCompare,selectedItems=this.options.values,itemKey=invalidToken?matchedId:this._mapJSONToData(data,this._dataMapping.itemIdentifier),i=0;i<selectedItems.length;i++)if(tokenToCompare=void 0===selectedItems[i].errorValue?this._mapJSONToData(selectedItems[i],this._dataMapping.itemIdentifier):data?data.id:void 0,itemKey&&tokenToCompare&&itemKey===tokenToCompare){this.options.values.splice(i,1);break}this.options.placeholder&&0===this.options.values.length&&0===this._input.val().length&&(this._input.attr("placeholder",this.options.placeholder),this._resizeSearchArea(this._input,this.options.placeholder)),tokenEncountered&&this._dispatchEvent("AFTERTOKENREMOVE",data,orgEvent)}}},_triggerInputFocus:function(){this._focusTriggered=!0,this._input.focus()},_bindTokenEvents:function(){var base=this;this.options.disabled||(this._closeButton.off("click."+this.componentName).on("click."+this.componentName,function(orgEvent){orgEvent.stopPropagation(),base._removeToken(orgEvent.currentTarget,orgEvent),base._triggerInputFocus()}),this._tokenContainer.off("focus."+this.componentName).on("focus."+this.componentName,function(){base.container.addClass("has-focus")}),this._tokenContainer.off("click."+this.componentName).on("click."+this.componentName,this._tokenClickHandler.bind(this)).on("mousedown."+this.componentName,this._tokenMousedownHandler.bind(this)),this.options.tokens.editable&&this._tokenContainer.off("dblclick."+this.componentName).on("dblclick."+this.componentName,function(orgEvent){base._editToken($(orgEvent.currentTarget),orgEvent)}))},_tokenMousedownHandler:function(){this._isFocusOutside=0===$(document.activeElement).closest(".ztokenfield").length},_tokenClickHandler:function(orgEvent){var currentTarget=$(orgEvent.currentTarget);if(this._clickReset=!1,this._isFocusOutside&&this._dispatchEvent("FOCUS",orgEvent),this.container.addClass("has-focus"),orgEvent.metaKey||orgEvent.ctrlKey||orgEvent.shiftKey||(this.container.find(".is-selected").removeClass("is-selected"),this._clickReset=!0),orgEvent.shiftKey){for(var elementsLength=this.container.find(".is-selected").length,firstIndex=$(this.container.find(".is-selected")[0]).data().metadata.index,lastIndex=$(this.container.find(".is-selected")[elementsLength-1]).data().metadata.index,i=firstIndex;lastIndex>=i;i++)this.container.find("#"+this._elementId+"-token-"+i).addClass("is-selected");this._clickReset=!1}currentTarget.addClass("is-selected"),currentTarget.focus(),this._triggerPasteHelper()},_triggerPasteHelper:function(){var activeTokens=this.container.find(".ztokenfield__token.is-selected"),base=this;base._activeTokens=[];var finalValue=$.map(activeTokens,function(token,j){var key,value,data;if(base._activeTokens[j]=$(token).attr("id"),data=$(token).data().metadata,$(token).data("invalidToken")!==!0&&data){key=base._mapJSONToData(data,base._dataMapping.itemIdentifier),value=base._mapJSONToData(data,base._dataMapping.text);var finalValue=base._pasteRegExp.replace(/#value#/g,value).replace(/#id#/g,key);return finalValue}}).join(this.options.delimiter);this._pasteHelperTextBox.val(finalValue).select()},_editToken:function(tokenContainer,orgEvent){if(tokenContainer.hasClass("ztokenfield__token")){this._editTextBox=$("<input type='text' id='dblclick-input-"+this._elementId+"'>").addClass("ztokenfield__textbox");var value,matchFound,itemData,dataValue=tokenContainer.data();if(dataValue=dataValue.invalidToken,this._tokenOption=this.options.tokens,dataValue!==!0){itemData=tokenContainer.data().metadata,this._currentTokenData=itemData,this._currentTokenData.tokenId=tokenContainer.attr("id");var tokenKey,tokenValue;void 0!==itemData&&(tokenValue=this._mapJSONToData(itemData,this._dataMapping.text),tokenKey=this._mapJSONToData(itemData,this._dataMapping.itemIdentifier));try{var pattern=this._tokenOption.editable.pattern?this._tokenOption.editable.pattern:this._CONSTANTS.pattern;if(!pattern.match(/#value#/g)&&!pattern.match(/#id#/g))throw this._CONSTANTS.patterFormatError;value=pattern.replace(/#value#/g,tokenValue).replace(/#id#/g,tokenKey),matchFound=!0,this._editTextBox.insertBefore(tokenContainer),this._removeToken(tokenContainer.find(".ztokenfield__close"),orgEvent),this._editTextBox.focus()}catch(error){throw error}}else this._editTextBox.insertBefore(tokenContainer).addClass("invalid"),value=tokenContainer.find(".ztokenfield__text").text(),matchFound=!0,itemData=tokenContainer.data(),this._currentTokenData=itemData,this._currentTokenData.tokenId=tokenContainer.attr("id"),this._removeToken(tokenContainer.find(".ztokenfield__close"),orgEvent),this._editTextBox.focus();if(void 0!==this._input.attr("placeholder")&&(this._input.removeAttr("placeholder"),this._resizeSearchArea(this._input,void 0)),matchFound){matchFound=!1,this._editTextBox.val(value).select(),this._resizeSearchArea(this._editTextBox),this._input.val("");var base=this;this._editTextBox.off("focus."+this.componentName).on("focus."+this.componentName,function(){base.container.addClass("has-focus")})}}},_insertToken:function(menuItem,textbox,orgEvent,index,tokenId,isNewValue){var metadata,isDuplicate,base=this,value=textbox.val();if(void 0!==menuItem&&(metadata=menuItem[0]&&menuItem[0].nodeName?menuItem.data().metadata:menuItem),metadata&&void 0===metadata.errorValue&&!this._defaultSelected&&!this.options.allowDuplicateValues&&(isDuplicate=this._isDuplicateToken(void 0!==metadata.itemValue?metadata.itemValue:metadata)),!isDuplicate&&"checkbox"!==this.options.dropdownList.itemType&&this.options.dropdownList.closeOnSelect&&textbox.val(""),0===this._tokensCollection.length&&(this._input.attr("placeholder")&&this._input.removeAttr("placeholder"),this._resizeSearchArea(this._input,void 0)),isDuplicate)this.options.dataValidation&&this._addErrorToken(menuItem.itemValue?menuItem.itemValue.text:textbox.val(),orgEvent),this._dispatchEvent("TOKENADDFAIL",{failureType:"Duplicate"},orgEvent);else{this._closeButton.appendTo(this._tokenContainer),this._tokenText.appendTo(this._tokenContainer),void 0!==tokenId?this._tokenContainer.attr("id",tokenId):this._tokenContainer.attr("id",this._elementId+"token-"+this._uniqueIndex++);var returnValue=!0,isModified=!1,tokenData=metadata&&metadata.itemValue?metadata.itemValue:metadata;if(tokenData.isModified?(isModified=!0,tokenData.isModified=!1):returnValue=this._dispatchEvent("BEFORETOKENADD",{token:this._tokenContainer,tokenData:tokenData,isModified:!1},orgEvent),returnValue){if(tokenData.isModified)return this._selectedItem=metadata.itemValue?metadata:metadata.itemValue=metadata,void(this.options.dataValidation&&tokenData.isInvalid?this._addErrorToken(tokenData.errorValue,orgEvent):this._buildToken(menuItem,textbox,orgEvent,index,this._tokenContainer.attr("id")));this._tokenContainer.insertBefore(index||0===index?index<this._tokensCollection.length?this._tokensCollection[index]:textbox:textbox),this.options.tokens.sortable&&this.container.off("zsortablemousedrag").on("zsortablemousedrag",function(){base._menu.is(":visible")&&base._hideSuggestions()});var data=this.getData(this._tokenContainer);if(metadata)if(metadata.errorValue)data.errorValue=metadata.errorValue,data.id=this._tokenContainer.attr("id");else{if(metadata.itemValue)for(var i in metadata.itemValue)"id"!=i&&i in this._dataMapping&&(data[this._dataMapping[i]]=metadata.itemValue[i]);else for(var key in metadata)"id"!=i&&(data[key]=metadata[key]);isNewValue&&(data.isNewValue=isNewValue)}if(data.index=void 0!==index?index:this._uniqueIndex-1,void 0!==index)for(var i=index;i<this._tokensCollection.length;i++)this._tokensCollection[i].data().metadata.index=i+1;if(this.options.tokens.sortable){var data=this.container.data("zsortable");data&&this.container.zsortable("destroy"),this.container.zsortable({leave:"ztokenfield__close"})}if(this.options.maxAllowedValues&&metadata&&!metadata.errorValue&&this._tokensCount++,!this._defaultSelected||isModified){var data=this._tokenContainer.data().metadata,jsonData={};if(data&&void 0===data.errorValue)for(var key in this._dataMapping)void 0!==this._dataMapping[key]&&(jsonData[this._dataMapping[key]]=data[this._dataMapping[key]]);else jsonData=data,jsonData.type="error";this.options.values.length?void 0!==index||isModified?isModified&&(this.options.values.splice(data.index,1),this.options.values.splice(data.index,0,jsonData)):this.options.values.push(jsonData):!isModified&&this.options.values.push(jsonData),this.element.data("selectedTokens",this.options.values)}this._dispatchEvent("AFTERTOKENADD",{token:this._tokenContainer},orgEvent),this._checkIfTokenAdded(this._tokenContainer,index),this._resizeSearchArea(this._input,void 0),this._bindTokenEvents(),orgEvent&&orgEvent.keyCode!==this._keyCode.TAB&&this._triggerInputFocus(),void 0!==index&&(orgEvent.metaKey||orgEvent.ctrlKey)&&90===orgEvent.keyCode?(this._recallStack.push({action:"Remove",tokenData:data,tokenId:this._tokenContainer.attr("id"),index:index}),this._performedStack.splice(index,0,{action:"Insert",tokenData:data,tokenId:this._tokenContainer.attr("id"),index:index})):void 0!==index&&(orgEvent.metaKey||orgEvent.ctrlKey)&&89===orgEvent.keyCode?this._performedStack.push({action:"Insert",tokenData:data,tokenId:this._tokenContainer.attr("id"),index:index}):void 0===index&&this._performedStack.push({action:"Insert",tokenData:data,tokenId:this._tokenContainer.attr("id"),index:this._tokensCollection.length-1}),this._checkContainerHeight()}void 0!==this._editTextBox&&this._tokenContainer.focus().addClass("is-selected"),"checkbox"===this.options.dropdownList.itemType&&this._menu.is(":visible")&&this._searchTimeout(value.length?this._params.query:this._params.query="",textbox,orgEvent)}this._tokenContainer=null,this._tokenText=null,this._closeButton=null},_checkContainerHeight:function(){var currentHeight=this.container.css("height");if(currentHeight!==this._prevContainerHeight&&this._menu.is(":visible")&&(this._lastSelectedMenuItem||this._menu.find("li").length)){this._menu.zmenu("show",{mustBeShown:!0,preventHover:!0,positionAlterable:!0});var item=this._lastSelectedMenuItem?this._lastSelectedMenuItem:$(this._menu.find("li")[this._dataMapping.groupLabel?1:0]);this._menu.zmenu("hoverMenuItem",item)}this._prevContainerHeight=currentHeight},_reformToken:function(orgEvent){var itemData=this._currentTokenData;if(this._escKeyPressed)value=itemData.invalidToken?!0:!1;else{var dataHandled=this._dispatchEvent("TOKENUPDATE",{textboxValue:this._editTextBox.val(),itemContent:this._currentTokenData},orgEvent);itemData="object"==typeof dataHandled?dataHandled.itemContent:itemData,value="object"==typeof dataHandled?dataHandled.itemContent.invalidToken:itemData.invalidToken}if(value!==!0){var itemValue=(this._mapJSONToData(itemData,this._dataMapping.itemIdentifier),this._mapJSONToData(itemData,this._dataMapping.text)),itemTitle=this._mapJSONToData(itemData,this._dataMapping.titleText),itemIcon=this._mapJSONToData(itemData,this._dataMapping.image);if(itemValue.length){if(this._addCustomCloseIcon(),this._tokenContainer=$("<div class='ztokenfield__token' tabindex='-1'>"),this._tokenText=$('<span class ="ztokenfield__text">').text(itemValue),void 0!==itemTitle&&this._tokenText.attr("title",itemTitle),"image-text"===this.options.tokens.contentType&&itemIcon!==!1&&void 0!==itemIcon){var tokenImage=this.options.isImageSourceSprited?$("<i class='ztokenfield__image'>").addClass(itemIcon):$("<img class='ztokenfield__image' src='"+itemIcon+"'>");tokenImage.appendTo(this._tokenContainer)}var data={};data.itemValue={};for(var key in this._dataMapping)data.itemValue[key]=this._mapJSONToData(itemData,this._dataMapping[key]);
this._insertToken(data,this._editTextBox,orgEvent,itemData.index,itemData.tokenId),this._performedStack.push({action:"Insert",tokenData:itemData,tokenId:itemData.tokenId,index:itemData.index})}}else if(this._escKeyPressed)itemData.invalidToken&&this._addErrorToken(itemData.metadata.errorValue,orgEvent,itemData.index,itemData.tokenId);else{var value=this._editTextBox.val();value.length&&this._addErrorToken(value,orgEvent,itemData.index,itemData.tokenId)}this._editTextBox.remove(),this._editTextBox=void 0,this._escKeyPressed=!1},_checkIfTokenAdded:function(token,index){this._tokensCollection.length?void 0===index?this._tokensCollection.push(token):this._tokensCollection.splice(index,0,token):this._tokensCollection.push(token)},_isDuplicateToken:function(tokenData){for(var isDuplicate=!1,i=0;i<this.options.values.length;i++){if(tokenData.itemIdentifier===this.options.values[i][this._dataMapping.itemIdentifier]){isDuplicate=!0;break}isDuplicate=!1}return isDuplicate},_addToken:function(value,orgEvent,index,tokenId,isNewValue){if(value.invalidToken!==!0){var maxAllowed=this.options.maxAllowedValues;if(!maxAllowed||maxAllowed&&this._tokensCount<maxAllowed){var itemName=(value[this._dataMapping.itemIdentifier]?value[this._dataMapping.itemIdentifier]:value.itemValue&&value.itemValue.itemIdentifier,value[this._dataMapping.text]?value[this._dataMapping.text]:value.itemValue&&value.itemValue.text),itemTitle=value[this._dataMapping.titleText]?value[this._dataMapping.titleText]:value.itemValue&&value.itemValue.titleText,icon=value[this._dataMapping.image]?value[this._dataMapping.image]:value.itemValue&&value.itemValue.image;if(this._addCustomCloseIcon(),this._tokenContainer=$("<div class='ztokenfield__token' tabindex='-1'>"),this._tokenText=$('<span class ="ztokenfield__text">').text(itemName),void 0!==itemTitle&&this._tokenText.attr("title",itemTitle),"image-text"===this.options.tokens.contentType&&void 0!==icon){var tokenImage=this.options.isImageSourceSprited?$("<i class='ztokenfield__image'>").addClass(icon):$("<img class='ztokenfield__image' src='"+icon+"'>");tokenImage.appendTo(this._tokenContainer)}var textbox=void 0!==this._editTextBox?this._editTextBox:this._input;this._insertToken(value,textbox,orgEvent,index,tokenId,isNewValue)}else maxAllowed&&this._tokensCount>=maxAllowed&&this._dispatchEvent("TOKENADDFAIL",{failureType:"limit exceeded"},orgEvent)}else this._addErrorToken(value.errorValue,orgEvent,index,tokenId)},_removeTokens:function(tokens,value){for(var j=0;j<tokens.length;j++){var metadata=this.getData($(tokens[j])),itemKey=this._mapJSONToData(metadata,this._dataMapping.itemIdentifier);if(itemKey==value){var tokenItem=$(tokens[j]).find(".ztokenfield__close");if(this._removeToken(tokenItem),!this.options.allowDuplicateValues)break}}},_getTokens:function(selectedItems,value){for(var j=0;j<selectedItems.length;j++){var itemKey=this._mapJSONToData(selectedItems[j],this._dataMapping.itemIdentifier);if(itemKey===value)return selectedItems[j]}},addTokens:function(value){if(value&&$.isArray(value))for(var i=0;i<value.length;i++){var prevIndex=i,returnValue=this.addToken(value[i],i);returnValue&&value.splice(i,1),returnValue&&(i=prevIndex-1)}},addToken:function(value,index){if(value&&!$.isArray(value)){var tempObj={};tempObj.itemValue={};for(var key in this._dataMapping)tempObj.itemValue[key]=value[this._dataMapping[key]];var shouldPreventAdd,isValidValue;if(this.options.dataSource&&!this._ajaxSource&&"error"!==value.type){for(var i=0;i<this.options.dataSource.length;i++){if(this.options.dataSource[i][this._dataMapping.itemIdentifier]===tempObj.itemValue.itemIdentifier){isValidValue=!0;break}isValidValue=!1}this.options.acceptNewValues||isValidValue||(shouldPreventAdd=!0)}if("error"!==value.type){var maxAllowed=this.options.maxAllowedValues;if(shouldPreventAdd||!(maxAllowed&&this._tokensCount<maxAllowed)&&maxAllowed){if(maxAllowed&&this._tokensCount>=maxAllowed)return this._defaultSelected&&this.options.values.splice(index,1),this._dispatchEvent("TOKENADDFAIL",{failureType:"limit exceeded"}),!0;if(shouldPreventAdd)return this._defaultSelected&&this.options.values.splice(index,1),this._dispatchEvent("TOKENADDFAIL",{failureType:"deny new value"}),!0}else this._addToken(tempObj),!isValidValue&&this.options.acceptNewValues&&this.options.dropdownList.acceptNewValues&&this.options.dataSource instanceof Array&&this.options.dataSource.push(value)}else"error"===value.type&&this._addErrorToken(value.errorValue)}},getValues:function(value){var tokens=[];if($.isArray(value)&&this.options.values&&this.options.values.length){for(var i=0;i<value.length;i++)tokens.push(this._getTokens(this.options.values,value[i]));return tokens}},getValue:function(value){return void 0===value||$.isArray(value)?void 0:this._getTokens(this.options.values,value)},getAllValues:function(){return this.options.values},removeTokens:function(value){var allTokens=this.container.find(".ztokenfield__token");if($.isArray(value)&&allTokens&&allTokens.length)for(var i=0;i<value.length;i++)this._removeTokens(allTokens,value[i])},removeToken:function(value,orgEvent){var allTokens=this.container.find(".ztokenfield__token");void 0===value||$.isArray(value)||this._removeTokens(allTokens,value,orgEvent)},removeAllTokens:function(destroyCalled){for(var allTokens=this.container.find(".ztokenfield__token"),removedTokenData=[],i=0;i<allTokens.length;i++){var data=$(allTokens[i]).data().metadata,jsonData={};for(var key in this._dataMapping)void 0!==this._dataMapping[key]&&(jsonData[this._dataMapping[key]]=data[this._dataMapping[key]]);removedTokenData[i]=jsonData}!destroyCalled&&this._dispatchEvent("BEFORETOKENREMOVE",{tokensToBeRemoved:removedTokenData}),allTokens.remove(),!destroyCalled&&this._dispatchEvent("AFTERTOKENREMOVE",{tokensRemoved:removedTokenData}),this._tokensCollection=[],this.options.values=[],this._tokensCount=0},hasInvalidTokens:function(){var hasErrorToken;if(this.options.dataValidation){for(var i=0;i<this.options.values.length;i++){if(void 0!==this.options.values[i].type&&"error"===this.options.values[i].type){hasErrorToken=!0;break}hasErrorToken=!1}return hasErrorToken?!0:!1}return!1},_disableContainer:function(){this.element.attr("disabled",!0),this.container.addClass("is-disabled").attr("aria-disabled","true"),this.element.off("."+this.componentName),this.container.off("."+this.componentName).off(".zsortable").find("*").off("."+this.componentName).off(".zsortable"),this._input.attr("disabled",!0)},search:function(query){this._input[0].value=query;var values=this.options.values;this._resizeSearchArea(this._input,values&&values.length?void 0:this.options.placeholder),this._searchTimeout(query,this._input)},setAttribute:function(optionName,value){var optionsList=["dataMapping","lazyLoadData","search","dataSource","autoComplete","dropdownList","isImageSourceSprited"],oldValue=this.options[optionName];if(this.options[optionName]=value,"className"===optionName)oldValue&&this.container.removeClass(oldValue),this.container.addClass(value);else if("values"===optionName)this._defaultSelected=!0,this.addTokens(this.options.values),this._defaultSelected=!1;else if("placeholder"===optionName)value?(this._input.attr("placeholder",value),this._resizeSearchArea(this._input,this._input.attr("placeholder"))):this._input.removeAttr("placeholder");else if("tokens"===optionName){if("object"==typeof value){if(value.showRemoveButtonOnHover?this.container.removeClass("ztokenfield--closeshown"):value.showRemoveButtonOnHover||this.container.addClass("ztokenfield--closeshown"),oldValue.sortable){var data=this.container.data("zsortable");data&&this.container.zsortable("destroy")}value.sortable&&$.fn.zsortable&&this.container.zsortable({leave:"ztokenfield__close",container:"parent"})}}else if("disabled"===optionName){if(value)this._disableContainer();else if(this.element.attr("disabled")){this.element.removeAttr("disabled"),this.container.removeClass("is-disabled"),this._bindEvents();var base=this;if(this.container.on("click."+this.componentName,".ztokenfield__close",function(orgEvent){base._removeToken($(orgEvent.currentTarget),orgEvent)}),this.options.tokens.sortable){var data=this.container.data("zsortable");data&&this.container.zsortable("enable")}this._input.removeAttr("disabled"),this.container.focus(),this.container.attr("aria-disabled","false")}}else optionsList.indexOf(optionName)>-1?this._super(optionName,value):this._super(optionName,value)},destroy:function(){var componentName=this.componentName;this.container.off("."+componentName).off(".zsortable").find("*").off("."+componentName).off(".zsortable").remove(),this.removeAllTokens(!0),this._isLoaderInited=!1,this._menu.zmenu("destroy"),this._menu.remove(),this.element.off("."+componentName),ZC.$document.off("."+componentName),this.container.remove(),this.options.disabled&&this.element.removeAttr("disabled"),this.element.removeData(componentName).show()}};ZC.registerComponent("ztokenfield",$.zsuggestfield,tokenfieldPrototype),ZC.createTokenfield=function(initObject){var element=$("<div>").attr({id:initObject.id});return element.appendTo("body"),element.ztokenfield(initObject)}}(ZComponents),jQuery(function($){$.extend({_isAjaxUploadCompatible:function(){return void 0==this._isCompatible&&(this._isCompatible="undefined"!=typeof(new XMLHttpRequest).upload),this._isCompatible},_isFileParam:function(value){if("object"==typeof value)try{var val=$(value)[0];if(val.name||val.files||val.nodeType&&$(val).is("input[type=file]"))return!0}catch(e){}return!1},_parseFiles:function(dataArr){var files={},base=this;return dataArr=$.isArray(dataArr)?dataArr:[dataArr],this._isAjaxUploadCompatible()?$.each(dataArr,function(i,data){$.each(data,function(param,value){var isFileParam=base._isFileParam(value);if(isFileParam){var fileVal=[];if($(value).is("input[type=file]")){for(var f=0;f<$(value).length;f++){var val=$(value)[f];val.nodeType&&val.files&&fileVal.push(val.files)}files[param]=fileVal}else files[param]=value;data[param]=void 0,delete data[param]}})}):$.each(dataArr,function(i,data){$.each(data,function(param,value){var isFileParam=base._isFileParam(value);if(isFileParam){var val=$(value)[0];val.nodeType&&$(val).is("input[type=file]")&&val.files&&(value=val.files),files[param]=value,data[param]=void 0,delete data[param]}})}),files},ajaxUpload:function(url,data,callbacks,dataType,synchronous,singleUpload){var files=this._parseFiles(data);return this._getUploader().post(this,url,data,files,callbacks,dataType,synchronous,singleUpload)},ajaxDownload:function(url,data,callbacks,dataType){return this.uploaders.iframeUploader.get(this,url,data,[],callbacks,dataType)},_getUploader:function(){return this.uploaders[this._isAjaxUploadCompatible()?"ajaxUploader":"iframeUploader"]},_getParamFilledURL:function(url,params){return $.each(params,function(param,value){url+=-1==url.indexOf("?")?"?":"&",url+=param+"="+unescape(encodeURIComponent(value))}),url},uploaders:{ajaxUploader:{post:function(base,url,data,files,callbacks,dataType,synchronous,singleUpload){var self=this;files=this._getFiles(files);var reqs=[];return singleUpload?$(files).each(function(i,file){var req=self.upload(base,url,data,file,callbacks,dataType,synchronous);reqs.push(req)}):reqs=self.upload(base,url,data,files,callbacks,dataType,synchronous),this._controller(reqs,files)},_controller:function(reqs,files){return{files:files,abort:function(){$.each(reqs,function(index,req){req.abort()})},getFilesDetails:function(){var details=[];return $(files).each(function(i,file){details.push({name:file.fileName,size:file.size})}),details}}},_getFiles:function(files){var self=this,allFiles=[];return $.each(files,function(paramName,file){file.name?(file.pname=paramName,allFiles.push(file)):$.each(file,function(i,ifile){if(ifile.name)ifile.pname=paramName,allFiles.push(ifile);else for(var nfile=self._getFiles(ifile),i=0;i<nfile.length;i++){var fileObj=nfile[i];fileObj&&(fileObj.pname=paramName,allFiles.push(fileObj))}})}),allFiles.length||(allFiles[0]=void 0),allFiles},_getFileName:function(file){return file.fileName?file.fileName:file.name},_getFileSize:function(file){return file.fileSize?file.fileSize:file.size},upload:function(base,url,data,file,callbacks,dataType,synchronous){var req=new XMLHttpRequest,customData=callbacks.customData?callbacks.customData:void 0;if(req.onreadystatechange=function(){if(4==req.readyState){var m=200==req.status?callbacks.success:callbacks.fail;m&&m(req.responseText,req,customData)}},callbacks.progress){var meter=function(e){var percentage=Math.floor(e.loaded/e.total*100);e.file=file,void 0!==customData?(customData.percentage=percentage,callbacks.progress(e,customData)):callbacks.progress(e,percentage)};req.addEventListener("progress",meter,!1),req.upload.addEventListener("progress",meter,!1)}return callbacks.complete&&(req.addEventListener("load",callbacks.complete,!1),req.upload.addEventListener("load",callbacks.complete,!1)),callbacks.beforeSend&&callbacks.beforeSend(req),req.open("POST",url,!synchronous),this["undefined"!=typeof FormData?"_doFormUpload":"_doBinaryUpload"](req,data,file,callbacks),req},_doFormUpload:function(req,params,files,callbacks){var form=new FormData;$.each(params,function(param,value){form.append(param,value)}),$.each(files,function(i,file){file&&form.append(file.pname,file)}),callbacks.setHeaders&&callbacks.setHeaders(req),req.send(form)},_doBinaryUpload:function(req,params,file,callbacks){var boundaryString="zoho",boundary="---------------"+boundaryString+Math.random(),multiStream="\r\n--"+boundary,paramInputStreamStr="",base=this;$.each(params,function(param,value){paramInputStreamStr+="\r\n"+base._getMultiPartParamStr(param,value),paramInputStreamStr+="\r\n--"+boundary}),multiStream+=paramInputStreamStr,file?(multiStream+="\r\n",multiStream+=this._getMultiPartFileParamStr(file.pname,file),multiStream+="\r\n--"+boundary+"--"):multiStream+="--",callbacks.setHeaders&&callbacks.setHeaders(req),req.setRequestHeader("Content-Length",multiStream.length),req.setRequestHeader("Content-Type","multipart/form-data; charset: UTF-8; accept-charset: UTF-8; boundary="+boundary),req.setRequestHeader("Connection","close"),req.sendAsBinary(multiStream)},_getMultiPartFileParamStr:function(pname,file){return'Content-Disposition: form-data; name="'+pname+'"; filename="'+unescape(encodeURIComponent(file.fileName))+'"\r\nContent-Type: application/octet-stream\r\n\r\n'+file.getAsBinary()},_getMultiPartParamStr:function(pname,pvalue){return'Content-Disposition: form-data; name="'+pname+'"\r\n\r\n'+unescape(encodeURIComponent(pvalue))}},iframeUploader:{post:function(base,url,data,files,callbacks,dataType){return this._perform(base,url,data,files,callbacks,dataType)},get:function(base,url,data,files,callbacks,dataType){return this._perform(base,url,data,files,callbacks,dataType,!0)},_perform:function(base,url,data,files,callbacks,dataType,isGet){var iframe=this._createIframe(),form=this._fillParams(base,url,data,files,iframe.attr("name"),isGet),customData=callbacks.customData?callbacks.customData:void 0,base=this;return iframe.load(function(){var response=base.getResponse($(iframe[0].contentWindow.document.body),dataType);callbacks.success&&callbacks.success(response,void 0,customData),form.remove(),iframe.remove()}),callbacks.beforeSend&&callbacks.beforeSend(),form.submit(),this._controller(iframe,form,files)},getResponse:function(ele,dataType){switch(dataType){case"json":case"jsonp":return $.parseJSON(ele.text());case"html":return ele.html();case"text":default:return ele.text()}},_controller:function(iframe,form,files){return{files:[files],abort:function(){iframe[0].contentWindow.stop()},getFilesDetails:function(){var details=[];return $(files).each(function(i,file){file=$(file),details.push({name:file.val(),size:""})}),details}}},_createIframe:function(){var frameName="uploadFrame"+(new Date).getTime(),iframe=$('<iframe name="'+frameName+'">').attr({src:"about:blank",height:"0",width:"0",frameborder:"0",id:frameName});return this._iframe=iframe,$(document.body).append(iframe),iframe},_getParamFilledForm:function(form,params,files){$.each(params,function(param,value){if(value){var hidden=$("<input type=hidden name="+param+">").attr({value:value});form.append(hidden)}}),$.each(files,function(i,file){file=$(file),file.data("parent",file.parent());var clone=file.clone(!0);clone.insertBefore(file),form.append(file)})},_fillParams:function(base,url,params,files,frameName,isGet){var form=$("<form>").attr({method:isGet?"get":"post",target:frameName,action:url});return isGet||(form.attr("enctype","multipart/form-data"),form[0].encoding="multipart/form-data"),$(document.body).append(form.fadeTo(0,0)),this._getParamFilledForm(form,params,files),form}}}})});var ZDateUtil=function($){return{monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],invalidInput:"Invalid date/time provided. Please provide correct input",century:21,AM:"AM",PM:"PM",_setMonth:function(date,val){var day=date.getDate();if(isNaN(date))return date;for(val-=1,val%=12,date.setMonth(val);val>0&&date.getMonth()!==val;)date.setDate(--day);return date},parsePattern:function(pattern){var acceptedVal=/d(?:d{1,3})?|M(?:M{1,3})?|yy(?:yy)?|h(?:h)?|H(?:H)?|m(?:m)?|s(?:s)|t{2}/g,dateSeperator=pattern.replace(acceptedVal,"\x00").split("\x00"),dateParts=pattern.match(acceptedVal);return dateSeperator&&dateSeperator.length&&dateParts&&dateParts.length?{dateSeperator:dateSeperator,dateParts:dateParts}:!1},_parseDateValue:function(date,pattern,otherFormats){var pattern,finalValue,matchFound=!1,patterns=[];if(date instanceof Date)return{date:date,isValid:!0};otherFormats.length&&(patterns=otherFormats.slice()),patterns.unshift(pattern);for(var date1=date,dateParts=date.match(/[^ -\/:-@\u5e74\u6708\u65e5[-`{-~\t\n\r]+/g)||[],j=0,len=patterns.length;len>j;j++)if(date=date1,"string"==typeof patterns[j]&&(patterns[j]=ZDateUtil.parsePattern(patterns[j])),finalValue=ZDateUtil.parseDate(date,patterns[j]),finalValue.isValid){matchFound=!0;break}return matchFound||(patterns[0].values=dateParts,finalValue=ZDateUtil.getDateFromOffset(date1,finalValue?finalValue.date:void 0,patterns[0])),finalValue},parseDate:function(date,pattern){var val,pattern,filtered,parsedDate={};if(!date)return void 0;if(date instanceof Date)return{date:date,isValid:!0};if("string"!=typeof date||"string"==typeof date&&!date.length)return void 0;var filterDate=function(date){var month=date.slice(0,dateParts[i].length),part=dateParts[i].slice(0,month.length);return month.toLowerCase()===part.toLowerCase()},date1=date;date=date1,"string"==typeof pattern&&(pattern=ZDateUtil.parsePattern(pattern));var part,dateParts=date.match(/[^ -\/:-@\u5e74\u6708\u65e5[-`{-~\t\n\r]+/g)||[];dateParts.indexOf("at")>-1&&dateParts.splice(dateParts.indexOf("at"),1);var pParts=pattern.dateParts.slice();if(date=new Date,dateParts.length===pParts.length)for(var i=0;i<pParts.length;i++)if(val=parseInt(dateParts[i],10),part=pParts[i],isNaN(val)){if("MMM"===part||"MMMM"===part){switch(part){case"MMM":case"MMMM":filtered=ZDateUtil.monthsAbbreviated.filter(filterDate),val=$.inArray(filtered[0],ZDateUtil.monthsAbbreviated)+1}parsedDate[part]=val}else if("tt"===part&&("AM"===dateParts[i]||"PM"===dateParts[i])){var value=dateParts[pParts.indexOf("hh")],hourValue=parseInt(value),modValue=hourValue%12;"AM"===dateParts[i]&&(parsedDate.hh=0===modValue?0:hourValue),"PM"===dateParts[i]&&(parsedDate.hh=0===modValue?12:hourValue+12),parsedDate[part]=value}}else{if(("yyyy"===part||"yy"===part)&&val>9999&&(dateParts[i]="9999"),part.indexOf("d")>-1&&val>31||part.indexOf("M")>-1&&val>12||part.indexOf("y")>-1&&part.length!==dateParts[i].length)break;parsedDate[part]=val}return Object.keys(parsedDate).length&&dateParts.length===Object.keys(parsedDate).length?(date=ZDateUtil._getFormattedDate(parsedDate,date),(-1===pattern.dateParts.indexOf("s")||-1===pattern.dateParts.indexOf("ss"))&&date.setSeconds(0,0),date={date:date,isValid:!0}):date={date:date,isValid:!1},date},getDateFromOffset:function(dateOffset,date,datePattern){var offsetValue;if(0===dateOffset.indexOf("TODAY"))offsetValue=dateOffset.substring(5);else{if(0!==dateOffset.indexOf("FROM_VALUE"))return{date:void 0,isValid:!1};offsetValue=dateOffset.substring(10)}var pattern=/([+-][0-9]+)(DAYS|MONTHS|YEARS|WEEKS)/g,matches=pattern.exec(offsetValue),day=date.getDate(),month=date.getMonth(),year=date.getFullYear(),hour=date.getHours(),minutes=date.getMinutes(),seconds=date.getSeconds();if(!matches)try{var value={date:ZDateUtil._getDateByIntelligence(dateOffset,datePattern),isValid:!0};return value}catch(exception){var value={date:void 0,isValid:!1};return value}for(;matches;){switch(matches[2]||"DAYS"){case"DAYS":day+=parseInt(matches[1],10);break;case"WEEKS":day+=7*parseInt(matches[1],10);break;case"MONTHS":month+=parseInt(matches[1],10),day=Math.min(day,new Date(year,month+1,0).getDate());break;case"YEARS":year+=parseInt(matches[1],10),day=Math.min(day,new Date(year,month+1,0).getDate());break;case"HOURS":hour+=parseInt(matches[1],10);break;case"MINUTES":minutes+=parseInt(matches[1],10);break;case"SECONDS":seconds+=parseInt(matches[1],10)}matches=pattern.exec(offsetValue)}date=ZDateUtil._getDate(year,month,day,hour,minutes,seconds);var returnObj={date:date,isValid:!0};return returnObj},convertOffsetToValue:function(offset){var pattern=/([+-]{1}([0-9])+$)/g,match=pattern.exec(offset);return match?parseInt(match[0]):0},_getFormattedDate:function(parsedDate,date){for(var formattedDate,pattern,executionOrder=["yyyy","yy","M","MM","MMM","MMMM","d","dd","ddd","dddd","H","HH","h","hh","m","mm","s","ss"],i=0;i<executionOrder.length;i++)if(pattern=executionOrder[i],pattern in parsedDate&&!isNaN(parsedDate[pattern])){switch(formattedDate=new Date(date),pattern){case"M":case"MM":case"MMM":case"MMMM":formattedDate=ZDateUtil._setMonth(formattedDate,parsedDate[pattern]);break;case"yyyy":formattedDate.setFullYear(parsedDate[pattern]>9999?9999:parsedDate[pattern]);break;case"yy":var century=ZDateUtil.century-1,year=century.toString()+parsedDate[pattern];formattedDate.setFullYear(parseInt(year));break;case"d":case"dd":case"ddd":case"dddd":formattedDate.setDate(parsedDate[pattern]);break;case"H":case"HH":formattedDate.setHours(parsedDate[pattern]);break;case"h":case"hh":formattedDate.setHours(parsedDate[pattern]);break;case"m":case"mm":formattedDate.setMinutes(parsedDate[pattern]);break;case"s":case"ss":formattedDate.setSeconds(parsedDate[pattern])}isNaN(formattedDate)||(date=formattedDate)}return formattedDate},_getDateByIntelligence:function(date,pattern){var noMatchFound,dateObject=new Date(date),matches=date.match(new RegExp("[-/. ?]","g"))||[];if(isNaN(dateObject)){var colonCount,values=pattern.values,colonMatch=date.match(new RegExp(":","g"));if(colonMatch){var hourValue,minuteValue,secondValue,invalidTime=!1;colonCount=colonMatch.length;var periodIndex,elements=["AM","PM","am","pm"];values&&(values[0]&&(values[0]=parseInt(values[0])),values[1]&&(values[1]=parseInt(values[1])),values[2]&&!isNaN(values[2])&&(values[2]=parseInt(values[2])));for(var i=0;i<elements.length;i++)if(values.indexOf(elements[i])>-1){periodIndex=values.indexOf(elements[i]);break}if(0===colonCount)invalidTime=!0;else if(1===colonCount)if(periodIndex&&periodIndex>-1){var period=values[periodIndex].toUpperCase();if(values[0]>=1&&values[0]<=12&&values[1]>=0&&values[1]<=59){var modValue=values[0]%12;"AM"===period&&(hourValue=0===modValue?0:values[0]),"PM"===period&&(hourValue=0===modValue?12:values[0]+12),minuteValue=values[1]}else invalidTime=!0}else values[0]>=0&&values[0]<=23&&values[1]>=0&&values[1]<=59?(hourValue=values[0],minuteValue=values[1]):invalidTime=!0;else if(2===colonCount)if(periodIndex&&periodIndex>-1){var period=values[periodIndex].toUpperCase();if(values[0]>=1&&values[0]<=12&&values[1]>=0&&values[1]<=59&&values[2]>=0&&values[2]<=59){var modValue=values[0]%12;"AM"===period&&(hourValue=0===modValue?0:values[0]),"PM"===period&&(hourValue=0===modValue?12:values[0]+12),minuteValue=values[1],secondValue=values[2]}}else values[0]>=0&&values[0]<=23&&values[1]>=0&&values[1]<=59&&values[2]>=0&&values[1]<=59?(hourValue=values[0],minuteValue=values[1],secondValue=values[2]):invalidTime=!0;else invalidTime=!0;invalidTime?noMatchFound=!0:(date=new Date,void 0!==hourValue&&date.setHours(hourValue),void 0!==minuteValue&&date.setMinutes(minuteValue),date.setSeconds(void 0!==secondValue?secondValue:0))}else if(matches.length){var month,year,dateElements=date.split(matches[0]);4===dateElements[0].length?(year=parseInt(dateElements[0]),month=parseInt(dateElements[1])):4===dateElements[1].length&&(month=parseInt(dateElements[0]),year=parseInt(dateElements[1])),void 0!==month&&void 0!==year?(date=new Date,date.setFullYear(year),date.setDate(1),date.setMonth(month)):noMatchFound=!0}else noMatchFound=!0;if(noMatchFound)throw new Error(ZDateUtil.invalidInput);return date}return 1===matches.length&&2001===dateObject.getFullYear()&&dateObject.setFullYear((new Date).getFullYear()),dateObject},_getDate:function(year,month,date,hours,mins,seconds){return new Date(year,month,date,hours,mins,seconds)},getUTCDate:function(){return new Date(Date.UTC.apply(Date,arguments))},areDatesEqual:function(first,second){return first.getFullYear()===second.getFullYear()&&first.getMonth()===second.getMonth()&&first.getDate()===second.getDate()},areTimesEqual:function(first,second){return first.getHours()===second.getHours()&&first.getMinutes()===second.getMinutes()&&first.getSeconds()===second.getSeconds()},isGreater:function(first,second){return first.getTime()<second.getTime()?!1:!0},_appendZerosToValue:function(number,chars,last){var zeros=["","0","00","000","0000"];return number=number.toString(),chars=chars||2,last=chars-number.length,last?zeros[chars].substring(0,last)+number:number},_replaceMatchedText:function(date,match){var minutes,result;switch(match){case"d":result=date.getDate();break;case"dd":var date=date.getDate();result=(10>date?"0":"")+date;break;case"ddd":result=ZDateUtil.daysAbbreviated[date.getDay()];break;case"dddd":result=ZDateUtil.days[date.getDay()];break;case"M":result=date.getMonth()+1;break;case"MM":var month=date.getMonth()+1;result=(10>month?"0":"")+month;break;case"MMM":result=ZDateUtil.monthsAbbreviated[date.getMonth()];break;case"MMMM":result=ZDateUtil.months[date.getMonth()];break;case"yy":result=this._appendZerosToValue(date.getFullYear()%100);break;case"yyyy":result=this._appendZerosToValue(date.getFullYear(),4);break;case"h":result=date.getHours()%12||12;break;case"hh":var hours=date.getHours()%12||12;result=(10>hours?"0":"")+hours;break;case"H":result=date.getHours();break;case"HH":var hours=date.getHours();result=(10>hours?"0":"")+hours;break;case"m":result=date.getMinutes();break;case"mm":var minutes=date.getMinutes();result=(10>minutes?"0":"")+minutes;break;case"s":result=date.getSeconds();break;case"ss":var seconds=date.getSeconds();result=(10>seconds?"0":"")+seconds;break;case"tt":result=date.getHours()<12?"AM":"PM";break;case"z":result=date.toString().match(/\(([A-Za-z\s].*)\)/)[1];break;case"zz":result=date.toString().match(/([A-Z]+[+-][0-9]+)/)[1];break;case"zzz":result=date.toString().match(/([A-Z]+[+-][0-9]+.*)/)[1]}return void 0!==result?result:match.slice(1,match.length-1)},formatDate:function(date,format){var dateFormatRegExp=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g;return date instanceof Date?format.replace(dateFormatRegExp,ZDateUtil._replaceMatchedText.bind(this,date)):void 0}}}(jQuery);!function(ZC){var $=ZC.DOMUtil,datetimeFieldPrototype={_create:function(element,options){var locale=options.locale||ZC.locale;this.options.locale=locale,this._initialize(element,options),this._bindEvents()},options:{locale:"en-US",placeholderType:"date-format",placeholder:{year:"year",month:"month",date:"date",hour:"hours",minute:"minutes",second:"seconds",weekDay:"day",period:"AM/PM",AM:"AM",PM:"PM"},value:void 0,format:"dd/MM/yyyy",otherInputFormats:[],century:21,min:void 0,max:void 0,dateStep:1,monthStep:1,yearStep:1,hourStep:1,minuteStep:1,secondStep:1,jumpOnComplete:!0,incrementOnWrapAround:!0,clearButton:"focus",clearButtonSVGIconId:void 0,clearButtonIconClassName:void 0,spinButtons:"always",spinButtonsOrientation:"vertical",incrementButtonSVGIconId:void 0,incrementButtonIconClassName:void 0,decrementButtonSVGIconId:void 0,decrementButtonIconClassName:void 0,picker:!1,pickerId:void 0,pickerOptions:{},calendarIcon:!1,calendarSVGIconId:void 0,calendarIconClassName:void 0,calendarIconAlignment:"right",calendarIconUIType:"label",spinEventTriggerDelay:0,showPickerOnFocus:!1,labels:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],period:"AM/PM",AM:"AM",PM:"PM",invalidInput:"Invalid date/time provided. Please provide correct input",invalidNumber:"Not a number"},className:void 0,disabled:!1,readonly:!1,width:void 0},_EVENTS:{FOCUS:"focus",BLUR:"blur",CHANGE:"change",SPIN:"spin",SPINSTART:"spinstart",SPINEND:"spinend",BEFOREOPEN:"pickerbeforeopen",OPEN:"pickeropen",BEFORECLOSE:"pickerbeforeclose",CLOSE:"pickerclose",BEFOREDATECELLRENDER:"pickerbeforedatecellrender",DATECELLRENDER:"pickerdatecellrender",BEFOREMONTHOPEN:"pickerbeforemonthopen",BEFOREDRILLDOWN:"pickerbeforedrilldown",DRILLDOWN:"pickerdrilldown",DATEMOUSEOVER:"pickerdatemouseover",DATESELECT:"pickerdateselect",MONTHCHANGE:"pickermonthchange",YEARCHANGE:"pickeryearchange",HOURCHANGE:"pickerhourchange",MINUTECHANGE:"pickerminutechange",PERIODCHANGE:"pickerperiodchange",TIMECHANGE:"pickertimechange",DECADECHANGE:"pickerdecadechange",CANCEL:"pickercancel",RESET:"pickerreset",TODAYBUTTONCLICK:"pickertodaybuttonclick"},_initialize:function(element,options){if(this._currentDate=new Date,this._format=this.options.format,this._changeLocaleSpecifierToDateFormat(),this.element=element,this._allowedChars="dMyHhmstz",this.options.calendarIcon){var isPositionCorrect=/^(right|left)$/.test(this.options.calendarIconAlignment);this.options.calendarIconAlignment=isPositionCorrect?this.options.calendarIconAlignment:"right"}this._constructBaseElement(),this._hasTime=this._checkIfDateHasTime();for(var options=["min","max","value"],i=0,len=options.length;len>i;i++){var value=this.options[options[i]];if(value){if("string"==typeof value)if("TODAY"===value||"NOW"===value)this.options[options[i]]=new Date;else{var dateInfo=this._parseDateValue(value,this.options.format);this.options[options[i]]=dateInfo?dateInfo.date:void 0}else value instanceof Date||(this.options[options[i]]=void 0);"value"===options[i]&&void 0!==this.options.value&&!this._viewDate&&(this._viewDate=new Date(this.options.value.getTime()))}if("value"===options[i]&&!this._viewDate){var format=this.options.format;(this.options.min||this.options.max)&&-1===format.indexOf("d")&&(format.indexOf("H")>-1||format.indexOf("m")>-1||format.indexOf("h")>-1)?(this._viewDate=new Date,this._viewDate.setHours(0,0,0,0)):this._viewDate=this._resetViewDate()}}this._performValidations(),this.options.value&&(this._viewDate=new Date(this.options.value.getTime()),this._input.attr("aria-valuenow",ZDateUtil.formatDate(this.options.value,this.options.format))),this.options.min&&this._input.attr("aria-valuemin",ZDateUtil.formatDate(this.options.min,this.options.format)),this.options.max&&this._input.attr("aria-valuemax",ZDateUtil.formatDate(this.options.max,this.options.format)),this._dateModified=this._minutesModified=this._yearModified=this._monthModified=this._secondsModified=this._hoursModified=!0;
for(var i=0;i<this.options.format.length;i++)this._isPartModified(this.options.format[i],this.options.value?!0:!1);if(this._updateElementValue(),this._hasPicker=this.options.picker,this.options.picker&&!this.options.pickerId&&this._initPicker(),this.options.pickerId){var picker=$("#"+this.options.pickerId);if(picker.length){var data=picker.data("zdatetimepicker");Object.keys(data).length&&(this._hasPicker=!0,this._picker=picker,this._picker.zdatetimepicker("setAttribute","forElement",this.container))}}this.options.calendarIcon&&this._createCalendarIcon(),this._hasDate=this._checkIfFormatHasDate(),this._hasDate||(this._hasPicker=!1),this._hasPicker&&(this._immediateCommit=this._picker.zdatetimepicker("getAttribute","immediateCommit")),this._checkIfAPartIsModified()},_checkIfFormatHasDate:function(){var format=this.options.format;return format.indexOf("d")>-1||format.indexOf("dd")>-1},_initPicker:function(){this._picker=$("<div id='"+this.container.attr("id")+"-picker'>").appendTo("body");var min,max;this.options.min&&(min=new Date(this.options.min.getTime()),min.setHours(0,0,0,0)),this.options.max&&(max=new Date(this.options.max.getTime()),max.setHours(0,0,0,0));var pickerOptions=this.options.pickerOptions;pickerOptions.timeFieldType=pickerOptions.timeFieldType||"multiple-select-box",pickerOptions.forElement=this.container,pickerOptions.minDate=min,pickerOptions.maxDate=max,pickerOptions.value=this.options.value,pickerOptions.format=this.options.format,pickerOptions.hourStep=this.options.hourStep,pickerOptions.minuteStep=this.options.minuteStep,this._picker.zdatetimepicker(pickerOptions)},_changeLocaleSpecifierToDateFormat:function(){var format=this._format,isFormatSpecifier=/^(date-short|date-long|date-medium|time-short|time-medium|time-long|datetime-short|datetime-medium|datetime-long|datetime-full)$/.test(format),labels=this.options.labels,locale=this.options.locale,ZLocale=ZC.localeInfo;if(isFormatSpecifier){labels.days=ZLocale[locale].days,labels.daysAbbreviated=ZLocale[locale].daysAbbreviated,labels.months=ZLocale[locale].months,labels.monthsAbbreviated=ZLocale[locale].monthsAbbreviated;var parts=format.split("-");switch(parts[0]){case"date":format=format.replace("date","dateFormat");break;case"time":format=format.replace("time","timeFormat");break;case"datetime":format=format.replace("datetime","dateTimeFormat")}parts=format.split("-");var localeObject=ZLocale[locale],type=localeObject[parts[0]],format=type[parts[1]];this.options.format=localeObject&&type&&format?format:"dd/MM/yyyy"}},_createClearButton:function(){this._clearButton=$("<div class='zinputfield__clearbutton' tabindex=-1/>");var clearIcon=$("<i class='zinputfield__icon'>").appendTo(this._clearButton),buttons=this.container.find(".zinputfield__spinbuttonpane");this._updateClearIcon(clearIcon),this._clearButton.insertAfter("none"!==this.options.spinButtons?"vertical"===this.options.spinButtonsOrientation?buttons:this.container.find(".zinputfield__spinbutton").last():this._input),this._clearButton.on("mouseup."+this.componentName,this._clearButtonClickHandler.bind(this)).on("mousedown."+this.componentName,this._clearButtonMousedownHandler.bind(this))},_clearButtonMousedownHandler:function(orgEvent){orgEvent.stopPropagation(),orgEvent.preventDefault(),clearInterval(this._mouseDownTimer),this._mouseDown=!1,this._getSegment()},_getSegment:function(){for(var lastSelected=[this._input[0].selectionStart,this._input[0].selectionEnd],i=lastSelected[0],j=lastSelected[0]-1,len=this._dateFormat.length;len>i||j>=0;i++,j--){if(i<this._dateFormat.length&&-1!==this._allowedChars.indexOf(this._dateFormat[i]))return void(this._segment=this._dateFormat[i]);if(j>=0&&-1!==this._allowedChars.indexOf(this._dateFormat[j]))return void(this._segment=this._dateFormat[i])}},_clearButtonClickHandler:function(orgEvent){return this._isClearButtonVisible?(orgEvent.preventDefault(),clearInterval(this._mouseDownTimer),this._mouseDown=!1,this._clearActionHandler(),!1):void this._mouseUpHandler()},_clearActionHandler:function(){this._input[0].value="";var tempEvent={type:"input",keyCode:ZC.keyCode.BACKSPACE,preventDefault:function(){}};document.activeElement!==this._input[0]&&this._input.focus(),this._keyUpHandler(tempEvent),this._selectText(this._segment),this._mouseUpHandler(),this._immediateCommit&&(this._lastValue=void 0),this.options.value=void 0,this._picker&&this._picker.zdatetimepicker("setAttribute","value",void 0)},_constructBaseElement:function(){this.container=$("<div class='zinputfield'>"),this.options.className&&this.container.addClass(this.options.className),this.element.attr("title")&&this.container.attr("title",this.element.attr("title")),this._input=$("<input class='zinputfield__textbox'>"),this.element.attr("tabindex")&&this._input.attr("tabindex",this.element.attr("tabindex")),this.container.append(this._input),this.container.insertAfter(this.element.hide()),"none"!==this.options.spinButtons&&(this._createSpinButtons(),this.container.attr("role","spinbutton")),"none"!==this.options.clearButton&&this._createClearButton(),(this.options.readonly||this.options.disabled)&&(this.options.readonly&&(this._input.attr({readonly:!0,"aria-readonly":!0}),this.container.addClass("is-readonly")),this.options.disabled&&this._input.attr({disabled:!0,"aria-disabled":!0}),this.container.addClass("is-disabled")),this.container.attr("id",(this.element.attr("id")?this.element.attr("id"):Math.floor(1e6*Math.random()))+"_"+this.componentName),this.container.outerWidth(this.options.width||this.element.width()),this._input.addClass("h-textboxwidth"),!ZC.Browser.isIE()&&!this.options.disabled&&this._input.addClass("h-hidecursor")},_createCalendarIcon:function(){this.container.addClass("zdatetimefield");var svgProps={props:{viewBox:"0 0 14 14"},nodes:[{rect:{x:"-22.5",y:"3.5",width:"13",height:"10"}},{path:{d:"M-10,4v9h-12V4H-10 M-9,3h-14v11h14V3L-9,3z"}},{rect:{x:"-20.6",y:"1.4",width:"1.2",height:"3.2"}},{path:{d:"M-19.8,1.8v2.5h-0.5V1.8H-19.8 M-19,1h-2v4h2V1L-19,1z"}},{rect:{x:"-20.6",y:"7.4",width:"1.2",height:"1.2"}},{path:{d:"M-19.8,7.8v0.5h-0.5V7.8H-19.8 M-19,7h-2v2h2V7L-19,7z"}},{rect:{x:"-16.6",y:"1.4",width:"1.2",height:"3.2"}},{path:{d:"M-15.8,1.8v2.5h-0.5V1.8H-15.8 M-15,1h-2v4h2V1L-15,1z"}},{rect:{x:"-12.6",y:"1.4",width:"1.2",height:"3.2"}},{path:{d:"M-11.8,1.8v2.5h-0.5V1.8H-11.8 M-11,1h-2v4h2V1L-11,1z"}},{rect:{x:"-16.6",y:"7.4",width:"1.2",height:"1.2"}},{path:{d:"M-15.8,7.8v0.5h-0.5V7.8H-15.8 M-15,7h-2v2h2V7L-15,7z"}},{rect:{x:"-12.6",y:"7.4",width:"1.2",height:"1.2"}},{path:{d:"M-11.8,7.8v0.5h-0.5V7.8H-11.8 M-11,7h-2v2h2V7L-11,7z"}},{rect:{x:"-20.6",y:"10.4",width:"1.2",height:"1.2"}},{path:{d:"M-19.8,10.8v0.5h-0.5v-0.5H-19.8 M-19,10h-2v2h2V10L-19,10z"}},{rect:{x:"-16.6",y:"10.4",width:"1.2",height:"1.2"}},{path:{d:"M-15.8,10.8v0.5h-0.5v-0.5H-15.8 M-15,10h-2v2h2V10L-15,10z"}},{rect:{x:"-12.6",y:"10.4",width:"1.2",height:"1.2"}},{path:{d:"M-11.8,10.8v0.5h-0.5v-0.5H-11.8 M-11,10h-2v2h2V10L-11,10z"}},{path:{d:"M4,3c0.6,0,1-0.4,1-1V1H3v1C3,2.6,3.4,3,4,3z"}},{rect:{x:"2",y:"7",width:"2",height:"2"}},{rect:{x:"2",y:"10",width:"2",height:"2"}},{rect:{x:"6",y:"7",width:"2",height:"2"}},{rect:{x:"6",y:"10",width:"2",height:"2"}},{rect:{x:"10",y:"7",width:"2",height:"2"}},{rect:{x:"10",y:"10",width:"2",height:"2"}},{path:{d:"M12.8,2c0,1-0.8,1.8-1.8,1.8S9.2,3,9.2,2H5.8C5.8,3,5,3.8,4,3.8S2.2,3,2.2,2H0v3v9h14V5V2H12.8z M13,13H1V6h12V13z"}},{path:{d:"M11,3c0.6,0,1-0.4,1-1V1h-2v1C10,2.6,10.4,3,11,3z"}}]};"label"===this.options.calendarIconUIType?this._calendarIcon=$("<div class='zdatetimefield__iconlabel'><i class='zdatetimefield__icon'></i></div>")["right"===this.options.calendarIconAlignment?"insertAfter":"insertBefore"](this._input):(this.container.addClass("h-hasiconbutton"),this._calendarIcon=$("<button type='button' class='zdatetimefield__iconbutton'><i class='zdatetimefield__icon'></i></button>")["right"===this.options.calendarIconAlignment?"insertAfter":"insertBefore"](this._input));var innerIcon=this._calendarIcon.find(".zdatetimefield__icon");this._handleIcon(innerIcon,svgProps,"calendarlabel",this.options.calendarIconClassName,this.options.calendarSVGIconId),"focus"===this.options.spinButtons||"none"===this.options.spinButtons&&this.container.addClass("zdatetimefield--buttonsonhover"),"button"===this.options.calendarIconUIType&&this._hasPicker&&this._calendarIcon.on("click."+this.componentName,this._calendarIconClickHandler.bind(this))},_calendarIconClickHandler:function(orgEvent){orgEvent.preventDefault(),this._picker&&this._picker.is(":visible")?this._picker.zdatetimepicker("close"):this._pickerOpenHandler(orgEvent),this._input.focus(),this._selectCaretPosition(this._input[0],0,0),this._mouseUpHandler(orgEvent),this.container.addClass("has-focus")},_compareDates:function(firstDate,secondDate){return firstDate.getTime()<secondDate.getTime()?!1:!0},_performValidations:function(){for(var stepOptions=["dateStep","monthStep","yearStep","hourStep","minuteStep","secondStep"],max=this.options.max,min=this.options.min,value=this.options.value,i=0,len=stepOptions.length;len>i;i++)this.options[stepOptions[i]]=Number(this.options[stepOptions[i]]),this.options[stepOptions[i]]<=0&&(this.options[stepOptions[i]]=1);min&&max&&!this._compareDates(max,min)&&(this.options.max=void 0),max&&value&&this._compareDates(value,max)&&(this.options.value=max),min&&value&&this._compareDates(min,value)&&(this.options.value=min)},_createSpinButtons:function(){var up=$("<button type='button' class='zinputfield__spinbutton h-up' tabindex=-1>"),innerUp=$("<i class='zinputfield__icon' tabindex=-1>"),down=$("<button type='button' class='zinputfield__spinbutton h-down' tabindex=-1>"),innerDown=$("<i class='zinputfield__icon'>");if(innerUp.appendTo(up),innerDown.appendTo(down),this._updateIcons(innerUp,innerDown),"vertical"===this.options.spinButtonsOrientation){var buttons=$("<div class='zinputfield__spinbuttonpane'>").append(up).append(down);buttons.insertAfter(this._calendarIcon&&"right"===this.options.calendarIconAlignment?this._calendarIcon:this._input)}else this.container.addClass("zinputfield--split"),this._calendarIcon&&"right"===this.options.calendarIconAlignment?(up.insertAfter(this._calendarIcon),down.insertAfter(up)):this.container.append(up,down);this._buttonPane=this.container.find(".zinputfield__spinbuttonpane"),"focus"===this.options.spinButtons&&this._buttonPane.hide(),this.container.find(".h-up,.h-down").on("mousedown."+this.componentName,this._spinButtonsMouseDownHandler.bind(this)).on("mouseup."+this.componentName,this._spinButtonsMouseUpHandler.bind(this))},_spinButtonsMouseUpHandler:function(orgEvent){this._mouseUp=!0,this._checkForChange(orgEvent,this._EVENTS.SPINEND)},_updateClearIcon:function(clearIcon){clearIcon.removeAttr("class").empty().attr("class","zinputfield__icon");var svgData={props:{viewBox:"0 0 21.9 21.9"},nodes:[{path:{d:"M14.1,11.3c-0.2-0.2-0.2-0.5,0-0.7l7.5-7.5c0.2-0.2,0.3-0.5,0.3-0.7s-0.1-0.5-0.3-0.7l-1.4-1.4C20,0.1,19.7,0,19.5,0  c-0.3,0-0.5,0.1-0.7,0.3l-7.5,7.5c-0.2,0.2-0.5,0.2-0.7,0L3.1,0.3C2.9,0.1,2.6,0,2.4,0S1.9,0.1,1.7,0.3L0.3,1.7C0.1,1.9,0,2.2,0,2.4  s0.1,0.5,0.3,0.7l7.5,7.5c0.2,0.2,0.2,0.5,0,0.7l-7.5,7.5C0.1,19,0,19.3,0,19.5s0.1,0.5,0.3,0.7l1.4,1.4c0.2,0.2,0.5,0.3,0.7,0.3  s0.5-0.1,0.7-0.3l7.5-7.5c0.2-0.2,0.5-0.2,0.7,0l7.5,7.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l1.4-1.4c0.2-0.2,0.3-0.5,0.3-0.7  s-0.1-0.5-0.3-0.7L14.1,11.3z"}}]};this._handleIcon(clearIcon,svgData,"clear",this.options.clearButtonSVGIconId,this.options.clearButtonIconClassName)},_updateIcons:function(upIconElement,downIconElement){if(upIconElement.removeAttr("class").empty().attr("class","zinputfield__icon"),downIconElement.removeAttr("class").empty().attr("class","zinputfield__icon"),"vertical"===this.options.spinButtonsOrientation){var upSVGData={props:{"class":"zinputfield__svg",viewBox:"0 0 48 48",width:"100%",height:"100%"},nodes:[{path:{"class":"cls-1",d:"M6,32l5,4L24,22,38,36l4-4L24,13Z"}}]};this._handleIcon(upIconElement,upSVGData,"upicon",this.options.incrementButtonIconClassName,this.options.incrementButtonSVGIconId);var downSVGData={props:{viewBox:"0 0 48 48",width:"100%",height:"100%"},nodes:[{path:{"class":"cls-1",d:"M11.76,13L24,26.521,37.147,13,41,16.9,24,35,7,16.9Z"}}]};this._handleIcon(downIconElement,downSVGData,"downicon",this.options.decrementButtonIconClassName,this.options.decrementButtonSVGIconId)}else{var rightSVGData={props:{viewBox:"1 2 9 9","class":"zinputfield__svg"},nodes:[{polygon:{points:"6.6,10.3 2.9,6.5 6.6,2.7 7.4,3.4 4.3,6.5 7.4,9.6"}}]},leftSVGData={props:{viewBox:"1 2 9 9","class":"zinputfield__svg"},nodes:[{polygon:{points:"4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5"}}]};this._handleIcon(upIconElement,leftSVGData,"lefticon",this.options.incrementButtonIconClassName,this.options.incrementButtonSVGIconId),this._handleIcon(downIconElement,rightSVGData,"righticon",this.options.decrementButtonIconClassName,this.options.decrementButtonSVGIconId)}},_spinButtonsMouseDownHandler:function(orgEvent){if(this._handleMousedownOnControls(orgEvent)){orgEvent.preventDefault(),this._checkForChange(orgEvent,this._EVENTS.SPINSTART),this._input[0].selectionStart===(0||this._input[0].value.length)&&this._input[0].selectionEnd===this._input[0].value.length&&(this._selectCaretPosition(this._input[0],0,0),this._mouseUpHandler(orgEvent));var ev={keyCode:$(orgEvent.target).closest(".h-up").length?ZC.keyCode.UP:ZC.keyCode.DOWN,preventDefault:function(){}};this._keyDownHandler(ev),clearTimeout(this._mouseDownInitializeTimer),this._mouseDownInitializeTimer=setTimeout(this._continousMouseDownHandler.bind(this,orgEvent),250),ZC.$document.off("mouseup."+this.componentName).on("mouseup."+this.componentName,this._documentMouseUpHandler.bind(this))}else $(orgEvent.target).closest(".zinputfield__spinbutton").hasClass("is-disabled")&&orgEvent.preventDefault()},_continousMouseDownHandler:function(orgEvent){this._mouseDownTimer=setInterval(this._repititiveMouseDownHandler.bind(this,orgEvent),100)},_documentMouseUpHandler:function(){clearInterval(this._mouseDownTimer),ZC.$document.off("mouseup."+this.componentName),this._mouseDown=!1},_repititiveMouseDownHandler:function(orgEvent){if(this._mouseDown){var ev={keyCode:$(orgEvent.target).closest(".h-up").length?ZC.keyCode.UP:ZC.keyCode.DOWN,preventDefault:function(){}};this._keyDownHandler(ev)}else clearInterval(this._mouseDownTimer)},_handleMousedownOnControls:function(orgEvent){return this.options.disabled||orgEvent.which>1||this.options.readonly||$(orgEvent.target).closest(".zinputfield__spinbutton").hasClass("is-disabled")?!1:(this._mouseDown=!0,this.container.addClass("has-focus"),!0)},_isPartModified:function(character,value){switch(character){case"y":this._yearModified=value;break;case"M":this._monthModified=value,value||(this._typedMonthChar="");break;case"d":this._dateModified=value;break;case"H":case"h":this._hoursModified=value,value||(this._typedPeriodChar="");break;case"m":this._minutesModified=value;break;case"s":this._secondsModified=value}},_bindEvents:function(){var componentName=this.componentName;("focus"===this.options.clearButton||"focus"===this.options.spinButtons&&"together"===this.options.spinButtonsType)&&this.container.off("mouseenter."+componentName).on("mouseenter."+componentName,this._mouseEnterHandler.bind(this)).off("mouseleave."+componentName).on("mouseleave."+componentName,this._mouseLeaveHandler.bind(this)),this.options.picker&&this._bindPickerEvents();var isIE9=ZC.Browser.isIE()&&9===ZC.Browser.getIEVersion();this._hasPicker&&("label"===this.options.calendarIconUIType||"button"===this.options.calendarIconUIType&&this.options.showPickerOnFocus)&&this.container.on("click."+componentName,this._pickerOpenHandler.bind(this)),this.container.on((ZC.Browser.isFirefox()?"click.":"mouseup.")+componentName,this._containerMouseUpHandler.bind(this)),this._input.on("focus."+componentName,this._focusHandler.bind(this)).on((ZC.Browser.isFirefox()?"click.":"mouseup.")+componentName,this._mouseUpHandler.bind(this)).on((isIE9?"keyup.":"input.")+componentName,this._keyUpHandler.bind(this)).on("keydown."+componentName,this._keyDownHandler.bind(this)).on("keyup."+componentName,this._spinKeyupHandler.bind(this)).on((isIE9?"focus.":"focusin.")+componentName,this._focusInHandler.bind(this)).on((isIE9?"blur.":"focusout.")+componentName,this._focusOutHandler.bind(this)).on("contextmenu."+componentName,this._preventDefault.bind(this)).on("paste."+componentName,this._pasteHandler.bind(this)).on("mousewheel."+componentName+" DOMMouseScroll."+componentName+"  MozMousePixelScroll."+componentName,this._mouseWheelHandler.bind(this))},_containerMouseUpHandler:function(orgEvent){var target=$(orgEvent.target);(target.closest(".zdatetimefield__icon").length||target.closest(".zdatetimefield__iconbutton").length)&&(orgEvent.preventDefault(),this._currentSegment?this._selectText(this._currentSegment):(this._selectCaretPosition(this._input[0],0,0),this._mouseUpHandler()))},_bindPickerEvents:function(){var componentName=this.componentName,baseComponent="zdatetimepicker";this._picker.off("zdatetimepickerbeforefocus zdatetimepickerchange zdatetimepickerclear zdatetimepickerclose zdatetimepickeropen zdatetimepickerbeforeclose zdatetimepickerbeforeopen"),this._picker.on("zdatetimepickerbeforefocus",function(orgEvent){orgEvent.preventDefault()}).on(baseComponent+"change."+componentName,this._applyHandler.bind(this)).on(baseComponent+"clear."+componentName,this._clearHandler.bind(this)).on(baseComponent+"close."+componentName,this._closeHandler.bind(this)).on(baseComponent+"open."+componentName,this._openHandler.bind(this)).on(baseComponent+"beforeclose."+componentName,this._beforeCloseHandler.bind(this)).on(baseComponent+"beforeopen."+componentName,this._beforeOpenHandler.bind(this));for(var eventList=["beforedatecellrender","beforedrilldown","drilldown","datemouseover","dateselect","monthchange","yearchange","hourchange","minutechange","periodchange","timechange","reset","todaybuttonclick"],i=0,len=eventList.length;len>i;i++)this._picker.on(baseComponent+eventList[i]+"."+componentName,this._dispatchPickerEvents.bind(this,eventList[i].toUpperCase()))},_dispatchPickerEvents:function(eventKey,orgEvent,ui){this._dispatchEvent(eventKey,orgEvent,ui)},_openHandler:function(orgEvent){this._dispatchEvent("OPEN",orgEvent,{value:this._input[0].value,dateValue:this.options.value})},_beforeCloseHandler:function(orgEvent){this._dispatchEvent("BEFOREOPEN",orgEvent,{value:this._input[0].value,dateValue:this.options.value})},_beforeOpenHandler:function(orgEvent){var returnValue=this._dispatchEvent("BEFORECLOSE",orgEvent,{value:this._input[0].value,dateValue:this.options.value});return returnValue},_closeHandler:function(orgEvent){this._getSegmentValue(),this._immediateCommit||this.setAttribute("value",this._applyClicked?this.options.value:this._lastValue),this._selectText(this._segment),this._mouseUpHandler(),this._applyClicked=!1,this._dispatchEvent("CLOSE",orgEvent,{value:this._input[0].value,dateValue:this.options.value})},_applyHandler:function(orgEvent,ui){this._applyClicked=!0,this._lastValue=ui.valueString,this._getSegmentValue(),ZDateUtil.formatDate(this.options.value,this.options.format)!==ui.valueString&&this.setAttribute("value",ui.value?ui.valueString:void 0),this._selectText(this._segment),this._mouseUpHandler()},_getSegmentValue:function(){this._getSegment(),this._segment||(this._selectCaretPosition(this._input[0],0,0),this._getSegment())},_clearHandler:function(){this.setAttribute("value",void 0),this._clearActionHandler()},_pickerOpenHandler:function(orgEvent){orgEvent.preventDefault(),!this._picker||this._picker.is(":visible")||this.options.readonly||this.options.disabled||(this.options.pickerId&&this._bindPickerEvents(),this._picker.zdatetimepicker("setAttributes",{forElement:this.container,value:this.options.value}),this._picker.zdatetimepicker("open"))},_mouseEnterHandler:function(){document.activeElement===this._input[0]||this.options.readonly||this.options.disabled||("focus"===this.options.spinButtons&&this._buttonPane&&(this._buttonPane.show(),this.options.calendarIcon&&this.container.removeClass("zdatetimefield--buttonsonhover"),this._clearButton&&this._clearButton.removeClass("h-right")),"focus"===this.options.clearButton&&this._clearButton&&this._checkIfAPartIsModified())},_mouseLeaveHandler:function(){document.activeElement!==this._input[0]&&("focus"===this.options.spinButtons&&(this._buttonPane&&this._buttonPane.hide(),this._clearButton&&this._clearButton.addClass("h-right"),this.options.calendarIcon&&this.container.addClass("zdatetimefield--buttonsonhover")),"focus"===this.options.clearButton&&this._clearButton&&this._clearButton.hide())},_spinKeyupHandler:function(orgEvent){this._keyUp=!0,orgEvent.keyCode!==ZC.keyCode.LEFT&&orgEvent.keyCode!==ZC.keyCode.RIGHT&&this._checkForChange(orgEvent,this._EVENTS.SPINEND)},_pasteHandler:function(orgEvent){this._pasteAction=!1;var selectedTextLen,pastedText=orgEvent.originalEvent.clipboardData.getData("Text"),caretPosition=this._selectCaretPosition(this._input[0]);void 0!==caretPosition[0]&&void 0!==caretPosition[1]&&(selectedTextLen=caretPosition[1]-caretPosition[0]),selectedTextLen&&selectedTextLen===this._input[0].value.length?(this._pasteAction=!0,orgEvent.stopPropagation(),orgEvent.preventDefault(),this._input[0].value=pastedText,clearTimeout(this._pasteTimeout),this._pasteTimeout=setTimeout(this._pasteTimeoutHandler.bind(this,pastedText,orgEvent),500)):orgEvent.preventDefault()},_pasteTimeoutHandler:function(pastedText,orgEvent){var dateInfo=this._parseDateValue(pastedText,this.options.format);dateInfo&&dateInfo.isValid&&(this._viewDate=dateInfo.date);for(var i=0;i<this.options.format.length;i++)this._isPartModified(this.options.format[i],dateInfo&&dateInfo.isValid?!0:!1);this._updateElementValue(),this._selectCaretPosition(this._input[0],0,0),this._mouseUpHandler(orgEvent),this._pasteAction=!1},_preventDefault:function(orgEvent){orgEvent.preventDefault()},_mouseWheelHandler:function(orgEvent){if(document.activeElement===this._input[0]){var newEvent={preventDefault:function(){},type:"mousewheel"};this._preventDefault(orgEvent),orgEvent.stopPropagation();var isIncrement=0!==orgEvent.originalEvent.detail?orgEvent.originalEvent.detail>0:orgEvent.originalEvent.wheelDelta<0;newEvent.keyCode=isIncrement?38:40,this._keyDownHandler(newEvent)}},_focusHandler:function(orgEvent){return this.options.disabled?!1:(ZC.Browser.isFirefox()||ZC.Browser.isSafari()||ZC.OS.isLinux()?setTimeout(this._selectionFocusHandler.bind(this),0):this._input[0].setSelectionRange(0,0),"focus"!==this.options.clearButton||this.options.readonly||this._checkIfAPartIsModified(),"none"!==this.options.spinButtons&&(this._buttonPane.show(),this.options.calendarIcon&&this.container.removeClass("zdatetimefield--buttonsonhover"),this._clearButton&&this._clearButton.removeClass("h-right")),this._isClearButtonVisible=!1,clearTimeout(this._clearButtonTimeout),this._clearButtonTimeout=setTimeout(this._clearButtonVisibilityHandler.bind(this),1e3),void this._dispatchEvent("FOCUS",orgEvent,{value:this._input[0].value,dateValue:this.options.value}))},_clearButtonVisibilityHandler:function(){this._isClearButtonVisible="none"!==this.options.clearButton&&this._clearButton.is(":visible")},_selectionFocusHandler:function(){this._input[0].setSelectionRange(0,0)},_focusInHandler:function(){return this.options.disabled?!1:(this.container.addClass("has-focus"),this._input[0].setSelectionRange(0,0),void(this._focusTimeout=setTimeout(this._focusTimeoutHandler.bind(this),10)))},_focusTimeoutHandler:function(){var componentName=this.componentName;ZC.$window.off("keydown."+componentName).on("keydown."+componentName,this._windowsKeyDownHandler.bind(this)),ZC.$window.on("keyup."+componentName,this._windowKeyUpHandler.bind(this))},_windowsKeyDownHandler:function(orgEvent){this._reverseShiftKey=orgEvent.keyCode===ZC.keyCode.TAB&&orgEvent.shiftKey,this._tabKey=orgEvent.keyCode===ZC.keyCode.TAB},_windowKeyUpHandler:function(orgEvent){(orgEvent.keyCode===ZC.keyCode.TAB&&orgEvent.shiftKey||this._reverseShiftKey)&&!this._reverseFocusset?(this._reverseFocusset=this._focusout=!0,this._selectText(this._dateFormat[this._dateFormat.length-1])):orgEvent.keyCode!==ZC.keyCode.TAB&&!this._tabKey||this._focusset||(this._focusset=this._focusout=!0,ZC.OS.isLinux()&&this._input[0].setSelectionRange(0,0),this._mouseUpHandler()),ZC.$window.off("keyup."+this.componentName)},_focusOutHandler:function(orgEvent){this._focusset=this._longPress=this._reverseFocusset=this._reverseShiftKey=this._tabKey=!1,this._focusout=!0,window.getSelection().removeAllRanges(),this.container.removeClass("has-focus"),this._viewDate=this._checkMinMaxLimit(this._viewDate,void 0,void 0,!1),this.container.find(".h-up, .h-down").removeClass("is-disabled"),this._updateElementValue(),ZC.Browser.isIE()||ZC.Browser.isSafari()||ZC.OS.isLinux()||(this._input[0].selectionStart=0),this._checkForChange(orgEvent,"change"),"focus"===this.options.clearButton&&this._clearButton.hide(),"focus"===this.options.spinButtons&&this._buttonPane&&(this._buttonPane.hide(),this._clearButton&&this._clearButton.addClass("h-right"),this.options.calendarIcon&&this.container.addClass("zdatetimefield--buttonsonhover")),this._dispatchEvent("BLUR",orgEvent,{value:this._input[0].value,dateValue:this.options.value})},_getDateValue:function(){var value;return value=this._dateModified&&this._monthModified&&this._yearModified&&this._hoursModified&&this._minutesModified&&this._secondsModified?new Date(this._viewDate.getTime()):void 0},_mouseUpHandler:function(orgEvent){"none"!==this.options.clearButton&&(this._isClearButtonVisible=this._clearButton.is(":visible"));var caretPosition=this._selectCaretPosition(this._input[0]);if(caretPosition[0]===caretPosition[1])for(var i=caretPosition[0],j=caretPosition[0]-1,len=this._dateFormat.length;len>i||j>=0;i++,j--){if(i<this._dateFormat.length&&-1!==this._allowedChars.indexOf(this._dateFormat[i]))return void this._selectText(this._dateFormat[i]);if(j>=0&&-1!==this._allowedChars.indexOf(this._dateFormat[j]))return void this._selectText(this._dateFormat[j])}else orgEvent&&"mouseup"===orgEvent.type&&window.getSelection().removeAllRanges()},_keyDownHandler:function(orgEvent){if(this.options.disabled)return!1;var selection;if(orgEvent.keyCode!==ZC.keyCode.TAB||0===this._input[0].selectionStart&&orgEvent.shiftKey||this._input[0].selectionEnd===this._input.val().length&&!orgEvent.shiftKey||orgEvent.stopImmediatePropagation(),orgEvent.keyCode===ZC.keyCode.RIGHT||orgEvent.keyCode===ZC.keyCode.LEFT||orgEvent.keyCode===ZC.keyCode.TAB){orgEvent.keyCode!==ZC.keyCode.TAB&&orgEvent.preventDefault(),selection=this._selectCaretPosition(this._input[0]),this._viewDate=this._checkMinMaxLimit(this._viewDate),this._isModified&&(this._updateElementValue(),this._selectCaretPosition(this._input[0],selection[0],selection[1])),selection[0]!==selection[1]&&this._mouseUpHandler();var direction=orgEvent.keyCode===ZC.keyCode.RIGHT||orgEvent.keyCode===ZC.keyCode.TAB&&!orgEvent.shiftKey?1:-1;orgEvent.keyCode===ZC.keyCode.TAB&&orgEvent.shiftKey&&(this._focusout=!0,direction=-1),selection=this._selectCaretPosition(this._input[0]);for(var currentIndex=-1===direction?selection[0]-1:selection[1]+1;currentIndex>=0&&currentIndex<this._dateFormat.length;){var character=this._dateFormat[currentIndex],lastIndex=this.options.format.lastIndexOf(character);if(this._allowedChars.indexOf(character)>=0){orgEvent.keyCode!==ZC.keyCode.TAB||lastIndex===this.options.format.length&&lastIndex+1===this.options.format.length||(orgEvent.preventDefault(),this._focusout=!0),this._selectText(this._dateFormat[currentIndex]);break}currentIndex+=direction}}if(orgEvent.keyCode===ZC.keyCode.UP||orgEvent.keyCode===ZC.keyCode.DOWN){orgEvent.preventDefault(),selection=this._selectCaretPosition(this._input[0]);var character=this._dateFormat[selection[0]];this._allowedChars.indexOf(character)>=0&&(this._modifyPartValue(character,orgEvent.keyCode===ZC.keyCode.UP?1:-1),this._updateElementValue(),this._clearButton&&this._checkIfAPartIsModified(),this._selectText(character)),this._checkForChange(orgEvent,this._keyUp?"spinstart":"spin"),this._keyUp=!1}if(orgEvent.metaKey||orgEvent.ctrlKey)switch(orgEvent.keyCode){case 88:var length,caretPosition=this._selectCaretPosition(this._input[0]);void 0!==caretPosition[0]&&void 0!==caretPosition[1]&&(length=caretPosition[1]-caretPosition[0]),length!==this._input[0].value.length&&orgEvent.preventDefault();break;case 90:orgEvent.preventDefault();break;case ZC.keyCode.DOWN:this._hasPicker&&!this._picker.is(":visible")&&this._picker.zdatetimepicker("open")}(orgEvent.keyCode===ZC.keyCode.ESCAPE||orgEvent.keyCode===ZC.keyCode.ENTER)&&this._hasPicker&&this._picker.is(":visible")&&this._picker.zdatetimepicker("close")},_checkForChange:function(orgEvent,eventName){var changed,notFullyModified=void 0!==this._getDateValue()?!1:!0;if(!notFullyModified){var date=this._viewDate.getDate(),month=this._viewDate.getMonth(),year=this._viewDate.getFullYear(),hour=this._viewDate.getHours(),minutes=this._viewDate.getMinutes(),seconds=this._viewDate.getSeconds();1===date&&0===month&&year===(new Date).getFullYear()&&0===hour&&0===minutes&&0===seconds&&(changed=!0)}!notFullyModified&&(changed||this._viewDate&&this._oldDateValue&&this._oldDateValue.getTime()!==this._viewDate.getTime())&&("spinend"===eventName?this._dispatchEvent("SPINEND",orgEvent,{value:this._input[0].value,dateValue:this.options.value}):"spinstart"===eventName?this._dispatchEvent("SPINSTART",orgEvent,{value:this._input[0].value,dateValue:this.options.value}):"spin"===eventName?(clearTimeout(this._spinTimeout),this._spinTimeout=setTimeout(this._spinTimeoutHandler.bind(this,orgEvent),this.options.spinEventTriggerDelay)):"change"===eventName&&(this._dispatchEvent("CHANGE",orgEvent,{value:this._input[0].value,dateValue:this.options.value}),this._oldDateValue=new Date(this._viewDate.getTime())),this._hasPicker&&this._picker.zdatetimepicker("setValue",this.options.value))},_spinTimeoutHandler:function(orgEvent){this._dispatchEvent("SPIN",orgEvent,{value:this._input[0].value,dateValue:this.options.value})},_modifyPartValue:function(character,offset,disabledCheck){var part,newDate=new Date(this._viewDate.getTime()),isValueComplete=this._getDateValue();switch(character){case"y":part="_yearModified",offset=1===offset?this.options.yearStep:-this.options.yearStep;var newYearValue=newDate.getFullYear()+offset;0>newYearValue?newYearValue+=9999:newYearValue>9999&&(newYearValue%=1e4),0===newYearValue&&(newYearValue=1),this._yearModified&&newDate.setFullYear(newYearValue);break;case"M":if(offset=1===offset?this.options.monthStep:-this.options.monthStep,part="_monthModified",this._monthModified){var newMonth=newDate.getMonth()+offset;if(this.options.incrementOnWrapAround&&void 0!==isValueComplete)newDate.setMonth(newMonth),newDate.getMonth()%12!==(newMonth+12)%12&&(newDate.setDate(1),newDate.setMonth(newMonth));else{0>newMonth?newMonth+=12:newMonth>11&&(newMonth%=12);var isDateLimitExceeded,numberOfDays=new Date(newDate.getFullYear(),newMonth+1,0).getDate();newDate.getDate()>numberOfDays&&(isDateLimitExceeded=!0),isDateLimitExceeded&&newDate.setDate(numberOfDays),newDate.setMonth(newMonth)}}else 0>offset&&newDate.setMonth(11);break;case"d":part="_dateModified",offset=1===offset?this.options.dateStep:-this.options.dateStep;var dateValue=newDate.getDate()+offset;if(!this.options.incrementOnWrapAround||!isValueComplete){var numberOfDays=new Date(newDate.getFullYear(),newDate.getMonth()+1,0).getDate();1>dateValue?dateValue=numberOfDays:dateValue>numberOfDays&&(dateValue%=numberOfDays)}this._dateModified?newDate.setDate(dateValue):0>offset&&newDate.setDate(31);break;case"h":case"H":part="_hoursModified",offset=1===offset?this.options.hourStep:-this.options.hourStep;var hourValue=newDate.getHours()+offset;this.options.incrementOnWrapAround&&isValueComplete||(hourValue>23&&(hourValue%=24),0>hourValue&&(hourValue+=24)),this._hoursModified?newDate.setHours(hourValue):0>offset&&newDate.setHours(hourValue);
break;case"m":case"s":part=this._minuteSecondUpdate(character,offset,newDate,isValueComplete);break;case"t":newDate.setHours((newDate.getHours()+12)%24)}return newDate=this._validateDateValues(newDate),disabledCheck?newDate:(newDate=this._checkMinMaxLimit(newDate,part,offset),newDate=this._checkForDisabledDates(newDate,offset),this._isPartModified(character,!0),this._oldDateValue=new Date(this._viewDate.getTime()),this._viewDate=newDate,void 0)},_minuteSecondUpdate:function(character,offset,newDate,isValueComplete){var part="m"===character?"_minutesModified":"_secondsModified";offset=1===offset?this.options["m"===character?"minuteStep":"secondStep"]:-this.options["m"===character?"minuteStep":"secondStep"];var value=newDate["m"===character?"getMinutes":"getSeconds"]()+offset;return this.options.incrementOnWrapAround&&isValueComplete||(value>59&&(value%=60),0>value&&(value+=60)),this[part]?newDate["m"===character?"setMinutes":"setSeconds"](value):0>offset&&newDate["m"===character?"setMinutes":"setSeconds"](value),part},_validateDateValues:function(newDate){if(this.options.incrementOnWrapAround&&!this._hasDate){var today=this.options.value?new Date(this.options.value.getTime()):new Date;newDate.setDate(today.getDate()),newDate.setMonth(today.getMonth()),newDate.setFullYear(today.getFullYear())}return newDate},_checkForDisabledDates:function(newDate,offset){offset=offset||1;var disabled,preserveDate=new Date(newDate.getTime());if(this._hasPicker&&(disabled=this._picker.zdatetimepicker("getAttribute","disabledDates")),disabled){var newDateVal=new Date(newDate.getTime());newDateVal.setHours(0,0,0,0);for(var step=1===offset?this.options.dateStep:-this.options.dateStep,i=0,len=disabled.length;len>i;i++){var dateToCheck,changeValue,disabledObj=disabled[i];if(disabledObj.date instanceof Date)dateToCheck=disabledObj.date;else if(disabledObj.date)changeValue=!1,dateToCheck=disabledObj.date.date,disabledObj.repeatEveryYear&&dateToCheck.setFullYear(newDate.getFullYear()),disabledObj.repeatEveryMonth&&dateToCheck.setMonth(newDate.getMonth());else if(disabledObj.startDate&&disabledObj.endDate){var startDate=disabledObj.startDate.date,endDate=disabledObj.endDate.date;disabledObj.repeatEveryYear&&(startDate.setFullYear(newDate.getFullYear()),endDate.setFullYear(newDate.getFullYear())),disabledObj.repeatEveryMonth&&(startDate.setMonth(newDate.getMonth()),endDate.setMonth(newDate.getMonth())),changeValue=(ZDateUtil.isGreater(newDateVal,startDate)||ZDateUtil.areDatesEqual(startDate,newDateVal))&&ZDateUtil.isGreater(endDate,newDateVal)?!0:!1}if(dateToCheck&&ZDateUtil.areDatesEqual(dateToCheck,newDateVal)||changeValue){var dateValue=newDate.getDate()+step;if(!this.options.incrementOnWrapAround){var numberOfDays=new Date(newDateVal.getFullYear(),newDateVal.getMonth()+1,0).getDate();1>dateValue?dateValue=numberOfDays:dateValue>numberOfDays&&(dateValue%=numberOfDays)}newDateVal.setDate(dateValue);var time=newDateVal.getTime();newDate=new Date(time),i=-1}}newDate.setHours(preserveDate.getHours(),preserveDate.getMinutes(),preserveDate.getSeconds(),0)}return newDate},_checkIfDateHasTime:function(){var format=this.options.format,hasTime=format.indexOf("H")>-1||format.indexOf("h")>-1||format.indexOf("m")>-1;return hasTime&&(this._is12HourFormat=format.indexOf("h")>-1),hasTime},_checkMinMaxLimit:function(newDate,part,offset,shouldAddClass){shouldAddClass=void 0===shouldAddClass?!0:shouldAddClass,this._isModified=!1;var currentDate=new Date,currentTime=currentDate.getTime();if(this.options.max){var maxTime,newDateTime,isMore;this._hasTime||(this.options.max.setHours(0,0,0,0),currentDate.setHours(0,0,0,0),newDate.setHours(0,0,0,0)),maxTime=this.options.max.getTime(),newDateTime=newDate.getTime(),isMore=currentTime>maxTime,newDateTime>=maxTime||part&&!this[part]&&isMore&&!offset?(this.options.value&&shouldAddClass&&"none"!==this.options.spinButtons&&this.container.find(".h-up").addClass("is-disabled"),this._isModified=!0,newDate=new Date(offset&&newDateTime>maxTime?this._viewDate.getTime():this.options.max.getTime())):shouldAddClass&&"none"!==this.options.spinButtons&&maxTime>newDateTime&&this.container.find(".h-up").removeClass("is-disabled")}if(this.options.min){var minTime,newDateTime,isMore;this._hasTime||(this.options.min.setHours(0,0,0,0),currentDate.setHours(0,0,0,0),newDate.setHours(0,0,0,0)),minTime=this.options.min.getTime(),isMore=minTime>currentTime,newDateTime=newDate.getTime(),minTime>=newDateTime||part&&!this[part]&&isMore&&!offset?(this.options.value&&shouldAddClass&&"none"!==this.options.spinButtons&&this.container.find(".h-down").addClass("is-disabled"),this._isModified=!0,newDate=new Date(offset&&minTime>newDateTime?this._viewDate.getTime():this.options.min.getTime())):shouldAddClass&&"none"!==this.options.spinButtons&&newDateTime>minTime&&this.container.find(".h-down").removeClass("is-disabled")}return newDate},_getNumberOfDays:function(year,month){return new Date(year,month,0).getDate()},_addEffect:function(){this._input.addClass("zeffects--skew"),clearTimeout(this._effectTimeout),this._effectTimeout=setTimeout(this._effectTimeoutHandler.bind(this),1e3)},_effectTimeoutHandler:function(){this._input.removeClass("zeffects--skew")},_parseDate:function(character,currentChar){if(!currentChar)return this._isPartModified(character,!1),!0;var newDate=new Date(this._viewDate.getTime());switch(character){case"d":var newValue,numberOfDays=new Date(newDate.getFullYear(),newDate.getMonth()+1,0).getDate();if(newValue=this._isNewValue&&this._oldSegment!==this._currentSegment?0+parseInt(currentChar):(this._dateModified?10*newDate.getDate():0)+parseInt(currentChar),isNaN(newValue))return;this.options.jumpOnComplete&&newValue>=4&&(this._isNextSegment=!0);var str=newValue.toString();if(!this.options.jumpOnComplete&&newValue>numberOfDays&&this._isFastInput){if(2===str.length)newValue=this._viewDate.getDate();else if(str.length>=3)for(;newValue>31;)newValue=parseInt(newValue.toString().slice(1))}else this.options.jumpOnComplete?newValue>numberOfDays&&(newValue=parseInt(str[0])):newValue>numberOfDays&&(newValue=parseInt(str[str.length-1]));if(1>newValue)this._dateModified=!1;else{if(newDate.setDate(newValue),newDate.getMonth()!==this._viewDate.getMonth())return;this._dateModified=!0}break;case"M":var newValue;if(newValue=this._isNewValue&&this._oldSegment!==this._currentSegment?0+parseInt(currentChar):(this._monthModified?10*(newDate.getMonth()+1):0)+parseInt(currentChar),isNaN(newValue)){var months=this._localize("months");for(this._typedMonthChar+=currentChar.toLowerCase();this._typedMonthChar.length>0;){for(var i=0;i<months.length;i++)if(0===months[i].toLowerCase().indexOf(this._typedMonthChar)){if(newDate.setMonth(i),this.options.jumpOnComplete)switch(this._typedMonthChar){case"f":case"s":case"o":case"n":case"d":case"ja":case"may":case"mar":case"ap":case"au":case"jun":case"jul":this._isNextSegment=!0}return this._monthModified=!0,this._oldDateValue=new Date(this._viewDate.getTime()),this._viewDate=newDate,!0}this._typedMonthChar=this._typedMonthChar.substring(1,this._typedMonthChar.length)}return!1}if(this.options.jumpOnComplete&&newValue>=2&&(this._isNextSegment=!0),!this.options.jumpOnComplete&&newValue>12&&this._isFastInput){var value=parseInt(newValue.toString().slice(1));newValue=value>12?parseInt(value.toString()[0]):this._viewDate.getMonth()+1}else if(this.options.jumpOnComplete)newValue>12&&20>newValue?newValue=12:newValue>20&&(newValue=newValue.toString()[0]);else if(111===newValue||112===newValue){var str=newValue.toString();newValue=parseInt(str[str.length-1])}else for(;newValue>12;)newValue=parseInt(newValue.toString().slice(1));1>newValue?this._monthModified=!1:(newDate.setMonth(newValue-1),newDate.getMonth()!==newValue-1&&(newDate.setDate(1),newDate.setMonth(newValue-1)),this._monthModified=!0);break;case"y":var newValue;if(this._isYear2Digit){if(newValue=parseInt((this._yearModified?newDate.getFullYear().toString().slice(2):0)+currentChar),isNaN(newValue))return;var yearString=newValue.toString();for(this.options.jumpOnComplete&&newValue>10&&2===yearString.length&&"0"!==yearString[1]&&(this._isNextSegment=!0);newValue>99;)newValue=parseInt(newValue.toString().slice(1));if(1>newValue)this._yearModified=!1;else{var century=this.options.century-1;newValue=parseInt(century.toString()+newValue.toString()),newDate.setFullYear(newValue),this._yearModified=!0}}else{if(newValue=(this._yearModified?10*newDate.getFullYear():0)+parseInt(currentChar),isNaN(newValue))return;var yearString=newValue.toString();for(this.options.jumpOnComplete&&newValue>1001&&4===yearString.length&&"0"!==yearString[3]&&(this._isNextSegment=!0);newValue>9999;)newValue=parseInt(newValue.toString().slice(1));1>newValue?this._yearModified=!1:(newDate.setFullYear(newValue),this._yearModified=!0)}break;case"h":var newValue=(this._hoursModified?newDate.getHours()%12*10:0)+parseInt(currentChar);if(isNaN(newValue))return;var hourString=newValue.toString();if(!this.options.jumpOnComplete&&newValue>12&&this._isFastInput)newValue=parseInt(hourString[0]);else if(this.options.jumpOnComplete)for(;newValue>12;)newValue=parseInt(newValue.toString().slice(1));else newValue>12&&(newValue=parseInt(hourString[hourString.length-1]));this._viewDate.getHours()>=12&&(newValue+=12),this.options.jumpOnComplete&&this._hoursModified&&"1"!==currentChar&&(this._isNextSegment=!0),newDate.setHours(newValue),this._hoursModified=!0;break;case"H":var newValue;if(newValue=this._isNewValue&&this._oldSegment!==this._currentSegment?0+parseInt(currentChar):(this._hoursModified?10*newDate.getHours():0)+parseInt(currentChar),isNaN(newValue))return;var hourString=newValue.toString();this.options.jumpOnComplete&&(newValue>=23||2===hourString.length&&"0"!==hourString[1])&&(this._isNextSegment=!0);var str=newValue.toString();!this.options.jumpOnComplete&&newValue>23&&this._isFastInput?2===str.length?newValue=this._viewDate.getHours():str.length>=3&&(newValue>23&&(newValue=parseInt(newValue.toString().slice(1))),newValue>23&&(newValue=parseInt(newValue.toString()[0]))):this.options.jumpOnComplete?newValue>23&&(newValue=parseInt(str[0])):newValue>23&&(newValue=parseInt(str[str.length-1])),newDate.setHours(newValue),this._hoursModified=!0;break;case"m":case"s":this._parseMinuteSecondValue(character,currentChar,newDate);break;case"t":if(this._hoursModified){for(this._typedPeriodChar+=currentChar.toLowerCase();this._typedPeriodChar.length>0;){var AMKey=this._localize("AM"),PMKey=this._localize("PM");if(0===AMKey.toLowerCase().indexOf(this._typedPeriodChar)&&newDate.getHours()>=12||0===PMKey.toLowerCase().indexOf(this._typedPeriodChar)&&newDate.getHours()<12)return newDate.setHours((newDate.getHours()+12)%24),this._oldDateValue=new Date(this._viewDate.getTime()),this._viewDate=newDate,!0;this._typedPeriodChar=this._typedPeriodChar.substring(1,this._typedPeriodChar.length)}return this._hoursModified=!0,!0}}return newDate=this._validateDateValues(newDate),this._oldDateValue=new Date(this._viewDate.getTime()),newDate=this._checkForDisabledDates(newDate),this._viewDate=newDate,!0},_parseMinuteSecondValue:function(character,currentChar,newDate){var newValue=(this["m"===character?"_minutesModified":"_secondsModified"]?10*newDate["get"+("m"===character?"Minutes":"Seconds")]():0)+parseInt(currentChar);if(!isNaN(newValue)){var valueString=newValue.toString();this.options.jumpOnComplete&&(newValue>=59||2===valueString.length&&"0"!==valueString[1])&&(this._isNextSegment=!0);var str=newValue.toString();!this.options.jumpOnComplete&&newValue>23&&this._isFastInput?2===str.length?newValue=this._viewDate["get"+("m"===character?"Minutes":"Seconds")]():str.length>=3&&(newValue>59&&(newValue=parseInt(newValue.toString().slice(1))),newValue>59&&(newValue=parseInt(newValue.toString()[0]))):this.options.jumpOnComplete?newValue>59&&(newValue=parseInt(str[0])):newValue>59&&(newValue=parseInt(str[str.length-1])),newDate["set"+("m"===character?"Minutes":"Seconds")](newValue),this._secondsModified=!0}},_appendZerosToValue:function(number,chars,last){var zeros=["","0","00","000","0000"];return number=number.toString(),chars=chars||2,last=chars-number.length,last?zeros[chars].substring(0,last)+number:number},_keyUpHandler:function(orgEvent){if("input"===orgEvent.type||"keyup"===orgEvent.type&&(orgEvent.keyCode>=186&&orgEvent.keyCode<=192||orgEvent.keyCode>=219&&orgEvent.keyCode<=222||orgEvent.keyCode>=48&&orgEvent.keyCode<=57||orgEvent.keyCode>=65&&orgEvent.keyCode<=90||orgEvent.keyCode===ZC.keyCode.SPACE||orgEvent.keyCode===ZC.keyCode.BACKSPACE||orgEvent.keyCode===ZC.keyCode.DELETE)){var currentTime=(new Date).getTime();if(this._isFastInput=this._keyUpTime&&currentTime-this._keyUpTime<500?!0:!1,this._keyUpTime=currentTime,document.activeElement!==this._input[0])return;var i,diff=this._approximateStringMatching(this._oldValue,this._dateFormat,this._input[0].value,this._selectCaretPosition(this._input[0])[0]),isNavigation=1===diff.length&&(" "===diff[0][1]||"/"===diff[0][1]||"."===diff[0][1]||"-"===diff[0][1]||";"===diff[0][1]);if(this._isNewValue&&this._allowedChars.indexOf(diff[0][0])>-1&&this._currentSegment!==this._oldSegment&&this._resetValues(diff[0][0],diff[0][1]),isNavigation)this._viewDate=this._checkMinMaxLimit(this._viewDate);else for(i=0;i<diff.length;i++)this._parseDate(diff[i][0],diff[i][1]);if(!this._pasteAction&&this._updateElementValue(),diff.length&&" "!==diff[0][0]&&"/"!==diff[0][0]&&"."!==diff[0][0]&&"-"!==diff[0][0]&&";"!==diff[0][0]&&(this._selectText(diff[0][0]),this._isNextSegment)){var index=this._dateFormat.lastIndexOf(diff[0][0])+1;if(index<this._dateFormat.length){for(;-1===this._allowedChars.indexOf(this._dateFormat[index])&&index<this._dateFormat.length;)index+=1;this._isNextSegment=!1,this._viewDate=this._checkMinMaxLimit(this._viewDate),!this._pasteAction&&this._updateElementValue(),this._selectText(this._dateFormat[index])}}if(isNavigation){var ev={keyCode:ZC.keyCode.RIGHT,preventDefault:function(){}};this._keyDownHandler(ev)}!isNavigation&&this._checkForChange(orgEvent,"spin"),"none"!==this.options.clearButton&&this._checkIfAPartIsModified()}},_checkIfAPartIsModified:function(){for(var values=[],j=0,i=0;i<this.options.format.length;i++){var part=this.options.format[i];switch(part){case"d":values[j++]=this._dateModified;break;case"M":values[j++]=this._monthModified;break;case"y":values[j++]=this._yearModified;break;case"H":case"h":values[j++]=this._hoursModified;break;case"m":values[j++]=this._minutesModified;break;case"s":values[j++]=this._secondsModified}}for(var valModified=!1,i=0;j>i;i++){if(values[i]){valModified=!0;break}valModified=!1}this._clearButton&&(this._clearButton[valModified?"show":"hide"](),this._isClearButtonVisible=this._clearButton.is(":visible"))},_approximateStringMatching:function(oldText,oldFormat,newText,caretPosition){this._isNewValue=!1;var i,oldTextSeperator=oldText[caretPosition+oldText.length-newText.length],diff=[];if(oldText=oldText.substring(0,caretPosition+oldText.length-newText.length),newText=newText.substring(0,caretPosition),oldText===newText&&caretPosition>0)return diff.push([oldFormat[caretPosition-1],newText[caretPosition-1]]),diff;if(0===oldText.indexOf(newText)&&(0===newText.length||oldFormat[newText.length-1]!==oldFormat[newText.length])){var removedChar="";for(i=newText.length;i<oldText.length;i++)switch(oldText[i]!==removedChar&&this._allowedChars.indexOf(oldFormat[i])>=0&&(removedChar=oldFormat[i],diff.push([removedChar,""])),removedChar){case"y":this._viewDate.setFullYear((new Date).getFullYear());break;case"d":this._viewDate.setDate(1);break;case"M":this._viewDate.setMonth(0);break;case"H":this._viewDate.setHours(0);break;case"m":this._viewDate.setMinutes(0);break;case"s":this._viewDate.setSeconds(0)}return diff}var navigationChar=newText[newText.length-1];if(" "===navigationChar||"/"===navigationChar||"-"===navigationChar||"."===navigationChar||";"===navigationChar||navigationChar===oldTextSeperator)return[[oldFormat[caretPosition-1],navigationChar]];if(this._focusout){switch(oldFormat[caretPosition-1]){case"y":this._viewDate.setFullYear(0);break;case"h":this._viewDate.setHours(0);break;case"m":this._viewDate.setMinutes(0)}this._focusout=!1}return this._isNewValue=!0,[[oldFormat[caretPosition-1],newText[caretPosition-1]]]},_selectText:function(character){var start=-1,end=0;this._oldSegment=this._currentSegment;for(var i=0;i<this._dateFormat.length;i++)this._dateFormat[i]===character&&(end=i+1,-1===start&&(start=i));0>start&&(start=0),this._currentSegment=character,"none"!==this.options.spinButtons&&this._addDisabledClass(character),this._selectCaretPosition(this._input[0],start,end)},_addDisabledClass:function(character){var min=this.options.min,max=this.options.max;if(this.options.value){var isDownDisabled,isUpDisabled,newDateTime,maxTime,minTime,newDate=this._modifyPartValue(character,-1,!0),down=this.container.find(".h-down"),up=this.container.find(".h-up");this._hasTime||(max&&max.setHours(0,0,0,0),min&&min.setHours(0,0,0,0),newDate.setHours(0,0,0,0)),newDateTime=newDate.getTime(),max&&(maxTime=max.getTime()),min&&(minTime=min.getTime()),this.options.min&&minTime>=newDateTime&&(down.addClass("is-disabled"),isDownDisabled=!0),max&&newDateTime>=maxTime&&(down.addClass("is-disabled"),isDownDisabled=!0),newDate=this._modifyPartValue(character,1,!0),newDateTime=newDate.getTime(),maxTime&&newDateTime>=maxTime&&(up.addClass("is-disabled"),isUpDisabled=!0),minTime&&minTime>=newDateTime&&(up.addClass("is-disabled"),isUpDisabled=!0),!isDownDisabled&&down.removeClass("is-disabled"),!isUpDisabled&&up.removeClass("is-disabled")}},_resetValues:function(character,value){if(!isNaN(value))switch(character){case"y":this._viewDate.setFullYear(0);break;case"H":this._viewDate.setHours(0);break;case"m":this._viewDate.setMinutes(0);break;case"s":this._viewDate.setSeconds(0)}},_selectCaretPosition:function(element,start,end){var isPositioned=void 0!==start;if(void 0===end&&(end=start),!isPositioned||!element.disabled){try{void 0!==element.selectionStart&&(isPositioned?(element.focus(),element.setSelectionRange(start,end)):start=[element.selectionStart,element.selectionEnd])}catch(e){throw e}return start}},_getPlaceHolderValue:function(match){switch(this.options.placeholderType){case"date-format":return match;case"date-format-in-upper":return match.toUpperCase();case"date-format-in-lower":return match.toLowerCase();case"underscore":return new Array(match.length+1).join("_ ");case"custom":switch(match){case"d":case"dd":return this.options.placeholder.date;case"ddd":case"dddd":return this.options.placeholder.weekDay;case"M":case"MM":case"MMM":case"MMMM":return this.options.placeholder.month;case"yy":case"yyyy":return this.options.placeholder.year;case"h":case"hh":case"HH":case"H":return this.options.placeholder.hour;case"m":case"mm":return this.options.placeholder.minute;case"s":case"ss":return this.options.placeholder.second}}},_replaceMatchedText:function(match){var result;switch(match){case"d":result=this._dateModified?this._viewDate.getDate().toString():this._getPlaceHolderValue(match);break;case"dd":var date=this._viewDate.getDate();result=this._dateModified?(10>date?"0":"")+date:this._getPlaceHolderValue(match);break;case"ddd":if(this._dateModified&&this._monthModified&&this._yearModified){var day=this._viewDate.getDay();result=this._localize("daysAbbreviated")[day]}else result=this._getPlaceHolderValue(match);break;case"dddd":if(this._dateModified&&this._monthModified&&this._yearModified){var day=this._viewDate.getDay();result=this._localize("days")[day]}else result=this._getPlaceHolderValue(match);break;case"M":result=this._monthModified?(this._viewDate.getMonth()+1).toString():this._getPlaceHolderValue(match);break;case"MM":if(this._monthModified){var month=this._viewDate.getMonth()+1;result=(10>month?"0":"")+month}else result=this._getPlaceHolderValue(match);break;case"MMM":if(this._monthModified){var month=this._viewDate.getMonth();result=this._localize("monthsAbbreviated")[month]}else result=this._getPlaceHolderValue(match);break;case"MMMM":var month=this._viewDate.getMonth();result=this._monthModified?this._localize("months")[month]:this._getPlaceHolderValue(match);break;case"yy":if(this._isYear2Digit=!0,this._yearModified){{this._viewDate.getFullYear()}result=this._appendZerosToValue(this._viewDate.getFullYear()%100)}else result=this._getPlaceHolderValue(match);break;case"yyyy":this._isYear2Digit=!1,result=this._yearModified?this._appendZerosToValue(this._viewDate.getFullYear(),4):this._getPlaceHolderValue(match);break;case"h":result=this._hoursModified?(this._viewDate.getHours()%12||12).toString():this._getPlaceHolderValue(match);break;case"hh":if(this._hoursModified){var hours=this._viewDate.getHours()%12||12;result=(10>hours?"0":"")+hours}else result=this._getPlaceHolderValue(match);break;case"H":result=this._hoursModified?this._viewDate.getHours().toString():this._getPlaceHolderValue(match);break;case"HH":if(this._hoursModified){var hours=this._viewDate.getHours();result=(10>hours?"0":"")+hours}else result=this._getPlaceHolderValue(match);break;case"m":result=this._minutesModified?this._viewDate.getMinutes().toString():this._getPlaceHolderValue(match);break;case"mm":if(this._minutesModified){var minutes=this._viewDate.getMinutes();result=(10>minutes?"0":"")+minutes}else result=this._getPlaceHolderValue(match);break;case"s":result=this._secondsModified?this._viewDate.getSeconds().toString():this._getPlaceHolderValue(match);break;case"ss":if(this._secondsModified){var seconds=this._viewDate.getSeconds();result=(10>seconds?"0":"")+seconds}else result=this._getPlaceHolderValue(match);break;case"tt":result=this._hoursModified?this._localize(this._viewDate.getHours()<12?"AM":"PM"):this.options.placeholder.period;break;case"z":result=this._viewDate.toString().match(/\(([A-Za-z\s].*)\)/)[1];break;case"zz":result=this._viewDate.toString().match(/([A-Z]+[+-][0-9]+)/)[1];break;case"zzz":result=this._viewDate.toString().match(/([A-Z]+[+-][0-9]+.*)/)[1]}if(result=void 0!==result?result:match.slice(1,match.length-1),this._retursFormat){var formattedResult="";"ddd"===match?match="EEE":"dddd"===match?match="EEEE":"z"===match?match="f":"zz"===match?match="ff":"zzz"===match&&(match="fff");for(var i=0;i<result.length;i++)formattedResult+=match[0];return formattedResult}return result},_updateElementValue:function(){var dateFormatRegExp=/dd{0,3}|MM{0,3}|yyyy|yy|HH|H|hh|h|mm|m|ss|s|tt|zz{0,2}|"[^"]*"|'[^']*'/g,format=this.options.format;this._retursFormat=!1;var newValue=format.replace(dateFormatRegExp,this._replaceMatchedText.bind(this));this._retursFormat=!0,this._dateFormat=format.replace(dateFormatRegExp,this._replaceMatchedText.bind(this)),this._input[0].value=newValue,this.options.value=this._getDateValue()?new Date(this._viewDate.getTime()):void 0,this._oldValue=newValue},_parseDateValue:function(date,pattern){return ZDateUtil._parseDateValue(date,pattern,this.options.otherInputFormats)},_resetViewDate:function(){return new Date((new Date).getFullYear(),0,1,0,0,0)},_setValue:function(value){var isModified=this._parseValue("value",value);return this._performValidations(),isModified&&this.options.value&&(this._viewDate=new Date(this.options.value.getTime()),this._input.attr("aria-valuenow",ZDateUtil.formatDate(this.options.value,this.options.format))),this.options.value||this._input.removeAttr("aria-valuenow"),this._checkIfAPartIsModified(),this._hasPicker&&this._picker.zdatetimepicker("setValue",this.options.value),isModified},_parseValue:function(optionName,value){var isModified,dateInfo;return"string"==typeof value?("TODAY"===value||"NOW"===value?this.options[optionName]=new Date:(dateInfo=this._parseDateValue(value,this.options.format),this.options[optionName]=dateInfo?dateInfo.date:void 0),isModified=!0):value instanceof Date?(this.options[optionName]=value,isModified=!0):(this._oldValueOption&&(isModified=!0),this.options[optionName]=void 0),this.options[optionName]&&!this._hasTime&&this.options[optionName].setHours(0,0,0,0),"value"===optionName&&this.options.value&&(this._viewDate=new Date(this.options.value.getTime())),isModified},setAttribute:function(optionName,value){var componentName=this.componentName;if("object"!=typeof value||value instanceof Array||value instanceof Date||(value=$.extend(!0,{},this.options[optionName],value)),this.options[optionName]=value,"format"===optionName||"value"===optionName){var isValueModified;"format"===optionName&&(this.options.format=value),"value"===optionName&&(isValueModified=this._setValue(value)),this._dateModified=this._monthModified=this._yearModified=this._minutesModified=this._secondsModified=this._hoursModified=!0,"format"===optionName&&(this._format=value,this._changeLocaleSpecifierToDateFormat(),this._picker&&this._picker.zdatetimepicker("setAttribute","format",this.options.format));for(var i=0;i<this.options.format.length;i++)this._isPartModified(this.options.format[i],this.options.value?!0:!1);this._viewDate=this.options.value?new Date(this.options.value.getTime()):this._resetViewDate(),this._viewDate=this._checkMinMaxLimit(this._viewDate),this._updateElementValue(),"format"===optionName&&(this._hasTime=this._checkIfDateHasTime(),this._hasDate=this._checkIfFormatHasDate(),this._hasPicker=this._hasDate?this.options.picker:!1),this._hasPicker?(this._calendarIcon&&"button"===this.options.calendarIconUIType&&this._calendarIcon.off("click."+componentName).on("click."+componentName,this._calendarIconClickHandler.bind(this)),("button"!==this.options.calendarIconUIType||"button"===this.options.calendarIconUIType&&this.options.showPickerOnFocus)&&this.container.off("click."+componentName).on("click."+componentName,this._pickerOpenHandler.bind(this))):(this._calendarIcon&&"button"===this.options.calendarIconUIType&&this._calendarIcon.off("click."+componentName),("button"!==this.options.calendarIconUIType||"button"===this.options.calendarIconUIType&&this.options.showPickerOnFocus)&&this.container.off("click."+componentName))}else if("min"===optionName||"max"===optionName)this._parseValue(optionName,value),this._performValidations(),this._hasPicker&&this._picker.zdatetimepicker("setAttribute",optionName+"Date",this.options[optionName]),this.options[optionName]?this._input.attr("aria-value"+optionName,ZDateUtil.formatDate(this.options[optionName],this.options.format)):this._input.removeAttr("aria-value"+optionName),this._viewDate=this._checkMinMaxLimit(this._viewDate),this._updateElementValue();else if("placeholderType"===optionName)"date-format"!==value&&"underscore"!==value&&"date-format-in-upper"!==value&&"date-format-in-lower"!==value&&(value="date-format"),this.options.placeholerType=value,this.options.value||this._updateElementValue();else if("clearButton"===optionName)"none"!==value?(this._createClearButton(),"focus"===value&&this.container.off("mouseenter."+componentName).on("mouseenter."+componentName,this._mouseEnterHandler.bind(this)).off("mouseleave."+componentName).on("mouseleave."+componentName,this._mouseLeaveHandler.bind(this))):"none"===value&&(this._clearButton.off("mousedown."+componentName+" click."+componentName),this._clearButton.remove(),this._clearButton=void 0);else if("clearButtonSVGIconId"===optionName||"clearButtonIconClassName"===optionName)value.length&&"none"!==this.options.clearButton&&this._updateClearIcon(this._clearButton.find(".zinputfield__icon"));else if("spinButtons"===optionName||"decrementButtonSVGIconId"===optionName||"incrementButtonSVGIconId"===optionName||"incrementButtonIconClassName"===optionName||"decrementButtonIconClassName"===optionName)this._buttonPane&&(this._buttonPane.remove(),this._buttonPane=void 0),"none"===value?(this.container.removeAttr("role"),this.container.find(".h-up,.h-down").off("mousedown."+componentName+" mouseup."+componentName),"vertical"===this.options.spinButtonsOrientation&&this.container.find(".zinputfield__spinbuttonpane").remove(),this.container.find(".h-up,.h-down").remove(),this.container.removeClass("zinputfield--split"),ZC.$document.off("."+componentName),this.container.addClass("zdatetimefield--buttonsonhover")):(this.container.addClass("zdatetimefield"),this._createSpinButtons(),"focus"===value&&this.container.off("mouseenter."+componentName).on("mouseenter."+componentName,this._mouseEnterHandler.bind(this)).off("mouseleave."+componentName).on("mouseleave."+componentName,this._mouseLeaveHandler.bind(this)),this.container.attr("role","spinbutton"),"horizontal"===this.options.spinButtonsOrientation&&this.container.addClass("zinputfield--split zdatetimefield"),"always"===this.options.spinButtons&&this.container.removeClass("zdatetimefield--buttonsonhover"));else if("spinButtonsOrientation"===optionName){if("horizontal"!==value&&"vertical"!==value&&(value="vertical"),this.options.spinButtonsOrientation=value,"none"!==this.options.spinButtons){var upButton=this.container.find(".h-up"),downButton=this.container.find(".h-down");this.container.empty();var prependToInput="left"===this.options.calendarIconAlignment?!0:!1;if("vertical"===value){var buttonPane=$("<div class='zinputfield__spinbuttonpane'>");buttonPane.append(upButton,downButton),this.container.append(prependToInput&&this._calendarIcon?this._calendarIcon:void 0,this._input,!prependToInput&&this._calendarIcon?this._calendarIcon:void 0,buttonPane,"none"!==this.options.clearButton?this._clearButton:void 0).removeClass("zinputfield--split")}else this.container.append(prependToInput&&this._calendarIcon?this._calendarIcon:void 0,this._input,!prependToInput&&this._calendarIcon?this._calendarIcon:void 0,upButton,downButton,"none"!==this.options.clearButton?this._clearButton:void 0).addClass("zinputfield--split");this._updateIcons(upButton.find(".zinputfield__icon"),downButton.find(".zinputfield__icon")),this._bindEvents(),"none"!==this.options.clearButton&&(this._clearButton.on("mousedown."+componentName,this._clearButtonMousedownHandler.bind(this)),this._clearButton.on("click."+componentName,this._clearButtonClickHandler.bind(this))),this.container.find(".h-up,.h-down").on("mousedown."+componentName,this._spinButtonsMouseDownHandler.bind(this)).on("mouseup."+componentName,this._spinButtonsMouseUpHandler.bind(this))}"horizontal"===this.options.spinButtonsOrientation?this.container.addClass("zdatetimefield"):!this.options.calendarIcon&&this.container.removeClass("zdatetimefield")}else if("calendarIcon"===optionName||"calendarSVGIconId"===optionName||"calendarIconClassName"===optionName||"calendarIconUIType"===optionName)this._calendarIcon&&(this._calendarIcon.remove(),this._calendarIcon=void 0,this.container.removeClass("h-hasiconbutton")),value&&this.options.calendarIcon&&(this._createCalendarIcon(),"focus"===this.options.spinButtons&&this.container.addClass("zdatetimefield--buttonsonhover"),"button"===this.options.calendarIconUIType?!this.options.showPickerOnFocus&&this.container.off("click."+componentName):this.container.off("click."+componentName).on("click."+componentName,this._pickerOpenHandler.bind(this)));else if("calendarIconAlignment"===optionName)"left"!==value&&"right"!==value&&(value="right"),this.options.calendarIconAlignment=value,this.options.calendarIcon&&this._calendarIcon&&this._calendarIcon["right"===value?"insertAfter":"insertBefore"](this._input);else if("readonly"===optionName)this.container[value&&!this.options.disabled?"addClass":"removeClass"]("is-readonly"),this.container[value||this.options.disabled?"addClass":"removeClass"]("is-disabled"),this._input.attr("aria-readonly",value),value?(this._input.attr("readonly",!0),this._input.off("input."+componentName+" keydown."+componentName+" keyup."+componentName+" mouseup."+componentName+" mousewheel."+componentName),"none"!==this.options.clearButton&&this._clearButton.off("mouseup."+componentName+" mousedown."+componentName)):(this._input.removeAttr(this.options.disabled?"readonly":"readonly disabled"),this._bindEvents(),"none"!==this.options.clearButton&&this._clearButton.on("mouseup."+componentName,this._clearButtonClickHandler.bind(this)).on("mousedown."+componentName,this._clearButtonMousedownHandler.bind(this)));
else if("disabled"===optionName)this.container[value||this.options.readonly?"addClass":"removeClass"]("is-disabled"),this._input.attr("aria-disabled",value),value?(this.options.readonly&&this.container.removeClass("is-readonly"),this._input.removeClass("h-hidecursor"),this._input.attr("disabled",!0),"none"!==this.options.clearButton&&this._clearButton.off("mouseup."+componentName+" mousedown."+componentName)):(this.options.readonly&&this.container.addClass("is-readonly"),this._input.addClass("h-hidecursor"),!this.options.readonly&&this._input.removeAttr("disabled"),"none"!==this.options.clearButton&&this._clearButton.on("mouseup."+componentName,this._clearButtonClickHandler.bind(this)).on("mousedown."+componentName,this._clearButtonMousedownHandler.bind(this)));else if("className"===optionName)this.container.removeClass(this.options.className).addClass(value);else if("locale"===optionName)this._changeLocaleSpecifierToDateFormat();else if("century"===optionName){if(value-=1,isNaN(value)||2!==value.toString().length)throw new Error(this.options.labels.invalidNumber);var yearValue=this._viewDate.getFullYear().toString().slice(2),year=parseInt(value.toString()+yearValue);this._viewDate.setFullYear(year),this.options.value&&(this.options.value=new Date(this._viewDate.getTime())),this.options.century=value+1}else"title"===optionName?this.container[0].title=value:"width"===optionName?this.container.outerWidth(value):"picker"===optionName?value?(this._hasPicker=!0,this._initPicker(),this._bindPickerEvents(),("button"!==this.options.calendarIconUIType||"button"===this.options.calendarIconUIType&&this.options.showPickerOnFocus)&&this.container.on("click."+componentName,this._pickerOpenHandler.bind(this)),"button"===this.options.calendarIconUIType&&this._calendarIcon.off("click."+componentName).on("click."+componentName,this._calendarIconClickHandler.bind(this)),this._immediateCommit=this._picker.zdatetimepicker("getAttribute","immediateCommit")):(this._picker.zdatetimepicker("destroy"),this._picker.remove(),this._picker=void 0,this._hasPicker=!1,this.container.off("click."+componentName)):"pickerOptions"===optionName?(this._picker.zdatetimepicker("destroy"),this._picker.zdatetimepicker(this.options.pickerOptions)):"showPickerOnFocus"===optionName&&"button"===this.options.calendarIconUIType&&(this.container.off("click."+componentName),value&&this.container.on("click."+componentName,this._pickerOpenHandler.bind(this)))},getAttribute:function(optionName){return"pickerOptions"!==optionName?this._super(optionName):this._hasPicker&&this._picker?this._picker.zdatetimepicker("getAttributes"):void 0},getValue:function(){return{dateObject:this.options.value,dateString:this._input[0].value}},setValue:function(dateString){this._parseValue("value",dateString),this._viewDate=this._checkMinMaxLimit(this._viewDate);for(var i=0;i<this.options.format.length;i++)this._isPartModified(this.options.format[i],this._viewDate?!0:!1);this._updateElementValue(),this._hasPicker&&this._picker.zdatetimepicker("setValue",this.options.value)},openPicker:function(){this._hasPicker&&this._picker&&this._picker.zdatetimepicker("open")},closePicker:function(){this._hasPicker&&this._picker&&this._picker.zdatetimepicker("close")},parseDate:function(dateString,dateFormat){var dateInfo=this._parseDateValue(dateString,dateFormat||this.options.format);return dateInfo},formatDate:function(dateObject,dateFormat){return ZDateUtil.formatDate(dateObject,dateFormat||this.options.format)},getElement:function(){return this.container},getPickerElement:function(){return this._hasPicker?this._picker:void 0},destroy:function(){var componentName=this.componentName;this._input.off("."+componentName),this.container.remove(),this.element.show().removeData(componentName),ZC.$document.off("."+componentName),this.options.picker&&(this._picker.zdatetimepicker("destroy"),this._picker.remove(),this._picker=void 0),this._lastValue=void 0,this.container=this._input=void 0}};ZC.registerComponent("zdatetimefield",datetimeFieldPrototype),ZC.createDatetimefield=function(options){var element=$("input");options.id&&element.attr("id",options.id),element.appendTo(element.appendTo?$(options.appendTo):"body"),element=element.zdatetimefield(options)}}(ZComponents),function(ZC){var $=ZC.DOMUtil,dateTimePickerPrototype={options:{position:"auto",format:"dd/MM/yyyy",dateFormat:"dd/MM/yyyy",displayType:"box",type:"popup",displayWeekNumbers:!1,weekHeading:"Week",selectionType:"single",selectionLimit:void 0,monthToBeShownOnOpen:void 0,disabledTimeList:[],selectedDateMonthViewIndex:void 0,navigationBar:{monthSwitcher:!0,yearSwitcher:!0,monthYearHeadingFormat:"MMM yyyy",monthYearSwitcherType:"drilldown",monthFormatInSwitcher:"MMM",navigationButtonsDisplayPattern:"split",togetherTypeNavigationButtonsPosition:"right",monthNavigationStep:1,yearNavigationStep:1,yearNavigationButtons:!0,monthNavigationButtons:!0,dropdownStartYear:"THIS_YEAR-10",dropdownEndYear:"THIS_YEAR+10"},todayButtonAction:"navigate-only",displayAdjacentMonthDates:!1,allowSelectionOfAdjacentMonthDates:!0,hideCancelButton:!1,monthsPerView:1,immediateCommit:!0,value:void 0,values:[],specialDaysOfWeek:[],disabledDaysOfWeek:[],disabledDates:[],specialDates:[],weekendDays:"0,6",closeButton:!1,closeOnDateSelect:!0,closeOnBodyClick:!0,otherInputFormats:[],todayButton:!1,timeMultipleSelectBoxType:"h-m-t",fixedTimeOptions:[],timeFieldType:"input",timeLabelType:"icon",hourStep:1,minuteStep:5,locale:"en-US",labels:{OKButtonLabel:"OK",cancelButtonLabel:"Cancel",todayButtonLabel:"Today",clearButtonLabel:"Clear",timeLabel:"Time",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],close:"Close",nextMonth:"Next Month",nextYear:"Next Year",prevMonth:"Last Month",prevYear:"Last Year",nextDecade:"Next Decade",prevDecade:"Last Decade",nextCentury:"Next Century",prevCentury:"Last Century"}},_CONSTANTS:{headingDateFormat:"MMMM yyyy",displayType:"box",monthYearSelectionMode:"none",clearButtonPosition:"right",OKButtonPosition:"right",todayButtonPosition:"center",cancelButtonPosition:"right",calloutPosition:"bottom",defaultDateFormat:"dd/MM/yyyy",defaultButtonAlignment:"right"},_EVENTS:{BEFOREFOCUS:"beforefocus",BEFOREOPEN:"beforeopen",OPEN:"open",BEFORECLOSE:"beforeclose",CLOSE:"close",DATESELECT:"dateselect",TODAYBUTTONCLICK:"todaybuttonclick",APPLY:"change",CANCEL:"cancel",RESET:"clear",BEFOREDRILLDOWN:"beforedrilldown",DRILLDOWN:"drilldown",DATEMOUSEOVER:"datemouseover",MONTHCHANGE:"monthchange",YEARCHANGE:"yearchange",DECADECHANGE:"decadechange",HOURCHANGE:"hourchange",MINUTECHANGE:"minutechange",PERIODCHANGE:"periodchange",BEFOREDATECELLRENDER:"beforedatecellrender",TIMECHANGE:"timechange",DRAGSTART:"dragstart",DRAG:"drag",DRAGEND:"dragend"},_ANIMATIONEVENTS:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend transitionend",_EFFECTS:{slide:{open:"slideDown",close:"slideUp"},fade:{open:"fadeIn",close:"fadeOut"}},_create:function(element,options,userOptions){userOptions=$.extend(!0,{},userOptions,this.element.data());var locale=options.locale||ZC.locale;userOptions&&userOptions.navigationBar&&(this._yearNavigation=userOptions.navigationBar.yearNavigationButtons),userOptions&&(this._isPositionModified=userOptions.position),this.options.locale=locale,void 0==this._yearNavigation&&/^(drilldown|none)$/.test(this.options.navigationBar.monthYearSwitcherType)&&(this._yearNavigation=!0),this._rowsCount=[];var shouldInit=this._initialize(element,options);shouldInit&&this._hasDate&&this._bindEvents()},_initialize:function(element,options,preventConstruct){this._todayButtonLabel=this.options.todayButtonLabel||this._localize("todayButtonLabel"),this._cancelButtonLabel=this.options.cancelButtonLabel||this._localize("cancelButtonLabel"),this._clearButtonLabel=this.options.clearButtonLabel||this._localize("clearButtonLabel"),this._OKButtonLabel=this.options.OKButtonLabel||this._localize("OKButtonLabel"),this._getValuesFromLocale(),this.options.position="auto"===this.options.position?"callout"===this.options.displayType?"bottom":"bottom-left":this.options.position,options.forElement&&(this.options.forElement=$(this.options.forElement)),this.options.buttonsAlignment=ZC.buttonsAlignment||this._CONSTANTS.defaultButtonAlignment,this._weekEnds=this.options.weekendDays.split(","),this.element[0].setAttribute("tabindex",0);var options=["minDate","maxDate","value"];this._hasDate=this._checkIfFormatHasDate(),this._hasTime=this._checkIfDateHasTime(),this._monthsPerView=this.options.monthsPerView;for(var i=0,len=options.length;len>i;i++){var value=this.options[options[i]];value&&(this._parseValue(options[i],value),"value"===options[i]&&void 0!==this.options.value&&(this._currentSelected=new Date(this.options.value.getTime()),this._viewDate||(this._viewDate=new Date(this.options.value.getTime()),this._monthsPerView>1&&this.options.selectedDateMonthViewIndex>=1&&(this._viewDate=this._moveMonth(this._viewDate,-this.options.selectedDateMonthViewIndex))),this._valueUpdate=!0)),"value"===options[i]?this._viewDate||(this._viewDate=new Date,this._viewDate.setHours(0,0,0,0)):this["_"+options[i]]=this.options[options[i]]}this._processBoundaries(),this._selectedDates=[],this._performValidations(),this._hasDate&&(this.options.value&&0!==this.options.values.length||(this._setMonthToView(),this._setYearToView()),(this.options.monthToBeShownOnOpen||this.options.yearToBeShownOnOpen)&&this._validateViewDate(),"multiple"===this.options.selectionType&&this._setValues(),this._viewMode=this._getViewMode()||0);var datesObject={disabledDates:this.options.disabledDates,specialDates:this.options.specialDates,disabledTimeList:this.options.disabledTimeList};if(this._convertStringToObject(datesObject),this.options.OKButton=!this.options.immediateCommit,this.options.cancelButton=!this.options.immediateCommit&&!this.options.hideCancelButton,preventConstruct||(this._buildElement(),this._constructOtherElements()),this.options.customHTMLAboveNavigationBar&&this._insertHTMLAboveNavbar(),this.options.className&&this.element.addClass(this.options.className),this._hasDate&&void 0!==this.options.value){var date=this._resetTime(this.options.value);this.element.find("[data-time='"+date.getTime()+"']").addClass($.zdatetimepicker._CLASSES.selected).attr("aria-selected",!0)}return this.options.value&&(this._currentSelected=new Date(this.options.value.getTime())),this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height),!0},_processBoundaries:function(){this._minDateHasTime&&(this._minTime=new Date(this.options.minDate.getTime())),this._maxDateHasTime&&(this._maxTime=new Date(this.options.maxDate.getTime())),this._minDate&&this._minDate.setHours(0,0,0,0),this._maxDate&&this._maxDate.setHours(0,0,0,0)},_checkIfFormatHasDate:function(){var format=this.options.format;return format.indexOf("d")>-1||format.indexOf("dd")>-1},_getValuesFromLocale:function(){var locale=ZC.localeInfo[this.options.locale];locale&&(this.options.labels.days=locale.days||this.options.labels.days,this.options.labels.daysAbbreviated=locale.daysAbbreviated||this.options.labels.daysAbbreviated,this.options.labels.monthsAbbreviated=locale.monthsAbbreviated||this.options.labels.monthsAbbreviated,this.options.labels.months=locale.months||this.options.labels.months,this.options.firstDayOfWeek=locale.firstDayOfWeek||0)},_convertStringToObject:function(datesObject){for(var option in datesObject)if(void 0!==datesObject[option])if("string"==typeof datesObject[option])datesObject[option]=this.options[option]=this._parseDateValue(datesObject[option],this._dateFormat);else if(datesObject[option]instanceof Array){var base=this;datesObject[option]=this.options[option]=$.map(datesObject[option],function(d){if("object"!=typeof d||d instanceof Date){var date=base._parseDateValue(d,"disabledTimeList"===option?base._timeFormat:base._dateFormat);return"disabledTimeList"===option?date.date.setSeconds(0,0):date.date.setHours(0,0,0,0),date}return d.date&&d.date instanceof Date&&d.hasOwnProperty("isValid")||d.date&&d.date.date instanceof Date&&d.date.hasOwnProperty("isValid")||d.startDate&&d.startDate.date instanceof Date&&d.startDate.hasOwnProperty("isValid")||d.endDate&&d.endDate.date instanceof Date&&d.endDate.hasOwnProperty("isValid")?d:(d.date?(d.date=base._parseDateValue(d.date,base._dateFormat),d.date.date.setHours(0,0,0,0)):d.startDate&&d.endDate&&(d.startDate=base._parseDateValue(d.startDate,base._dateFormat),d.startDate.date.setHours(0,0,0,0),d.endDate=base._parseDateValue(d.endDate,base._dateFormat),d.endDate.date.setHours(0,0,0,0)),d)})}},_setMonthToView:function(){var month=this.options.monthToBeShownOnOpen;if(void 0!==month)if("number"==typeof month&&month>=0&&11>=month)this._viewDate.setMonth(month);else if("string"==typeof month)if(month.indexOf("THIS_MONTH")>-1){var value=ZDateUtil.convertOffsetToValue(month.substring(10));this._viewDate=this._moveMonth(this._viewDate,value)}else month.indexOf("NEXT_MONTH")>-1?this._viewDate=this._moveMonth(this._viewDate,1):month.indexOf("LAST_MONTH")>-1&&(this._viewDate=this._moveMonth(this._viewDate,-1))},_setYearToView:function(){var year=this.options.yearToBeShownOnOpen;if("number"==typeof year)this._viewDate.setFullYear(year);else if("string"==typeof year)if(year.indexOf("THIS_YEAR")>-1){var value=ZDateUtil.convertOffsetToValue(year.substring(9));this._viewDate.setFullYear(this._viewDate.getFullYear()+value)}else year.indexOf("NEXT_YEAR")>-1&&9===year.length?this._viewDate.setFullYear(this._viewDate.getFullYear()+1):year.indexOf("LAST_YEAR")>-1&&9===year.length&&this._viewDate.setFullYear(this._viewDate.getFullYear()-1)},_constructOtherElements:function(){var columnExists,options=(this.options.commandBar,this.options);"inline"===this.options.type&&this.element.show(),this.options.title&&this.options.title.length&&(this.element.prepend($($.zdatetimepicker._HEADER)),this.element.find("."+$.zdatetimepicker._CLASSES.title).html(this.options.isTitleHTMLEncoded?this.options.title:ZC.encodeHTML(this.options.title)),this.options.draggable&&$.fn.zdraggable&&"inline"!==this.options.type&&this._initDraggable()),this.options.closeButton&&"inline"!==this.options.type&&this._createCloseButton(),columnExists=this._checkIfColumnExists(),(columnExists||options.OKButton||options.todayButton||options.cancelButton||options.clearButton)&&(this._createButtons(),this._bindButtonEvents()),3===this._monthsPerView&&this._footer&&this._footer.length&&this._hasTime&&this.element.addClass($.zdatetimepicker._CLASSES.triple)},_initDraggable:function(){"inline"!==this.options.displayType&&this.element.zdraggable({handle:"."+$.zdatetimepicker._CLASSES.header,ignore:"."+$.zdatetimepicker._CLASSES.closeButton,container:"window",start:this._dragStartHandler.bind(this),drag:this._dragHandler.bind(this),end:this._dragEndHandler.bind(this)})},_dragStartHandler:function(orgEvent,ui){this._dispatchEvent("DRAGSTART",orgEvent,ui)},_dragHandler:function(orgEvent,ui){this._dispatchEvent("DRAG",orgEvent,ui)},_dragEndHandler:function(orgEvent,ui){this._dispatchEvent("DRAGEND",orgEvent,ui)},_setValues:function(){var len=this.options.values.length;this._valueUpdate=!0;for(var i=0;len>i;i++){var date,value=this.options.values[i];"string"==typeof value?date="TODAY"===value?new Date:this._parseDateValue(this.options.values[i],this.options.format).date:value instanceof Date?date=value:this.options.values.splice(i,1),date&&(date.setHours(0,0,0,0),this._selectedDates.push(date),i===len-1&&(this._viewDate=new Date(date.getTime())))}},_getViewMode:function(){var viewmode;if("drilldown"===this.options.navigationBar.monthYearSwitcherType)if(this._valueUpdate)viewmode=0,this.element.find("."+$.zdatetimepicker._CLASSES.disabledCalendar).removeClass($.zdatetimepicker._CLASSES.disabledCalendar);else switch(this.options.drilldownLevelOnOpen){case"dates":viewmode=0;break;case"months":viewmode=1;break;case"years":viewmode=2;break;case"decades":viewmode=3}return viewmode},_bindButtonEvents:function(){var componentName=this.componentName;this._today.length&&this._today.on("click."+componentName,this._todayClickHandler.bind(this)),this._applyButton&&this._apply.on("click."+componentName,this._applyClickHandler.bind(this)),this._cancel.length&&this._cancel.on("click."+componentName,this._cancelClickHandler.bind(this)),this._reset.length&&this._reset.on("click."+componentName,this._resetClickHandler.bind(this))},_unBindButtonEvents:function(){var componentName=this.componentName;this._today.length&&this._today.off("click."+componentName),this._applyButton&&this._apply.off("click."+componentName),this._cancel.length&&this._cancel.off("click."+componentName),this._reset&&this._reset.length&&this._reset.off("click."+componentName)},_resetClickHandler:function(orgEvent){if(orgEvent&&!$(orgEvent.target).closest(this._reset).hasClass("is-disabled")||!orgEvent){this.options.immediateCommit&&(this._valueUpdate=!1,this.options.value=void 0,this.options.values=[],this._selectedTime=this._minTime?new Date(this._minTime.getTime()):void 0),this._viewDate.setHours(0,0,0,0);var className=$.zdatetimepicker._CLASSES.selected+" "+$.zdatetimepicker._CLASSES.disabled;this.element.find("."+$.zdatetimepicker._CLASSES.monthContainer).find("."+$.zdatetimepicker._CLASSES.selected+",."+$.zdatetimepicker._CLASSES.disabled+":not(.zdisabled)").removeClass(className).removeAttr("aria-selected aria-disabled"),this.element.find("."+$.zdatetimepicker._CLASSES.monthYearTable).find("."+$.zdatetimepicker._CLASSES.selected+",."+$.zdatetimepicker._CLASSES.disabled+":not(.zdisabled)").removeClass(className).removeAttr("aria-selected aria-disabled"),this._selectedDates=[],this._queryString="",this._currentSelected=void 0,this._hasTime&&("multiple-select-box"===this.options.timeFieldType&&"h-m-t"===this.options.timeMultipleSelectBoxType&&this._checkTimeOptions(),this._setSelectedTimeValues(void 0,void 0,void 0,!0)),this._reset&&this._reset.length&&this._hasDate&&this._reset.attr("disabled",!0).addClass("is-disabled"),this._dispatchEvent("RESET",orgEvent,{valuesObject:[],values:[],options:this.options})}},_cancelClickHandler:function(orgEvent){this._resetClickHandler(orgEvent),this._closePicker(),this._dispatchEvent("CANCEL",orgEvent,{valueString:ZDateUtil.formatDate(this.options.value,this.options.format),value:this.options.value})},_applyClickHandler:function(orgEvent,isNotSubmit,valueSet){var returnObj,shouldClose,applyButton;if(orgEvent&&(applyButton=$(orgEvent.target).closest(this._apply)),this._hasTime&&!this._selectedTime){var time,date;if("single-select-box"===this.options.timeFieldType)time=this._singleTimeSelect.zselectbox("getAttribute","selectedValue"),date=new Date(parseInt(time)),this._viewDate.setHours(date.getHours(),date.getMinutes(),0,0);else if("multiple-select-box"===this.options.timeFieldType&&"hm-t"===this.options.timeMultipleSelectBoxType){var period="";time=this._combinedTimeElement.zselectbox("getAttribute","selectedValue"),this._is12HourFormat&&(period=this._combinedPeriodElement.zselectbox("getAttribute","selectedValue")),time=time+" "+period,date=this._parseDateValue(time,this._timeFormat).date,this._viewDate.setHours(date.getHours(),date.getMinutes(),0,0)}}if(orgEvent&&!applyButton.hasClass("is-disabled")||!orgEvent){if("single"===this.options.selectionType&&this._hasDate){var date=new Date;this._currentSelected?(this._valueUpdate=!0,date=new Date(this._currentSelected.getTime())):this._selectedTime=this._minTime?new Date(this._minTime.getTime()):void 0,this._selectedTime&&date.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0),this.options.value=this._currentSelected?new Date(date.getTime()):void 0,returnObj={value:this.options.value,valueString:ZDateUtil.formatDate(this.options.value,this.options.format)}}else{this._selectedDates.length?this._valueUpdate=!0:this._selectedTime=this._minTime?new Date(this._minTime.getTime()):void 0,shouldClose=this.options.selectionLimit&&this.options.selectionLimit===this._selectedDates.length&&!this._hasTime&&0===this._viewMode||$(orgEvent.target).closest(this._apply).length?!0:!1,this.options.values=[];for(var i=0;i<this._selectedDates.length;i++){var newDate=new Date(this._selectedDates[i]);this._selectedTime&&newDate.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0);var formattedDate=ZDateUtil.formatDate(newDate,this.options.format);this.options.values.push(formattedDate)}returnObj={values:this.options.values,valuesObject:this._selectedDates}}this._dispatchEvent("APPLY",orgEvent,returnObj),(!valueSet&&"single"===this.options.selectionType&&(isNotSubmit&&this.options.closeOnDateSelect&&!this._hasTime&&0===this._viewMode||!isNotSubmit)||"multiple"===this.options.selectionType&&shouldClose)&&this._closePicker()}this._valueUpdate=this.options.value||this.options.values.length},_createCloseButton:function(){var innerClose;if(this._closeButton)innerClose=this._closeButton.find("."+$.zdatetimepicker._CLASSES.navIcon);else{var closeText=this._localize("close");this._closeButton=$("<button role='button' type='button' class='"+$.zdatetimepicker._CLASSES.close+"' title='"+closeText+"' aria-label='"+closeText+"'></div>"),this._closeButton.appendTo(this.element.find("."+$.zdatetimepicker._CLASSES.header)),innerClose=$("<i class='"+$.zdatetimepicker._CLASSES.navIcon+"'></i>"),innerClose.appendTo(this._closeButton)}innerClose.removeAttr("class").addClass($.zdatetimepicker._CLASSES.navIcon);var svgData={props:{viewBox:"0 0 16 16"},nodes:[{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)","class":"st0",width:"13",height:"1.1"}},{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)","class":"st0",width:"13",height:"1.1"}}]};this._handleIcon(innerClose,svgData,"closebutton",this.options.closeIconClassName,this.options.closeSVGIconId),this._closeButton.on("click."+this.componentName,this._closeClickHandler.bind(this))},_performValidations:function(){var displayType="monthYearSelectionMode",format="headingDateFormat",len=this.options.values.length;!this.options.drilldownLevelOnOpen&&(this.options.drilldownLevelOnOpen="dates"),this.options.format||(this.options.format=this._CONSTANTS.defaultDateFormat),this._validateBoundaries(),this.options.navigationBar[displayType]=/^(dropdown|drilldown|none)$/.test(this.options.navigationBar[displayType])?this.options.navigationBar[displayType]:this._CONSTANTS[displayType],/^(top|bottom|right|left|top-left|top-right|bottom-left|bottom-right)$/.test(this.options.position)||(this.options.position="bottom"),this.options.navigationBar.monthSwitcher||this.options.navigationBar.yearSwitcher||(this.options[displayType]="none"),this.options.displayType=/^(box|callout)$/.test(this.options.displayType)?this.options.displayType:this._CONSTANTS.displayType,this.options.navigationBar.yearNavigationButtons=this._yearNavigation||"dropdown"===!this.options.navigationBar[displayType],this.options.navigationBar.monthYearHeadingFormat=/^(MMM yyyy|MMMM yyyy|yyyy MMM|yyyy MMMM)$/.test(this.options.navigationBar.monthYearHeadingFormat)?this.options.navigationBar.monthYearHeadingFormat:this._CONSTANTS[format];for(var stepOptions=["hourStep","minuteStep"],i=0,len=stepOptions.length;len>i;i++)this.options[stepOptions[i]]=Number(this.options[stepOptions[i]]),this.options[stepOptions[i]]<=0&&(this.options[stepOptions[i]]=1)},_checkIfDateHasTime:function(){var format=this.options.format,hasTime=format.indexOf("H")>-1||format.indexOf("h")>-1||format.indexOf("m")>-1;hasTime&&(this._is12HourFormat=format.indexOf("h")>-1,this._timeFormat=format.substring(format.indexOf(-1===format.indexOf("h")?"H":"h")));var maxIndex,minIndex,dateLastIndex=format.lastIndexOf("d"),monthLastIndex=format.lastIndexOf("M"),yearLastIndex=format.lastIndexOf("y");maxIndex=Math.max(dateLastIndex,monthLastIndex),maxIndex=Math.max(maxIndex,yearLastIndex);var dateFirstIndex=format.indexOf("d"),monthFirstIndex=format.indexOf("M"),yearFirstIndex=format.indexOf("y");return minIndex=Math.min(dateFirstIndex,monthFirstIndex),minIndex=Math.min(minIndex,yearFirstIndex),this._dateFormat=format.substring(minIndex,maxIndex+1),hasTime},_buildElement:function(element){var preventConstruct=element;element=element||this.element;var monthYearFormat=this.options.navigationBar.monthYearHeadingFormat.split(" "),displayType=this.options.navigationBar.monthYearSwitcherType,monthSwitcher=this.options.navigationBar.monthSwitcher,yearSwitcher=this.options.navigationBar.yearSwitcher;if(this._hasDate){if(1===this._monthsPerView)preventConstruct&&0!==preventConstruct.length||(element.addClass($.zdatetimepicker._CLASSES.datepicker),element.append($($.zdatetimepicker._TEMPLATE))),this._elementId=element[0].getAttribute("id")?element[0].getAttribute("id"):Math.floor(1e6*Math.random())+"_zdatetimepicker",element[0].setAttribute("id",this._elementId),this.options.appendTo&&element.appendTo($(this.options.appendTo)),this._fillDayOfWeek(element),this._fillNavBar(this._viewDate,{left:!0,right:!0,element:element}),this._fillDates(void 0,element),this._updateArrowState(),this._generateContent(element),"yyyy"===monthYearFormat[0]&&element.find("."+$.zdatetimepicker._CLASSES.yearNav).prependTo(this._monthYearNav),"drilldown"===displayType&&(monthSwitcher||yearSwitcher)&&this._monthYearNav.addClass("h-cursorpointer"),"dropdown"===displayType&&this._bindSelectBox();else{this.element.addClass($.zdatetimepicker._CLASSES.group).append($("<ul class='"+$.zdatetimepicker._CLASSES.container+"'></ul>"));var navDisplayType=this.options.navigationBar.navigationButtonsDisplayPattern,position=this.options.navigationBar.togetherTypeNavigationButtonsPosition;this._elementId=this.element[0].getAttribute("id")?this.element[0].getAttribute("id"):Math.floor(1e6*Math.random())+"_zdatetimepicker",this.element.appendTo(this.options.appendTo?$(this.options.appendTo):"body")[0].setAttribute("id",this._elementId);for(var i=0;i<this._monthsPerView;i++){this._navBar=this._monthYearNav=this._leftNav=this._rightNav=this._weeknumbers=void 0;var element=$($.zdatetimepicker._TEMPLATE),parent=$("<li class='"+$.zdatetimepicker._CLASSES.list+"'><div class='"+$.zdatetimepicker._CLASSES.datepicker+"'></div></li>").appendTo(this.element.find("ul"));element.appendTo(parent.find("."+$.zdatetimepicker._CLASSES.datepicker)),this._fillDayOfWeek(element);var newDate=new Date(this._viewDate.getTime());newDate.setMonth(this._viewDate.getMonth()+i),0===i?("dropdown"===displayType&&this.options.navigationBar.yearNavigationButtons&&this.options.navigationBar.monthNavigationButtons&&element.addClass($.zdatetimepicker._CLASSES.dropdown),this._fillNavBar(this._viewDate,{index:i,left:"right"===position&&"together"===navDisplayType?!1:!0,element:element}),this._fillDates(void 0,element),this._updateArrowState(this._viewDate,i),"drilldown"===displayType&&(monthSwitcher||yearSwitcher)&&this._monthYearNav.addClass("h-cursorpointer")&&this._monthYearNav.on("click."+this.componentName,this._monthYearNavClickHandler.bind(this)),"dropdown"===displayType&&this._bindSelectBox()):(i===this._monthsPerView-1?(this._fillNavBar(newDate,{index:i,right:!0,left:"together"===navDisplayType&&"right"===position?!0:!1,element:element}),this._updateArrowState(newDate,i)):this._fillNavBar(newDate,{index:i,element:element}),this._fillDates(newDate,element)),"yyyy"===monthYearFormat[0]&&$(this.element.find("."+$.zdatetimepicker._CLASSES.datepicker)[i]).find("."+$.zdatetimepicker._CLASSES.yearNav).prependTo(this._monthYearNav)}this._generateContent()}this._appendEmptyTd(),"callout"===this.options.displayType&&this._constructPointer()}else this.element.addClass($.zdatetimepicker._CLASSES.datepicker);this._hasTime&&this._buildTimePicker(),"multiple"===this.options.selectionType&&this.element.find("."+$.zdatetimepicker._CLASSES.dateView).attr("aria-multiselectable",!0),this.options.customHTMLBelowCalendar&&this._insertHTMLBelowCalendar(),this.options.customHTMLAboveCalendar&&this._insertHTMLAboveCalendar()},_generateContent:function(element){if("drilldown"===this.options.navigationBar.monthYearSwitcherType)switch(this._viewMode){case 1:this._fillMonths(!0,element);break;case 2:this._fillYears(!0,element);break;case 3:this._fillDecades(!0,element)}},_insertHTMLAboveCalendar:function(){var element=$(this.options.customHTMLAboveCalendar);this._aboveCalendarParent=element.parent(),element.length&&(!element.is(":visible")&&element.show(),element.addClass("zdatetimepicker--custom"),element.insertBefore(this.element.find("."+$.zdatetimepicker._CLASSES.dateView)))},_insertHTMLAboveNavbar:function(){var element=$(this.options.customHTMLAboveNavigationBar);this._aboveNavbarParent=element.parent(),element.length&&(!element.is(":visible")&&element.show(),element.addClass("zdatetimepicker--custom"),this.options.title?element.insertAfter(this.element.find("."+$.zdatetimepicker._CLASSES.title)):element.prependTo(this.element))},_insertHTMLBelowCalendar:function(){var element=$(this.options.customHTMLBelowCalendar);this._belowCalendarParent=element.parent(),element.length&&(!element.is(":visible")&&element.show(),element.addClass("zdatetimepicker--custom"),element.insertAfter(1===this._monthsPerView?this.element.find("."+$.zdatetimepicker._CLASSES.body).last():this.element.find("."+$.zdatetimepicker._CLASSES.container)))},_constructPointer:function(){this._isPositionModified||(this.options.position=this._CONSTANTS.calloutPosition),this._pointer=$("<div class='"+$.zdatetimepicker._CLASSES.pointer+"'></div>").prependTo(this.element)},_buildTimePicker:function(ignoreValue){var shouldSetValue,minTime=this._minTime?new Date(this._minTime.getTime()):void 0,maxTime=this._maxTime?new Date(this._maxTime.getTime()):void 0;shouldSetValue=this._checkBoundaryValues(),shouldSetValue.min&&(minTime=this._unsetValue("_minTime")),shouldSetValue.max&&(maxTime=this._unsetValue("_maxTime"));var multipleContainer,hasButtons=this.options.todayButton||this.options.clearButton||!this.options.immediateCommit;switch(this._validateTimeOptions(),this._timeElement=$("<div class='"+$.zdatetimepicker._CLASSES.timepicker+" "+(3===this._monthsPerView&&hasButtons?"h-align"+("left"===this.options.buttonsAlignment?"right":"left"):"h-aligncenter")+"'></div>"),hasButtons&&"right"===this.options.buttonsAlignment&&this._footer?this._timeElement.insertBefore(this._footer):this._timeElement.appendTo(this.element),"multiple-select-box"===this.options.timeFieldType&&(multipleContainer=$("<div class='zdatetimepicker--multipleselectbox'>").appendTo(this._timeElement)),this._buildLabel(multipleContainer),this.options.timeFieldType){case"input":this._buildInputElement();break;case"multiple-select-box":"h-m-t"===this.options.timeMultipleSelectBoxType&&this._buildTimeSelectBox(multipleContainer,ignoreValue),"hm-t"===this.options.timeMultipleSelectBoxType&&this._buildCombinedTimeSelectBox(multipleContainer);break;case"single-select-box":this._buildSingleTimeSelect(this._timeElement)}3===this._monthsPerView&&this._footer&&this._footer.length&&this._hasTime&&this.element.addClass($.zdatetimepicker._CLASSES.triple);var tempDate=new Date;tempDate=!ignoreValue&&this.options.value?tempDate.setHours(this.options.value.getHours(),this.options.value.getMinutes(),0,0):this._minTime?tempDate.setHours(this._minTime.getHours(),this._minTime.getMinutes(),0,0):this._viewDate.getTime(),this._viewDate=new Date(tempDate),shouldSetValue.min&&(this._minTime=new Date(minTime.getTime())),shouldSetValue.max&&(this._maxTime=new Date(maxTime.getTime()))},_buildCombinedTimeSelectBox:function(container){for(var timeSelect="<select id='"+this._elementId+"-time-combined'>",timeString="",i=this._is12HourFormat?1:0;i<=(this._is12HourFormat?12:23);i+=this.options.hourStep)for(var j=0;59>j;j+=this.options.minuteStep){if(timeString=(10>i?"0"+i:i)+":"+(10>j?"0"+j:j),!this._is12HourFormat){var date=this._parseDateValue(timeString,this._timeFormat).date,disabled="";
disabled=this._minTime&&date.getTime()<this._minTime.getTime()||this._maxTime&&date.getTime()>this._maxTime.getTime(),disabled=disabled?"disabled":""}timeSelect+="<option value='"+timeString+"' "+disabled+">"+timeString+"</option>"}if(timeSelect+="</select>",this._combinedTimeElement=$(timeSelect),this._combinedTimeElement.appendTo(container),this._combinedTimeElement.zselectbox({dropdownList:{width:100,height:200,className:"zdatetimepicker--menu"},itemclick:this._combinedTimeClickHandler.bind(this)}),this._is12HourFormat){var hourValue,hourVal;hourValue=this.options.value?new Date(this.options.value.getTime()):this._minTime?new Date(this._minTime.getTime()):void 0,hourValue&&(hourVal=hourValue.getHours());var periodHTML="<select id='"+this._elementId+"-combined-period'><option value='AM' "+(11>hourVal?"selected":"")+">AM</option><option value='PM' "+(hourVal>11?"selected":"")+">PM </option></select>";this._combinedPeriodElement=$(periodHTML),this._combinedPeriodElement.appendTo(container),this._combinedPeriodElement.zselectbox({dropdownList:{width:50,height:330,className:"zdatetimepicker--menu"},itemclick:this._combinedPeriodClickHandler.bind(this)})}this._checkCombinedTimeOptions()},_checkCombinedTimeOptions:function(orgEvent){var selectedPeriod,options,selectedValue,disabledValue,time,date,selected,currentTime,value;this._is12HourFormat&&(selectedPeriod=this._combinedPeriodElement.zselectbox("getAttribute","selectedValue")),options=this._combinedTimeElement.find("option"),selectedValue=this._combinedTimeElement.zselectbox("getAttribute","selectedValue");for(var i=0,len=options.length;len>i;i++)selectedPeriod?(time=options[i].value+" "+selectedPeriod,date=this._parseDateValue(time,this._timeFormat).date,selected,disabledValue="PM"===selectedPeriod?this._minTime&&this._minTime.getHours()>12&&date.getTime()<this._minTime.getTime()||this._maxTime&&this._maxTime.getHours()>12&&date.getTime()>this._maxTime.getTime():this._minTime&&this._minTime.getHours()<12&&date.getTime()<this._minTime.getTime()||this._maxTime&&this._maxTime.getHours()<12&&date.getTime()>this._maxTime.getTime(),disabledValue=void 0===disabledValue?!1:disabledValue,disabledValue=this._checkIfTimeIsDisabled(date,date.getMinutes(),disabledValue),this._combinedTimeElement.zselectbox("setOptionAttributes",options[i],{disabled:disabledValue,customAttributes:{"data-time":date.getTime()}})):(date=this._parseDateValue(options[i].value,this._timeFormat).date,this._combinedTimeElement.zselectbox("setOptionAttributes",options[i],"customAttributes",{"data-time":date.getTime()})),i>0&&(value=new Date,this.options.value?value.setHours(this.options.value.getHours(),this.options.value.getMinutes(),0,0):value.setSeconds(0,0),time=parseInt(options[i-1].getAttribute("data-time")),currentTime=date.getTime(),selected=this.options.value?time<value.getTime()&&currentTime>=value.getTime():this._minTime&&time<this._minTime.getTime()&&currentTime>=this._minTime.getTime()||this._maxTime&&time>this._maxTime.getTime()&&currentTime<=this._maxTime.getTime()),selected&&!orgEvent?selectedValue=options[i].value:this._combinedTimeElement.zselectbox("getAttribute","selectedValue").length&&(selectedValue=this._combinedTimeElement.zselectbox("getAttribute","selectedValue"));if(!orgEvent&&this._combinedTimeElement.zselectbox("setAttribute","selectedValue",selectedValue),this._is12HourFormat){var date,disabledValue,time=selectedValue+" "+selectedPeriod;date=this._parseDateValue(time,this._timeFormat).date,date&&("PM"===selectedPeriod?(date.setHours(date.getHours()-12),disabledValue=this._minTime&&date.getTime()<this._minTime.getTime()||this._maxTime&&date.getTime()>this._maxTime.getTime()):(date.setHours(date.getHours()+12),disabledValue=this._minTime&&date.getTime()<this._minTime.getTime()||this._maxTime&&date.getTime()>this._maxTime.getTime()),disabledValue=void 0===disabledValue?!1:disabledValue,disabledValue=this._checkIfTimeIsDisabled(date,date.getMinutes(),disabledValue,date.getHours()),this._combinedPeriodElement.zselectbox("setOptionAttributes","PM"===selectedPeriod?"AM":"PM","disabled",disabledValue))}},_combinedPeriodClickHandler:function(orgEvent){this._checkCombinedTimeOptions(orgEvent),this._setCombinedTimeValues(orgEvent)},_combinedTimeClickHandler:function(orgEvent){this._checkCombinedTimeOptions(orgEvent),this._setCombinedTimeValues(orgEvent)},_setCombinedTimeValues:function(orgEvent){var selectedTime;if(selectedTime=this._combinedTimeElement.zselectbox("getAttribute","selectedValue"),this._is12HourFormat){var selectedPeriod=this._combinedPeriodElement.zselectbox("getAttribute","selectedValue");selectedTime=selectedTime+" "+selectedPeriod}var date=this._parseDateValue(selectedTime,this._timeFormat).date;this._viewDate.setHours(date.getHours(),date.getMinutes(),0,0),this._selectedTime=new Date(this._viewDate.getTime()),this._updateTimeForMultiple(date),this.options.immediateCommit&&(this._currentSelected||this._selectedDates.length)&&this._applyClickHandler(orgEvent,!0)},_validateTimeOptions:function(){this._minTime=this.options.minTime||this._minTime,this._maxTime=this.options.maxTime||this._maxTime,this._minTime&&(this._minTime=this._parseDateValue(this._minTime,this._timeFormat).date,this._minTime.setSeconds(0,0)),this._maxTime&&(this._maxTime=this._parseDateValue(this._maxTime,this._timeFormat).date,this._maxTime.setSeconds(0,0)),this._minTime&&this._maxTime&&ZDateUtil.isGreater(this._minTime,this._maxTime)&&(this._maxTime=this.options.maxTime=void 0);var tempDate;this.options.value&&(tempDate=new Date,tempDate.setHours(this.options.value.getHours(),this.options.value.getMinutes(),0,0)),this._maxTime&&tempDate&&ZDateUtil.isGreater(tempDate,this._maxTime)&&this.options.value.setHours(this._maxTime.getHours(),this._maxTime.getMinutes(),0,0),this._minTime&&tempDate&&ZDateUtil.isGreater(this._minTime,tempDate)&&this.options.value.setHours(this._minTime.getHours(),this._minTime.getMinutes(),0,0),this.options.disabledTimeList.length&&"string"==typeof this.options.disabledTimeList[0]&&this._convertStringToObject({disabledTimeList:this.options.disabledTimeList}),this._selectedTime=this.options.value?tempDate:this._minTime?new Date(this._minTime.getTime()):void 0},_buildLabel:function(multipleContainer){var hasIcon=!1;if(("icon"===this.options.timeLabelType||"icon-text"===this.options.timeLabelType)&&(hasIcon=!0,this._createTimeIcon(multipleContainer)),"text"===this.options.timeLabelType||"icon-text"===this.options.timeLabelType){var label=this._timeElement.find("."+$.zdatetimepicker._CLASSES.timeLabel);0===label.length&&(label=$("<span class='"+$.zdatetimepicker._CLASSES.timeLabel+"'></span>"),hasIcon?label.insertAfter(this._timeElement.find("."+$.zdatetimepicker._CLASSES.timeIcon)):label.prependTo(multipleContainer||this._timeElement)),label.text(this.options.timeLabel||this._localize("timeLabel"))}},_buildSingleTimeSelect:function(container){var len=this.options.fixedTimeOptions.length,options=this.options.fixedTimeOptions;if(len){for(var timeHTML="<select id= '"+this._elementId+"-single-time-select'>",i=0;len>i;i++){var selected,isGreater,date=this._parseDateValue(options[i],this._timeFormat).date,disabled="";if(date.setSeconds(0,0),this.options.value){var tempDate=new Date;tempDate.setHours(this.options.value.getHours(),this.options.value.getMinutes(),0,0)}selected=tempDate&&ZDateUtil.areTimesEqual(date,tempDate)?"selected":"",isGreater=!this._minTime&&!this._maxTime||(this._minTime?ZDateUtil.isGreater(date,this._minTime):!0)&&(this._maxTime?ZDateUtil.isGreater(this._maxTime,date):!0);for(var j=0;j<this.options.disabledTimeList.length;j++){var timeObj=this.options.disabledTimeList[j].date;if(date.getTime()===timeObj.getTime()){disabled="disabled";break}}isGreater&&(timeHTML+="<option value='"+date.getTime()+"' "+selected+" "+disabled+">"+options[i]+"</option>")}timeHTML+="</select>"}timeHTML=$(timeHTML).appendTo(container),this._singleTimeSelect=timeHTML,this._singleTimeSelect.zselectbox({dropdownList:{width:100,height:200,className:"zdatetimepicker--menu"},itemclick:this._singleSelectClickHandler.bind(this),width:"auto"})},_singleSelectClickHandler:function(orgEvent,ui){var date=new Date(parseInt(ui.selectedValue));this._viewDate.setHours(date.getHours(),date.getMinutes(),0,0),this._selectedTime=new Date(this._viewDate.getTime()),this._updateTimeForMultiple(this._viewDate),this.options.immediateCommit&&this._applyClickHandler(orgEvent,!0)},_buildTimeSelectBox:function(container,ignoreValue){var minHours,maxHours,minMinutes,maxMinutes,valueString,hourHTML="<select id='"+this._elementId+"-hour'>";this.options.value&&(valueString=ZDateUtil.formatDate(this.options.value,this.options.format)),this._minTime&&(minHours=this._minTime.getHours(),minMinutes=this._minTime.getMinutes()),this._maxTime&&(maxHours=this._maxTime.getHours(),maxMinutes=this._maxTime.getMinutes());var disabled,selected,selectedHour,selectedH,acceptValue;acceptValue=!ignoreValue&&this.options.value,selectedH=acceptValue?this._normalizeHourValue(this.options.value.getHours()):minHours?this._normalizeHourValue(minHours):this._is12HourFormat?12:0;for(var i=this._is12HourFormat?1:0;i<=(this._is12HourFormat?12:23);i++)this._is12HourFormat?selected=i===selectedH?"selected":"":(selected=i===selectedH?"selected":"","selected"===selected&&(selectedHour=i),disabled=minHours>i||i>maxHours?"disabled":""),hourHTML+="<option "+disabled+" value="+i+" "+selected+">"+(10>i?"0"+i:i)+"</option>";hourHTML+="</select>",hourHTML=$(hourHTML),hourHTML.appendTo(container),this._viewDate.setHours(acceptValue?this.options.value.getHours():this._minTime?minHours:0),this._hourElement=$("#"+this._elementId+"-hour");for(var minuteHTML="<select id='"+this._elementId+"-minute'>",i=0;59>=i;i+=this.options.minuteStep){this._is12HourFormat?selected=0:(disabled=minMinutes>i&&selectedHour===minHours?"disabled":"",disabled=void 0===disabled?!1:disabled);var minuteValue=acceptValue?this.options.value.getMinutes():this._minTime?minMinutes:0;selected=i-this.options.minuteStep<minuteValue&&i>=minuteValue?" selected":"",minuteHTML+="<option "+disabled+" value="+i+" "+selected+" >"+(10>i?"0"+i:i)+"</option>",this._viewDate.setMinutes(minuteValue)}if(minuteHTML+="</select>",minuteHTML=$(minuteHTML),minuteHTML.appendTo(container),this._minuteElement=$("#"+this._elementId+"-minute"),this._is12HourFormat){var hourValue,hour12Hr;acceptValue&&(hourValue=this.options.value.getHours()),hourValue=acceptValue?this.options.value.getHours():this._minTime?this._minTime.getHours():void 0,hour12Hr=hourValue%12;var periodHTML="<select id='"+this._elementId+"-period'><option value='AM' "+(11>hourValue?"selected":"")+">AM</option><option value='PM' "+(hourValue>11?"selected":"")+">PM </option></select>";periodHTML=$(periodHTML),periodHTML.appendTo(container),this._periodElement=$("#"+this._elementId+"-period")}this._bindTimeSelectbox(),(this._minTime||this._maxTime||this.options.disabledTimeList.length)&&this._checkTimeOptions(void 0,!1)},_checkIfTimeIsDisabled:function(tempDate,minuteVal,isDisabled,hours){var isDisabled,disabledTime=this.options.disabledTimeList;hours=hours||tempDate.getHours(),minuteVal=minuteVal||tempDate.getMinutes();for(var j=0;j<disabledTime.length;j++){var timeObj=disabledTime[j].date;if(hours===timeObj.getHours()&&minuteVal===timeObj.getMinutes()){isDisabled=!0;break}}return isDisabled},_unsetValue:function(variable){if(this[variable]){var value=new Date(this[variable].getTime());return this[variable]=void 0,value}},_checkTimeOptions:function(ui,valueCheck,date){var shouldSetValue,minTime=this._minTime?new Date(this._minTime.getTime()):void 0,maxTime=this._maxTime?new Date(this._maxTime.getTime()):void 0;shouldSetValue=this._checkBoundaryValues(),shouldSetValue.min&&(minTime=this._unsetValue("_minTime")),shouldSetValue.max&&(maxTime=this._unsetValue("_maxTime")),date=date||this._viewDate;var tempDate=(new Date).setHours(date.getHours(),date.getMinutes(),0,0);if(tempDate=new Date(tempDate),this._is12HourFormat){for(var i=0;59>=i;i+=this.options.minuteStep){var condition=this._minTime&&tempDate.getHours()===this._minTime.getHours()&&i<this._minTime.getMinutes()||this._maxTime&&tempDate.getHours()===this._maxTime.getHours()&&i>this._maxTime.getMinutes();condition=void 0===condition?!1:condition,condition=this._checkIfTimeIsDisabled(tempDate,i,condition),this._minuteElement.zselectbox("setOptionAttributes",i,"disabled",condition)}for(var i=1;12>=i;i+=this.options.hourStep){var disabled,hour=i,selectedMin=parseInt(this._minuteElement.zselectbox("getAttribute","selectedValue"));if(tempDate.getHours()>=12){hour=12===i?i:i+12;var condition=this._minTime&&(hour<this._minTime.getHours()||hour===this._minTime.getHours()&&selectedMin<this._minTime.getMinutes())||this._maxTime&&(hour>this._maxTime.getHours()||hour===this._maxTime.getHours()&&selectedMin>this._maxTime.getMinutes());condition=void 0===condition?!1:condition,condition=this._checkIfTimeIsDisabled(tempDate,tempDate.getMinutes(),condition,hour),disabled=23>=hour&&condition}else{hour=i%12;var condition=this._minTime&&(hour<this._minTime.getHours()||hour===this._minTime.getHours()&&selectedMin<this._minTime.getMinutes())||this._maxTime&&(hour>this._maxTime.getHours()||hour===this._maxTime.getHours()&&selectedMin>this._maxTime.getMinutes());condition=void 0===condition?!1:condition,condition=this._checkIfTimeIsDisabled(tempDate,tempDate.getMinutes(),condition,hour),disabled=condition}this._hourElement.zselectbox("setOptionAttributes",i,"disabled",disabled)}var hours;hours=tempDate.getHours()-12;var condition=tempDate.getHours()>=12&&(this._minTime&&(this._minTime.getHours()===hours&&tempDate.getMinutes()<this._minTime.getMinutes()||hours<this._minTime.getHours())||this._maxTime&&(this._maxTime.getHours()===hours&&tempDate.getMinutes()<this._maxTime.getMinutes()||hours>this._maxTime.getHours()));condition=void 0===condition?!1:condition,condition=this._checkIfTimeIsDisabled(tempDate,tempDate.getMinutes(),condition,hours),this._periodElement.zselectbox("setOptionAttributes","AM","disabled",condition),hours=tempDate.getHours()+12;var condition=tempDate.getHours()<12&&(this._minTime&&(this._minTime.getHours()===hours&&tempDate.getMinutes()<this._minTime.getMinutes()||hours<this._minTime.getHours())||this._maxTime&&(this._maxTime.getHours()===hours&&tempDate.getMinutes()>this._maxTime.getMinutes()||hours>this._maxTime.getHours()));condition=void 0===condition?!1:condition,condition=this._checkIfTimeIsDisabled(tempDate,tempDate.getMinutes(),condition,hours),this._periodElement.zselectbox("setOptionAttributes","PM","disabled",condition),this._setSelectedTimeValues(valueCheck)}else{var selectedMin,disabled;selectedMin=parseInt(this._minuteElement.zselectbox("getAttribute","selectedValue"));for(var i=0;59>=i;i+=this.options.minuteStep){var condition=this._minTime&&tempDate.getHours()===this._minTime.getHours()&&i<this._minTime.getMinutes()||this._maxTime&&tempDate.getHours()===this._maxTime.getHours()&&i>this._maxTime.getMinutes();condition=void 0===condition?!1:condition,condition=this._checkIfTimeIsDisabled(tempDate,i,condition),this._minuteElement.zselectbox("setOptionAttributes",i,"disabled",condition)}this._minTime&&this._hourElement.zselectbox("setOptionAttributes",this._minTime.getHours(),"disabled",tempDate.getMinutes()<this._minTime.getMinutes()),this._maxTime&&this._hourElement.zselectbox("setOptionAttributes",this._maxTime.getHours(),"disabled",tempDate.getMinutes()>this._maxTime.getMinutes())}minTime&&(this._minTime=new Date(minTime.getTime())),maxTime&&(this._maxTime=new Date(maxTime.getTime()))},_normalizeHourValue:function(hourValue){return this._is12HourFormat&&(0===hourValue?hourValue=12:hourValue>0&&11>=hourValue?hourValue=(hourValue+12)%12:hourValue>11&&(hourValue=hourValue%12===0?12:hourValue%12)),hourValue},_bindTimeSelectbox:function(){this._hourElement.zselectbox({dropdownList:{width:40,height:330,className:"zdatetimepicker--menu"},width:"auto"}),this._minuteElement.zselectbox({dropdownList:{width:40,height:330,className:"zdatetimepicker--menu"},width:"auto"}),this._periodElement&&this._periodElement.zselectbox({dropdownList:{width:50,height:330,className:"zdatetimepicker--menu"},width:"auto"}),$("#"+this._elementId+"-minute, #"+this._elementId+"-hour").on("zselectboxitemclick",this._timeSelectClickHandler.bind(this)),this._periodElement&&this._periodElement.on("zselectboxitemclick",this._periodClickHandler.bind(this))},_getHourValue:function(period,hourValue){var mod=hourValue%12;return hourValue="AM"===period?0===mod?0:hourValue:0===mod?12:hourValue+12},_periodClickHandler:function(orgEvent,ui){var hourValue=parseInt(this._hourElement.zselectbox("getAttribute","selectedValue"));hourValue=this._getHourValue(ui.selectedValue,hourValue),this._selectedPeriod=ui.selectedValue,this._viewDate.setHours(hourValue),this._dispatchEvent("PERIODCHANGE",orgEvent,{value:this.options.value,valueString:ZDateUtil.formatDate(this.options.value,this.options.format),selectedValue:ui.selectedValue}),(this._minTime||this._maxTime||this.options.disabledTimeList.length)&&this._checkTimeOptions(ui,!1),this._selectedTime=new Date(this._viewDate.getTime()),this.options.immediateCommit&&(this._currentSelected||this._selectedDates.length)&&this._applyClickHandler(orgEvent,!0)},_timeSelectClickHandler:function(orgEvent,ui){var value=parseInt(ui.selectedValue);if($(ui.selectbox).attr("id").indexOf("hour")>-1){if(this._is12HourFormat){var period=this._periodElement.zselectbox("getAttribute","selectedValue");value=this._getHourValue(period,value)}this._viewDate.setHours(value),this._dispatchEvent("HOURCHANGE",orgEvent,{value:this.options.value,valueString:ZDateUtil.formatDate(this.options.value,this.options.format),selectedValue:parseInt(ui.selectedValue)})}else this._viewDate.setMinutes(value),this._dispatchEvent("MINUTECHANGE",orgEvent,{value:this.options.value,valueString:ZDateUtil.formatDate(this.options.value,this.options.format),selectedValue:parseInt(ui.selectedValue)});(this._minTime||this._maxTime||this.options.disabledTimeList.length)&&this._checkTimeOptions(ui,!1),this._selectedTime=new Date(this._viewDate.getTime()),this._updateTimeForMultiple(this._viewDate),this.options.immediateCommit&&(this._currentSelected||this._selectedDates.length)&&this._applyClickHandler(orgEvent,!0)},_buildInputElement:function(){var input=$("<input type='text' style='width:100px' class='zdatetimepicker-timeinput'/>").appendTo(this._timeElement),base=this;input.data("zdatetimefield")&&input.zdatetimefield("destroy");var tempDate;this.options.value&&(tempDate=new Date,tempDate.setHours(this.options.value.getHours(),this.options.value.getMinutes(),0,0)),input.zdatetimefield({format:this._is12HourFormat?"hh:mm tt":"HH:mm",dateTimePicker:!1,value:this.options.value?tempDate:this._is12HourFormat?"12:00 AM":"00:00",min:this._minTime,max:this._maxTime,hourStep:this.options.hourStep,minuteStep:this.options.minuteStep,clearButton:"none",spinend:this._spinEndHandler.bind(base),picker:!1,change:this._timeFieldChangeHandler.bind(base)}),this._selectedTime=input.zdatetimefield("getAttribute","value")},_timeFieldChangeHandler:function(orgEvent){var date=this._timeElement.find("input").zdatetimefield("getAttribute","value");this._dispatchEvent("TIMECHANGE",orgEvent,{value:date,valueString:ZDateUtil.formatDate(date,this.options.format)})},_spinEndHandler:function(orgEvent,ui){this._timeModified=!0;var value=ui.dateValue;this._selectedTime=value,void 0!==value&&this._viewDate&&(this._viewDate.setHours(value.getHours(),value.getMinutes(),0,0),this._updateTimeForMultiple(value),this.options.immediateCommit&&(this._currentSelected||this._selectedDates.length)&&this._applyClickHandler(orgEvent,!0))},_updateTimeForMultiple:function(value){if("multiple"===this.options.selectionType)for(var i=0;i<this._selectedDates.length;i++)this._selectedDates[i].setHours(value.getHours(),value.getMinutes(),0,0)},_createTimeIcon:function(container){var timeIcon=this._timeElement.find("."+$.zdatetimepicker._CLASSES.timeIcon);0===timeIcon.length?timeIcon=$("<i class='"+$.zdatetimepicker._CLASSES.timeIcon+"'></i>"):timeIcon.empty(),timeIcon.removeAttr("class").attr("class",$.zdatetimepicker._CLASSES.timeIcon),timeIcon.prependTo(container||this._timeElement);var svgData={props:{viewBox:"0 0 18 18"},nodes:[{path:{d:"M9,1.1c4.4,0,7.9,3.5,7.9,7.9s-3.5,7.9-7.9,7.9S1.1,13.4,1.1,9S4.6,1.1,9,1.1 M9,0.1c-4.9,0-8.9,4-8.9,8.9s4,8.9,8.9,8.9 s8.9-4,8.9-8.9S13.9,0.1,9,0.1L9,0.1z M10,9V5L8,4v7h4l1-2H10z"}}]};this._handleIcon(timeIcon,svgData,"time",this.options.timeLabelIconClassName,this.options.timeLabelSVGIconId)},_createButtons:function(){var layout=this._checkIfColumnExists();this._footer||(this._footer=$("<div class='"+$.zdatetimepicker._CLASSES.footer+"'></div>").appendTo(this.element)),layout?this._generateCustomCols(this._footer):this._autoGenSingleColBtns(this._footer),this._footer&&(this._reset=this._footer.find(".clearButton-zdatetimepicker"),this._reset.length&&(this._reset.attr("aria-label",this._clearButtonLabel),this._handleFocus(this._reset)),this._apply=this._footer.find(".OKButton-zdatetimepicker"),this._apply.length&&(this._apply.attr("aria-label",this._OKButtonLabel),this._handleFocus(this._apply)),this._cancel=this._footer.find(".cancelButton-zdatetimepicker"),this._cancel.length&&(this._cancel.attr("aria-label",this._cancelButtonLabel),this._handleFocus(this._cancel)),this._today=this._footer.find(".zdatetimepicker__todaylink"),this._today&&this._today.attr("aria-label",this._todayButtonLabel)),this._applyButton=this._apply.length?!0:!1;var valueUnavailable="single"===this.options.selectionType?!this.options.value:this._selectedDates&&0===this._selectedDates.length;this._reset&&this._reset.length&&valueUnavailable&&this._reset.attr("disabled",!0).addClass("is-disabled"),3===this._monthsPerView&&"left"===this.options.buttonsAlignment&&this._footer.insertAfter(this.element.find("."+$.zdatetimepicker._CLASSES.container))},_generateCustomCols:function(footer){this._itemsList=[];var col,columns,layout=this.options.commandBar,className="",len=3,count=0;columns=["leftColumn","centerColumn","rightColumn"],this._monthsPerView>1&&(className="zdatetimepicker--threecolumn"),footer.addClass(className);for(var i=0;3>i;i++){var footerSegment,column=layout[columns[i]];if(this._monthsPerView>1&&(col=$("<div class='zdatetimepicker__column'>").appendTo(footer)),column){column.halign&&(footerSegment=$("<div class='zdatetimepicker__commandbaractions"+column.halign+"'></div>"),len>1&&this._monthsPerView>1&&footerSegment.appendTo(col),(1===this._monthsPerView||this._monthsPerView>1&&1==len)&&footerSegment.appendTo(footer));for(var j=0;j<column.commands.length;j++){var buttonExists,command=column.commands[j];if(buttonExists=this._itemsList.indexOf(command)>-1,"OK"===command){if(this.options.immediateCommit)continue;this._applyButton=!0}if(!buttonExists){if("today"===command)$("<a class='zdatetimepicker__todaylink'>"+this._todayButtonLabel+"</a>").appendTo(footerSegment);else{var label=command+"ButtonLabel";$("<button type='button' role='button' class='zbutton zbutton--small "+("OKButtonLabel"===label?"zbutton--primary":"")+" "+command+"Button-zdatetimepicker'><span class='zbutton__text'>"+this["_"+label]+"</span></button>").appendTo(footerSegment)}this._itemsList[count++]=command}}if(column.className){var element=col||footerSegment;element&&element.addClass(column.className)}}}},_autoGenSingleColBtns:function(footer){var commands=this.options,count=0;if(3!==this._monthsPerView){for(var buttons=["todayButton","clearButton","cancelButton","OKButton"],i=0;i<buttons.length;i++)commands[buttons[i]]&&(this.options.immediateCommit&&"OKButton"!==buttons[i]||!this.options.immediateCommit)&&(count++,this.options.immediateCommit&&(commands.OKButton=!1));if(1===count){for(var index,i=0;i<buttons.length;i++)if(commands[buttons[i]]){index=i;break}var position=this._CONSTANTS[buttons[index]+"Position"],label=this["_"+buttons[index]+"Label"],value=buttons[index];"todayButton"!==buttons[index]?$("<div class='zdatetimepicker__commandbaractions"+position+"'><button type='button' role='button' class='zbutton zbutton--small "+("OKButton"===value?"zbutton--primary ":"")+value+"-zdatetimepicker'><span class='zbutton__text'>"+label+"</span></button></div>").appendTo(footer):$("<div class='zdatetimepicker__commandbaractionscenter'><a class='zdatetimepicker__todaylink'>"+this._todayButtonLabel+"</a></div>").appendTo(footer)}else if(2===count){for(var i=1;i<buttons.length;i++)if(commands[buttons[i]]){index=i;break}var label=this["_"+buttons[index]+"Label"],value=buttons[index];if(commands.todayButton)$("<div class='zdatetimepicker__commandbaractionsleft'><a class='zdatetimepicker__todaylink'>"+this._todayButtonLabel+"</a></div>").appendTo(footer),$("<div class='zdatetimepicker__commandbaractionsright'><button type='button' role='button' class='zbutton zbutton--small "+("OKButton"===value?"zbutton--primary ":"")+value+"-zdatetimepicker'><span class='zbutton__text'>"+label+"</span></button></div>").appendTo(footer);else if(commands.OKButton&&3!==index){var footerElement;commands.clearButton?(footerElement=$("<div class='zdatetimepicker__commandbaractionsleft'><button type='button' class='zbutton zbutton--small "+value+"-zdatetimepicker'><span class='zbutton__text'>"+this._clearButtonLabel+"</span></button></div>").prependTo(footer),$("<div class='zdatetimepicker__commandbaractionsright'><button role='button' type='button' class='zbutton zbutton--small zbutton--primary OKButton-zdatetimepicker'><span class='zbutton__text'>"+this._OKButtonLabel+"</span></div>").appendTo(footer)):(footerElement=$("<div class='zdatetimepicker__commandbaractionsright'><button type='button' class='zbutton zbutton--small "+value+"-zdatetimepicker'><span class='zbutton__text'>"+label+"</span></button></div>").appendTo(footer),$("<button type='button' role='button' class='zbutton zbutton--small zbutton--primary OKButton-zdatetimepicker'><span class='zbutton__text'>"+this._OKButtonLabel+"</a>").appendTo(footerElement))}else $("<div class='zdatetimepicker__commandbaractionsleft'><button role='button' type='button' class='zbutton zbutton--small clearButton-zdatetimepicker'><span class='zbutton__text'>"+this._clearButtonLabel+"</span></button></div>").appendTo(footer),$("<div class='zdatetimepicker__commandbaractionsright'><button role='button' type='button' class='zbutton zbutton--small cancelButton-zdatetimepicker'><span class='zbutton__text'>"+this._cancelButtonLabel+"</span></button></div>").appendTo(footer)}else if(3===count){buttons=["todayButton","OKButton","clearButton","cancelButton"];for(var i=2;i<buttons.length;i++)if(commands[buttons[i]]){index=i;break}var rightFooter;commands.OKButton?(rightFooter=$("<div class='zdatetimepicker__commandbaractionsright'><button type='button' class='zbutton zbutton--small zbutton--primary OKButton-zdatetimepicker'><span class='zbutton__text'>"+this._OKButtonLabel+"</span></button></div>").appendTo(footer),commands.todayButton&&rightFooter.prepend("<button type='button' role='button' class='zbutton zbutton--small "+buttons[i]+"-zdatetimepicker'><span class='zbutton__text'>"+this["_"+buttons[i]+"Label"]+"</span></button>")):$("<div class='zdatetimepicker__commandbaractionsright'><button type='button' role='button' class='zbutton zbutton--small clearButton-zdatetimepicker'><span class='zbutton__text'>"+this._clearButtonLabel+"</span></button><button class='zbutton zbutton--small'><span class='zbutton__text'>"+commands.cancelButtonLabel+"</span></button></div>").appendTo(footer),commands.todayButton?$("<div class='zdatetimepicker__commandbaractionsleft'><a class='zdatetimepicker__todaylink'>"+this._todayButtonLabel+"</a></div>").appendTo(footer):($("<div class='zdatetimepicker__commandbaractionsleft'><button type='button' role='button' class='zbutton zbutton--small clearButton-zdatetimepicker'><span class='zbutton__text'>"+this._clearButtonLabel+"</span></button></div>").prependTo(footer),rightFooter&&rightFooter.prepend("<button type='button' role='button' class='zbutton zbutton--small cancelButton-zdatetimepicker'><span class='zbutton__text'>"+this._cancelButtonLabel+"</span></button>"))}else if(4===count){var footerEle=this.element.find(".zdatetimepicker__commandbaractionsright");$("<div class='zdatetimepicker__commandbaractionsleft'><button  type='button' role='button' class='zbutton zbutton--small clearButton-zdatetimepicker'><span class='zbutton__text'>"+this._clearButtonLabel+"</span></button></div>").prependTo(footer),$("<div class='zdatetimepicker__commandbaractionscenter'><a class='zdatetimepicker__todaylink'>"+this._todayButtonLabel+"</a></div>").appendTo(footer);var cancelElement=$("<button  type='button' role='button' class='zbutton zbutton--small cancelButton-zdatetimepicker'><span class='zbutton__text'>"+this._cancelButtonLabel+"</span></button>"),applyElement=$("<button type='button' role='button' class='zbutton zbutton--small zbutton--primary OKButton-zdatetimepicker'><span class='zbutton__text'>"+this._OKButtonLabel+"</span></button>"),footerEle=$("<div class='zdatetimepicker__commandbaractionsright'></div>").appendTo(footer);cancelElement.appendTo(footerEle),applyElement.appendTo(footerEle)}}else{var buttons,compartment=$("<div class='zdatetimepicker__commandbaractions"+this.options.buttonsAlignment+"'>").appendTo(footer);buttons="right"===this.options.buttonsAlignment?["clearButton","todayButton","cancelButton","OKButton"]:["OKButton","cancelButton","todayButton","clearButton"];for(var i=0;i<buttons.length;i++)if(commands[buttons[i]])if("todayButton"===buttons[i])$("<a class='zdatetimepicker__todaylink'>"+this._todayButtonLabel+"</a>").appendTo(compartment);else{var label=this["_"+buttons[i]+"Label"],className=buttons[i]+"-zdatetimepicker";$("<button type='button' role='button' class='zbutton zbutton--small "+className+" "+("OKButton"===buttons[i]?"zbutton--primary":"")+"'><span class='zbutton__text'>"+label+"</span></button>").appendTo(compartment)}}},_todayClickHandler:function(orgEvent){var oldViewDate=new Date(this._viewDate.getTime()),oldViewMode=this._viewMode;if(this._viewDate=new Date,this._viewDate.setHours(0,0,0,0),(0===this._viewMode&&!ZDateUtil.areDatesEqual(this._viewDate,oldViewDate)||0!==this._viewMode)&&(this._setViewMode(0,!0),this._renderContent()),this._dispatchEvent("TODAYBUTTONCLICK",orgEvent,{valueString:ZDateUtil.formatDate(this._viewDate,this.options.format),value:this._viewDate}),"navigate-and-select"===this.options.todayButtonAction){var todayElement=this.element.find("[data-time='"+this._viewDate.getTime()+"']");todayElement.hasClass($.zdatetimepicker._CLASSES.disabled)||(this._setDate(orgEvent,todayElement,this._viewDate),0===oldViewMode&&this.options.closeOnDateSelect&&this.options.immediateCommit&&"single"===this.options.selectionType&&this._closePicker())}},_bindSelectBox:function(){this._monthHeader&&this._monthHeader.zselectbox({dropdownList:{width:99,height:330,className:"zdatetimepicker--menu"},width:"107px"}),this._yearHeader&&this._yearHeader.zcombobox({acceptNewValues:!0,dropdownList:{width:99,height:330,className:"zdatetimepicker--menu"},width:"82px"})},_bindEvents:function(preventBinding){var displayType=this.options.navigationBar.monthYearSwitcherType,disabledCl=$.zdatetimepicker._CLASSES.disabled,componentName=this.componentName;this._bindArrowEvents(),!preventBinding&&this.element.off("mousedown."+componentName).on("mousedown."+componentName,"."+$.zdatetimepicker._CLASSES.date+":not(."+disabledCl+"), ."+$.zdatetimepicker._CLASSES.adjacent+":not(."+disabledCl+"), .zdatetimepicker__monthview:not(."+disabledCl+"), .zdatetimepicker__year:not(."+disabledCl+"), .zdatetimepicker__decade:not(."+disabledCl+")",this._dateClickHandler.bind(this)),this.element.off("mouseover."+componentName).on("mouseover."+componentName,this._mouseOverHandler.bind(this)),1===this._monthsPerView&&"drilldown"===displayType&&this._monthYearNav&&this._monthYearNav.on("click."+componentName,this._monthYearNavClickHandler.bind(this)),"dropdown"===displayType&&$("#"+this._elementId+"-month-header, #"+this._elementId+"-year-header").on("zselectboxitemclick zcomboboxchange",this._selectClickHandler.bind(this)),this.element.on("keydown."+componentName,this._keydownHandler.bind(this))
},_keydownHandler:function(orgEvent){orgEvent.keyCode===ZC.keyCode.ESCAPE&&this._closePicker(orgEvent)},_mouseOverHandler:function(orgEvent){var target=$(orgEvent.target);(target.closest("."+$.zdatetimepicker._CLASSES.date).length||target.closest("."+$.zdatetimepicker._CLASSES.adjacent).length)&&this._dispatchEvent("DATEMOUSEOVER",orgEvent,{cell:target})},_monthYearNavClickHandler:function(orgEvent,element){this.options.navigationBar.monthSwitcher?(orgEvent.stopPropagation(),this._fillMonths(orgEvent,element)):this.options.navigationBar.yearSwitcher&&(orgEvent.stopPropagation(),this._fillYears(orgEvent,element))},_fillMonths:function(firstView,element){var orgEvent;element=element||this.element,firstView&&void 0!==firstView.type&&(orgEvent=firstView),this._dispatchEvent("BEFOREDRILLDOWN",orgEvent,{viewMode:this._viewMode,element:this.element}),this._monthDrillDownElement?(this._updateMonthClasses(element),this._updateYearArrowState(1)):(this._monthDrillDownElement=$("<div class='zdatetimepicker__months "+$.zdatetimepicker._CLASSES.body+"'>").insertAfter(element.find(".zdatetimepicker__days")[0]),this._buildMonthNavBar(),this._buildMonthNavBarBody(),this.options.navigationBar.yearSwitcher&&this._monthDrillDownElement.find("."+$.zdatetimepicker._CLASSES.monthYearNav).on("click."+this.componentName,this._fillYears.bind(this)).addClass("h-cursorpointer")),this._setViewMode(1,"boolean"==typeof firstView,element),this._dispatchEvent("DRILLDOWN",orgEvent,{viewMode:this._viewMode,element:this.element,viewElement:this._monthDrillDownElement})},_fillYears:function(firstView,element){var orgEvent;if(firstView&&void 0!==firstView.type&&(firstView.stopPropagation(),firstView.preventDefault()),this._monthDrillDownElement&&1===this._viewMode||this._fillMonths(void 0,element),this._dispatchEvent("BEFOREDRILLDOWN",orgEvent,{viewMode:this._viewMode,element:this.element}),this._yearDrillDownElement){this._yearDrillDownElement.find("."+$.zdatetimepicker._CLASSES.gridContainer).remove();var curYear=this._viewDate.getFullYear(),yearStart=10*Math.floor(curYear/10),yearEnd=yearStart+9;this._yearDrillDownElement.find("."+$.zdatetimepicker._CLASSES.yearNav).text(yearStart+"-"+yearEnd),this._yearNavBar.find("."+$.zdatetimepicker._CLASSES.yearNav).data({start:yearStart}),this._updateYearArrowState(2,yearStart),this._buildYearNavBarBody()}else this._yearDrillDownElement=$("<div class='zdatetimepicker__years "+$.zdatetimepicker._CLASSES.body+"'>"),this._monthDrillDownElement?this._yearDrillDownElement.insertAfter(this._monthDrillDownElement):void 0,this._buildYearNavBar(),this._buildYearNavBarBody(),this._yearDrillDownElement.find("."+$.zdatetimepicker._CLASSES.monthYearNav).on("click."+this.componentName,this._fillDecades.bind(this)).addClass("h-cursorpointer");this._setViewMode(2,"boolean"==typeof firstView,element),this._dispatchEvent("BEFOREDRILLDOWN",orgEvent,{viewMode:this._viewMode,element:this.element,viewElement:this._yearDrillDownElement})},_fillDecades:function(firstView,element){var orgEvent;if(void 0!==firstView.type&&(firstView.stopPropagation(),firstView.preventDefault()),this._yearDrillDownElement||this._fillYears(void 0,element),this._dispatchEvent("BEFOREDRILLDOWN",orgEvent,{viewMode:this._viewMode,element:this.element}),this._decadeDrillDownElement){this._decadeDrillDownElement.find("."+$.zdatetimepicker._CLASSES.gridContainer).remove();var curYear=this._viewDate.getFullYear(),yearStart=100*Math.floor(curYear/100),yearEnd=yearStart+90;this._decadeDrillDownElement.find("."+$.zdatetimepicker._CLASSES.yearNav).text(yearStart+"-"+yearEnd),this._decadeNavBar.find("."+$.zdatetimepicker._CLASSES.yearNav).data({start:yearStart}),this._buildDecadeNavBarBody()}else this._decadeDrillDownElement=$("<div class='zdatetimepicker__decades "+$.zdatetimepicker._CLASSES.body+"'>"),this._yearDrillDownElement?this._decadeDrillDownElement.insertAfter(this._yearDrillDownElement):void 0,this._buildDecadeNavBar(),this._buildDecadeNavBarBody();this._setViewMode(3,"boolean"==typeof firstView,element),this._dispatchEvent("BEFOREDRILLDOWN",orgEvent,{viewMode:this._viewMode,element:this.element,viewElement:this._decadeDrillDownElement})},_buildDecadeNavBar:function(){this._decadeNavBar=$("<div class='"+$.zdatetimepicker._CLASSES.navBar+"'></div>");var curYear=this._viewDate.getFullYear(),yearStart=100*Math.floor(curYear/100),yearEnd=yearStart+90,yearNav="<div class='"+$.zdatetimepicker._CLASSES.monthYearNav+"'><span class='"+$.zdatetimepicker._CLASSES.yearNav+"'>"+yearStart+" - "+yearEnd+"</span></div>";this._decadeDrillDownElement.append(this._decadeNavBar),this._createNavButtons(this._decadeNavBar,yearNav,3),this._updateYearArrowState(3,yearStart),this._decadeNavBar.find("."+$.zdatetimepicker._CLASSES.yearNav).data({start:yearStart}),$("#"+this._elementId+"-left-month-3, #"+this._elementId+"-right-month-3").on("click."+this.componentName,this._handleDecadeArrowClick.bind(this))},_buildDecadeNavBarBody:function(year){var yearHTML,curYear=year||this._viewDate.getFullYear(),yearStart=100*Math.floor(curYear/100)-10,yearEnd=yearStart+120,j=0,yearTable=$("<div class='"+$.zdatetimepicker._CLASSES.gridContainer+"'><table role='grid' class='"+$.zdatetimepicker._CLASSES.monthYearTable+"'><tbody></tbody></table></div>");yearHTML="<tr role='row'>",yearTable.insertAfter(this._decadeNavBar);for(var i=yearStart;yearEnd>i;i+=10){j++;var classes=this._getDecadeClass(i,j);yearHTML+="<td role='gridcell' class='"+classes+"'>"+i+"</td>",12!==j&&j%4===0&&(yearHTML+="<tr role='row'>")}yearTable.find("tbody").append(yearHTML)},_getDecadeClass:function(decade,index){var classes=(1===index||12===index?" zdatetimepicker__drilldownnearlevelcell":$.zdatetimepicker._CLASSES.grid)+" zdatetimepicker__decade ",min=this._minDate,max=this._maxDate;return(min&&decade<10*Math.floor(min.getFullYear()/10)||max&&decade>10*Math.floor(max.getFullYear()/10))&&(classes+=" "+$.zdatetimepicker._CLASSES.disabled),classes},_buildYearNavBarBody:function(year){var yearHTML,curYear=year||this._viewDate.getFullYear(),yearStart=10*Math.floor(curYear/10)-1,yearEnd=yearStart+12,j=0,yearTable=$("<div class='"+$.zdatetimepicker._CLASSES.gridContainer+"'><table role='grid' class='"+$.zdatetimepicker._CLASSES.monthYearTable+"'><tbody></tbody></table></div>");yearHTML="<tr role='row'>",yearTable.insertAfter(this._yearNavBar);for(var i=yearStart;yearEnd>i;i++){j++;var classes=this._getYearClasses(i,j);yearHTML+="<td role='gridcell' class='"+classes+"' data-year='"+i+"'>"+i+"</td>",12!==j&&j%4===0&&(yearHTML+="<tr role='row'>")}yearTable.find("tbody").html(yearHTML)},_getYearClasses:function(year,index){var classes="zdatetimepicker__year "+(1===index||12===index?" zdatetimepicker__drilldownnearlevelcell":$.zdatetimepicker._CLASSES.grid),today=new Date,min=this._minDate,max=this._maxDate;if(this.options.value&&this.options.value.getFullYear()===year&&this._currentSelected&&this._currentSelected.getFullYear()===year&&(classes+=" "+$.zdatetimepicker._CLASSES.selected),this._currentSelected&&this._currentSelected.getFullYear()===year&&(classes+=" "+$.zdatetimepicker._CLASSES.selected),"multiple"===this.options.selectionType&&this.options.values.length)for(var i=0,len=this._selectedDates.length;len>i;i++)year===this._selectedDates[i].getFullYear()&&(classes+=" "+$.zdatetimepicker._CLASSES.selected);return today.getFullYear()===year&&(classes+=" "+$.zdatetimepicker._CLASSES.currentGrid),(min&&year<min.getFullYear()||max&&year>max.getFullYear()||this.options.disabledYears&&this.options.disabledYears.indexOf(year)>-1)&&(classes+=" "+$.zdatetimepicker._CLASSES.disabled),classes},_buildYearNavBar:function(){this._yearNavBar=$("<div class='"+$.zdatetimepicker._CLASSES.navBar+"'></div>");var curYear=this._viewDate.getFullYear(),yearStart=10*Math.floor(curYear/10),yearEnd=yearStart+9,yearNav="<div class='"+$.zdatetimepicker._CLASSES.monthYearNav+"'><span class='"+$.zdatetimepicker._CLASSES.yearNav+"'>"+yearStart+" - "+yearEnd+"</span></div>";this._yearDrillDownElement.append(this._yearNavBar),this._createNavButtons(this._yearNavBar,yearNav,2),this._updateYearArrowState(2,yearStart),this._yearNavBar.find("."+$.zdatetimepicker._CLASSES.yearNav).data({start:yearStart}),$("#"+this._elementId+"-left-month-2, #"+this._elementId+"-right-month-2").on("click."+this.componentName,this._handleDecadeArrowClick.bind(this))},_handleDecadeArrowClick:function(orgEvent,element,viewDate){orgEvent.stopPropagation();var target=$(orgEvent.target),id=orgEvent.currentTarget.getAttribute("id");if(element=element||this.element,viewDate=viewDate||this._viewDate,!target.closest("."+$.zdatetimepicker._CLASSES.navButton).hasClass($.zdatetimepicker._CLASSES.disabled)){var navElement,moveBy,startFactor,year,curYear,yearStart,endFactor,yearEnd;navElement=element.find("."+(2===this._viewMode?"zdatetimepicker__years":"zdatetimepicker__decades")).find("."+$.zdatetimepicker._CLASSES.yearNav),moveBy=id.indexOf(this._elementId+"-right-month")>-1?1:-1,startFactor=2===this._viewMode?10:100,endFactor=2===this._viewMode?9:90,year=navElement.data("start")||viewDate.getFullYear(),curYear=year+startFactor*moveBy,element.find("."+(2===this._viewMode?"zdatetimepicker__years":"zdatetimepicker__decades")).find("."+$.zdatetimepicker._CLASSES.gridContainer).remove(),2===this._viewMode?this._buildYearNavBarBody(curYear):this._buildDecadeNavBarBody(curYear),yearStart=Math.floor(curYear/startFactor)*startFactor,yearEnd=yearStart+endFactor,navElement.text(yearStart+" -"+yearEnd),navElement.data({start:yearStart}),this._updateYearArrowState(this._viewMode,yearStart)}this._dispatchEvent(2===this._viewMode?"DECADECHANGE":"CENTURYCHANGE",orgEvent,{viewDate:this._viewDate,value:this.options.value})},_createNavButtons:function(navBar,navElement,viewMode){var leftNav,rightNav,displayType=this.options.navigationBar.navigationButtonsDisplayPattern;("split"===displayType||"together"===displayType&&"left"===this.options.navigationBar.togetherTypeNavigationButtonsPosition)&&(leftNav=$($.zdatetimepicker._LEFTNAV),"together"===displayType&&navBar.addClass($.zdatetimepicker._CLASSES.navOnLeft)),("split"===displayType||"together"===displayType&&"right"===this.options.navigationBar.togetherTypeNavigationButtonsPosition)&&(rightNav=$($.zdatetimepicker._RIGHTNAV),"together"===displayType&&navBar.addClass($.zdatetimepicker._CLASSES.navOnRight)),leftNav&&navBar.append(leftNav),navBar.append(navElement),rightNav&&navBar.append(rightNav),this._createMonthArrows(leftNav,rightNav,viewMode,!0,!0)},_buildMonthNavBar:function(){this._monthNavBar=$("<div class='"+$.zdatetimepicker._CLASSES.navBar+"'></div>");var yearNav=(this.options.navigationBar.navigationButtonsDisplayPattern,"<div class='"+$.zdatetimepicker._CLASSES.monthYearNav+"'><span class='"+$.zdatetimepicker._CLASSES.yearNav+"'>"+this._viewDate.getFullYear()+"</span></div>");this._monthDrillDownElement.append(this._monthNavBar),this._createNavButtons(this._monthNavBar,yearNav,1),this._updateYearArrowState(1),$("#"+this._elementId+"-left-month-1, #"+this._elementId+"-right-month-1").on("click."+this.componentName,this._handleYearClick.bind(this))},_handleYearClick:function(orgEvent,viewElement,viewDate){this._rowsCount=[];var target=$(orgEvent.target),id=orgEvent.currentTarget.getAttribute("id");if(!target.closest("."+$.zdatetimepicker._CLASSES.navButton).hasClass($.zdatetimepicker._CLASSES.disabled)){var moveBy=id.indexOf(this._elementId+"-right-year")>-1||id.indexOf(this._elementId+"-right-month")>-1&&this._viewMode>0?this.options.navigationBar.yearNavigationStep:-this.options.navigationBar.yearNavigationStep;viewDate=viewDate||this._viewDate,viewElement=viewElement||this.element,viewDate.setFullYear(viewDate.getFullYear()+moveBy),this._viewDate=new Date(viewDate.getTime()),this._fillNavBarContent(viewDate,viewElement.find(".zdatetimepicker__months")),this._updateYearArrowState(1),this._updateMonthClasses(viewElement)}},_updateYearArrowState:function(viewMode,year){year=year||this._viewDate.getFullYear();var factor;1===viewMode?factor=1:2===viewMode?factor=10:3===viewMode&&(factor=100);var right=this._maxDate&&year+factor>Math.floor(this._maxDate.getFullYear()/factor)*factor||!1;$("#"+this._elementId+"-right-month-"+viewMode).toggleClass($.zdatetimepicker._CLASSES.disabled,right);var left=this._minDate&&year-factor<Math.floor(this._minDate.getFullYear()/factor)*factor||!1;$("#"+this._elementId+"-left-month-"+viewMode).toggleClass($.zdatetimepicker._CLASSES.disabled,left)},_createYearArrows:function(leftNav,rightNav,isLeft,isRight){var yearLeft,yearRight,leftIconEle,rightIconEle,navBar=this.options.navigationBar;if(isLeft){var yearLeftText;yearLeft=$($.zdatetimepicker._NAVBUTTON).attr("id",this._elementId+"-left-year"),leftIconEle=yearLeft.find("."+$.zdatetimepicker._CLASSES.navIcon);var svgData={props:{viewBox:"0 0 12 12"},nodes:[{polygon:{points:"5.6,10.3 1.9,6.5 5.6,2.6 6.3,3.4 3.3,6.5 6.4,9.6"}},{polygon:{points:"9.6,10.3 5.9,6.5 9.6,2.6 10.3,3.4 7.3,6.5 10.4,9.6"}}]};this._handleIcon(leftIconEle,svgData,"leftyear",navBar.previousYearButtonIconClassName,navBar.previousYearButtonSVGIconId),yearLeft.prependTo("split"===navBar.navigationButtonsDisplayPattern?leftNav:"right"===navBar.togetherTypeNavigationButtonsPosition?rightNav:leftNav),yearLeftText=this._localize("prevYear"),yearLeft.attr({title:yearLeftText,"aria-label":yearLeftText})}if(isRight){var yearRightText;yearRight=$($.zdatetimepicker._NAVBUTTON).attr("id",this._elementId+"-right-year"),rightIconEle=yearRight.find("."+$.zdatetimepicker._CLASSES.navIcon);var svgData={props:{viewBox:"1 0 12 12"},nodes:[{polygon:{points:"7.4,10.3 6.7,9.6 9.7,6.5 6.6,3.4 7.4,2.7 11.1,6.5"}},{polygon:{points:"3.4,10.3 2.7,9.6 5.7,6.5 2.6,3.4 3.4,2.7 7.1,6.5"}}]};this._handleIcon(rightIconEle,svgData,"rightyear",navBar.nextYearButtonIconClassName,navBar.nextYearButtonSVGIconId),"right"===navBar.togetherTypeNavigationButtonsPosition||"split"===navBar.navigationButtonsDisplayPattern?yearRight.appendTo(rightNav):"left"===navBar.togetherTypeNavigationButtonsPosition&&yearRight.appendTo(leftNav),yearRightText=this._localize("nextYear"),yearRight.attr({title:yearRightText,"aria-label":yearRightText})}},_getMonthClasses:function(month){var classes="zdatetimepicker__monthview "+$.zdatetimepicker._CLASSES.grid,today=new Date,min=this._minDate,max=this._maxDate;if(this.options.value&&this.options.value.getMonth()===month&&this.options.value.getFullYear()===this._viewDate.getFullYear()&&this._currentSelected&&this._currentSelected.getMonth()===month&&this._currentSelected.getFullYear()===this._viewDate.getFullYear()&&(classes+=" "+$.zdatetimepicker._CLASSES.selected),this._currentSelected&&this._currentSelected.getMonth()===month&&this._currentSelected.getFullYear()===this._viewDate.getFullYear()&&(classes+=" "+$.zdatetimepicker._CLASSES.selected),"multiple"===this.options.selectionType)for(var i=0,len=this._selectedDates.length;len>i;i++)this._viewDate.getFullYear()===this._selectedDates[i].getFullYear()&&this._selectedDates[i].getMonth()===month&&(classes+=" "+$.zdatetimepicker._CLASSES.selected);return today.getMonth()===month&&today.getFullYear()===this._viewDate.getFullYear()&&(classes+=" "+$.zdatetimepicker._CLASSES.currentGrid),(min&&(this._viewDate.getFullYear()===min.getFullYear()&&month<min.getMonth()||this._viewDate.getFullYear()<min.getFullYear())||max&&(this._viewDate.getFullYear()===max.getFullYear()&&month>max.getMonth()||this._viewDate.getFullYear()>max.getFullYear())||this.options.disabledMonths instanceof Array&&this.options.disabledMonths.indexOf(month)>-1||this.options.disabledYears instanceof Array&&this.options.disabledYears.indexOf(this._viewDate.getFullYear())>-1)&&(classes+=" "+$.zdatetimepicker._CLASSES.disabled),classes},_buildMonthNavBarBody:function(){var monthTable=$("<div class='"+$.zdatetimepicker._CLASSES.gridContainer+"'><table role='grid' class='"+$.zdatetimepicker._CLASSES.monthYearTable+"'><tbody></tbody></table></div>"),monthHTML="",months=this._localize(this.options.navigationBar.monthFormatInSwitcher.indexOf("MMMM")>-1?"months":"monthsAbbreviated");monthTable.insertAfter(this._monthNavBar),monthHTML="<tr role='row'>";for(var i=0;12>i;i++){var classes=this._getMonthClasses(i);monthHTML+="<td role='gridcell' class='"+classes+" ' data-month-index='"+i+"'>"+months[i]+"</td>",i+1!==12&&(i+1)%4===0&&(monthHTML+="<tr role='row'>")}monthTable.find("tbody").append(monthHTML)},_closeClickHandler:function(orgEvent){this._closePicker(orgEvent)},_selectClickHandler:function(orgEvent,ui,element){this._rowsCount=[];var monthChanged,yearChanged,selectedVal=Number(ui.selectedValue),count=this._monthsPerView;if(this._viewDate.setDate(1),ui.dropdownList&&(ui.dropdownList.attr("id").indexOf("month-header")>-1?(this._viewDate.setMonth(selectedVal),monthChanged=!0,this._buildDropdownNavElement(selectedVal)):(this._viewDate.setFullYear(selectedVal||this._viewDate.getFullYear()),yearChanged=!0,this._buildDropdownNavElement(void 0,selectedVal||this._viewDate.getFullYear()))),this._minDate&&ZDateUtil.isGreater(this._minDate,this._viewDate)){for(this._viewDate.setFullYear(this._minDate.getFullYear());ZDateUtil.isGreater(this._minDate,this._viewDate)&&!ZDateUtil.areDatesEqual(this._minDate,this._viewDate);)this._viewDate.getMonth()===this._minDate.getMonth()&&this._viewDate.getFullYear()===this._minDate.getFullYear()?this._viewDate.setDate(this._minDate.getDate()):this._viewDate.setFullYear(this._viewDate.getFullYear()+1);this._yearHeader&&this._yearHeader.zcombobox("setAttribute","selectedValue",this._viewDate.getFullYear())}if(this._maxDate&&ZDateUtil.isGreater(this._viewDate,this._maxDate)){for(this._viewDate.setFullYear(this._maxDate.getFullYear());ZDateUtil.isGreater(this._viewDate,this._maxDate)&&!ZDateUtil.areDatesEqual(this._maxDate,this._viewDate);)this._viewDate.setFullYear(this._viewDate.getFullYear()-1);this._yearHeader&&this._yearHeader.zcombobox("setAttribute","selectedValue",this._viewDate.getFullYear())}for(var i=0;count>i;i++){var newDate=new Date(this._viewDate.getTime()),element=1===count?element||this.element:$(this.element.find("."+$.zdatetimepicker._CLASSES.datepicker)[i]);newDate=this._moveMonth(this._viewDate,i),count>1&&"multiple"===this.options.selectionType&&0===i&&this._yearHeader&&newDate.setFullYear(this._yearHeader.zcombobox("getValue")),monthChanged=!0,this._fillDates(newDate,element),(0===i||i===this._monthsPerView-1)&&this._updateArrowState(newDate,i),0!==i&&(element.find("."+$.zdatetimepicker._CLASSES.monthNav).text(this._localize(this.options.navigationBar.monthYearHeadingFormat.split(" ").indexOf("MMMM")>-1?"months":"monthsAbbreviated")[newDate.getMonth()]),element.find("."+$.zdatetimepicker._CLASSES.yearNav).text(newDate.getFullYear()))}(this._minDate||this._maxDate)&&this._checkOptions(selectedVal,element),this._validateDisabledMonthYear(),this._appendEmptyTd(),this._dispatchEvent(monthChanged?"MONTHCHANGE":"YEARCHANGE",orgEvent,{viewDate:this._viewDate,value:this.options.value,selectedValue:monthChanged?this._viewDate.getMonth():this._viewDate.getFullYear()})},_dateClickHandler:function(orgEvent){orgEvent.stopPropagation(),orgEvent.preventDefault();{var target=$(orgEvent.target);this.options.navigationBar.monthYearSwitcherType}target.closest("."+$.zdatetimepicker._CLASSES.date).length?target=target.closest("."+$.zdatetimepicker._CLASSES.date):target.closest("."+$.zdatetimepicker._CLASSES.adjacent).length&&(target=target.closest("."+$.zdatetimepicker._CLASSES.adjacent));var selectedDate;if(target.attr("data-time")&&(selectedDate=new Date(parseInt(target.attr("data-time")))),target.hasClass($.zdatetimepicker._CLASSES.date)&&selectedDate)this._setDate(orgEvent,target,selectedDate);else if(this.options.allowSelectionOfAdjacentMonthDates&&target.hasClass($.zdatetimepicker._CLASSES.adjacent)&&selectedDate){var isSelected=target.hasClass("is-selected");this._setDate(orgEvent,target,selectedDate),this._viewDate=new Date(selectedDate.getTime()),this._monthsPerView>1&&this.options.selectedDateMonthViewIndex>=0&&(this._viewDate=this._moveMonth(this.options.value,-this.options.selectedDateMonthViewIndex)),this._renderContent(),"single"===this.options.selectionType||"multiple"===this.options.selectionType&&!isSelected&&this.element.find("[data-time='"+selectedDate.getTime()+"']").addClass($.zdatetimepicker._CLASSES.selected).attr("aria-selected",!0)}else if(target.hasClass("zdatetimepicker__monthview")||target.hasClass("zdatetimepicker__year")){{var isMonth;new Date(this._viewDate.getTime())}if(target.hasClass("zdatetimepicker__monthview")&&(isMonth=!0,this._viewDate.setMonth(parseInt(target.attr("data-month-index")))),target.hasClass("zdatetimepicker__year")&&this._viewDate.setFullYear(parseInt(target.text())),this.options.navigationBar.updateDateOnMonthYearSwitch&&this.options.immediateCommit&&this._applyClickHandler(orgEvent,!0),0!==this._viewMode){var viewMode=this._viewMode-1;target.hasClass("zdatetimepicker__year")&&(this.options.navigationBar.monthSwitcher||(viewMode=0)),this._setViewMode(viewMode),0===this._viewMode&&this._renderContent(0),1===this._viewMode&&(this.element.find(".zdatetimepicker__months").find("."+$.zdatetimepicker._CLASSES.yearNav).text(this._viewDate.getFullYear()),this._updateMonthClasses(),this._updateYearArrowState(1))}this._dispatchEvent(isMonth?"MONTHCHANGE":"YEARCHANGE",orgEvent,{viewDate:this._viewDate,value:this.options.value,selectedValue:parseInt(isMonth?target.attr("data-month-index"):target.text())})}else target.hasClass("zdatetimepicker__decade")&&(this._viewDate.setFullYear(parseInt(target.text())),0!==this._viewMode&&(this._setViewMode(this._viewMode-1),2===this._viewMode&&this._fillYears()),this._dispatchEvent("DECADECHANGE",orgEvent,{viewDate:this._viewDate,value:this.options.value,selectedValue:parseInt(target.text())}))},_updateMonthClasses:function(element){element=element||this.element;for(var months=element.find(".zdatetimepicker__monthview"),i=0;12>i;i++){var classes=this._getMonthClasses(i);$(months[i]).attr("class",classes)}},_renderContent:function(startValue,container,updateNavBar,updateArrowState){updateNavBar=void 0===updateNavBar?!0:updateNavBar,updateArrowState=void 0===updateArrowState?!0:updateArrowState,container=container||this.element,startValue=startValue||0;var element,displayType=this.options.navigationBar.monthYearSwitcherType;this.element.find("."+$.zdatetimepicker._CLASSES.disabledCalendar).removeClass($.zdatetimepicker._CLASSES.disabledCalendar),this._rowsCount=[];for(var i=startValue;i<this._monthsPerView;i++){element=this._monthsPerView>1?$(container.find("."+$.zdatetimepicker._CLASSES.datepicker)[i]):container;var newDate=new Date(this._viewDate.getTime());if(newDate=this._moveMonth(newDate,i),updateNavBar){if(0===i&&"dropdown"===displayType){var yearComboExists=this._yearHeader;if(this._checkOptions(),this._buildDropdownNavElement(this._viewDate.getMonth(),this._viewDate.getFullYear()),!yearComboExists&&this.options.navigationBar.yearSwitcher){this._yearHeader.zcombobox({acceptNewValues:!0,dropdownList:{width:99,height:330,className:"zdatetimepicker--menu"}}),this._yearHeader.on("zcomboboxchange",this._selectClickHandler.bind(this));var selectElement=this._monthHeader.zselectbox("getElement");this._monthHeader&&$(this._yearHeader.zcombobox("getElement")).insertAfter(selectElement)}}(i>0&&"dropdown"===displayType||"dropdown"!==displayType)&&this._fillNavBarContent(newDate,element)}this._fillDates(newDate,element),updateArrowState&&(0===i||i===this._monthsPerView-1)&&this._updateArrowState(newDate,i)}this._appendEmptyTd()},_appendEmptyTd:function(){3===this._monthsPerView&&5===this._rowsCount[1]&&this._rowsCount.indexOf(6)>-1&&$(this.element.find("li")[1]).find("."+$.zdatetimepicker._CLASSES.monthContainer).find("tbody").append("<tr role='row'><td role='gridcell'></td></tr>")},_getClass:function(viewmode){var currentClass;switch(viewmode){case 0:currentClass="days",this._rowsCount=[];break;case 1:currentClass="months";break;case 2:currentClass="years";break;case 3:currentClass="decades"}return currentClass},_setViewMode:function(viewMode,preventAnimation,element){{var currentClass;$.zdatetimepicker._CLASSES}switch(currentClass=this._getClass(this._viewMode),element=element||this.element,0===this._viewMode&&this.element.is(":visible")&&(this._width=element.find("."+$.zdatetimepicker._CLASSES.monthContainer).outerWidth()),this._viewMode){case 0:var elementToAnimate=$(element.find("."+$.zdatetimepicker._CLASSES.monthContainer)[0]).find("table");elementToAnimate.removeClass("zeffects--zoomin"),!preventAnimation&&elementToAnimate.addClass("zeffects--zoomout");break;default:var elementToAnimate=element.find(".zdatetimepicker__"+currentClass).find("."+$.zdatetimepicker._CLASSES.monthYearTable);elementToAnimate.removeClass("zeffects--zoomin"),!preventAnimation&&elementToAnimate.addClass("zeffects--zoomout")}this._viewMode=viewMode;this._monthsPerView>1&&this.element.find("li").nextAll().find("."+$.zdatetimepicker._CLASSES.dateView+",."+$.zdatetimepicker._CLASSES.weeknumbers+",."+$.zdatetimepicker._CLASSES.navBar).addClass($.zdatetimepicker._CLASSES.disabledCalendar),clearTimeout(this._animationTimeout),preventAnimation?this._animationHandler(element,preventAnimation):this._animationTimeout=setTimeout(this._animationHandler.bind(this,element,preventAnimation),300)},_animationHandler:function(element,preventAnimation){var classes=$.zdatetimepicker._CLASSES,className=this._getClass(this._viewMode);switch(element=1===this._monthsPerView?element.children("div:not(."+classes.footer+"):not(."+classes.header+"):not(."+classes.pointer+"):not(."+classes.timepicker+"):not(.zdatetimepicker--custom)").hide().filter(".zdatetimepicker__"+className):$(this.element.find("ul").find("li")[0]).find("."+$.zdatetimepicker._CLASSES.datepicker).children().hide().filter(".zdatetimepicker__"+className),this._viewMode){case 0:var elementToAnimate=$(element.find("."+$.zdatetimepicker._CLASSES.monthContainer)[0]).find("table");elementToAnimate.removeClass("zeffects--zoomout"),!preventAnimation&&elementToAnimate.addClass("zeffects--zoomin");break;default:var elementToAnimate=element.find("."+$.zdatetimepicker._CLASSES.monthYearTable);elementToAnimate.removeClass("zeffects--zoomout"),!preventAnimation&&elementToAnimate.addClass("zeffects--zoomin")}this._width&&0!==this._viewMode&&element.width(this._width),element.show()},_setDate:function(orgEvent,target,date,valueSet){this.options.immediateCommit&&(this._valueUpdate=!1),this._limitReached=!1;var time=date.getTime(),oldDate=new Date(this._viewDate.getTime()),formattedDate=ZDateUtil.formatDate(date,this.options.format);if(this._reset&&this._reset.length&&this._reset.removeClass("is-disabled").removeAttr("disabled"),"single"===this.options.selectionType)this.element.find("."+$.zdatetimepicker._CLASSES.selected).removeClass($.zdatetimepicker._CLASSES.selected).removeAttr("aria-selected"),target.addClass($.zdatetimepicker._CLASSES.selected).attr("aria-selected",!0),this._viewDate=new Date(time),this._currentSelected=new Date(time),this._hasTime&&this._viewDate.setHours(oldDate.getHours(),oldDate.getMinutes(),oldDate.getSeconds()),this.options.immediateCommit&&(this.options.value=new Date(time),this._applyClickHandler(orgEvent,!0,valueSet)),this._dispatchEvent("DATESELECT",orgEvent,{valueString:formattedDate,value:this.options.value,selectedDate:this._viewDate});else{if(target.hasClass("is-selected")){if(!orgEvent||orgEvent&&0===$(orgEvent.target).closest(".zdatetimepicker__todaylink").length){target.removeClass("is-selected").removeAttr("aria-selected");var index=this._getDateIndex(date),len=this._selectedDates.length;-1!==index&&(len===this.options.selectionLimit&&this._queryString&&this.element.find("."+$.zdatetimepicker._CLASSES.date+",."+$.zdatetimepicker._CLASSES.adjacent).filter(this._queryString).removeClass($.zdatetimepicker._CLASSES.disabled).removeAttr("aria-disabled"),this._selectedDates.splice(index,1),this.options.immediateCommit&&this.options.values.splice(index,1)),len>0&&this.options.immediateCommit&&(this._valueUpdate=!0,this._applyClickHandler(orgEvent,!0))}}else target.addClass($.zdatetimepicker._CLASSES.selected).attr("aria-selected",!0),this._selectedTime&&date.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0),this._selectedDates.push(new Date(time)),this._hasTime&&this._viewDate.setHours(oldDate.getHours(),oldDate.getMinutes(),oldDate.getSeconds()),this.options.immediateCommit&&(this._valueUpdate=!0,this._applyClickHandler(orgEvent,!0)),this._queryString="",this._selectedDates.length===this.options.selectionLimit&&(this._queryString||(this._queryString=":not(",this._getQueryString()),this.element.find("."+$.zdatetimepicker._CLASSES.date+",."+$.zdatetimepicker._CLASSES.adjacent).filter(this._queryString).addClass($.zdatetimepicker._CLASSES.disabled).attr("aria-disabled",!0),this._limitReached=!0);this._reset&&this._reset.length&&this._reset[this._selectedDates.length?"removeClass":"addClass"]("is-disabled").attr("disabled",this._selectedDates.length?!1:!0),this._dispatchEvent("DATESELECT",orgEvent,{values:this.options.values,valuesObject:this._selectedDates})}this._hasTime&&this._setBoundaryValuesForTimeInput()},_checkBoundaryValues:function(){if(this._minDateHasTime||this._maxDateHasTime){var shouldSetMinValue,shouldSetMaxValue,tempDate=new Date(this._viewDate.getTime());return tempDate.setHours(0,0,0,0),this._minDate&&(ZDateUtil.areDatesEqual(this._minDate,tempDate)||(shouldSetMinValue=!0)),this._maxDate&&(ZDateUtil.areDatesEqual(this._maxDate,tempDate)||(shouldSetMaxValue=!0)),{min:shouldSetMinValue,max:shouldSetMaxValue}}return{}},_setBoundaryValuesForTimeInput:function(){if(this._minDateHasTime||this._maxDateHasTime){var timeValue,tempTime,timeFieldType=this.options.timeFieldType,shouldSetValue=this._checkBoundaryValues();if("input"===timeFieldType)timeValue=this._timeElement.find("input").zdatetimefield("getAttribute","value"),tempTime,tempTime=new Date(timeValue.getTime()),tempTime.setDate(this._viewDate.getDate()),tempTime.setMonth(this._viewDate.getMonth()),tempTime.setFullYear(this._viewDate.getFullYear()),shouldSetValue.min?this._timeElement.find("input").zdatetimefield("setAttribute","value",tempTime):this._timeElement.find("input").zdatetimefield("setAttribute","value",this._minTime);else if("multiple-select-box"===timeFieldType){var shouldSetValue,minTime=this._minTime?new Date(this._minTime.getTime()):void 0,maxTime=this._maxTime?new Date(this._maxTime.getTime()):void 0;shouldSetValue.min&&(minTime=this._unsetValue("_minTime")),shouldSetValue.max&&(maxTime=this._unsetValue("_maxTime")),this._checkTimeValue(),this._checkTimeOptions(),shouldSetValue.min&&this._setBoundary(minTime,"_minTime"),shouldSetValue.max&&this._setBoundary(maxTime,"_maxTime")}}},_checkTimeValue:function(){var value,min,max;value=new Date(this._viewDate.getTime()),this._resetToToday(value),this._minTime&&(min=new Date(this._minTime.getTime())),this._resetToToday(min),this._maxTime&&(max=new Date(this._maxTime.getTime())),this._resetToToday(max),min&&value&&value.getTime()<min.getTime()&&(value=new Date(min.getTime())),max&&value&&value.getTime()>max.getTime()&&(value=new Date(max.getTime())),this._viewDate.setHours(value.getHours(),value.getMinutes(),0,0),this._selectedTime=new Date(this._viewDate.getTime())},_resetToToday:function(value){var today=new Date;value&&(value.setDate(today.getDate()),value.setMonth(today.getMonth()),value.setFullYear(today.getFullYear()))},_getQueryString:function(){for(var i=0,len=this._selectedDates.length;len>i;i++){var date=this._resetTime(this._selectedDates[i]);this._queryString+="[data-time='"+date.getTime()+"']",this._queryString+=i!=len-1?",":", .zdisabled)"}},_getDateIndex:function(date){for(var i=0,len=this._selectedDates.length;len>i;i++)if(ZDateUtil.areDatesEqual(date,this._selectedDates[i]))return i;return-1},_handleYearArrowClick:function(orgEvent,element,viewDate){this._rowsCount=[];var target=$(orgEvent.target),id=orgEvent.currentTarget.getAttribute("id");
if(!target.closest("."+$.zdatetimepicker._CLASSES.navButton).hasClass($.zdatetimepicker._CLASSES.disabled)){var moveBy=id.indexOf(this._elementId+"-right-year")>-1||id.indexOf(this._elementId+"-right-month")>-1&&this._viewMode>0?this.options.navigationBar.yearNavigationStep:-this.options.navigationBar.yearNavigationStep;this._arrowClickHandler(moveBy,void 0,!0,element,viewDate)}this._dispatchEvent("YEARCHANGE",orgEvent,{viewDate:this._viewDate,value:this.options.value})},_fillNavBarContent:function(date,element){var element=element||this.element;element.find("."+$.zdatetimepicker._CLASSES.monthNav).text(this._localize(this.options.navigationBar.monthYearHeadingFormat.split(" ").indexOf("MMMM")>-1?"months":"monthsAbbreviated")[date.getMonth()]),element.find("."+$.zdatetimepicker._CLASSES.yearNav).text(date.getFullYear())},_handleMonthArrowClick:function(orgEvent,element,viewDate){this._rowsCount=[];var target=$(orgEvent.target),id=orgEvent.currentTarget.getAttribute("id");if(!target.closest("."+$.zdatetimepicker._CLASSES.navButton).hasClass($.zdatetimepicker._CLASSES.disabled)){var moveBy=id.indexOf(this._elementId+"-right-month")>-1?this.options.navigationBar.monthNavigationStep:-this.options.navigationBar.monthNavigationStep;this._monthsPerView>1&&this._currentSelected&&(viewDate=parseInt($(this.element.find("li").find(".zdatetimepicker__monthcontainer")[0]).find("td."+$.zdatetimepicker._CLASSES.date+"[data-time]")[0].getAttribute("data-time")),viewDate=new Date(viewDate)),this._arrowClickHandler(moveBy,!0,void 0,element,viewDate)}this._dispatchEvent("MONTHCHANGE",orgEvent,{viewDate:this._viewDate,value:this.options.value})},_arrowClickHandler:function(moveBy,monthsChanged,yearChanged,viewElement,viewDate){for(var newDate,displayType=this.options.navigationBar.monthYearSwitcherType,count=this._monthsPerView,viewDate=viewDate&&!isNaN(viewDate.getTime())?viewDate:this._viewDate,viewElement=viewElement||this.element,oldDate=new Date(viewDate.getTime()),i=1;count>=i;i++){var element=count>1?$(this.element.find("."+$.zdatetimepicker._CLASSES.datepicker)[i-1]):viewElement;monthsChanged&&(newDate=moveBy>1?this._moveMonth(oldDate,1===i?moveBy:1):this._moveMonth(viewDate,1===i?moveBy:i-1)),yearChanged&&(count>1?newDate=new Date(parseInt(element.find("td."+$.zdatetimepicker._CLASSES.date+"[data-time]")[0].getAttribute("data-time"))):!newDate&&(newDate=new Date(viewDate)),newDate.setFullYear(newDate.getFullYear()+moveBy)),(this.options.navigationBar.monthNavigationStep>1||this.options.navigationBar.yearNavigationStep>1)&&(this._minDate&&ZDateUtil.isGreater(this._minDate,newDate)&&(newDate=new Date(this._minDate.getTime())),this._maxDate&&ZDateUtil.isGreater(newDate,this._maxDate)&&(newDate=new Date(this._maxDate.getTime()))),1===i&&newDate&&(this._viewDate=new Date(newDate.getTime())),this._fillDates(newDate,element),(1===i||i===this._monthsPerView)&&this._updateArrowState(newDate,i-1),newDate&&(oldDate=new Date(newDate.getTime())),1===i&&"dropdown"===displayType?(this._checkOptions(this._viewDate.getFullYear(),viewElement,!0),this._buildDropdownNavElement(this._viewDate.getMonth(),this._viewDate.getFullYear())):(i>1||"dropdown"!==displayType)&&(1===this._viewMode&&(element=viewElement.find(".zdatetimepicker__months")),this._fillNavBarContent(newDate,element),yearChanged&&1===this._viewMode&&(this._updateYearArrowState(1),this._updateMonthClasses(viewElement))),viewDate=this._viewDate}this._appendEmptyTd(),"dropdown"===this.options.navigationBar.monthYearSwitcherType&&this._validateDisabledMonthYear()},_validateDisabledMonthYear:function(){var disabledMonths=this.options.disabledMonths;if(this._monthHeader&&disabledMonths)for(var i=0;i<disabledMonths.length;i++)this._viewDate.getMonth()!==disabledMonths[i]&&this._monthHeader.zselectbox("setOptionAttributes",disabledMonths[i],"disabled",!0);var disabledYears=this.options.disabledYears;if(this._yearHeader&&disabledYears)for(var i=0;i<disabledYears.length;i++)this._viewDate.getFullYear()!==disabledYears[i]&&this._yearHeader.zcombobox("setOptionAttributes",disabledYears[i],"disabled",!0)},_isValidDate:function(date){return date&&!isNaN(date.getTime())},_moveMonth:function(date,moveBy){if(!this._isValidDate(date))return this._viewDate;if(!moveBy)return date;var newMonth,newDate=new Date(date.valueOf()),day=newDate.getDate(),month=newDate.getMonth(),checkMonth=!0;for((0>moveBy||moveBy>=1)&&(newMonth=month+moveBy,newDate.setMonth(newMonth),newMonth=(newMonth+12)%12),checkMonth=0>moveBy?newDate.getMonth()===month&&date.getFullYear()===newDate.getFullYear():newDate.getMonth()!==newMonth;checkMonth;)newDate.setDate(--day),newDate.setMonth(newMonth),checkMonth=0>moveBy?newDate.getMonth()===month:newDate.getMonth()!==newMonth;return newDate},_placePicker:function(){var element=this.element;element.finish?element.finish().show():element.stop(!0,!0).show(),element.find("."+$.zdatetimepicker._CLASSES.datepicker).show(),"popup"===this.options.type&&this._positionPicker()},_showPicker:function(){var returnValue=this._dispatchEvent("BEFOREOPEN",void 0,{viewMode:this._viewMode,element:this.element});if(returnValue){"inline"!==this.options.type&&ZC.bindDocumentEvents&&ZC.bindDocumentEvents({element:this.element,forElement:this.options.forElement,ctype:this.componentName,closeMethodName:"close",closeEvent:"close"});var effect,duration,animation=this.options.animation;if(animation&&(animation.name||animation.className||animation.open))if(this._placePicker(),animation.className||animation.open.className){var className=animation.open?animation.open.className:animation.className,closeClassName=animation.close?animation.close.className:void 0;closeClassName&&this.element.removeClass(closeClassName);var base=this;this.element.addClass(className).on(this._ANIMATIONEVENTS,function(){base.element.off(base._ANIMATIONEVENTS)})}else effect=animation.open?animation.open.name:animation.name,duration=animation.duration?animation.duration:animation.open&&animation.open.duration?animation.open.duration:400,effect&&(this._placePicker(),this.element.hide(),"object"==typeof effect?this.element.animate(effect,duration):this.element[animation.open.name](duration));else this._placePicker();this.element.attr({"aria-hidden":!1,"aria-expanded":!0}),this._setFocus(),this._dispatchEvent("OPEN",void 0,{viewMode:this._viewMode,element:this.element})}},_setFocus:function(){this._dispatchEvent("BEFOREFOCUS",{},this.element)&&setTimeout(this._focusHandler.bind(this),100)},_focusHandler:function(){this.element.focus()},_positionPicker:function(){if(this.options.offset)this.element.css(this.options.offset);else if(this.options.forElement){var position=this._getPosition();this.options.margin&&(position.elementPosition=this._retrieveMarginValues(position.elementPosition)),this.element.css(position.elementPosition),this._pointer&&this._pointer.css(position.arrowPosition)}},_retrieveMarginValues:function(position){var top,left,margin=this.options.margin;return"number"==typeof margin?(top=margin+position.top,left=margin+position.left):(left=margin.left?margin.left+position.left:position.left,top=margin.top?margin.top+position.top:position.top),top=0>top?position.top:top,left=0>left?position.left:left,position.top=top,position.left=left,position},_arrowCallback:function(element,direction){this.element.removeClass("zdatetimepicker--top zdatetimepicker--bottom zdatetimepicker--left zdatetimepicker--right"),this.element.addClass("zdatetimepicker--"+direction),this._calloutDirection=direction},_getPosition:function(){var base=this,position=ZPosition.get(this.options.forElement,this.element,{direction:this.options.position,bufferSpace:6,within:$(this.options.appendTo)||window,positionAlterable:"flipsidefit",arrow:{element:this._pointer,callback:this._arrowCallback.bind(base),margin:{left:-1,top:-1}}});return position},_resetValues:function(){if(this._valueUpdate=!1,this.options.value=void 0,this._hasDate){this.options.values=[];var className=$.zdatetimepicker._CLASSES.selected+" "+$.zdatetimepicker._CLASSES.disabled;this.element.find("."+$.zdatetimepicker._CLASSES.monthContainer).find("."+$.zdatetimepicker._CLASSES.selected+",."+$.zdatetimepicker._CLASSES.disabled+":not(.zdisabled)").removeClass(className).removeAttr("aria-selected"),this.element.find("."+$.zdatetimepicker._CLASSES.monthYearTable).find("."+$.zdatetimepicker._CLASSES.selected+",."+$.zdatetimepicker._CLASSES.disabled+":not(.zdisabled)").removeClass(className).removeAttr("aria-selected"),this._selectedDates=[],this._queryString="",this._selectedTime=this._minTime?new Date(this._minTime.getTime()):void 0,this._viewDate=new Date,this._setViewDate(),this._setMonthToView(),this._setYearToView(),(this.options.monthToBeShownOnOpen||this.options.yearToBeShownOnOpen)&&this._validateViewDate(),this._minTime&&this._viewDate.setHours(this._minTime.getHours(),this._minTime.getMinutes(),0,0),this._reset&&this._reset.length&&this._reset.attr("disabled",!0).addClass("is-disabled")}},_setViewDate:function(){this._viewDate.setHours(0,0,0,0);var todayDate=new Date;todayDate.setHours(0,0,0,0),this._maxDate&&ZDateUtil.isGreater(this._viewDate,this._maxDate)&&!ZDateUtil.areDatesEqual(this._viewDate,this._maxDate)&&(this._viewDate=new Date(ZDateUtil.isGreater(this._maxDate,todayDate)?todayDate.getTime():this._minDate?this._minDate.getTime():this._maxDate.getTime())),this._minDate&&ZDateUtil.isGreater(this._minDate,this._viewDate)&&!ZDateUtil.areDatesEqual(this._minDate,this._viewDate)&&(this._viewDate=new Date(ZDateUtil.isGreater(todayDate,this._minDate)?todayDate.getTime():this._minDate.getTime()))},_validateViewDate:function(){this._maxDate&&ZDateUtil.isGreater(this._viewDate,this._maxDate)&&!ZDateUtil.areDatesEqual(this._viewDate,this._maxDate)&&(this._viewDate=new Date(this._minDate?this._minDate.getTime():this._maxDate.getTime())),this._minDate&&ZDateUtil.isGreater(this._minDate,this._viewDate)&&!ZDateUtil.areDatesEqual(this._minDate,this._viewDate)&&(this._viewDate=new Date(this._minDate.getTime()))},_validateBoundaries:function(){var min=this._minDate,max=this._maxDate,todayDate=new Date;if(todayDate.setHours(0,0,0,0),min&&max&&!ZDateUtil.isGreater(max,min)&&(this.options.maxDate=void 0,this._maxDate=void 0),max){if(this.options.value)ZDateUtil.isGreater(this.options.value,max)&&!ZDateUtil.areDatesEqual(this.options.value,max)&&(this.options.value=void 0);else if("multiple"===this.options.selectionType&&this._selectedDates.length)for(var i=0;i<this._selectedDates.length;i++)ZDateUtil.isGreater(this._selectedDates[i],max)&&(this.options.values.splice(i,1),this._selectedDates.splice(i,1));ZDateUtil.isGreater(this._viewDate,max)&&!ZDateUtil.areDatesEqual(this._viewDate,max)&&(this._viewDate=new Date(ZDateUtil.isGreater(this._maxDate,todayDate)?todayDate.getTime():this._minDate?min.getTime():max.getTime()))}if(min){if(this.options.value)ZDateUtil.isGreater(min,this.options.value)&&!ZDateUtil.areDatesEqual(this.options.value,min)&&(this.options.value=void 0);else if("multiple"===this.options.selectionType&&this._selectedDates.length)for(var i=0;i<this._selectedDates.length;i++)ZDateUtil.isGreater(min,this._selectedDates[i])&&(this.options.values.splice(i,1),this._selectedDates.splice(i,1));ZDateUtil.isGreater(min,this._viewDate)&&!ZDateUtil.areDatesEqual(min,this._viewDate)&&(this._viewDate=new Date(ZDateUtil.isGreater(todayDate,min)?todayDate.getTime():min.getTime()))}},_setSelectedTimeValues:function(valueCheck,element,timePickerElement,forceReset){var shouldSetValue,minTime=this._minTime?new Date(this._minTime.getTime()):void 0,maxTime=this._maxTime?new Date(this._maxTime.getTime()):void 0;shouldSetValue=this._checkBoundaryValues(),shouldSetValue.min&&(minTime=this._unsetValue("_minTime")),shouldSetValue.max&&(maxTime=this._unsetValue("_maxTime")),element=element||this.element,timePickerElement=timePickerElement||element.find(".zdatetimepicker-timeinput");var date,value=valueCheck===!1?void 0:"single"===this.options.selectionType||this.options.value?this._viewDate:this.options.values.length?this._parseDateValue(this.options.values[0],this.options.format).date:void 0;value&&!forceReset&&(date=new Date(this._viewDate.getTime()),date.setHours(this._viewDate.getHours(),this._viewDate.getMinutes(),0,0));if("multiple-select-box"===this.options.timeFieldType){if("h-m-t"===this.options.timeMultipleSelectBoxType){var hour,minute;if(hour=this._hourElement.zselectbox("getAttribute","selectedValue"),0===hour.length||value||forceReset){var selectedH=value&&!forceReset?this._normalizeHourValue(value.getHours()):this._minTime?this._normalizeHourValue(this._minTime.getHours()):this._is12HourFormat?12:0,step=this.options.hourStep;this._hourElement.zselectbox("setAttribute","selectedValue",Math.ceil(selectedH/step)*step)}if(minute=this._minuteElement.zselectbox("getAttribute","selectedValue"),0===minute.length||value||forceReset){var minuteValue=value&&!forceReset?value.getMinutes():this._minTime?this._minTime.getMinutes():0,step=this.options.minuteStep;this._minuteElement.zselectbox("setAttribute","selectedValue",Math.ceil(minuteValue/step)*step)}if(this._is12HourFormat){var period=this._periodElement.zselectbox("getAttribute","selectedValue");if(0===period.length||value||forceReset){var hourValue=value&&!forceReset?value.getHours():this._minTime?this._minTime.getHours():void 0;this._periodElement&&this._periodElement.zselectbox("setAttribute","selectedValue",hourValue>=12?"PM":"AM")}}}}else"input"===this.options.timeFieldType?timePickerElement.zdatetimefield("setAttribute","value",date?date:this._is12HourFormat?"12:00 AM":"00:00"):"single-select-box"===this.options.timeFieldType&&this._singleTimeSelect.zselectbox("setAttribute","selectedValue",date?date.getTime():this._singleTimeSelect.find("option")[0].value);shouldSetValue.min&&this._setBoundary(minTime,"_minTime"),shouldSetValue.max&&this._setBoundary(maxTime,"_maxTime")},_setBoundary:function(value,variable){return value&&(this[variable]=new Date(value.getTime())),value},_closePicker:function(orgEvent,element,timePickerElement,updateArrowState){if("multiple"===this.options.selectionType&&0===this.options.values.length&&this.options.immediateCommit&&(this._valueUpdate=!1),element=element||this.element,this._oldDate=new Date(this._viewDate.getTime()),this._currentSelected=this.options.value?new Date(this.options.value.getTime()):void 0,this._valueUpdate){var valLen,selectedLen;"multiple"===this.options.selectionType&&this._hasDate&&this._handleMultipleSelectOnClose(element),valLen=this.options.values.length,selectedLen=this._selectedDates.length;var date=new Date;this._minTime?date.setHours(this._minTime.getHours(),this._minTime.getMinutes(),0,0):date.setHours(0,0,0,0),this._viewDate=this.options.value?new Date(this.options.value.getTime()):this.options.values&&valLen&&selectedLen?new Date(this._selectedDates[selectedLen-1].getTime()):date,this._validateBoundaries(),!this.options.immediateCommit&&this._hasTime&&this._setSelectedTimeValues(void 0,element,timePickerElement)}else this._resetValues(),this._hasTime&&"multiple-select-box"===this.options.timeFieldType&&"h-m-t"===this.options.timeMultipleSelectBoxType&&this._checkTimeOptions(),this._hasTime&&this._setSelectedTimeValues(void 0,element,timePickerElement,!0);if("inline"!==this.options.type||this._manualClose){var returnValue=this._dispatchEvent("BEFORECLOSE",orgEvent,{viewMode:this._viewMode,element:this.element});if(returnValue){var element=this.element;element.finish?element.finish():element.stop(!0,!0);var animation=this.options.animation;if(animation&&(animation.name||animation.className||animation.close))if(animation.close&&animation.close.className||animation.className){var closeClass=animation.close?animation.close.className:animation.className;animation.open&&animation.open.className&&this.element.removeClass(animation.open.className);var base=this;this.element.addClass(closeClass).on(this._ANIMATIONEVENTS,function(){base.element.off(base._ANIMATIONEVENTS)})}else{var effect=animation.name?animation.name:animation.close&&animation.close.name,duration=animation.duration?animation.duration:animation.close&&animation.close.duration?animation.close.duration:400;if(effect){var onComplete=function(){base.element.hide(),base.element.attr({"aria-hidden":!0,"aria-expanded":!1}),base._dispatchEvent("CLOSE",orgEvent,{viewMode:base._viewMode,element:base.element})};"object"==typeof effect?this.element.animate(effect,duration,onComplete):this.element[animation.close.name](duration,onComplete)}}(!animation||animation&&!animation.name)&&(this.element.hide(),this.element.attr({"aria-hidden":!0,"aria-expanded":!1}),this._dispatchEvent("CLOSE",orgEvent,{viewMode:this._viewMode,element:this.element}))}}if(this._hasDate){var viewmode,displayType=this.options.navigationBar.monthYearSwitcherType;if("drilldown"===displayType&&(viewmode=this._getViewMode()),viewmode===this._viewMode&&ZDateUtil.areDatesEqual(this._oldDate,this._viewDate)||("drilldown"===displayType&&this._setViewMode(viewmode,!0,element),this._renderContent(void 0,element,void 0,updateArrowState),"drilldown"===displayType&&"dates"!==this.options.drilldownLevelOnOpen&&0!==this._viewMode&&element.find("li").nextAll().find("."+$.zdatetimepicker._CLASSES.dateView+",."+$.zdatetimepicker._CLASSES.weeknumbers+",."+$.zdatetimepicker._CLASSES.navBar).addClass($.zdatetimepicker._CLASSES.disabledCalendar)),void 0!==this.options.selectedDateMonthViewIndex&&this._updateSelectedDatePosition(),this.options.value&&this._viewDate){var date=this._resetTime(this.options.value);this.element.find("[data-time="+date.getTime()+"]").addClass("is-selected"),this._reset&&this._reset.length&&this._reset.removeClass("is-disabled").removeAttr("disabled")}}this.element.find(".zeffects--zoomin").removeClass("zeffects--zoomin"),this.element.find(".zeffects--zoomout").removeClass("zeffects--zoomout")},_resetTime:function(datesObject){if(datesObject instanceof Date){var date=new Date(datesObject.getTime());return date.setHours(0,0,0,0),date}},_handleMultipleSelectOnClose:function(element){var valLen=this.options.values.length,selectedLen=this._selectedDates.length,extraElements=[];if(selectedLen!==valLen){if(selectedLen>valLen){extraElements=this._selectedDates.splice(valLen),this._selectedDates.length=valLen;for(var i=0;i<extraElements.length;i++){var date=this._resetTime(extraElements[i]);this.element.find("[data-time='"+date.getTime()+"']").removeClass($.zdatetimepicker._CLASSES.selected).removeAttr("aria-selected")}}else{this._selectedDates=[];for(var i=0;valLen>i;i++)this._selectedDates[i]=this._parseDateValue(this.options.values[i],this.options.format).date;for(var i=0;i<this._selectedDates.length;i++){var date=this._resetTime(this._selectedDates[i]);this.element.find("[data-time='"+date.getTime()+"']").addClass($.zdatetimepicker._CLASSES.selected).attr("aria-selected",!0)}}if(this.options.selectionLimit!==valLen){if(this._limitReached){this._limitReached=!1;var elements=element.find("."+$.zdatetimepicker._CLASSES.date+",."+$.zdatetimepicker._CLASSES.adjacent);elements.filter(this._queryString).removeClass($.zdatetimepicker._CLASSES.disabled).removeAttr("aria-disabled"),this._queryString=""}}else this.options.selectionLimit===valLen&&(this._queryString=":not(",this._getQueryString(),this.element.find("."+$.zdatetimepicker._CLASSES.date+",."+$.zdatetimepicker._CLASSES.adjacent).filter(this._queryString).addClass($.zdatetimepicker._CLASSES.disabled).attr("aria-disabled",!0))}this._selectedDates&&this._selectedDates.length&&this._reset&&this._reset.length&&this._reset.removeClass("is-disabled").removeAttr("disabled")},_updateSelectedDatePosition:function(){this._monthsPerView>1&&this.options.selectedDateMonthViewIndex>=0&&this.options.value&&(this._viewDate=this._moveMonth(this.options.value,-this.options.selectedDateMonthViewIndex),this._renderContent())},_dateWithInRange:function(date){var dateTime=date.getTime();return(this._minDate?dateTime>=this._minDate.getTime():!0)&&(this._maxDate?dateTime<=this._maxDate.getTime():!0)},_generateOptions:function(start,end){for(var maxYear=(parseInt(this._monthHeader.zselectbox("getValue")),parseInt(this._yearHeader.zcombobox("getValue")),this._maxDate?this._maxDate.getFullYear():void 0),minYear=this._minDate?this._minDate.getFullYear():void 0,disabledMonths=this.options.disabledMonths,i=start;end>i;i++)this._monthHeader.zselectbox("setOptionAttributes",i,"disabled",this._minDate&&this._minDate.getFullYear()===this._viewDate.getFullYear()&&i<this._minDate.getMonth()||this._maxDate&&this._maxDate.getFullYear()===this._viewDate.getFullYear()&&i>this._maxDate.getMonth()||disabledMonths&&disabledMonths.indexOf(i)>-1&&this._viewDate.getMonth()!==i?!0:!1);maxYear&&this._monthHeader&&this._yearHeader.zcombobox("setOptionAttributes",maxYear,"disabled",this._viewDate.getMonth()>this._maxDate.getMonth()),minYear&&this._yearHeader.zcombobox("setOptionAttributes",minYear,"disabled",this._viewDate.getMonth()<this._minDate.getMonth()),this._monthHeader.zselectbox("setValue",this._viewDate.getMonth()),this._yearHeader.zcombobox("setValue",this._viewDate.getFullYear())},_checkOptions:function(){this._monthHeader&&this._yearHeader&&this._generateOptions(0,12,!0)},_buildDropdownNavElement:function(monthChanged,yearChanged,element){{var changeMonth=(this.options,this.options.value,this.options.navigationBar.monthSwitcher),changeYear=this.options.navigationBar.yearSwitcher,month=this._viewDate.getMonth();this._viewDate.getFullYear()}this._validateDisabledMonthYear(),changeMonth&&0===$("#"+this._elementId+"-month-header").length?this._generateMonthDropdown(element):changeMonth&&"number"==typeof monthChanged?this._monthHeader.zselectbox("option","selectedValue",monthChanged):changeMonth||this.element.find("."+$.zdatetimepicker._CLASSES.monthNav).text(this._localize(this.options.navigationBar.monthYearHeadingFormat.split(" ").indexOf("MMMM")>-1?"months":"monthsAbbreviated")[month]),this.options.navigationBar.yearSwitcher&&0===$("#"+this._elementId+"-year-header").length?this._generateYearDropdown():changeYear&&"number"==typeof yearChanged?this._yearHeader.zcombobox("option","selectedValue",yearChanged):changeYear||this.element.find("."+$.zdatetimepicker._CLASSES.yearNav).text(this._viewDate.getFullYear())},_generateMonthDropdown:function(element){var leftNav,navBarEle,rightNav,monthYearNav;leftNav=this._leftNav,navBarEle=this._navBar,rightNav=this._rightNav,monthYearNav=this._monthYearNav;var isSameAsMinYear,isSameAsMaxYear,months,monthHTML,options=this.options,month=this._viewDate.getMonth(),min=(this._viewDate.getFullYear(),this.options.minDate),max=this.options.maxDate,navBar=(this.options.value,this.options.navigationBar.monthSwitcher,this.options.navigationBar.yearSwitcher,this.options.navigationBar),disabledMonths=this.options.disabledMonths,monthVal=options.navigationBar.monthYearHeadingFormat.split(" ");this._yearIndex=monthVal.indexOf("yyyy"),months=this._localize(monthVal.indexOf("MMMM")>-1?"months":"monthsAbbreviated"),monthHTML="<select id='"+this._elementId+"-month-header'>",min&&min.getFullYear()===this._viewDate.getFullYear()&&(isSameAsMinYear=!0),max&&max.getFullYear()===this._viewDate.getFullYear()&&(isSameAsMaxYear=!0);for(var disabled,i=0;i<months.length;i++){disabled=isSameAsMinYear&&min&&i<min.getMonth()||isSameAsMaxYear&&max&&i>max.getMonth()||disabledMonths&&disabledMonths.indexOf(i)>-1&&this._viewDate.getMonth()!==i?"disabled":"";var optionVal=monthVal.indexOf("MMMM")>-1?this.options.labels.months.indexOf(months[i]):this.options.labels.monthsAbbreviated.indexOf(months[i]);monthHTML+="<option value="+optionVal+" "+(month===optionVal?"selected":"")+" "+disabled+">"+months[i]+"</option>"}monthHTML+="</select>",monthHTML=$(monthHTML),0===this._yearIndex?"together"===navBar.navigationButtonsDisplayPattern?"left"===navBar.togetherTypeNavigationButtonsPosition?monthHTML.appendTo(navBarEle):"right"===navBar.togetherTypeNavigationButtonsPosition&&(rightNav?monthHTML.insertBefore(rightNav):monthHTML.appendTo(navBarEle)):rightNav?monthHTML.insertBefore(rightNav):monthHTML.appendTo(navBarEle):leftNav?monthHTML.insertAfter(leftNav):monthHTML.prependTo(element.find("."+$.zdatetimepicker._CLASSES.navBar)),this._monthHeader=$("#"+this._elementId+"-month-header")},_generateYearDropdown:function(leftNav,rightNav,navBar,monthYearNav){leftNav=leftNav||this._leftNav,navBar=navBar||this._navBar,rightNav=rightNav||this._rightNav,monthYearNav=monthYearNav||this._monthYearNav;var navBar=this.options.navigationBar,yearHTML="<select id='"+this._elementId+"-year-header'>",currentYear=(new Date).getFullYear(),year=this._viewDate.getFullYear(),min=this._minDate,max=this._maxDate,value=this.options.value,startOffset=navBar.dropdownStartYear,endOffset=navBar.dropdownEndYear,disabledYears=this.options.disabledYears;startOffset=ZDateUtil.convertOffsetToValue(startOffset.substring(9)),endOffset=ZDateUtil.convertOffsetToValue(endOffset.substring(9));var endValue=currentYear+endOffset,startValue=currentYear+startOffset;if(startValue>endValue){var start=startValue;startValue=endValue,endValue=start}if(value&&(endValue=value.getFullYear()+endOffset,startValue=value.getFullYear()+startOffset),min){var oldStart=startValue;startValue=min.getFullYear()>startValue?min.getFullYear():startValue,endValue=min.getFullYear()>oldStart?min.getFullYear()+endOffset:endValue}else value&&startValue>value.getFullYear()&&(startValue=value.getFullYear(),endValue=value.getFullYear()+endOffset);max&&(endValue=max.getFullYear());for(var disabled,month=this._viewDate.getMonth(),i=startValue;endValue>=i;i++)disabled=this._monthHeader&&max&&max.getFullYear()===i&&month>max.getMonth()||this._viewDate.getFullYear()!==i&&disabledYears&&disabledYears.indexOf(i)>-1?"disabled":"",yearHTML+="<option value="+i+" "+(year===i?"selected":"")+" "+disabled+">"+i+"</option>";yearHTML+="</select>",yearHTML=$(yearHTML),this._monthHeader?0===this._yearIndex?yearHTML.insertBefore(this._monthHeader):yearHTML.insertAfter(this._monthHeader):leftNav?yearHTML.insertAfter(monthYearNav?monthYearNav:leftNav):"together"!==navBar.navigationButtonsDisplayPattern||this._leftNav?yearHTML.insertBefore(rightNav):monthYearNav?yearHTML.insertAfter(monthYearNav):yearHTML.prependTo(navBar),this._yearHeader=$("#"+this._elementId+"-year-header")},_fillNavBarElements:function(index){(!this.options.navigationBar.monthSwitcher||"dropdown"!==this.options.navigationBar.monthYearSwitcherType||index&&0!==index)&&this._monthYearNav.append("<span class='"+$.zdatetimepicker._CLASSES.monthNav+"'></span>"),(!this.options.navigationBar.yearSwitcher||"dropdown"!==this.options.navigationBar.monthYearSwitcherType||index&&0!==index)&&this._monthYearNav.append("<span class='"+$.zdatetimepicker._CLASSES.yearNav+"'></span>")},_getKey:function(viewMode){var value;switch(viewMode){case 0:value="Month";break;case 1:value="Year";break;case 2:value="Decade";break;case 3:value="Century"}return value},_createMonthArrows:function(leftNav,rightNav,viewMode,isLeft,isRight){var monthLeft,monthRight,leftIconEle,rightIconEle,navBar=this.options.navigationBar;if(isLeft){var monthLeftText;monthLeft=$($.zdatetimepicker._NAVBUTTON).attr("id",this._elementId+"-left-month-"+viewMode),leftIconEle=monthLeft.find("."+$.zdatetimepicker._CLASSES.navIcon);var svgData={props:{viewBox:"0 0 12 12"},nodes:[{polygon:{points:"6.6,10.3 2.9,6.5 6.6,2.7 7.4,3.4 4.3,6.5 7.4,9.6"}}]};this._handleIcon(leftIconEle,svgData,"leftmonth",navBar.previousMonthButtonIconClassName,navBar.previousMonthButtonSVGIconId),"split"===navBar.navigationButtonsDisplayPattern?monthLeft.appendTo(leftNav):$("#"+this._elementId+"-left-year").length&&0===viewMode?monthLeft.insertAfter($("#"+this._elementId+"-left-year")):monthLeft.prependTo("left"===navBar.togetherTypeNavigationButtonsPosition?leftNav:rightNav),monthLeftText=this._localize("prev"+this._getKey(viewMode)),monthLeft.attr({title:monthLeftText,"aria-label":monthLeftText})}if(isRight){var monthRightText;monthRight=$($.zdatetimepicker._NAVBUTTON).attr("id",this._elementId+"-right-month-"+viewMode),rightIconEle=monthRight.find("."+$.zdatetimepicker._CLASSES.navIcon);var svgData={props:{viewBox:"1 0 12 12"},nodes:[{polygon:{points:"4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5"}}]};this._handleIcon(rightIconEle,svgData,"rightmonth",navBar.nextMonthButtonIconClassName,navBar.nextMonthButtonSVGIconId),"split"===navBar.navigationButtonsDisplayPattern?monthRight.prependTo(rightNav):monthRight.insertAfter(monthLeft),monthRightText=this._localize("next"+this._getKey(viewMode)),monthRight.attr({title:monthRightText,"aria-label":monthRightText})}},_fillNavBar:function(date,group){var element=group.element||this.element,navBar=this.options.navigationBar,displayType=this.options.navigationBar.monthYearSwitcherType;if(this._navBar=$(element.find("."+$.zdatetimepicker._CLASSES.navBar)[0]),"together"===navBar.navigationButtonsDisplayPattern)switch(navBar.togetherTypeNavigationButtonsPosition){case"right":this._navBar.addClass($.zdatetimepicker._CLASSES.navOnRight);break;case"left":this._navBar.addClass($.zdatetimepicker._CLASSES.navOnLeft)}group.left&&("split"===navBar.navigationButtonsDisplayPattern||"together"===navBar.navigationButtonsDisplayPattern&&"left"===navBar.togetherTypeNavigationButtonsPosition)&&(this._leftNav=$($.zdatetimepicker._LEFTNAV).prependTo(this._navBar)),group.right&&("split"===navBar.navigationButtonsDisplayPattern||"together"===navBar.navigationButtonsDisplayPattern&&"right"===navBar.togetherTypeNavigationButtonsPosition)&&(this._rightNav=$($.zdatetimepicker._RIGHTNAV).appendTo(this._navBar)),navBar.yearNavigationButtons&&("dropdown"===displayType&&this.options.navigationBar.monthNavigationButtons&&this.element.addClass($.zdatetimepicker._CLASSES.dropdown),this._createYearArrows(this._leftNav,this._rightNav,group.left,group.right)),navBar.monthNavigationButtons&&this._createMonthArrows(this._leftNav,this._rightNav,0,group.left,group.right),this._monthYearNav||"dropdown"===displayType&&this.options.navigationBar.monthSwitcher&&this.options.navigationBar.yearSwitcher&&(!group||!group.index||0===group.index)||(this._monthYearNav=$("<div class='"+$.zdatetimepicker._CLASSES.monthYearNav+"'></div>"),this._leftNav?this._monthYearNav.insertAfter(this._leftNav):this._monthYearNav.prependTo(element.find("."+$.zdatetimepicker._CLASSES.navBar))),this._monthYearNav&&this._fillNavBarElements(group.index),"dropdown"!==displayType||(!group||0!==group.index)&&group&&group.index||this._buildDropdownNavElement(void 0,void 0,group.element),("dropdown"!==displayType||!this.options.navigationBar.yearSwitcher||!this.options.navigationBar.monthSwitcher||group&&group.index&&0!==group.index)&&this._fillNavBarContent(date||this._viewDate,element)},_fillDates:function(date,element,index){var prevDate,nextMonth,index,element=element||this.element,value=new Date(date||this._viewDate),year=value.getFullYear(),month=value.getMonth(),date=value.getDate(),prevMonth=new Date(year,month),dates="",prevDate=prevMonth.getDate(),firstDay=prevMonth.getDay(),rowCount=0;if(100>year&&prevMonth.setFullYear(year),prevMonth.setDate(prevDate-(prevMonth.getDay()-this.options.firstDayOfWeek+7)%7),index="number"==typeof index?index:void 0===index?element.closest("li").index():index,nextMonth=new Date(prevMonth),-1===index||1===index||2===index||0===index&&!this.options.displayAdjacentMonthDates)nextMonth.setDate(nextMonth.getDate()+42);else if(this._monthsPerView>1&&this.options.displayAdjacentMonthDates&&0===index){var prevMonthVal=prevMonth.getMonth(),noOfDaysInPrev=new Date(year,prevMonthVal+1,0).getDate(),noOfDays=new Date(year,month+1,0).getDate();nextMonth.setDate((firstDay!==this.options.firstDayOfWeek?noOfDaysInPrev:0)+noOfDays+1)}nextMonth.setHours(0,0,0,0),prevMonth.setHours(0,0,0,0);nextMonth.getMonth();nextMonth=nextMonth.valueOf();{var weekContainer,first=this.options.firstDayOfWeek;(prevMonth.getDay()-this.options.firstDayOfWeek+7)%7}element.find("."+$.zdatetimepicker._CLASSES.weeknumbers).remove(),this.options.displayWeekNumbers&&(weekContainer=$($.zdatetimepicker._WEEKNUMBER).prependTo(element.find("."+$.zdatetimepicker._CLASSES.monthContainer)),weekContainer.find("th."+$.zdatetimepicker._CLASSES.weeknumber).text(this.options.weekHeading));
for(var i=prevMonth;i.valueOf()<nextMonth;i.setDate(i.getDate()+1)){var weekDay=i.getDay();i.setHours(0,0,0,0);var shouldAddElement=this.options.displayAdjacentMonthDates&&(-1===index||0===index||2===index||1===index&&2===this._monthsPerView)||i.getMonth()<=value.getMonth()&&i.getFullYear()===value.getFullYear()||i.getFullYear()<value.getFullYear();if(weekDay===first){if(this.options.displayWeekNumbers&&shouldAddElement&&weekContainer){var weekStart=new Date(i.getTime()+(this.options.firstDayOfWeek-weekDay-7)%7*864e5),thursdayWeek=new Date(weekStart.getTime()+(11-weekStart.getDay())%7*864e5),firstThursday=new Date(Number(firstThursday=new Date(thursdayWeek.getFullYear(),0,1))+(11-firstThursday.getDay())%7*864e5),weekNumber=(thursdayWeek-firstThursday)/864e5/7+1,weekElement=$("<tr role='row'><td role='gridcell' class='"+$.zdatetimepicker._CLASSES.weeknumber+"'>"+weekNumber+"</td>");weekElement.appendTo(weekContainer.find("tbody"))}shouldAddElement&&(dates+="<tr role='row'>",rowCount++)}if(!this.options.displayAdjacentMonthDates||1===index&&index!==this._monthsPerView-1||index===this._monthsPerView-1){if(i.getMonth()<value.getMonth()&&i.getFullYear()===value.getFullYear()||i.getFullYear()<value.getFullYear()){dates+="<td role='gridcell'> </td>";continue}if((i.getMonth()>value.getMonth()&&i.getFullYear()===value.getFullYear()||i.getFullYear()>value.getFullYear())&&(-1===index||this.options.displayAdjacentMonthDates&&(0===index||1===index&&index!==this._monthsPerView-1)||!this.options.displayAdjacentMonthDates))break}var classNames=this._getClasses(i,value),dateValue=i.getDate(),val="<td role='gridcell' class='"+classNames+"' data-time='"+i.getTime()+"'><span class='"+$.zdatetimepicker._CLASSES.dateText+"'>"+dateValue+"</span></td>";if(this.options.disabledDates.length||this.options.specialDates.length){var returnValue=this._shouldAddClass(i,["disabledDates","disabledDaysOfWeek","specialDates","specialDaysOfWeek"]);if("object"==typeof returnValue||"boolean"==typeof returnValue){var stringIndex;"object"==typeof returnValue&&(returnValue.className&&(stringIndex=val.indexOf("class='"),val=val.slice(0,stringIndex+7)+" "+returnValue.className+" "+val.slice(stringIndex+7)),returnValue.title&&(stringIndex=val.indexOf("class"),val=val.slice(0,stringIndex)+" title='"+returnValue.title+"' "+val.slice(stringIndex)));var disabledInfo=this.options.disabledDateInformativeText,highlightInfo=this.options.highlightedDatesInformativeText;if(returnValue.informativeText||"boolean"==typeof returnValue&&disabledInfo||highlightInfo){var finalVal;void 0!==returnValue.informativeText?finalVal=returnValue.informativeText:classNames.indexOf($.zdatetimepicker._CLASSES.disabled)>-1&&disabledInfo?finalVal=disabledInfo:classNames.indexOf($.zdatetimepicker._CLASSES.highlighted)>-1&&highlightInfo&&(finalVal=highlightInfo),void 0!==finalVal&&(stringIndex=val.indexOf("</td>"),val=val.slice(0,stringIndex)+"<span class='zdatetimepicker__secondaryinfo'>"+finalVal+"</span> "+val.slice(stringIndex))}}}var cellContent={dateCell:val};this._dispatchEvent("BEFOREDATECELLRENDER",void 0,cellContent),cellContent.modified&&(val=cellContent.dateCell),dates+=val}this._rowsCount.push(rowCount),element.find("."+$.zdatetimepicker._CLASSES.dateView+" tbody").html(dates),this.options.allowSelectionOfAdjacentMonthDates||element.find("table."+$.zdatetimepicker._CLASSES.dateView).addClass($.zdatetimepicker._CLASSES.readonlyAdjacent)},_updateArrowState:function(date,index){var updateInBatch=this._monthsPerView>1;date=date||this._viewDate;var minDate=this._minDate,maxDate=this._maxDate,year=date.getFullYear(),month=date.getMonth(),minYear=minDate&&minDate.getFullYear(),minMonth=minDate&&minDate.getMonth(),maxYear=maxDate&&maxDate.getFullYear(),maxMonth=maxDate&&maxDate.getMonth(),prev=minYear>year||year===minYear&&minMonth>month-1,next=year>maxYear||year===maxYear&&month+1>maxMonth,yearPrev=minYear>year-1||year-1===minYear&&minMonth>month,yearNext=year+1>maxYear||year+1===maxYear&&month>maxMonth,disabledCl=$.zdatetimepicker._CLASSES.disabled;(!updateInBatch||updateInBatch&&0===index)&&($("#"+this._elementId+"-left-month-0")[prev?"addClass":"removeClass"](disabledCl),$("#"+this._elementId+"-left-year")[yearPrev?"addClass":"removeClass"](disabledCl)),(!updateInBatch||updateInBatch&&index===this._monthsPerView-1)&&($("#"+this._elementId+"-right-month-0")[next?"addClass":"removeClass"](disabledCl),$("#"+this._elementId+"-right-year")[yearNext?"addClass":"removeClass"](disabledCl))},_getClasses:function(date,dateToCompare){dateToCompare=dateToCompare||this._viewDate;var secondYear=dateToCompare.getFullYear(),secondMonth=dateToCompare.getMonth(),firstYear=(dateToCompare.getDate(),date.getFullYear()),firstMonth=date.getMonth(),today=(date.getDate(),new Date),classes="";if(classes+=secondYear>firstYear||firstYear===secondYear&&secondMonth>firstMonth||firstYear===secondYear&&firstMonth>secondMonth||firstYear>secondYear?" "+$.zdatetimepicker._CLASSES.adjacent:" "+$.zdatetimepicker._CLASSES.date,ZDateUtil.areDatesEqual(date,today)&&(classes+=" "+$.zdatetimepicker._CLASSES.today),(this._currentSelected&&ZDateUtil.areDatesEqual(date,this._currentSelected)||this.options.value&&ZDateUtil.areDatesEqual(date,this.options.value)&&this._currentSelected&&ZDateUtil.areDatesEqual(date,this._currentSelected))&&(classes+=" "+$.zdatetimepicker._CLASSES.selected),this._selectedDates.length&&"multiple"===this.options.selectionType){for(var isSelected=!1,i=0,len=this._selectedDates.length;len>i;i++)this._selectedDates[i]&&ZDateUtil.areDatesEqual(date,this._selectedDates[i])&&(classes+=" "+$.zdatetimepicker._CLASSES.selected,isSelected=!0);isSelected||this.options.selectionLimit!==this._selectedDates.length||(classes+=" "+$.zdatetimepicker._CLASSES.disabled)}this._weekEnds.indexOf(date.getDay().toString())>-1&&(classes+=" "+$.zdatetimepicker._CLASSES.weekend);var optionsArray=["disabledDaysOfWeek","disabledDates"];(!this._dateWithInRange(date)||this._shouldAddClass(date,optionsArray)||this.options.disabledMonths&&this.options.disabledMonths.indexOf(date.getMonth())>-1||this.options.disabledYears&&this.options.disabledYears.indexOf(date.getFullYear())>-1)&&(classes+=" "+$.zdatetimepicker._CLASSES.disabled+" zdisabled");var optionsArray=["specialDaysOfWeek","specialDates"];return this._shouldAddClass(date,optionsArray)&&(classes+=" "+$.zdatetimepicker._CLASSES.highlighted),classes},_shouldAddClass:function(date,options){for(var i=0,len=options.length;len>i;i++){var optionVal=this.options[options[i]];if(optionVal){if($.inArray(date.getDay(),optionVal)>-1)return!0;for(var j=0,length=optionVal.length;length>j;j++){var value=optionVal[j];if("object"==typeof value)if(value.date instanceof Date){if(ZDateUtil.areDatesEqual(value.date,date))return!0}else if(value.date){var dateToCheck=new Date(value.date.date.getTime());if(value.repeatEveryYear&&dateToCheck.setFullYear(date.getFullYear()),value.repeatEveryMonth&&dateToCheck.setMonth(date.getMonth()),ZDateUtil.areDatesEqual(dateToCheck,date))return value}else if(value.startDate&&value.endDate){var startDate=new Date(value.startDate.date.getTime()),endDate=new Date(value.endDate.date.getTime());if(value.repeatEveryYear&&(startDate.setFullYear(date.getFullYear()),endDate.setFullYear(date.getFullYear())),value.repeatEveryMonth&&(startDate.setMonth(date.getMonth()),endDate.setMonth(date.getMonth())),(ZDateUtil.isGreater(date,startDate)||ZDateUtil.areDatesEqual(startDate,date))&&ZDateUtil.isGreater(endDate,date))return value}}}}},_parseDateValue:function(date,pattern){return ZDateUtil._parseDateValue(date,pattern,this.options.otherInputFormats)},_fillDayOfWeek:function(element){var weekHTML="",start=this.options.firstDayOfWeek,classes="",weekend=this.options.weekendDays.split(",");element=element||this.element;for(var i=start;start+7>i;i++)classes="",(i%7===parseInt(weekend[0])||i%7===parseInt(weekend[1]))&&(classes+=$.zdatetimepicker._CLASSES.weekend),weekHTML+="<th class='"+$.zdatetimepicker._CLASSES.day+" "+classes+"'>"+this._localize("daysAbbreviated")[i%7]+"</th>";element.find("."+$.zdatetimepicker._CLASSES.days).append(weekHTML)},_parseValue:function(optionName,value){var isModified,dateInfo;return"string"==typeof value?("TODAY"===value||"NOW"===value?("NOW"!==value||"minDate"!==optionName&&"maxDate"!==optionName||(this["_"+optionName+"HasTime"]=!0),this.options[optionName]=new Date):(dateInfo=this._parseDateValue(value,this.options.format),("minDate"===optionName||"maxDate"===optionName)&&this._hasTime&&(dateInfo.isValid?this["_"+optionName+"HasTime"]=!0:(this["_"+optionName+"HasTime"]=!1,dateInfo=this._parseDateValue(value,this._dateFormat))),this.options[optionName]=dateInfo?dateInfo.date:void 0),isModified=!0):value instanceof Date?(this.options[optionName]=value,isModified=!0):(this._oldValueOption&&(isModified=!0),this.options[optionName]=void 0),isModified},open:function(){("popup"===this.options.type&&(this.options.forElement||this.options.offset)||"inline"===this.options.type)&&this._showPicker()},close:function(){this._manualClose=!0,this._closePicker(),this._manualClose=!1},_removeTimeBar:function(){this._timeElement&&this._timeElement.length&&(this.element.find("."+$.zdatetimepicker._CLASSES.timepicker).remove(),this._timeElement=this._hourElement=this._minuteElement=this._periodElement=void 0)},_setValue:function(value){this._rowsCount=[],this._valueUpdate=!0;var isModified=this._parseValue("value",value);if(this._hasTime="multiple"===this.options.selectionType?!1:this._checkIfDateHasTime(),this.options.value&&!this._hasTime&&isModified&&this.options.value.setHours(0,0,0,0),this._performValidations(),this._currentSelected=this.options.value?new Date(this.options.value.getTime()):void 0,isModified&&(this._viewDate=this.options.value||new Date,this._setViewDate()),"dropdown"===this.options.navigationBar.monthYearSwitcherType&&(this._yearHeader&&this._yearHeader.zcombobox("destroy"),$("#"+this._elementId+"-year-header").remove(),this._yearHeader=void 0),this._renderContent(),this._removeTimeBar(),this._hasTime&&this._buildTimePicker(),this.options.value){var newDate=this._resetTime(this.options.value),target=this.element.find("[data-time='"+newDate.getTime()+"']");this._setDate(void 0,target,this.options.value,!0)}else{var selectedClass=$.zdatetimepicker.selected;this.element.find("."+selectedClass).removeClass(selectedClass)}this._reset&&this._reset.length&&this._reset[this.options.value?"removeClass":"addClass"]("is-disabled").attr("disabled",this.options.value?!1:!0)},_addAprropriateClasses:function(){this._footer&&this._footer.length?this._timeElement&&this._timeElement.length?(this.element.addClass($.zdatetimepicker._CLASSES.triple),this._timeElement.removeClass("h-aligncenter h-alignright h-alignleft").addClass("h-align"+("left"===this.options.buttonsAlignment?"right":"left"))):this.element.removeClass($.zdatetimepicker._CLASSES.triple):this._timeElement&&this._timeElement.length&&(this.element.removeClass($.zdatetimepicker._CLASSES.triple),this._timeElement.removeClass("h-aligncenter h-alignright h-alignleft").addClass("h-aligncenter"))},_refreshClassNames:function(pickerEle,className,optionsArray){var base=this,isDisabled=className.indexOf("disabled")>-1;pickerEle.find("td."+$.zdatetimepicker._CLASSES.date+",td."+$.zdatetimepicker._CLASSES.adjacent).filter(function(ele,value){$(value).hasClass(className)&&$(value).removeClass(className);var date=new Date(parseInt(value.getAttribute("data-time"))),addDisabled=isDisabled?!base._dateWithInRange(date):!1;(addDisabled||base._shouldAddClass(date,optionsArray))&&$(value).addClass(className)})},_setAttribute:function(optionName,value,pickerEle){pickerEle=pickerEle||this.element,this._oldValue=this.options[optionName];var buttonOptions=["todayButton","clearButton","hideCancelButton"];if("object"!=typeof value||value instanceof Array||value instanceof Date||(this._yearNavigation=value.yearNavigationButtons,"commandBar"===optionName?this.options.commandBar=value:value=$.extend(!0,{},this.options[optionName],value)),this._oldValueOption=this.options.value,this.options[optionName]=value,void 0==this._yearNavigation&&(this._yearNavigation=this.options.navigationBar.yearNavigationButtons=/^(drilldown|none)$/.test(this.options.navigationBar.monthYearSwitcherType)?!0:!1),"value"===optionName)this._setValue(this.options.value);else if("values"===optionName)this.setValues(this.options.values);else if("format"===optionName){if(this.options.value){var newDate=this._resetTime(this.options.value),target=pickerEle.find("[data-time='"+newDate.getTime()+"']");this._setDate(void 0,target,this.options.value)}this._hasTime=this._checkIfDateHasTime(),this._removeTimeBar(),this._hasTime&&this._buildTimePicker(),3===this._monthsPerView&&this._addAprropriateClasses()}else if("minDate"===optionName||"maxDate"===optionName&&this._hasDate)this._parseValue(optionName,value),this["_"+optionName]=this.options[optionName],"dropdown"===this.options.navigationBar.monthYearSwitcherType&&(this._yearHeader&&this._yearHeader.zcombobox("destroy"),$("#"+this._elementId+"-year-header").remove(),this._yearHeader=void 0),this.options.value||0!==this.options.values.length||(this._viewDate=new Date,this._viewDate.setHours(0,0,0,0)),this._processBoundaries(),this._validateBoundaries(),this.options.value||0!==this.options.values.length||(this._setMonthToView(),this._setYearToView()),this._renderContent(),this._monthHeader&&this._checkOptions();else if("title"===optionName)if(value&&value.length){var title=pickerEle.find("."+$.zdatetimepicker._CLASSES.title);0===title.length&&pickerEle.prepend($($.zdatetimepicker._HEADER)),pickerEle.find("."+$.zdatetimepicker._CLASSES.title).html(this.options.isTitleHTMLEncoded?value:ZC.encodeHTML(value)),"inline"!==this.options.type&&(this.options.closeButton&&!this._closeButton&&this._createCloseButton(),this.options.draggable&&!pickerEle.data("zdraggable")&&this._initDraggable())}else pickerEle.find("."+$.zdatetimepicker._CLASSES.header).remove();else if("closeButton"===optionName)value?this.options.title&&"inline"!==this.options.type&&this._createCloseButton():this._closeButton&&(this._closeButton.remove(),this._closeButton=void 0);else if("closeSVGIconId"===optionName||"closeIconClassName"===optionName)this._createCloseButton();else if("position"===optionName)this._isPositionModified=!0,this._performValidations();else if("displayType"===optionName)this._performValidations(),"box"===value&&this._pointer?(this._pointer.remove(),this._pointer=void 0,!this._isPositionModified&&(this.options.position="bottom-left")):this._constructPointer();else if("forElement"===optionName)this.options.forElement=value?$(value):void 0;else if("customHTMLAboveNavigationBar"===optionName)value?this._insertHTMLAboveNavbar():this._oldValue&&$(this._oldValue).length&&$(this._oldValue).appendTo(this._aboveNavbarParent);else if("customHTMLBelowCalendar"===optionName)value?this._insertHTMLBelowCalendar():this._oldValue&&$(this._oldValue).length&&$(this._oldValue).appendTo(this._belowCalendarParent);else if("customHTMLAboveCalendar"===optionName)value?this._insertHTMLAboveCalendar():this._oldValue&&$(this._oldValue).length&&$(this._oldValue).appendTo(this._aboveCalendarParent);else if("displayWeekNumbers"===optionName)this._renderContent();else if("weekHeading"===optionName&&this._hasDate&&this.options.displayWeekNumbers)pickerEle.find("th."+$.zdatetimepicker._CLASSES.weeknumber).text(this.options.weekHeading);else if("type"===optionName)"popup"===this.options.type?(this.options.forElement||this.options.offset)&&this._showPicker():(this._closeButton&&(this._closeButton.remove(),this._closeButton=void 0),this._cancel&&(this._cancel.remove(),this._cancel=void 0));else if("selectionType"===optionName){this._currentSelected=!1,this._resetValues(),this._hasDate&&this._renderContent(),this._hasTime&&(this._removeTimeBar(),this._buildTimePicker());var calendar=this.element.find("."+$.zdatetimepicker._CLASSES.dateView);"multiple"===this.options.selectionType?calendar.attr("aria-multiselectable",!0):calendar.removeAttr("aria-multiselectable")}else if("selectionLimit"===optionName&&"multiple"===this.options.selectionType&&this._hasDate){var len=this._selectedDates.length;if(len>this.options.selectionLimit){for(var diff=len-this.options.selectionLimit,pos=len-diff,i=pos;pos+diff>i;i++){var date=this._resetTime(this._selectedDates[i]);pickerEle.find("[data-time='"+date.getTime()+"']").removeClass($.zdatetimepicker._CLASSES.selected).removeAttr("aria-selected").addClass($.zdatetimepicker._CLASSES.disabled).attr("aria-disabled",!0)}this._selectedDates.splice(pos,diff),this.options.values.splice(pos,diff),this._dispatchEvent("APPLY",void 0,{valuesObject:this._selectedDates,valueString:this.options.values}),this._selectedDates.length===this.options.selectionLimit&&(this._limitReached=!0)}else this.options.selectionLimit>len&&this._limitReached?(this._limitReached=!1,pickerEle.find("."+$.zdatetimepicker._CLASSES.date+",."+$.zdatetimepicker._CLASSES.adjacent).filter(this._queryString).removeClass($.zdatetimepicker._CLASSES.disabled).removeAttr("aria-disabled")):this.options.selectionLimit===len&&(this._limitReached=!0);this._limitReached&&(this._queryString=":not(",this._getQueryString(),pickerEle.find("."+$.zdatetimepicker._CLASSES.date+",."+$.zdatetimepicker._CLASSES.adjacent).filter(this._queryString).addClass($.zdatetimepicker._CLASSES.disabled).attr("aria-disabled",!0)),this._selectedDates&&this._selectedDates.length&&(this._viewDate=new Date(this._selectedDates[this._selectedDates.length-1].getTime())),this._oldDate&&!ZDateUtil.areDatesEqual(this._viewDate,this._oldDate)&&this._renderContent()}else if(buttonOptions.indexOf(optionName)>-1||"immediateCommit"===optionName||"commandBar"===optionName)this._reBuildCommandBar(),3===this._monthsPerView&&this._addAprropriateClasses();else if("clearButtonLabel"===optionName)this._reset&&this._reset.find(".zbutton__text").text(this.options.clearButtonLabel),this._clearButtonLabel=this.options.clearButtonLabel||this._localize("clearButtonLabel");else if("todayButtonLabel"===optionName)this._today&&this._today.text(this.options.todayButtonLabel),this._todayButtonLabel=this.options.todayButtonLabel||this._localize("todayButtonLabel");else if("cancelButtonLabel"===optionName)this._cancel&&this._cancel.find(".zbutton__text").text(this.options.cancelButtonLabel),this._cancelButtonLabel=this.options.cancelButtonLabel||this._localize("cancelButtonLabel");else if("OKButtonLabel"===optionName)this._apply&&this._apply.find(".zbutton__text").text(this.options.OKButtonLabel),this._OKButtonLabel=this.options.OKButtonLabel||this._localize("OKButtonLabel");else if("monthsPerView"===optionName||"locale"===optionName||"navigationBar"===optionName||"drilldownLevelOnOpen"===optionName)this.destroy(),this.element[this.componentName](this.options);else if("weekendDays"===optionName&&this._hasDate){this._weekEnds=this.options.weekendDays.split(",");for(var tdElements=pickerEle.find("td."+$.zdatetimepicker._CLASSES.date+",td."+$.zdatetimepicker._CLASSES.adjacent).removeClass($.zdatetimepicker._CLASSES.weekend),tdLength=tdElements.length,i=0;tdLength>i;i++){var element=$(tdElements[i]),value=parseInt(element.attr("data-time")),dayValue=new Date(value).getDay();this._weekEnds.indexOf(dayValue.toString())>-1&&element.addClass($.zdatetimepicker._CLASSES.weekend)}}else if("timeLabelType"===optionName){if(this._hasTime){var ele=pickerEle.find(".zdatetimepicker--multipleselectbox");ele=ele.length?ele:void 0,this._buildLabel(ele);var icon=this._timeElement.find("."+$.zdatetimepicker._CLASSES.timeIcon),label=this._timeElement.find("."+$.zdatetimepicker._CLASSES.timeLabel);("text"===value||"none"===value)&&icon.length&&icon.remove(),("icon"===value||"none"===value)&&label.length&&label.remove()}}else if("draggable"===optionName)this.options.title&&this.options.draggable&&$.fn.zdraggable?this._initDraggable():this.element.data("zdraggable")&&this.element.zdraggable("destroy");else if("monthToBeShownOnOpen"===optionName||"yearToBeShownOnOpen"===optionName&&this._hasDate)"monthToBeShownOnOpen"===optionName?this._setMonthToView():this._setYearToView(),this._validateViewDate(),this._renderContent();else if("disabledDaysOfWeek"===optionName||"specialDaysOfWeek"===optionName||"specialDaysOfWeek"===optionName||"specialDates"===optionName||"disabledDates"===optionName&&this._hasDate){var className;if("disabledDates"===optionName||"specialDates"===optionName){var datesObject={};datesObject[optionName]=this.options[optionName],this._convertStringToObject(datesObject)}className=$.zdatetimepicker._CLASSES.disabled+" zdisabled",this._refreshClassNames(pickerEle,className,["disabledDaysOfWeek","disabledDates"]),className=$.zdatetimepicker._CLASSES.highlighted,this._refreshClassNames(pickerEle,className,["specialDaysOfWeek","specialDates"])}else if("disabledMonths"===optionName&&this._hasDate)this.options.disabledMonths.indexOf(this._viewDate.getMonth())>-1?pickerEle.find("td").addClass($.zdatetimepicker._CLASSES.disabled+" zdisabled").attr("aria-disabled",!0):"dropdown"===this.options.navigationBar.monthYearSwitcherType?this._monthHeader&&(this._monthHeader.zselectbox("setOptionAttributes",this._oldValue,"disabled",!1),this._monthHeader.zselectbox("setOptionAttributes",this.options.disabledMonths,"disabled",!0)):this._monthDrillDownElement&&this._monthDrillDownElement.find("td").addClass($.zdatetimepicker._CLASSES.disabled).attr("aria-disabled",!0);else if("disabledYears"===optionName&&this._hasDate)this.options.disabledYears.indexOf(this._viewDate.getFullYear())>-1?"drilldown"===this.options.navigationBar.monthYearSwitcherType&&pickerEle.find("td").addClass($.zdatetimepicker._CLASSES.disabled+" zdisabled").attr("aria-disabled",!0):"dropdown"===this.options.navigationBar.monthYearSwitcherType?this._yearHeader&&(this._yearHeader.zcombobox("setOptionAttributes",this._oldValue,"disabled",!1),this._yearHeader.zcombobox("setOptionAttributes",this.options.disabledYears,"disabled",!0)):this._yearDrillDownElement&&this._yearDrillDownElement.find("td").addClass($.zdatetimepicker._CLASSES.disabled).attr("aria-disabled",!0);else if("timeFieldType"===optionName||"timeMultipleSelectBoxType"===optionName||"minTime"===optionName||"maxTime"===optionName||"hourStep"===optionName||"minuteStep"===optionName||"disabledTimeList"===optionName||"fixedTimeOptions"===optionName)this._hasTime=this._checkIfDateHasTime(),this._validateTimeOptions(),this._removeTimeBar(),this._hasTime&&this._buildTimePicker();else if("timeLabel"===optionName)this._timeElement&&this._timeElement.find("."+$.zdatetimepicker._CLASSES.timeLabel).text(this.options.timeLabel);else if("timeLabelIconClassName"===optionName||"timeLabelSVGIconId"===optionName)this._timeElement&&this._handleIcon(this._timeElement.find("."+$.zdatetimepicker._CLASSES.timeIcon),void 0,"time",this.options.timeLabelIconClassName,this.options.timeLabelSVGIconId);else if("displayAdjacentMonthDates"===optionName&&this._hasDate)this._renderContent(void 0,void 0,!1);else if("selectedDateMonthViewIndex"===optionName&&this._hasDate)this.options.value&&(this._viewDate=new Date(this.options.value.getTime()),this._updateSelectedDatePosition());else if("allowSelectionOfAdjacentMonthDates"===optionName&&this._hasDate)this.element.find("table."+$.zdatetimepicker._CLASSES.dateView)[value?"removeClass":"addClass"]($.zdatetimepicker._CLASSES.readonlyAdjacent);else if("width"===optionName)this.options.width&&this.element.width(this.options.width);else if("height"===optionName)this.options.height&&this.element.height(this.options.height);else if("className"===optionName)this.element.removeClass(this._oldValue),value&&this.element.addClass(value);else if("offset"===optionName)this.element.css(this.options.offset);else if("margin"===optionName&&this.element.is(":visible")){var position={};position.left=parseInt(this.element.css("left")),position.top=parseInt(this.element.css("top")),position=this._retrieveMarginValues(position),this.element.css(position)}},_reBuildCommandBar:function(){var command=this.options;this.options.OKButton=!this.options.immediateCommit,this.options.cancelButton=!this.options.hideCancelButton&&!this.options.immediateCommit,this._footer&&(this._unBindButtonEvents(),this._footer.empty());var columnExists=this._checkIfColumnExists();(command.todayButton||command.OKButton||command.cancelButton||command.clearButton||columnExists)&&(this._createButtons(),this._bindButtonEvents()),this._footer&&0===this._footer.children().length&&(this._footer.remove(),this._footer=void 0),3===this._monthsPerView&&this._footer&&this._footer.length&&this._hasTime&&this.element.addClass($.zdatetimepicker._CLASSES.triple)},_checkIfColumnExists:function(){var columnExists=!1;if(this.options.commandBar){for(var columns=["leftColumn","centerColumn","rightColumn"],i=0;i<columns.length;i++)if(this.options.commandBar.hasOwnProperty(columns[i])){columnExists=!0;break}return columnExists}},_bindArrowEvents:function(){$("#"+this._elementId+"-right-month-0, #"+this._elementId+"-left-month-0").on("click."+this.componentName,this._handleMonthArrowClick.bind(this)),this.options.navigationBar.yearNavigationButtons&&$("#"+this._elementId+"-left-year, #"+this._elementId+"-right-year").on("click."+this.componentName,this._handleYearArrowClick.bind(this))},getValue:function(){var formattedDate=ZDateUtil.formatDate(this.options.value,this.options.format);return{valueObject:this.options.value,dateString:formattedDate}},getValues:function(){for(var selectedDates=[],i=0;i<this.options.values.length;i++)selectedDates[i]=ZDateUtil.parseDate(this.options.values[i],this.options.format).date;return{values:this.options.values,valuesObject:selectedDates}},setValue:function(dateString){"single"===this.options.selectionType&&this._setValue(dateString)},setValues:function(datesArray){"multiple"===this.options.selectionType&&(this._rowsCount=[],this.options.values=datesArray,this._setValues(),this._performValidations(),(this._oldDate&&!ZDateUtil.areDatesEqual(this._oldDate,this._viewDate)||!this._oldDate)&&this._renderContent())},getElement:function(){return this.element},clear:function(date){if("multiple"===this.options.selectionType&&date){var index;if("string"==typeof date?index=this.options.values.indexOf(date):date instanceof Date&&(date.setHours(0,0,0,0),date=ZDateUtil.formatDate(date,this.options.format),index=this.options.values.indexOf(date)),index>-1){var date=this._resetTime(this._selectedDates[index]);this.element.find("[data-time='"+date.getTime()+"']").removeClass("is-selected").removeAttr("aria-selected"),this.options.values.splice(index,1),this._selectedDates.splice(index,1),0===this.options.values.length&&(this._viewDate=new Date,this._viewDate.setHours(0,0,0,0)),this._renderContent()}}},clearAll:function(){this._resetClickHandler(),this.options.values=[],this._selectedDates=[]},destroy:function(){if(this.element.removeData(this.componentName),this.element.off("."+this.componentName),this.element.removeClass($.zdatetimepicker._CLASSES.datepicker+" "+$.zdatetimepicker._CLASSES.group+" "+$.zdatetimepicker._CLASSES.dropdown+" "+$.zdatetimepicker._CLASSES.triple),this._monthHeader&&this._monthHeader.zselectbox("destroy"),this._yearHeader&&this._yearHeader.zcombobox("destroy"),this._hasTime){var input=this.element.find(".zdatetimepicker-timeinput");input.length&&input.zdatetimefield("destroy")}this.options.customHTMLAboveCalendar&&$(this.options.customHTMLAboveCalendar).appendTo(this._aboveCalendarParent),this.options.customHTMLBelowCalendar&&$(this.options.customHTMLBelowCalendar).appendTo(this._belowCalendarParent),this.options.customHTMLAboveNavigationBar&&$(this.options.customHTMLAboveNavigationBar).appendTo(this._aboveNavbarParent),this.element.empty(),this.options.draggable&&this.element.data("zdraggable")&&this.element.zdraggable("destroy"),this._rowsCount=[],this._minDate=void 0,this._maxDate=void 0,this._monthsPerView=void 0,this._currentSelected=void 0,this._selectedDates=[],this._navBar=this._monthHeader=this._monthYearNav=this._monthNavBar=this._yearNavBar=this._yearDrillDownElement=this._monthDrillDownElement=this._decadeDrillDownElement=this._leftNav=this._rightNav=this._decadeNavBar=this._reset=this._today=this._cancel=this._apply=this._singleTimeSelect=this._timeElement=void 0,this._combinedPeriodElement=this._combinedTimeElement=this._hourElement=this._minuteElement=this._periodElement=this._footer=void 0}};ZC.registerComponent("zdatetimepicker",dateTimePickerPrototype),$.zdatetimepicker._CLASSES={triple:"zdatetimepicker--triplecalendar",weeknumbers:"zdatetimepicker__weeknumbers",list:"zdatetimepicker__list",weeknumber:"zdatetimepicker__weeknumber",dropdown:"zdatetimepicker--dropdownyearbutton",dateText:"zdatetimepicker__text",leftNav:"zdatetimepicker__leftnav",highlighted:"zdatetimepicker--special",container:"zdatetimepicker__container",monthContainer:"zdatetimepicker__calendar",group:"zdatetimepicker--group",weekend:"zdatetimepicker--weekend",pointer:"zdatetimepicker__pointer",navOnRight:"zdatetimepicker__navbaractionsonright",navOnLeft:"zdatetimepicker__navbaractionsonleft",gridContainer:"zdatetimepicker__drilldownview",monthYearTable:"zdatetimepicker__drilldowncell",currentGrid:"zdatetimepicker--currentcell",grid:"zdatetimepicker__monthyeargrid",timeIcon:"zdatetimepicker__timeicon",timeLabel:"zdatetimepicker__timelabel",rightNav:"zdatetimepicker__rightnav",disabled:"is-disabled",selected:"is-selected",header:"zdatetimepicker__titlebar",title:"zdatetimepicker__title",close:"zdatetimepicker__close",datepicker:"zdatetimepicker",timepicker:"zdatetimepicker__timebar",body:"zdatetimepicker__monthcontainer",navBar:"zdatetimepicker__navbar",navButton:"zdatetimepicker__navbutton",navIcon:"zdatetimepicker__icon",monthYearNav:"zdatetimepicker__monthyearnav",monthNav:"zdatetimepicker__monthnav",yearNav:"zdatetimepicker__yearnav",dateView:"zdatetimepicker__month",days:"zdatetimepicker__week",day:"zdatetimepicker__day",date:"zdatetimepicker__date",today:"zdatetimepicker--today",adjacent:"zdatetimepicker__adjacentmonthdate",footer:"zdatetimepicker__commandbar",disabledCalendar:"zdatetimepicker--disabledcalendar",readonlyAdjacent:"zdatetimepicker--adjacentmonthdatereadonly"},$.zdatetimepicker._LEFTNAV="<div class='"+$.zdatetimepicker._CLASSES.leftNav+"'></div>",$.zdatetimepicker._RIGHTNAV="<div class='"+$.zdatetimepicker._CLASSES.rightNav+"'></div>",$.zdatetimepicker._HEADER="<div class='"+$.zdatetimepicker._CLASSES.header+"' role='heading'><span class='"+$.zdatetimepicker._CLASSES.title+"'></span></div>",$.zdatetimepicker._NAVBUTTON="<button type='button' role='button' class='"+$.zdatetimepicker._CLASSES.navButton+"'><i class='"+$.zdatetimepicker._CLASSES.navIcon+"'></i></button></div>",$.zdatetimepicker._NAVITEM="<div class='"+$.zdatetimepicker._CLASSES.monthYearNav+"'><span class='"+$.zdatetimepicker._CLASSES.monthNav+"'></span><span class='"+$.zdatetimepicker._CLASSES.yearNav+"'></span></div>",$.zdatetimepicker._MONTH="<div class='"+$.zdatetimepicker._CLASSES.monthContainer+"'><table class='"+$.zdatetimepicker._CLASSES.dateView+"' role='grid'><thead><tr role='row' class='"+$.zdatetimepicker._CLASSES.days+"'></tr></thead><tbody></tbody></table></div>",$.zdatetimepicker._TEMPLATE="<div class='"+$.zdatetimepicker._CLASSES.body+" zdatetimepicker__days'><div class='"+$.zdatetimepicker._CLASSES.navBar+"'></div>"+$.zdatetimepicker._MONTH+"</div></div>",$.zdatetimepicker._WEEKNUMBER="<table role='grid' class='"+$.zdatetimepicker._CLASSES.weeknumbers+"'><thead><tr role='row'><th class='"+$.zdatetimepicker._CLASSES.weeknumber+"'></th></tr></thead><tbody></tbody></table>"}(ZComponents),function(ZC){var $=ZC.DOMUtil;ZAlertDialog={position:"golden-mean",ANIMATION_EVENTS:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend transitionend",overlayClassName:"",EFFECTS:{slide:{open:"slideDown",close:"slideUp"},fade:{open:"fadeIn",close:"fadeOut"}},_ALIGNMENTS:{left:"zdialogfooter--invert",right:"",center:"h-center"},DEFAULTS:{type:"custom",buttonsAlignment:"right",isHTMLEncoded:!1,isTitleHTMLEncoded:!1,isMessageHTMLEncoded:!1,className:"",icon:void 0,draggable:!0,labels:{cancel:"Cancel",no:"No",ok:"OK",yes:"Yes",close:"Close",help:"Help",suppressionMessage:"Do not show this message again."},closeIcon:void 0,helpIcon:void 0,OKButtonLabel:void 0,cancelButtonLabel:void 0,yesButtonLabel:void 0,noButtonLabel:void 0,closeButtonLabel:void 0,helpButtonLabel:void 0,suppressionDecisionBoxLabel:void 0},widgetName:"zalertdialog",open:function(options){var baseObj=this;
this.close({},{},function(){baseObj._openDialog(options)})},_openDialog:function(options){if(this.options=$.extend(!0,{},this.DEFAULTS,options),this.options.customAttributes&&window.sessionStorage.suppressAlertId&&-1!==window.sessionStorage.suppressAlertId.indexOf(this.options.customAttributes.id)||window.sessionStorage.suppressAlert&&"null"!==window.sessionStorage.suppressAlert)return void(options.suppressed&&options.suppressed());this._constructDialog(),this._bindEvents(),$("body").append(this.wrapper),this._positionDialog(),this._createOverlay(),this._openWithAnimation();var base=this;ZC.$window.off("resize.zalertdialog").on("resize.zalertdialog",function(event){base.wrapper&&base.wrapper.is(":visible")&&(base.options.position&&!base.options.position.length||"center"===base.options.position)&&"resize"===event.originalEvent.type&&base._positionDialog()})},_constructDialog:function(){this.wrapper=$("<div/>").attr({"class":"zdialog zdialog--alert "+this.options.className,tabIndex:-1,role:"alertdialog","aria-modal":!0}),this.options.customAttributes&&this.wrapper.attr(this.options.customAttributes),(this.options.title||this.options.closeButton)&&(this._createTitleBar(),$.fn.zdraggable&&this.options.draggable&&this._makeDraggable()),(this.options.primaryMessage&&""!==this.options.primaryMessage.trim()||this.options.secondaryMessage&&""!==this.options.secondaryMessage.trim())&&this._createContent(),this._createFooter()},_makeDraggable:function(){this.wrapper.zdraggable({ignore:".zdialog__actiongroup",handle:".zdialog__header",container:"window"})},_createTitleBar:function(){var titleBar=$("<div/>").attr("class","zdialog__header");if(this.options.title&&titleBar.append($("<span/>").attr("class","zdialog__title").html(this.options.isHTMLEncoded||this.options.isTitleHTMLEncoded?this.options.title:ZC.encodeHTML(this.options.title))),this.options.closeButton){var closeContainer=$("<div class='zdialog__actiongroup'></div>"),closeButton=$("<button type='button'></button>").attr({"class":"zbutton zbutton--action",title:this.options.closeButtonLabel||this._getString("close")}),base=this;closeButton.on("click."+this.widgetName,function(event){base.close(event,{button:closeButton,buttonType:"CLOSE",closeButton:!0})});var iconEle=$("<i class='zbutton__icon'></i"),svgData={props:{"class":"zbutton__svg",viewBox:"0 0 16 16",width:"100%",height:"100%"},nodes:[{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)","class":"st0",width:"13",height:"1.1"}},{rect:{x:"1.5",y:"7.4",transform:"matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)","class":"st0",width:"13",height:"1.1"}}]};ZC._handleIcon(iconEle,svgData,"close",this.options.closeIconClassName,this.options.closeSVGIconId),closeButton.append(iconEle),titleBar.append(closeContainer.append(closeButton))}this.wrapper.append(titleBar)},_createContent:function(){var contentPortion=$("<div class='zdialog__content'/>"),descriptionDiv=$("<div class='zdialog__description'></div>"),iconEle=$("<i class='zdialog__icon'></i>"),actualIcon=this._getIcon(iconEle);if(actualIcon&&void 0!==actualIcon&&""!==actualIcon){var iconDiv=$("<div class='zdialog__alerticon'></div>");contentPortion.append(iconDiv.append(iconEle))}if(this.options.primaryMessage&&descriptionDiv.append($("<div class='zdialog__primarytext'>").html(this.options.isHTMLEncoded||this.options.isMessageHTMLEncoded?this.options.primaryMessage:ZC.encodeHTML(this.options.primaryMessage))),this.options.secondaryMessage&&descriptionDiv.append($("<div class='zdialog__secondarytext'>").html(this.options.isHTMLEncoded||this.options.isMessageHTMLEncoded?this.options.secondaryMessage:ZC.encodeHTML(this.options.secondaryMessage))),contentPortion.append(descriptionDiv),this.options.suppressionDecisionBox){var suppressionDiv=$("<div class='zdialog__suppression'></div>"),base=this,suppressionDecisionBox=$("<div class='zcheckbox'><input id='zalert__suppression--box' type='checkbox' class='zcheckbox__helper'/><label for='zalert__suppression--box' class='zcheckbox__label'>"+(this.options.suppressionDecisionBoxLabel||this._getString("suppressionMessage"))+"</label></div>");contentPortion.append(suppressionDiv.append(suppressionDecisionBox)),suppressionDecisionBox.find("#zalert__suppression--box").on("change",function(){var checkedState=$("#zalert__suppression--box").prop("checked"),getItem=window.sessionStorage.getItem("suppressAlertId"),wrapperId=base.wrapper.attr("id");checkedState?(checkedState="true",wrapperId&&(checkedState=null!=getItem?getItem+","+wrapperId:","+wrapperId)):(checkedState=null,wrapperId&&(checkedState=null!==getItem?getItem.replace(","+wrapperId,""):void 0)),window.sessionStorage.setItem("suppressAlertId",checkedState)})}this.wrapper.append(contentPortion)},_clickHandler:function(event){var base=this,targetBtn=$(event.target).closest(".zbutton"),targetBtnData=targetBtn.data("metadata"),args={button:targetBtn,properties:targetBtnData,buttonOptions:targetBtnData};targetBtnData.action&&"string"!=typeof targetBtnData.action?targetBtnData.action(event,args):base.close(event,args),event.stopPropagation(),event.preventDefault()},_createFooter:function(){for(var buttonPanel=$("<div/>").attr({"class":"zdialog__footer "+this._ALIGNMENTS[this.options.buttonsAlignment],tabIndex:-1}),buttons=this._getButtonPanelElements(),base=this,i=0;i<buttons.length;i++){var buttonElement=$("<button>");buttons[i].customAttributes&&buttonElement.attr(buttons[i].customAttributes),buttons[i].id&&buttonElement.attr("id",buttons[i].id),buttons[i].name&&buttonElement.attr("name",buttons[i].name),buttons[i].type&&(buttonElement[0].type=buttons[i].type),buttonElement.data("metadata",buttons[i]).addClass("primary"===buttons[i].appearance?"zbutton zbutton--primary":"zbutton").append($("<span/>").attr("class","zbutton__text").text(buttons[i].text)).attr("data-text",buttons[i].text.toLowerCase()),"CANCEL"===buttons[i].action&&buttonElement.addClass("h--clickonescape"),buttonElement.on("click."+this.widgetName,base._clickHandler.bind(this)),buttonPanel.append(buttonElement),ZC._handleFocus(buttonElement)}if(this.options.helpButton){var helpButton=$("<button class='zbutton zbutton--help' type='button' title='"+(this.options.helpButtonLabel||this._getString("help"))+"'></button>"),base=this,iconEle=$("<i class='zdialog__icon'></i>"),svgData={props:{"class":"zdialog__svg grayscale",viewBox:"0 0 48 48",width:"100%",height:"100%"},nodes:[{g:{nodes:[{path:{d:"M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24C48,10.8,37.3,0,24,0z M24,44.1c-11,0-20-9-20-20s9-20,20-20s20,9,20,20C44,35.2,35,44.1,24,44.1z"}},{g:{nodes:[{path:{d:"M22.8,31.9c-1.7,0-2.6,0.9-2.6,2.7c0,0.9,0.2,1.5,0.7,2c0.4,0.5,1.1,0.7,1.9,0.7c0.8,0,1.5-0.2,1.9-0.7c0.5-0.5,0.7-1.1,0.7-2c0-0.8-0.2-1.5-0.7-2C24.3,32.2,23.6,31.9,22.8,31.9z"}},{path:{d:"M29.3,12.4c-1.3-1.1-3.2-1.7-5.5-1.7s-4.4,0.5-6.5,1.4c-1.1,0.5-0.6,1.7-0.6,1.7l0.5,1c0,0,0.5,0.9,1.7,0.5l0,0c0.5-0.2,1-0.4,1.5-0.6c0.9-0.3,2-0.5,3.1-0.5c1.2,0,2.2,0.3,2.8,0.8c0.7,0.5,1,1.3,1,2.3c0,0.8-0.2,1.6-0.6,2.2c-0.4,0.6-1.3,1.5-2.7,2.6c-1.2,0.9-2,1.8-2.5,2.7c-0.5,0.9-0.7,1.9-0.7,3.2c0,0.9,1.1,1.1,1.1,1.1h0.7c0,0,1.4,0,1.6-1.2l0,0c0-0.8,0.2-1.4,0.5-1.8c0.4-0.6,1.1-1.3,2.2-2.1c1.3-1,2.2-1.8,2.7-2.4s0.9-1.3,1.2-2s0.4-1.5,0.4-2.3C31.4,15.1,30.7,13.5,29.3,12.4z"}}]}}]}}]};ZC._handleIcon(iconEle,svgData,"help",this.options.helpIconClassName,this.options.helpSVGIconId),helpButton.append(iconEle),this.options.helpButton.customAttributes&&helpButton.attr(this.options.helpButton.customAttributes),helpButton.on("click",function(){base.options.helpButton.action&&base.options.helpButton.action()}),buttonPanel.prepend(helpButton)}this.wrapper.append(buttonPanel)},_createCommandBar:function(buttonPane){var layout=this.options.commandBar,commandBar=$("<div class='zalertdialog__commandbar zalertdialog__footer' ></div>");if(layout.leftColumn){var leftColumn=$("<div class='zalertdialog__commandbaractionsleft'></div>"),leftButtonNames=layout.leftColumn.commands;layout.leftColumn.className&&leftColumn.addClass(layout.leftColumn.className);for(var i=0;i<leftButtonNames.length;i++)leftColumn.append(buttonPane.find(".zbutton[name="+leftButtonNames[i]+"]"));commandBar.append(leftColumn)}if(layout.centerColumn){var centerColumn=$("<div class='zalertdialog__commandbaractionscenter'></div>"),middleButtonNames=layout.centerColumn.commands;layout.centerColumn.className&&centerColumn.addClass(layout.centerColumn.className);for(var i=0;i<middleButtonNames.length;i++)centerColumn.append(buttonPane.find(".zbutton[name="+middleButtonNames[i]+"]"));commandBar.append(centerColumn)}if(layout.rightColumn){var rightColumn=$("<div class='zalertdialog__commandbaractionsright'></div>"),rightButtonNames=layout.rightColumn.commands;layout.rightColumn.className&&rightColumn.addClass(layout.rightColumn.className);for(var i=0;i<rightButtonNames.length;i++)rightColumn.append(buttonPane.find(".zbutton[name="+rightButtonNames[i]+"]"));commandBar.append(rightColumn)}return this.wrapper.find(".zdialog__footer").remove(),this.wrapper.append(commandBar),commandBar},_getString:function(label){return ZC.getI18NText("zalertdialog",label,this.options.labels,[])},_getButtonPanelElements:function(){var buttons={CANCEL:{actionType:"CANCEL",id:"zc-zdialog-cancel",text:this.options.cancelButtonLabel||this._getString("cancel"),action:"CANCEL",name:"cancel",isCancel:!0},OK:{actionType:"OK",id:"zc-zdialog-ok",text:this.options.OKButtonLabel||this._getString("ok"),appearance:"primary",name:"ok"},NO:{actionType:"NO",id:"zc-zdialog-no",text:this.options.noButtonLabel||this._getString("no"),action:"CANCEL",isCancel:!0,name:"no"},YES:{actionType:"YES",id:"zc-zdialog-yes",text:this.options.yesButtonLabel||this._getString("yes"),appearance:"primary",name:"yes"}},buttonFormats={mac:{CANCEL:buttons.CANCEL,OK:buttons.OK,NO:buttons.NO,YES:buttons.YES},windows:{OK:buttons.OK,CANCEL:buttons.CANCEL,YES:buttons.YES,NO:buttons.NO}},options=this.options,buttonsOrder=this.options.buttonsOrder;switch(buttonsOrder||(buttonsOrder=ZC.Browser.isWindows()?"windows":"mac"),buttons=buttonFormats[buttonsOrder],options.type){case"custom":case"confirm":if(!this.options.buttons)return[buttons.CANCEL,buttons.OK];default:if("string"==typeof options.buttons){var newArray=[],i=0,splitArr=options.buttons.split("-");return $.each(buttons,function(key){-1!==splitArr.indexOf(key.toLowerCase())&&(newArray[i]=buttons[key],i++)}),newArray}return"object"==typeof options.buttons?options.buttons:[buttons.OK]}},_getIcon:function(iconEle){if(this.options.icon||this.options.iconClassName||this.options.SVGIconId)return ZC._handleIcon(iconEle,void 0,void 0,this.options.iconClassName,this.options.SVGIconId,this.options.icon);var svgData={props:{viewBox:"0 0 48 48",width:"100%",height:"100%"}},type=this.options.type;if("success"===type)svgData.props["class"]="zdialog__svg successcolor",svgData.nodes=[{g:{nodes:[{path:{d:"M41.2,7.2C31.9-2.3,16.7-2.5,7.3,6.8c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.7,41.2,7.2z M37.9,38.2c-7.9,7.7-20.5,7.6-28.2-0.3S2.1,17.4,10,9.7S30.5,2.1,38.2,10C45.9,17.8,45.8,30.5,37.9,38.2z"}},{path:{d:"M36,19.3L23.1,32.2c-1.1,1.1-2.9,1.1-4,0l-1-1l-4.5-4.6c-0.2-0.2-1-1.1-0.1-2l1.1-1.1c0.8-0.8,1.6-0.3,1.9,0l4.6,4.7l12-11.8c0.2-0.2,1.1-1,2-0.1l1.1,1.1C36.8,18.2,36.3,18.9,36,19.3z"}}]}}];else if("info"===type)svgData.props["class"]="zdialog__svg infocolor",svgData.nodes=[{g:{nodes:[{g:{nodes:[{path:{d:"M23.9,17.4c1.5,0,2.5-1.1,2.4-2.3c0-1.3-0.9-2.4-2.3-2.4s-2.4,1.1-2.4,2.4C21.6,16.3,22.6,17.4,23.9,17.4z"}},{path:{d:"M26.2,35.5V21.8c0-1.2-1.4-1.3-1.8-1.3h-0.7c0,0-1.7,0-1.7,1.1v14.3c0,0.3,0.2,0.9,1.3,0.9h1.6C25.3,36.7,26.2,36.5,26.2,35.5z"}}]}},{path:{d:"M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24S37.3,0,24,0z M24,44C13,44,4,35,4,24S13,4,24,4s20,9,20,20S35,44,24,44z"}}]}}];else if("error"===type)svgData.props["class"]="zdialog__svg errorcolor",svgData.nodes=[{path:{d:"M41.2,7.2C31.9-2.2,16.7-2.5,7.3,6.9c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.8,41.2,7.2z M37.9,38.2C30,46,17.4,45.9,9.7,38S2.1,17.5,10,9.8S30.5,2.1,38.2,10C45.9,17.9,45.8,30.5,37.9,38.2z"}},{path:{d:"M31.7,17.5l-1.1-1.1c-0.8-0.8-1.7-0.1-2,0.1L24,21l-4.6-4.7c-0.3-0.3-1.1-0.8-1.9,0l-1.1,1.1c-0.8,0.8-0.1,1.7,0.1,2L21,24l-4.7,4.6c-0.9,0.9-0.3,1.6-0.1,1.8l1.3,1.3c0.2,0.2,0.9,0.8,1.8-0.1L24,27l4.6,4.7c0.9,0.9,1.6,0.3,1.8,0.1l1.3-1.3c0.2-0.2,0.8-0.9-0.1-1.8L27,24l4.7-4.6C32,19.1,32.5,18.4,31.7,17.5z"}}];else if("warning"===type)svgData.props["class"]="zdialog__svg warningcolor",svgData.nodes=[{g:{nodes:[{path:{d:"M47.3,36.6L27.7,2.5c-0.9-1.4-2.4-2.2-3.9-2.1c-1.6,0-2.9,0.9-3.7,2.2L0.7,36.5c-0.9,1.3-1,3-0.2,4.4c0.8,1.5,2.3,2.4,4,2.4h39c1.6,0,3.1-0.8,3.9-2.2C48.2,39.7,48.2,38,47.3,36.6z M43.9,39.2c-0.1,0.1-0.2,0.2-0.4,0.2h-39c-0.3,0-0.4-0.2-0.5-0.3c-0.1-0.2,0-0.3,0-0.4L23.5,4.6c0,0,0.1-0.2,0.3-0.2c0,0,0,0,0,0c0.1,0,0.3,0,0.4,0.2l19.6,34C44,38.8,44,39,43.9,39.2z"}}]}},{path:{d:"M24.1,28.4L24.1,28.4c-0.8,0-1.3-0.4-1.4-1l-1-10c-0.1-1.1,1-2,2.4-2l0,0c1.4,0,2.5,0.9,2.4,2l-1,10C25.4,27.9,24.9,28.4,24.1,28.4z"}},{circle:{cx:"24",cy:"33.4",r:"2"}}];else{if("confirm"!==type)return!1;svgData.props["class"]="zdialog__svg helpcolor",svgData.nodes=[{g:{nodes:[{path:{d:"M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24C48,10.8,37.3,0,24,0z M24,44.1c-11,0-20-9-20-20s9-20,20-20s20,9,20,20C44,35.2,35,44.1,24,44.1z"}},{g:{nodes:[{path:{d:"M22.8,31.9c-1.7,0-2.6,0.9-2.6,2.7c0,0.9,0.2,1.5,0.7,2c0.4,0.5,1.1,0.7,1.9,0.7c0.8,0,1.5-0.2,1.9-0.7c0.5-0.5,0.7-1.1,0.7-2c0-0.8-0.2-1.5-0.7-2C24.3,32.2,23.6,31.9,22.8,31.9z"}},{path:{d:"M29.3,12.4c-1.3-1.1-3.2-1.7-5.5-1.7s-4.4,0.5-6.5,1.4c-1.1,0.5-0.6,1.7-0.6,1.7l0.5,1c0,0,0.5,0.9,1.7,0.5l0,0c0.5-0.2,1-0.4,1.5-0.6c0.9-0.3,2-0.5,3.1-0.5c1.2,0,2.2,0.3,2.8,0.8c0.7,0.5,1,1.3,1,2.3c0,0.8-0.2,1.6-0.6,2.2c-0.4,0.6-1.3,1.5-2.7,2.6c-1.2,0.9-2,1.8-2.5,2.7c-0.5,0.9-0.7,1.9-0.7,3.2c0,0.9,1.1,1.1,1.1,1.1h0.7c0,0,1.4,0,1.6-1.2l0,0c0-0.8,0.2-1.4,0.5-1.8c0.4-0.6,1.1-1.3,2.2-2.1c1.3-1,2.2-1.8,2.7-2.4s0.9-1.3,1.2-2s0.4-1.5,0.4-2.3C31.4,15.1,30.7,13.5,29.3,12.4z"}}]}}]}}]}return ZC._handleIcon(iconEle,svgData,type,this.options[type+"IconClassName"],this.options[type+"SVGIconId"]),!0},_openWithAnimation:function(){if(this.options.animation&&this.options.animation.open){var base=this,animation=this.options.animation.open,animationClass=animation.className,effect=animation.name,duration=animation.duration?animation.duration:0;animationClass?this.wrapper.show().addClass(animationClass).on(this.ANIMATION_EVENTS,function(){base.wrapper.removeClass(animationClass),base._handleDialogOpen()}):"object"==typeof effect?this.wrapper.show().animate(effect,duration,base._handleDialogOpen):this.wrapper[effect](duration,base._handleDialogOpen.bind(base))}else this.wrapper.show(),this._handleDialogOpen()},_handleDialogOpen:function(){if(this.options.open&&this.options.open({dialog:this.wrapper,options:this.options}),void 0!==this.options.closeTimeout&&""!==this.options.closeTimeout){var base=this;window.setTimeout(function(){base.close({},{})},parseInt(this.options.closeTimeout))}this.wrapper.attr("aria-expanded",!0),window.ZFocusHandler&&ZFocusHandler.init(this.wrapper,this.options.excludeFocus),this._focusActionButton()},_positionDialog:function(){var dialog=this.wrapper;this.options.width&&dialog.outerWidth(this.options.width),this.options.height&&dialog.outerHeight(this.options.height);var elemWidth=dialog.outerWidth(!0)+parseInt(dialog.css("border-left-width"))+parseInt(dialog.css("border-right-width")),elemHeight=dialog.outerHeight(!0)+parseInt(dialog.css("border-bottom-width"))+parseInt(dialog.css("border-top-width")),positionObject=this._calculateGoldenMeanPosition(dialog);"object"==typeof this.options.position&&(this.options.position.left||this.options.position.top)?(positionObject=$.extend({},positionObject,this.options.position),positionObject.left=parseInt(positionObject.left)+window.pageXOffset,positionObject.top=parseInt(positionObject.top)+window.pageYOffset):"string"==typeof this.options.position&&"center"===this.options.position&&(positionObject.top=ZC.windowObject.height/2-elemHeight/2+window.pageYOffset,positionObject.left=ZC.windowObject.width/2-elemWidth/2+window.pageXOffset),dialog.css(positionObject)},_focusActionButton:function(){var buttonSelector=this.options.defaultActionButton;buttonSelector=buttonSelector&&0!==buttonSelector.indexOf("#")?"button[data-text='"+buttonSelector.toLowerCase()+"']":".zbutton--primary";var buttonTobeFocused=this.wrapper.find(buttonSelector);buttonTobeFocused.length||(buttonTobeFocused=this.wrapper.find("button:last")),buttonTobeFocused.focus()},_calculateGoldenMeanPosition:function(dialog){var phi=1.618,windowHeight=document.documentElement.clientHeight,windowWidth=document.documentElement.clientWidth,halfWindow=windowHeight/2,smallerPortion=halfWindow-halfWindow/phi,topPosition=smallerPortion-parseFloat(dialog.height()/2),leftPosition=windowWidth/2-parseFloat(dialog.width()/2);return 0>topPosition&&(topPosition=0),0>leftPosition&&(leftPosition=0),topPosition+=window.pageYOffset,leftPosition+=window.pageXOffset,{top:topPosition,left:leftPosition}},_createOverlay:function(){this._overlay=$("<div class='zdialog--overlay "+this.options.overlayClassName+"' ></div>").attr("tabindex",1),document.body.insertBefore(this._overlay[0],this.wrapper[0]),this._hideBodyScroll(!0),ZC.zIndex+=2,this._overlay.css("z-index",ZC.zIndex-1),this.wrapper.css("z-index",ZC.zIndex),this._overlay.on("keydown."+this.widgetName,function(event){event.stopPropagation(),event.preventDefault()}).on("click."+this.widgetName,function(event){event.stopPropagation()})},_hideBodyScroll:function(hide){$("body")[hide?"addClass":"removeClass"]("h-overflowhidden")},close:function(event,data,callback){data=data||{actionType:"CLOSE",isCancel:!0},this.wrapper&&this.wrapper.is(":visible")?this.options.beforeclose?this.options.beforeclose(data)!==!1&&this._handleClose(event,data,callback):this._handleClose(event,data,callback):callback&&callback.apply(this)},_handleClose:function(event,data,callback){if(this.options.animation){var base=this,animation=this.options.animation.close,animationClass=animation.className,effect=animation.name,duration=animation.duration?animation.duration:0;animationClass?this.wrapper.addClass(animationClass).on(this.ANIMATION_EVENTS,function(){base.wrapper.removeClass(animationClass),base.wrapper.hide(),base._close(event,data,callback)}):"object"==typeof effect?this.wrapper.animate(effect,duration,function(){base._close(event,data,callback)}):this.wrapper[effect](duration,function(){base._close(event,data,callback)})}else this.wrapper.hide(),this._close(event,data,callback)},_close:function(event,data,callback){this.wrapper.remove(),this._overlay&&this._overlay.remove(),$("body").find(".zdialog--overlay").length||this._hideBodyScroll(!1),ZC.zIndex=ZC.zIndex-2,event=event?event:{},data.options=this.options,data.button=$(event.target),data.event=event,this.options.close&&this.options.close(event,data),this._overlay=this.wrapper=void 0,callback&&callback.apply(this)},_bindEvents:function(){var base=this;this.wrapper.on("keydown."+this.widgetName,function(event){if(event.keyCode===ZC.keyCode.ESCAPE){var cancelBtn=base.wrapper.find(".h--clickonescape:first");cancelBtn.length?window.setTimeout(function(){cancelBtn.trigger("click")},150):base.options.closeButton?base.wrapper.find(".zdialog__actiongroup .zbutton").trigger("click"):base.close(event,{ESCAPE_PRESSED:!0})}else if(event.keyCode===ZC.keyCode.ENTER){var buttonElement=base.wrapper.find(base.options.defaultActionButton||".zbutton--primary"),includedList=".zbutton:not(.zbutton--menu), input:not(.ztokenfield):not(.zsuggestfield-element), div.zdialog__header";$(event.target).closest(includedList).length&&buttonElement.length&&!$(event.target).closest(".zdialog__footer").length&&buttonElement.trigger("click")}event.keyCode===ZC.keyCode.TAB&&event.preventDefault()}).on("click."+this.widgetName,function(event){event.stopPropagation()}),this.wrapper.find(".zdialog__header").length&&this.wrapper.find(".zdialog__header").on("mouseup."+this.widgetName,function(){base._focusActionButton()})}},ZC.AlertDialog=ZAlertDialog}(ZComponents);