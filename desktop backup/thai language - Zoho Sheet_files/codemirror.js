(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.CodeMirror=a())}(this,(function(){var eA=navigator.userAgent;var eL=navigator.platform;var cP=/gecko\/\d/i.test(eA);var fu=/MSIE \d/.test(eA);var b4=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(eA);var c3=/Edge\/(\d+)/.exec(eA);var eg=fu||b4||c3;var m=eg&&(fu?document.documentMode||6:+(c3||b4)[1]);var dt=!c3&&/WebKit\//.test(eA);var ej=dt&&/Qt\/\d+\.\d+/.test(eA);var dJ=!c3&&/Chrome\//.test(eA);var eC=/Opera\//.test(eA);var aM=/Apple Computer/.test(navigator.vendor);var dB=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(eA);var gg=/PhantomJS/.test(eA);var fO=!c3&&/AppleWebKit/.test(eA)&&/Mobile\/\w+/.test(eA);var aY=/Android/.test(eA);var eR=fO||aY||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(eA);var cu=fO||/Mac/.test(eL);var gA=/\bCrOS\b/.test(eA);var a1=/win/i.test(eL);var bc=eC&&eA.match(/Version\/(\d*\.\d*)/);if(bc){bc=Number(bc[1])}if(bc&&bc>=15){eC=false;dt=true}var cc=cu&&(ej||eC&&(bc==null||bc<12.11));var hd=cP||(eg&&m>=9);function Y(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var h=function(hp,i){var hq=hp.className;var ho=Y(i).exec(hq);if(ho){var hr=hq.slice(ho.index+ho[0].length);hp.className=hq.slice(0,ho.index)+(hr?ho[1]+hr:"")}};function eB(ho){for(var i=ho.childNodes.length;i>0;--i){ho.removeChild(ho.firstChild)}return ho}function ce(i,ho){return eB(i).appendChild(ho)}function g3(ho,hs,hr,hq){var ht=document.createElement(ho);if(hr){ht.className=hr}if(hq){ht.style.cssText=hq}if(typeof hs=="string"){ht.appendChild(document.createTextNode(hs))}else{if(hs){for(var hp=0;hp<hs.length;++hp){ht.appendChild(hs[hp])}}}return ht}function ha(i,hq,hp,ho){var hr=g3(i,hq,hp,ho);hr.setAttribute("role","presentation");return hr}var cM;if(document.createRange){cM=function(hq,hr,ho,i){var hp=document.createRange();hp.setEnd(i||hq,ho);hp.setStart(hq,hr);return hp}}else{cM=function(hp,hr,i){var ho=document.body.createTextRange();try{ho.moveToElementText(hp.parentNode)}catch(hq){return ho}ho.collapse(true);ho.moveEnd("character",i);ho.moveStart("character",hr);return ho}}function he(i,ho){if(ho.nodeType==3){ho=ho.parentNode}if(i.contains){return i.contains(ho)}do{if(ho.nodeType==11){ho=ho.host}if(ho==i){return true}}while(ho=ho.parentNode)}function ek(){var i;try{i=document.activeElement}catch(ho){i=document.body||null}while(i&&i.shadowRoot&&i.shadowRoot.activeElement){i=i.shadowRoot.activeElement}return i}function gq(ho,i){var hp=ho.className;if(!Y(i).test(hp)){ho.className+=(hp?" ":"")+i}}function gQ(hq,ho){var hp=hq.split(" ");for(var hr=0;hr<hp.length;hr++){if(hp[hr]&&!Y(hp[hr]).test(ho)){ho+=" "+hp[hr]}}return ho}var eh=function(i){i.select()};if(fO){eh=function(i){i.selectionStart=0;i.selectionEnd=i.value.length}}else{if(eg){eh=function(ho){try{ho.select()}catch(i){}}}}function cW(ho){var i=Array.prototype.slice.call(arguments,1);return function(){return ho.apply(null,i)}}function aZ(hp,ho,i){if(!ho){ho={}}for(var hq in hp){if(hp.hasOwnProperty(hq)&&(i!==false||!ho.hasOwnProperty(hq))){ho[hq]=hp[hq]}}return ho}function cd(hr,hp,ht,hu,hq){if(hp==null){hp=hr.search(/[^\s\u00a0]/);if(hp==-1){hp=hr.length}}for(var hs=hu||0,hv=hq||0;;){var ho=hr.indexOf("\t",hs);if(ho<0||ho>=hp){return hv+(hp-hs)}hv+=ho-hs;hv+=ht-(hv%ht);hs=ho+1}}var hn=function(){this.id=null};hn.prototype.set=function(i,ho){clearTimeout(this.id);this.id=setTimeout(ho,i)};function dP(hq,ho){for(var hp=0;hp<hq.length;++hp){if(hq[hp]==ho){return hp}}return -1}var ee=30;var cz={toString:function(){return"CodeMirror.Pass"}};var ah={scroll:false};var R={origin:"*mouse"};var dp={origin:"+move"};function e3(hr,hq,hs){for(var ht=0,hp=0;;){var ho=hr.indexOf("\t",ht);if(ho==-1){ho=hr.length}var i=ho-ht;if(ho==hr.length||hp+i>=hq){return ht+Math.min(i,hq-hp)}hp+=ho-ht;hp+=hs-(hp%hs);ht=ho+1;if(hp>=hq){return ht}}}var bd=[""];function cQ(i){while(bd.length<=i){bd.push(gw(bd)+" ")}return bd[i]}function gw(i){return i[i.length-1]}function cf(hr,hq){var ho=[];for(var hp=0;hp<hr.length;hp++){ho[hp]=hq(hr[hp],hp)}return ho}function cx(hr,ho,hp){var hq=0,i=hp(ho);while(hq<hr.length&&hp(hr[hq])<=i){hq++}hr.splice(hq,0,ho)}function gR(){}function cK(hp,i){var ho;if(Object.create){ho=Object.create(hp)}else{gR.prototype=hp;ho=new gR()}if(i){aZ(i,ho)}return ho}var bp=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function gt(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||bp.test(i))}function c1(i,ho){if(!ho){return gt(i)}if(ho.source.indexOf("\\w")>-1&&gt(i)){return true}return ho.test(i)}function fG(i){for(var ho in i){if(i.hasOwnProperty(ho)&&i[ho]){return false}}return true}var ft=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function gb(i){return i.charCodeAt(0)>=768&&ft.test(i)}function eV(ho,hp,i){while((i<0?hp>0:hp<ho.length)&&gb(ho.charAt(hp))){hp+=i}return hp}function cN(i,hs,hr){var hp=hs>hr?-1:1;for(;;){if(hs==hr){return hs}var hq=(hs+hr)/2,ho=hp<0?Math.ceil(hq):Math.floor(hq);if(ho==hs){return i(ho)?hs:hr}if(i(ho)){hr=ho}else{hs=ho+hp}}}function fr(ho,hq,hp){var hr=this;this.input=hp;hr.scrollbarFiller=g3("div",null,"CodeMirror-scrollbar-filler");hr.scrollbarFiller.setAttribute("cm-not-content","true");hr.gutterFiller=g3("div",null,"CodeMirror-gutter-filler");hr.gutterFiller.setAttribute("cm-not-content","true");hr.lineDiv=ha("div",null,"CodeMirror-code");hr.selectionDiv=g3("div",null,null,"position: relative; z-index: 1");hr.cursorDiv=g3("div",null,"CodeMirror-cursors");hr.measure=g3("div",null,"CodeMirror-measure");hr.lineMeasure=g3("div",null,"CodeMirror-measure");hr.lineSpace=ha("div",[hr.measure,hr.lineMeasure,hr.selectionDiv,hr.cursorDiv,hr.lineDiv],null,"position: relative; outline: none");var i=ha("div",[hr.lineSpace],"CodeMirror-lines");hr.mover=g3("div",[i],null,"position: relative");hr.sizer=g3("div",[hr.mover],"CodeMirror-sizer");hr.sizerWidth=null;hr.heightForcer=g3("div",null,null,"position: absolute; height: "+ee+"px; width: 1px;");hr.gutters=g3("div",null,"CodeMirror-gutters");hr.lineGutter=null;hr.scroller=g3("div",[hr.sizer,hr.heightForcer,hr.gutters],"CodeMirror-scroll");hr.scroller.setAttribute("tabIndex","-1");hr.wrapper=g3("div",[hr.scrollbarFiller,hr.gutterFiller,hr.scroller],"CodeMirror");if(eg&&m<8){hr.gutters.style.zIndex=-1;hr.scroller.style.paddingRight=0}if(!dt&&!(cP&&eR)){hr.scroller.draggable=true}if(ho){if(ho.appendChild){ho.appendChild(hr.wrapper)}else{ho(hr.wrapper)}}hr.viewFrom=hr.viewTo=hq.first;hr.reportedViewFrom=hr.reportedViewTo=hq.first;hr.view=[];hr.renderedView=null;hr.externalMeasured=null;hr.viewOffset=0;hr.lastWrapHeight=hr.lastWrapWidth=0;hr.updateLineNumbers=null;hr.nativeBarWidth=hr.barHeight=hr.barWidth=0;hr.scrollbarsClipped=false;hr.lineNumWidth=hr.lineNumInnerWidth=hr.lineNumChars=null;hr.alignWidgets=false;hr.cachedCharWidth=hr.cachedTextHeight=hr.cachedPaddingH=null;hr.maxLine=null;hr.maxLineLength=0;hr.maxLineChanged=false;hr.wheelDX=hr.wheelDY=hr.wheelStartX=hr.wheelStartY=null;hr.shift=false;hr.selForContextMenu=null;hr.activeTouch=null;hp.init(hr)}function f2(hr,ht){ht-=hr.first;if(ht<0||ht>=hr.size){throw new Error("There is no line "+(ht+hr.first)+" in the document.")}var ho=hr;while(!ho.lines){for(var hp=0;;++hp){var hs=ho.children[hp],hq=hs.chunkSize();if(ht<hq){ho=hs;break}ht-=hq}}return ho.lines[ht]}function g6(hp,hr,i){var ho=[],hq=hr.line;hp.iter(hr.line,i.line+1,function(hs){var ht=hs.text;if(hq==i.line){ht=ht.slice(0,i.ch)}if(hq==hr.line){ht=ht.slice(hr.ch)}ho.push(ht);++hq});return ho}function bf(ho,hq,hp){var i=[];ho.iter(hq,hp,function(hr){i.push(hr.text)});return i}function g9(ho,i){var hp=i-ho.height;if(hp){for(var hq=ho;hq;hq=hq.parent){hq.height+=hp}}}function b8(ho){if(ho.parent==null){return null}var hs=ho.parent,hr=dP(hs.lines,ho);for(var hp=hs.parent;hp;hs=hp,hp=hp.parent){for(var hq=0;;++hq){if(hp.children[hq]==hs){break}hr+=hp.children[hq].chunkSize()}}return hr+hs.first}function b1(hu,ht){var hr=hu.first;outer:do{for(var hq=0;hq<hu.children.length;++hq){var hp=hu.children[hq],ho=hp.height;if(ht<ho){hu=hp;continue outer}ht-=ho;hr+=hp.chunkSize()}return hr}while(!hu.lines);var hs=0;for(;hs<hu.lines.length;++hs){var hw=hu.lines[hs],hv=hw.height;if(ht<hv){break}ht-=hv}return hr+hs}function cw(ho,i){return i>=ho.first&&i<ho.first+ho.size}function e6(ho,hp){return String(ho.lineNumberFormatter(hp+ho.firstLineNumber))}function ac(i,ho,hp){if(hp===void 0){hp=null}if(!(this instanceof ac)){return new ac(i,ho,hp)}this.line=i;this.ch=ho;this.sticky=hp}function cE(ho,i){return ho.line-i.line||ho.ch-i.ch}function ad(ho,i){return ho.sticky==i.sticky&&cE(ho,i)==0}function cH(i){return ac(i.line,i.ch)}function bR(ho,i){return cE(ho,i)<0?i:ho}function aB(ho,i){return cE(ho,i)<0?ho:i}function dy(i,ho){return Math.max(i.first,Math.min(ho,i.first+i.size-1))}function gB(ho,hp){if(hp.line<ho.first){return ac(ho.first,0)}var i=ho.first+ho.size-1;if(hp.line>i){return ac(i,f2(ho,i).text.length)}return ge(hp,f2(ho,hp.line).text.length)}function ge(hp,ho){var i=hp.ch;if(i==null||i>ho){return ac(hp.line,ho)}else{if(i<0){return ac(hp.line,0)}else{return hp}}}function ez(hq,hr){var ho=[];for(var hp=0;hp<hr.length;hp++){ho[hp]=gB(hq,hr[hp])}return ho}var hi=false;var bk=false;function go(){hi=true}function bQ(){bk=true}function eU(i,hp,ho){this.marker=i;this.from=hp;this.to=ho}function fX(hq,ho){if(hq){for(var hp=0;hp<hq.length;++hp){var hr=hq[hp];if(hr.marker==ho){return hr}}}}function fq(hp,hq){var hr;for(var ho=0;ho<hp.length;++ho){if(hp[ho]!=hq){(hr||(hr=[])).push(hp[ho])}}return hr}function cC(i,ho){i.markedSpans=i.markedSpans?i.markedSpans.concat([ho]):[ho];ho.marker.attachLine(i)}function a3(hp,hq,hu){var hv;if(hp){for(var hs=0;hs<hp.length;++hs){var hw=hp[hs],ht=hw.marker;var ho=hw.from==null||(ht.inclusiveLeft?hw.from<=hq:hw.from<hq);if(ho||hw.from==hq&&ht.type=="bookmark"&&(!hu||!hw.marker.insertLeft)){var hr=hw.to==null||(ht.inclusiveRight?hw.to>=hq:hw.to>hq);(hv||(hv=[])).push(new eU(ht,hw.from,hr?null:hw.to))}}}return hv}function aL(hp,hr,hu){var hv;if(hp){for(var hs=0;hs<hp.length;++hs){var hw=hp[hs],ht=hw.marker;var hq=hw.to==null||(ht.inclusiveRight?hw.to>=hr:hw.to>hr);if(hq||hw.from==hr&&ht.type=="bookmark"&&(!hu||hw.marker.insertLeft)){var ho=hw.from==null||(ht.inclusiveLeft?hw.from<=hr:hw.from<hr);(hv||(hv=[])).push(new eU(ht,ho?null:hw.from-hr,hw.to==null?null:hw.to-hr))}}}return hv}function eW(hJ,hz){if(hz.full){return null}var hq=cw(hJ,hz.from.line)&&f2(hJ,hz.from.line).markedSpans;var hx=cw(hJ,hz.to.line)&&f2(hJ,hz.to.line).markedSpans;if(!hq&&!hx){return null}var hw=hz.from.ch,hE=hz.to.ch,hB=cE(hz.from,hz.to)==0;var hv=a3(hq,hw,hB);var hy=aL(hx,hE,hB);var hC=hz.text.length==1,ht=gw(hz.text).length+(hC?hw:0);if(hv){for(var hH=0;hH<hv.length;++hH){var hG=hv[hH];if(hG.to==null){var hA=fX(hy,hG.marker);if(!hA){hG.to=hw}else{if(hC){hG.to=hA.to==null?null:hA.to+ht}}}}}if(hy){for(var hu=0;hu<hy.length;++hu){var hF=hy[hu];if(hF.to!=null){hF.to+=ht}if(hF.from==null){var hp=fX(hv,hF.marker);if(!hp){hF.from=ht;if(hC){(hv||(hv=[])).push(hF)}}}else{hF.from+=ht;if(hC){(hv||(hv=[])).push(hF)}}}}if(hv){hv=s(hv)}if(hy&&hy!=hv){hy=s(hy)}var hI=[hv];if(!hC){var hD=hz.text.length-2,ho;if(hD>0&&hv){for(var hs=0;hs<hv.length;++hs){if(hv[hs].to==null){(ho||(ho=[])).push(new eU(hv[hs].marker,null,null))}}}for(var hr=0;hr<hD;++hr){hI.push(ho)}hI.push(hy)}return hI}function s(hp){for(var ho=0;ho<hp.length;++ho){var hq=hp[ho];if(hq.from!=null&&hq.from==hq.to&&hq.marker.clearWhenEmpty!==false){hp.splice(ho--,1)}}if(!hp.length){return null}return hp}function da(hA,hy,hz){var hs=null;hA.iter(hy.line,hz.line+1,function(hB){if(hB.markedSpans){for(var hC=0;hC<hB.markedSpans.length;++hC){var hD=hB.markedSpans[hC].marker;if(hD.readOnly&&(!hs||dP(hs,hD)==-1)){(hs||(hs=[])).push(hD)}}}});if(!hs){return null}var ht=[{from:hy,to:hz}];for(var hu=0;hu<hs.length;++hu){var hv=hs[hu],hq=hv.find(0);for(var hr=0;hr<ht.length;++hr){var hp=ht[hr];if(cE(hp.to,hq.from)<0||cE(hp.from,hq.to)>0){continue}var hx=[hr,1],ho=cE(hp.from,hq.from),hw=cE(hp.to,hq.to);if(ho<0||!hv.inclusiveLeft&&!ho){hx.push({from:hp.from,to:hq.from})}if(hw>0||!hv.inclusiveRight&&!hw){hx.push({from:hq.to,to:hp.to})}ht.splice.apply(ht,hx);hr+=hx.length-3}}return ht}function hc(ho){var hq=ho.markedSpans;if(!hq){return}for(var hp=0;hp<hq.length;++hp){hq[hp].marker.detachLine(ho)}ho.markedSpans=null}function dw(ho,hq){if(!hq){return}for(var hp=0;hp<hq.length;++hp){hq[hp].marker.attachLine(ho)}ho.markedSpans=hq}function w(i){return i.inclusiveLeft?-1:0}function ci(i){return i.inclusiveRight?1:0}function eo(hq,ho){var hs=hq.lines.length-ho.lines.length;if(hs!=0){return hs}var hp=hq.find(),ht=ho.find();var i=cE(hp.from,ht.from)||w(hq)-w(ho);if(i){return -i}var hr=cE(hp.to,ht.to)||ci(hq)-ci(ho);if(hr){return hr}return ho.id-hq.id}function bj(hp,ht){var ho=bk&&hp.markedSpans,hs;if(ho){for(var hr=(void 0),hq=0;hq<ho.length;++hq){hr=ho[hq];if(hr.marker.collapsed&&(ht?hr.from:hr.to)==null&&(!hs||eo(hs,hr.marker)<0)){hs=hr.marker}}}return hs}function fA(i){return bj(i,true)}function fb(i){return bj(i,false)}function A(hw,hq,hu,hv,hs){var hz=f2(hw,hq);var ho=bk&&hz.markedSpans;if(ho){for(var hr=0;hr<ho.length;++hr){var hp=ho[hr];if(!hp.marker.collapsed){continue}var hy=hp.marker.find(0);var hx=cE(hy.from,hu)||w(hp.marker)-w(hs);var ht=cE(hy.to,hv)||ci(hp.marker)-ci(hs);if(hx>=0&&ht<=0||hx<=0&&ht>=0){continue}if(hx<=0&&(hp.marker.inclusiveRight&&hs.inclusiveLeft?cE(hy.to,hu)>=0:cE(hy.to,hu)>0)||hx>=0&&(hp.marker.inclusiveRight&&hs.inclusiveLeft?cE(hy.from,hv)<=0:cE(hy.from,hv)<0)){return true}}}}function z(ho){var i;while(i=fA(ho)){ho=i.find(-1,true).line}return ho}function cJ(ho){var i;while(i=fb(ho)){ho=i.find(1,true).line}return ho}function g(hp){var i,ho;while(i=fb(hp)){hp=i.find(1,true).line;(ho||(ho=[])).push(hp)}return ho}function a9(hq,ho){var i=f2(hq,ho),hp=z(i);if(i==hp){return ho}return b8(hp)}function eD(hq,hp){if(hp>hq.lastLine()){return hp}var ho=f2(hq,hp),i;if(!gj(hq,ho)){return hp}while(i=fb(ho)){ho=i.find(1,true).line}return b8(ho)+1}function gj(hs,hp){var ho=bk&&hp.markedSpans;if(ho){for(var hr=(void 0),hq=0;hq<ho.length;++hq){hr=ho[hq];if(!hr.marker.collapsed){continue}if(hr.from==null){return true}if(hr.marker.widgetNode){continue}if(hr.from==0&&hr.marker.inclusiveLeft&&Z(hs,hp,hr)){return true}}}}function Z(ht,hp,hr){if(hr.to==null){var ho=hr.marker.find(1,true);return Z(ht,ho.line,fX(ho.line.markedSpans,hr.marker))}if(hr.marker.inclusiveRight&&hr.to==hp.text.length){return true}for(var hs=(void 0),hq=0;hq<hp.markedSpans.length;++hq){hs=hp.markedSpans[hq];if(hs.marker.collapsed&&!hs.marker.widgetNode&&hs.from==hr.to&&(hs.to==null||hs.to!=hr.from)&&(hs.marker.inclusiveLeft||hr.marker.inclusiveRight)&&Z(ht,hp,hs)){return true}}}function b7(hq){hq=z(hq);var hs=0,hp=hq.parent;for(var hr=0;hr<hp.lines.length;++hr){var ho=hp.lines[hr];if(ho==hq){break}else{hs+=ho.height}}for(var ht=hp.parent;ht;hp=ht,ht=hp.parent){for(var hv=0;hv<ht.children.length;++hv){var hu=ht.children[hv];if(hu==hp){break}else{hs+=hu.height}}}return hs}function eZ(hp){if(hp.height==0){return 0}var ho=hp.text.length,i,hs=hp;while(i=fA(hs)){var hq=i.find(0,true);hs=hq.from.line;ho+=hq.from.ch-hq.to.ch}hs=hp;while(i=fb(hs)){var hr=i.find(0,true);ho-=hs.text.length-hr.from.ch;hs=hr.to.line;ho+=hs.text.length-hr.to.ch}return ho}function f(i){var hp=i.display,ho=i.doc;hp.maxLine=f2(ho,ho.first);hp.maxLineLength=eZ(hp.maxLine);hp.maxLineChanged=true;ho.iter(function(hr){var hq=eZ(hr);if(hq>hp.maxLineLength){hp.maxLineLength=hq;hp.maxLine=hr}})}function eE(ho,hu,ht,hs){if(!ho){return hs(hu,ht,"ltr",0)}var hr=false;for(var hq=0;hq<ho.length;++hq){var hp=ho[hq];if(hp.from<ht&&hp.to>hu||hu==ht&&hp.to==hu){hs(Math.max(hp.from,hu),Math.min(hp.to,ht),hp.level==1?"rtl":"ltr",hq);hr=true}}if(!hr){hs(hu,ht,"ltr")}}var fQ=null;function aS(ho,hq,hs){var hr;fQ=null;for(var hp=0;hp<ho.length;++hp){var ht=ho[hp];if(ht.from<hq&&ht.to>hq){return hp}if(ht.to==hq){if(ht.from!=ht.to&&hs=="before"){hr=hp}else{fQ=hp}}if(ht.from==hq){if(ht.from!=ht.to&&hs!="before"){hr=hp}else{fQ=hp}}}return hr!=null?hr:fQ}var bv=(function(){var ht="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var hr="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function hq(hw){if(hw<=247){return ht.charAt(hw)}else{if(1424<=hw&&hw<=1524){return"R"}else{if(1536<=hw&&hw<=1785){return hr.charAt(hw-1536)}else{if(1774<=hw&&hw<=2220){return"r"}else{if(8192<=hw&&hw<=8203){return"w"}else{if(hw==8204){return"b"}else{return"L"}}}}}}}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var hv=/[stwN]/,hp=/[LRr]/,ho=/[Lb1n]/,hs=/[1n]/;function hu(hy,hx,hw){this.level=hy;this.from=hx;this.to=hw}return function(hT,hz){var hI=hz=="ltr"?"L":"R";if(hT.length==0||hz=="ltr"&&!i.test(hT)){return false}var hC=hT.length,h2=[];for(var h5=0;h5<hC;++h5){h2.push(hq(hT.charCodeAt(h5)))}for(var hQ=0,hP=hI;hQ<hC;++hQ){var h6=h2[hQ];if(h6=="m"){h2[hQ]=hP}else{hP=h6}}for(var hO=0,hy=hI;hO<hC;++hO){var h1=h2[hO];if(h1=="1"&&hy=="r"){h2[hO]="n"}else{if(hp.test(h1)){hy=h1;if(h1=="r"){h2[hO]="R"}}}}for(var hN=1,hx=h2[0];hN<hC-1;++hN){var h0=h2[hN];if(h0=="+"&&hx=="1"&&h2[hN+1]=="1"){h2[hN]="1"}else{if(h0==","&&hx==h2[hN+1]&&(hx=="1"||hx=="n")){h2[hN]=hx}}hx=h0}for(var hM=0;hM<hC;++hM){var hZ=h2[hM];if(hZ==","){h2[hM]="N"}else{if(hZ=="%"){var hB=(void 0);for(hB=hM+1;hB<hC&&h2[hB]=="%";++hB){}var hG=(hM&&h2[hM-1]=="!")||(hB<hC&&h2[hB]=="1")?"1":"N";for(var h4=hM;h4<hB;++h4){h2[h4]=hG}hM=hB-1}}}for(var hL=0,hF=hI;hL<hC;++hL){var hX=h2[hL];if(hF=="L"&&hX=="1"){h2[hL]="L"}else{if(hp.test(hX)){hF=hX}}}for(var hK=0;hK<hC;++hK){if(hv.test(h2[hK])){var hU=(void 0);for(hU=hK+1;hU<hC&&hv.test(h2[hU]);++hU){}var hW=(hK?h2[hK-1]:hI)=="L";var hY=(hU<hC?h2[hU]:hI)=="L";var hS=hW==hY?(hW?"L":"R"):hI;for(var hE=hK;hE<hU;++hE){h2[hE]=hS}hK=hU-1}}var hV=[],h3;for(var hJ=0;hJ<hC;){if(ho.test(h2[hJ])){var hH=hJ;for(++hJ;hJ<hC&&ho.test(h2[hJ]);++hJ){}hV.push(new hu(0,hH,hJ))}else{var hR=hJ,hw=hV.length;for(++hJ;hJ<hC&&h2[hJ]!="L";++hJ){}for(var hD=hR;hD<hJ;){if(hs.test(h2[hD])){if(hR<hD){hV.splice(hw,0,new hu(1,hR,hD))}var hA=hD;for(++hD;hD<hJ&&hs.test(h2[hD]);++hD){}hV.splice(hw,0,new hu(2,hA,hD));hR=hD}else{++hD}}if(hR<hJ){hV.splice(hw,0,new hu(1,hR,hJ))}}}if(hV[0].level==1&&(h3=hT.match(/^\s+/))){hV[0].from=h3[0].length;hV.unshift(new hu(0,0,h3[0].length))}if(gw(hV).level==1&&(h3=hT.match(/\s+$/))){gw(hV).to-=h3[0].length;hV.push(new hu(0,hC-h3[0].length,hC))}return hz=="rtl"?hV.reverse():hV}})();function a(ho,hp){var i=ho.order;if(i==null){i=ho.order=bv(ho.text,hp)}return i}var fT=[];var cj=function(hp,i,ho){if(hp.addEventListener){hp.addEventListener(i,ho,false)}else{if(hp.attachEvent){hp.attachEvent("on"+i,ho)}else{var hq=hp._handlers||(hp._handlers={});hq[i]=(hq[i]||fT).concat(ho)}}};function eX(ho,i){return ho._handlers&&ho._handlers[i]||fT}function eQ(hr,hp,hq){if(hr.removeEventListener){hr.removeEventListener(hp,hq,false)}else{if(hr.detachEvent){hr.detachEvent("on"+hp,hq)}else{var hs=hr._handlers,i=hs&&hs[hp];if(i){var ho=dP(i,hq);if(ho>-1){hs[hp]=i.slice(0,ho).concat(i.slice(ho+1))}}}}}function aO(hs,hr){var ho=eX(hs,hr);if(!ho.length){return}var hp=Array.prototype.slice.call(arguments,2);for(var hq=0;hq<ho.length;++hq){ho[hq].apply(null,hp)}}function a4(i,hp,ho){if(typeof hp=="string"){hp={type:hp,preventDefault:function(){this.defaultPrevented=true}}}aO(i,ho||hp.type,i,hp);return b6(hp)||hp.codemirrorIgnore}function ab(hp){var ho=hp._handlers&&hp._handlers.cursorActivity;if(!ho){return}var hr=hp.curOp.cursorActivityHandlers||(hp.curOp.cursorActivityHandlers=[]);for(var hq=0;hq<ho.length;++hq){if(dP(hr,ho[hq])==-1){hr.push(ho[hq])}}}function f7(ho,i){return eX(ho,i).length>0}function bT(i){i.prototype.on=function(ho,hp){cj(this,ho,hp)};i.prototype.off=function(ho,hp){eQ(this,ho,hp)}}function c7(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}}function dX(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}function b6(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==false}function e4(i){c7(i);dX(i)}function Q(i){return i.target||i.srcElement}function gH(ho){var i=ho.which;if(i==null){if(ho.button&1){i=1}else{if(ho.button&2){i=3}else{if(ho.button&4){i=2}}}}if(cu&&ho.ctrlKey&&i==1){i=3}return i}var fv=function(){if(eg&&m<9){return false}var i=g3("div");return"draggable" in i||"dragDrop" in i}();var gF;function bF(i){if(gF==null){var hp=g3("span","\u200b");ce(i,g3("span",[hp,document.createTextNode("x")]));if(i.firstChild.offsetHeight!=0){gF=hp.offsetWidth<=1&&hp.offsetHeight>2&&!(eg&&m<8)}}var ho=gF?g3("span","\u200b"):g3("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");ho.setAttribute("cm-text","");return ho}var gG;function b9(hq){if(gG!=null){return gG}var i=ce(hq,document.createTextNode("A\u062eA"));var hp=cM(i,0,1).getBoundingClientRect();var ho=cM(i,1,2).getBoundingClientRect();eB(hq);if(!hp||hp.left==hp.right){return false}return gG=(ho.right-hp.right<3)}var gM="\n\nb".split(/\n/).length!=3?function(hs){var ht=0,i=[],hr=hs.length;while(ht<=hr){var hq=hs.indexOf("\n",ht);if(hq==-1){hq=hs.length}var hp=hs.slice(ht,hs.charAt(hq-1)=="\r"?hq-1:hq);var ho=hp.indexOf("\r");if(ho!=-1){i.push(hp.slice(0,ho));ht+=ho+1}else{i.push(hp);ht=hq+1}}return i}:function(i){return i.split(/\r\n?|\n/)};var bL=window.getSelection?function(ho){try{return ho.selectionStart!=ho.selectionEnd}catch(i){return false}}:function(hp){var i;try{i=hp.ownerDocument.selection.createRange()}catch(ho){}if(!i||i.parentElement()!=hp){return false}return i.compareEndPoints("StartToEnd",i)!=0};var dG=(function(){var i=g3("div");if("oncopy" in i){return true}i.setAttribute("oncopy","return;");return typeof i.oncopy=="function"})();var fU=null;function aW(ho){if(fU!=null){return fU}var hp=ce(ho,g3("span","x"));var hq=hp.getBoundingClientRect();var i=cM(hp,0,1).getBoundingClientRect();return fU=Math.abs(hq.left-i.left)>1}var dZ={};var a5={};function e8(i,ho){if(arguments.length>2){ho.dependencies=Array.prototype.slice.call(arguments,2)}dZ[i]=ho}function bE(ho,i){a5[ho]=i}function hf(i){if(typeof i=="string"&&a5.hasOwnProperty(i)){i=a5[i]}else{if(i&&typeof i.name=="string"&&a5.hasOwnProperty(i.name)){var ho=a5[i.name];if(typeof ho=="string"){ho={name:ho}}i=cK(ho,i);i.name=ho.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i)){return hf("application/xml")}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i)){return hf("application/json")}}}}if(typeof i=="string"){return{name:i}}else{return i||{name:"null"}}}function gp(hp,ho){ho=hf(ho);var hr=dZ[ho.name];if(!hr){return gp(hp,"text/plain")}var hs=hr(hp,ho);if(dW.hasOwnProperty(ho.name)){var hq=dW[ho.name];for(var ht in hq){if(!hq.hasOwnProperty(ht)){continue}if(hs.hasOwnProperty(ht)){hs["_"+ht]=hs[ht]}hs[ht]=hq[ht]}}hs.name=ho.name;if(ho.helperType){hs.helperType=ho.helperType}if(ho.modeProps){for(var i in ho.modeProps){hs[i]=ho.modeProps[i]}}return hs}var dW={};function fl(hp,ho){var i=dW.hasOwnProperty(hp)?dW[hp]:(dW[hp]={});aZ(ho,i)}function cq(hq,i){if(i===true){return i}if(hq.copyState){return hq.copyState(i)}var hp={};for(var hr in i){var ho=i[hr];if(ho instanceof Array){ho=ho.concat([])}hp[hr]=ho}return hp}function hb(hp,i){var ho;while(hp.innerMode){ho=hp.innerMode(i);if(!ho||ho.mode==hp){break}i=ho.state;hp=ho.mode}return ho||{mode:hp,state:i}}function cn(hp,ho,i){return hp.startState?hp.startState(ho,i):true}var fF=function(i,hp,ho){this.pos=this.start=0;this.string=i;this.tabSize=hp||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=ho};fF.prototype.eol=function(){return this.pos>=this.string.length};fF.prototype.sol=function(){return this.pos==this.lineStart};fF.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};fF.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};fF.prototype.eat=function(i){var hp=this.string.charAt(this.pos);var ho;if(typeof i=="string"){ho=hp==i}else{ho=hp&&(i.test?i.test(hp):i(hp))}if(ho){++this.pos;return hp}};fF.prototype.eatWhile=function(i){var ho=this.pos;while(this.eat(i)){}return this.pos>ho};fF.prototype.eatSpace=function(){var ho=this;var i=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++ho.pos}return this.pos>i};fF.prototype.skipToEnd=function(){this.pos=this.string.length};fF.prototype.skipTo=function(i){var ho=this.string.indexOf(i,this.pos);if(ho>-1){this.pos=ho;return true}};fF.prototype.backUp=function(i){this.pos-=i};fF.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=cd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?cd(this.string,this.lineStart,this.tabSize):0)};fF.prototype.indentation=function(){return cd(this.string,null,this.tabSize)-(this.lineStart?cd(this.string,this.lineStart,this.tabSize):0)};fF.prototype.match=function(hr,ho,i){if(typeof hr=="string"){var hs=function(ht){return i?ht.toLowerCase():ht};var hq=this.string.substr(this.pos,hr.length);if(hs(hq)==hs(hr)){if(ho!==false){this.pos+=hr.length}return true}}else{var hp=this.string.slice(this.pos).match(hr);if(hp&&hp.index>0){return null}if(hp&&ho!==false){this.pos+=hp[0].length}return hp}};fF.prototype.current=function(){return this.string.slice(this.start,this.pos)};fF.prototype.hideFirstChars=function(ho,i){this.lineStart+=ho;try{return i()}finally{this.lineStart-=ho}};fF.prototype.lookAhead=function(ho){var i=this.lineOracle;return i&&i.lookAhead(ho)};var aQ=function(ho,i){this.state=ho;this.lookAhead=i};var ag=function(hq,hp,i,ho){this.state=hp;this.doc=hq;this.line=i;this.maxLookAhead=ho||0};ag.prototype.lookAhead=function(ho){var i=this.doc.getLine(this.line+ho);if(i!=null&&ho>this.maxLookAhead){this.maxLookAhead=ho}return i};ag.prototype.nextLine=function(){this.line++;if(this.maxLookAhead>0){this.maxLookAhead--}};ag.fromSaved=function(hp,ho,i){if(ho instanceof aQ){return new ag(hp,cq(hp.mode,ho.state),i,ho.lookAhead)}else{return new ag(hp,cq(hp.mode,ho),i)}};ag.prototype.save=function(ho){var i=ho!==false?cq(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new aQ(i,this.maxLookAhead):i};function gn(ht,hv,ho,hr){var hu=[ht.state.modeGen],hq={};x(ht,hv.text,ht.doc.mode,ho,function(hw,hx){return hu.push(hw,hx)},hq,hr);var i=ho.state;var hs=function(hz){var hx=ht.state.overlays[hz],hy=1,hw=0;ho.state=true;x(ht,hv.text,hx.mode,ho,function(hA,hC){var hE=hy;while(hw<hA){var hB=hu[hy];if(hB>hA){hu.splice(hy,1,hA,hu[hy+1],hB)}hy+=2;hw=Math.min(hA,hB)}if(!hC){return}if(hx.opaque){hu.splice(hE,hy-hE,hA,"overlay "+hC);hy=hE+2}else{for(;hE<hy;hE+=2){var hD=hu[hE+1];hu[hE+1]=(hD?hD+" ":"")+"overlay "+hC}}},hq)};for(var hp=0;hp<ht.state.overlays.length;++hp){hs(hp)}ho.state=i;return{styles:hu,classes:hq.bgClass||hq.textClass?hq:null}}function dC(ho,hq,hs){if(!hq.styles||hq.styles[0]!=ho.state.modeGen){var hr=fJ(ho,b8(hq));var hp=hq.text.length>ho.options.maxHighlightLength&&cq(ho.doc.mode,hr.state);var i=gn(ho,hq,hr);if(hp){hr.state=hp}hq.stateAfter=hr.save(!hp);hq.styles=i.styles;if(i.classes){hq.styleClasses=i.classes}else{if(hq.styleClasses){hq.styleClasses=null}}if(hs===ho.doc.highlightFrontier){ho.doc.modeFrontier=Math.max(ho.doc.modeFrontier,++ho.doc.highlightFrontier)}}return hq.styles}function fJ(i,hu,ho){var hs=i.doc,hr=i.display;if(!hs.mode.startState){return new ag(hs,true,hu)}var ht=cZ(i,hu,ho);var hq=ht>hs.first&&f2(hs,ht-1).stateAfter;var hp=hq?ag.fromSaved(hs,hq,ht):new ag(hs,cn(hs.mode),ht);hs.iter(ht,hu,function(hv){d4(i,hv.text,hp);var hw=hp.line;hv.stateAfter=hw==hu-1||hw%5==0||hw>=hr.viewFrom&&hw<hr.viewTo?hp.save():null;hp.nextLine()});if(ho){hs.modeFrontier=hp.line}return hp}function d4(i,hs,hp,ho){var hr=i.doc.mode;var hq=new fF(hs,i.options.tabSize,hp);hq.start=hq.pos=ho||0;if(hs==""){gc(hr,hp.state)}while(!hq.eol()){fj(hr,hq,hp.state);hq.start=hq.pos}}function gc(hp,ho){if(hp.blankLine){return hp.blankLine(ho)}if(!hp.innerMode){return}var i=hb(hp,ho);if(i.mode.blankLine){return i.mode.blankLine(i.state)}}function fj(ht,hs,hr,ho){for(var hp=0;hp<10;hp++){if(ho){ho[0]=hb(ht,hr).mode}var hq=ht.token(hs,hr);if(hs.pos>hs.start){return hq}}throw new Error("Mode "+ht.name+" failed to advance stream.")}var dF=function(hp,i,ho){this.start=hp.start;this.end=hp.pos;this.string=hp.current();this.type=i||null;this.state=ho};function cR(hv,ht,hq,hp){var hu=hv.doc,hr=hu.mode,i;ht=gB(hu,ht);var hx=f2(hu,ht.line),ho=fJ(hv,ht.line,hq);var hw=new fF(hx.text,hv.options.tabSize,ho),hs;if(hp){hs=[]}while((hp||hw.pos<ht.ch)&&!hw.eol()){hw.start=hw.pos;i=fj(hr,hw,ho.state);if(hp){hs.push(new dF(hw,i,cq(hu.mode,ho.state)))}}return hp?hs:new dF(hw,i,ho.state)}function dQ(hp,ho){if(hp){for(;;){var i=hp.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i){break}hp=hp.slice(0,i.index)+hp.slice(i.index+i[0].length);var hq=i[1]?"bgClass":"textClass";if(ho[hq]==null){ho[hq]=i[2]}else{if(!(new RegExp("(?:^|s)"+i[2]+"(?:$|s)")).test(ho[hq])){ho[hq]+=" "+i[2]}}}}return hp}function x(hx,hz,hs,hp,ht,hq,hr){var ho=hs.flattenSpans;if(ho==null){ho=hx.options.flattenSpans}var hv=0,hu=null;var hy=new fF(hz,hx.options.tabSize,hp),i;var hB=hx.options.addModeClass&&[null];if(hz==""){dQ(gc(hs,hp.state),hq)}while(!hy.eol()){if(hy.pos>hx.options.maxHighlightLength){ho=false;if(hr){d4(hx,hz,hp,hy.pos)}hy.pos=hz.length;i=null}else{i=dQ(fj(hs,hy,hp.state,hB),hq)}if(hB){var hA=hB[0].name;if(hA){i="m-"+(i?hA+" "+i:hA)}}if(!ho||hu!=i){while(hv<hy.start){hv=Math.min(hy.start,hv+5000);ht(hv,hu)}hu=i}hy.start=hy.pos}while(hv<hy.pos){var hw=Math.min(hy.pos,hv+5000);ht(hw,hu);hv=hw}}function cZ(hu,ho,hr){var hp,hs,ht=hu.doc;var hq=hr?-1:ho-(hu.doc.mode.innerMode?1000:100);for(var hx=ho;hx>hq;--hx){if(hx<=ht.first){return ht.first}var hw=f2(ht,hx-1),i=hw.stateAfter;if(i&&(!hr||hx+(i instanceof aQ?i.lookAhead:0)<=ht.modeFrontier)){return hx}var hv=cd(hw.text,null,hu.options.tabSize);if(hs==null||hp>hv){hs=hx-1;hp=hv}}return hs}function hh(hp,hr){hp.modeFrontier=Math.min(hp.modeFrontier,hr);if(hp.highlightFrontier<hr-10){return}var hq=hp.first;for(var i=hr-1;i>hq;i--){var ho=f2(hp,i).stateAfter;if(ho&&(!(ho instanceof aQ)||i+ho.lookAhead<hr)){hq=i+1;break}}hp.highlightFrontier=Math.min(hp.highlightFrontier,hq)}var g8=function(hp,ho,i){this.text=hp;dw(this,ho);this.height=i?i(this):1};g8.prototype.lineNo=function(){return b8(this)};bT(g8);function e0(ho,hr,hp,i){ho.text=hr;if(ho.stateAfter){ho.stateAfter=null}if(ho.styles){ho.styles=null}if(ho.order!=null){ho.order=null}hc(ho);dw(ho,hp);var hq=i?i(ho):1;if(hq!=ho.height){g9(ho,hq)}}function bV(i){i.parent=null;hc(i)}var eu={};var cp={};function fI(hp,ho){if(!hp||/^\s*$/.test(hp)){return null}var i=ho.addModeClass?cp:eu;return i[hp]||(i[hp]=hp.replace(/\S+/g,"cm-$&"))}function fD(hu,ht){var hs=ha("span",null,null,dt?"padding-right: .1px":null);var hr={pre:ha("pre",[hs],"CodeMirror-line"),content:hs,col:0,pos:0,cm:hu,trailingSpace:false,splitSpaces:(eg||dt)&&hu.getOption("lineWrapping")};ht.measure={};for(var hq=0;hq<=(ht.rest?ht.rest.length:0);hq++){var hw=hq?ht.rest[hq-1]:ht.line,hp=(void 0);hr.pos=0;hr.addToken=u;if(b9(hu.display.measure)&&(hp=a(hw,hu.doc.direction))){hr.addToken=aa(hr.addToken,hp)}hr.map=[];var ho=ht!=hu.display.externalMeasured&&b8(hw);bG(hw,hr,dC(hu,hw,ho));if(hw.styleClasses){if(hw.styleClasses.bgClass){hr.bgClass=gQ(hw.styleClasses.bgClass,hr.bgClass||"")}if(hw.styleClasses.textClass){hr.textClass=gQ(hw.styleClasses.textClass,hr.textClass||"")}}if(hr.map.length==0){hr.map.push(0,0,hr.content.appendChild(bF(hu.display.measure)))}if(hq==0){ht.measure.map=hr.map;ht.measure.cache={}}else{(ht.measure.maps||(ht.measure.maps=[])).push(hr.map);(ht.measure.caches||(ht.measure.caches=[])).push({})}}if(dt){var hv=hr.content.lastChild;if(/\bcm-tab\b/.test(hv.className)||(hv.querySelector&&hv.querySelector(".cm-tab"))){hr.content.className="cm-tab-wrap-hack"}}aO(hu,"renderLine",hu,ht.line,hr.pre);if(hr.pre.className){hr.textClass=gQ(hr.pre.className,hr.textClass||"")}return hr}function f1(ho){var i=g3("span","\u2022","cm-invalidchar");i.title="\\u"+ho.charCodeAt(0).toString(16);i.setAttribute("aria-label",i.title);return i}function u(hy,ht,hD,hA,hw,hG,hs){if(!ht){return}var hC=hy.splitSpaces?c6(ht,hy.trailingSpace):ht;var i=hy.cm.state.specialChars,ho=false;var hB;if(!i.test(ht)){hy.col+=ht.length;hB=document.createTextNode(hC);hy.map.push(hy.pos,hy.pos+ht.length,hB);if(eg&&m<9){ho=true}hy.pos+=ht.length}else{hB=document.createDocumentFragment();var hq=0;while(true){i.lastIndex=hq;var hz=i.exec(ht);var hF=hz?hz.index-hq:ht.length-hq;if(hF){var hv=document.createTextNode(hC.slice(hq,hq+hF));if(eg&&m<9){hB.appendChild(g3("span",[hv]))}else{hB.appendChild(hv)}hy.map.push(hy.pos,hy.pos+hF,hv);hy.col+=hF;hy.pos+=hF}if(!hz){break}hq+=hF+1;var hE=(void 0);if(hz[0]=="\t"){var hx=hy.cm.options.tabSize,hu=hx-hy.col%hx;hE=hB.appendChild(g3("span",cQ(hu),"cm-tab"));hE.setAttribute("role","presentation");hE.setAttribute("cm-text","\t");hy.col+=hu}else{if(hz[0]=="\r"||hz[0]=="\n"){hE=hB.appendChild(g3("span",hz[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));hE.setAttribute("cm-text",hz[0]);hy.col+=1}else{hE=hy.cm.options.specialCharPlaceholder(hz[0]);hE.setAttribute("cm-text",hz[0]);if(eg&&m<9){hB.appendChild(g3("span",[hE]))}else{hB.appendChild(hE)}hy.col+=1}}hy.map.push(hy.pos,hy.pos+1,hE);hy.pos++}}hy.trailingSpace=hC.charCodeAt(ht.length-1)==32;if(hD||hA||hw||ho||hs){var hp=hD||"";if(hA){hp+=hA}if(hw){hp+=hw}var hr=g3("span",[hB],hp,hs);if(hG){hr.title=hG}return hy.content.appendChild(hr)}hy.content.appendChild(hB)}function c6(ht,hs){if(ht.length>1&&!/  /.test(ht)){return ht}var hp=hs,ho="";for(var hq=0;hq<ht.length;hq++){var hr=ht.charAt(hq);if(hr==" "&&hp&&(hq==ht.length-1||ht.charCodeAt(hq+1)==32)){hr="\u00a0"}ho+=hr;hp=hr==" "}return ho}function aa(ho,i){return function(hw,hy,hp,ht,hz,hx,hv){hp=hp?hp+" cm-force-border":"cm-force-border";var hq=hw.pos,hs=hq+hy.length;for(;;){var hr=(void 0);for(var hu=0;hu<i.length;hu++){hr=i[hu];if(hr.to>hq&&hr.from<=hq){break}}if(hr.to>=hs){return ho(hw,hy,hp,ht,hz,hx,hv)}ho(hw,hy.slice(0,hr.to-hq),hp,ht,null,hx,hv);ht=null;hy=hy.slice(hr.to-hq);hq=hr.to}}}function al(ho,hq,i,hp){var hr=!hp&&i.widgetNode;if(hr){ho.map.push(ho.pos,ho.pos+hq,hr)}if(!hp&&ho.cm.display.input.needsContentAttribute){if(!hr){hr=ho.content.appendChild(document.createElement("span"))}hr.setAttribute("cm-marker",i.id)}if(hr){ho.cm.display.input.setUneditable(hr);ho.content.appendChild(hr)}ho.pos+=hq;ho.trailingSpace=false}function bG(hz,hG,hy){var ht=hz.markedSpans,hw=hz.text,hE=0;if(!ht){for(var hu=1;hu<hy.length;hu+=2){hG.addToken(hG,hw.slice(hE,hE=hy[hu]),fI(hy[hu+1],hG.cm.options))}return}var hK=hw.length,hs=0,hJ=1,hC="",hL,hA;var hP=0,ho,hO,hD,hQ,hq;for(;;){if(hP==hs){ho=hO=hD=hQ=hA="";hq=null;hP=Infinity;var hv=[],hx=(void 0);for(var hH=0;hH<ht.length;++hH){var hI=ht[hH],hF=hI.marker;if(hF.type=="bookmark"&&hI.from==hs&&hF.widgetNode){hv.push(hF)}else{if(hI.from<=hs&&(hI.to==null||hI.to>hs||hF.collapsed&&hI.to==hs&&hI.from==hs)){if(hI.to!=null&&hI.to!=hs&&hP>hI.to){hP=hI.to;hO=""}if(hF.className){ho+=" "+hF.className}if(hF.css){hA=(hA?hA+";":"")+hF.css}if(hF.startStyle&&hI.from==hs){hD+=" "+hF.startStyle}if(hF.endStyle&&hI.to==hP){(hx||(hx=[])).push(hF.endStyle,hI.to)}if(hF.title&&!hQ){hQ=hF.title}if(hF.collapsed&&(!hq||eo(hq.marker,hF)<0)){hq=hI}}else{if(hI.from>hs&&hP>hI.from){hP=hI.from}}}}if(hx){for(var hN=0;hN<hx.length;hN+=2){if(hx[hN+1]==hP){hO+=" "+hx[hN]}}}if(!hq||hq.from==hs){for(var hM=0;hM<hv.length;++hM){al(hG,0,hv[hM])}}if(hq&&(hq.from||0)==hs){al(hG,(hq.to==null?hK+1:hq.to)-hs,hq.marker,hq.from==null);if(hq.to==null){return}if(hq.to==hs){hq=false}}}if(hs>=hK){break}var hB=Math.min(hK,hP);while(true){if(hC){var hp=hs+hC.length;if(!hq){var hr=hp>hB?hC.slice(0,hB-hs):hC;hG.addToken(hG,hr,hL?hL+ho:ho,hD,hs+hr.length==hP?hO:"",hQ,hA)}if(hp>=hB){hC=hC.slice(hB-hs);hs=hB;break}hs=hp;hD=""}hC=hw.slice(hE,hE=hy[hJ++]);hL=fI(hy[hJ++],hG.cm.options)}}}function bO(hp,i,ho){this.line=i;this.rest=g(i);this.size=this.rest?b8(gw(this.rest))-ho+1:1;this.node=this.text=null;this.hidden=gj(hp,i)}function fH(i,ht,hs){var hr=[],hp;for(var hq=ht;hq<hs;hq=hp){var ho=new bO(i.doc,f2(i.doc,hq),hq);hp=hq+ho.size;hr.push(ho)}return hr}var bI=null;function fe(i){if(bI){bI.ops.push(i)}else{i.ownsGroup=bI={ops:[i],delayedCallbacks:[]}}}function dm(hr){var hq=hr.delayedCallbacks,hp=0;do{for(;hp<hq.length;hp++){hq[hp].call(null)}for(var ho=0;ho<hr.ops.length;ho++){var hs=hr.ops[ho];if(hs.cursorActivityHandlers){while(hs.cursorActivityCalled<hs.cursorActivityHandlers.length){hs.cursorActivityHandlers[hs.cursorActivityCalled++].call(null,hs.cm)}}}}while(hp<hq.length)}function ck(hp,ho){var i=hp.ownsGroup;if(!i){return}try{dm(i)}finally{bI=null;ho(i)}}var bS=null;function am(hu,hs){var ho=eX(hu,hs);if(!ho.length){return}var hq=Array.prototype.slice.call(arguments,2),ht;if(bI){ht=bI.delayedCallbacks}else{if(bS){ht=bS}else{ht=bS=[];setTimeout(aX,0)}}var hp=function(hv){ht.push(function(){return ho[hv].apply(null,hq)})};for(var hr=0;hr<ho.length;++hr){hp(hr)}}function aX(){var ho=bS;bS=null;for(var hp=0;hp<ho.length;++hp){ho[hp]()}}function aj(i,hp,hr,hs){for(var ho=0;ho<hp.changes.length;ho++){var hq=hp.changes[ho];if(hq=="text"){f8(i,hp)}else{if(hq=="gutter"){dM(i,hp,hr,hs)}else{if(hq=="class"){eb(i,hp)}else{if(hq=="widget"){ax(i,hp,hs)}}}}}hp.changes=null}function gy(i){if(i.node==i.text){i.node=g3("div",null,null,"position: relative");if(i.text.parentNode){i.text.parentNode.replaceChild(i.node,i.text)}i.node.appendChild(i.text);if(eg&&m<8){i.node.style.zIndex=2}}return i.node}function fa(i,hp){var ho=hp.bgClass?hp.bgClass+" "+(hp.line.bgClass||""):hp.line.bgClass;if(ho){ho+=" CodeMirror-linebackground"}if(hp.background){if(ho){hp.background.className=ho}else{hp.background.parentNode.removeChild(hp.background);hp.background=null}}else{if(ho){var hq=gy(hp);hp.background=hq.insertBefore(g3("div",null,ho),hq.firstChild);i.display.input.setUneditable(hp.background)}}}function et(i,ho){var hp=i.display.externalMeasured;if(hp&&hp.line==ho.line){i.display.externalMeasured=null;ho.measure=hp.measure;return hp.built}return fD(i,ho)}function f8(i,hq){var ho=hq.text.className;var hp=et(i,hq);if(hq.text==hq.node){hq.node=hp.pre}hq.text.parentNode.replaceChild(hp.pre,hq.text);hq.text=hp.pre;if(hp.bgClass!=hq.bgClass||hp.textClass!=hq.textClass){hq.bgClass=hp.bgClass;hq.textClass=hp.textClass;eb(i,hq)}else{if(ho){hq.text.className=ho}}}function eb(ho,hp){fa(ho,hp);if(hp.line.wrapClass){gy(hp).className=hp.line.wrapClass}else{if(hp.node!=hp.text){hp.node.className=""}}var i=hp.textClass?hp.textClass+" "+(hp.line.textClass||""):hp.line.textClass;hp.text.className=i||""}function dM(hv,ht,hs,hu){if(ht.gutter){ht.node.removeChild(ht.gutter);ht.gutter=null}if(ht.gutterBackground){ht.node.removeChild(ht.gutterBackground);ht.gutterBackground=null}if(ht.line.gutterClass){var ho=gy(ht);ht.gutterBackground=g3("div",null,"CodeMirror-gutter-background "+ht.line.gutterClass,("left: "+(hv.options.fixedGutter?hu.fixedPos:-hu.gutterTotalWidth)+"px; width: "+(hu.gutterTotalWidth)+"px"));hv.display.input.setUneditable(ht.gutterBackground);ho.insertBefore(ht.gutterBackground,ht.text)}var hq=ht.line.gutterMarkers;if(hv.options.lineNumbers||hq){var hw=gy(ht);var hr=ht.gutter=g3("div",null,"CodeMirror-gutter-wrapper",("left: "+(hv.options.fixedGutter?hu.fixedPos:-hu.gutterTotalWidth)+"px"));hv.display.input.setUneditable(hr);hw.insertBefore(hr,ht.text);if(ht.line.gutterClass){hr.className+=" "+ht.line.gutterClass}if(hv.options.lineNumbers&&(!hq||!hq["CodeMirror-linenumbers"])){ht.lineNumber=hr.appendChild(g3("div",e6(hv.options,hs),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(hu.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(hv.display.lineNumInnerWidth)+"px")))}if(hq){for(var hp=0;hp<hv.options.gutters.length;++hp){var i=hv.options.gutters[hp],hx=hq.hasOwnProperty(i)&&hq[i];if(hx){hr.appendChild(g3("div",[hx],"CodeMirror-gutter-elt",("left: "+(hu.gutterLeft[i])+"px; width: "+(hu.gutterWidth[i])+"px")))}}}}}function ax(i,ho,hr){if(ho.alignable){ho.alignable=null}for(var hq=ho.node.firstChild,hp=(void 0);hq;hq=hp){hp=hq.nextSibling;if(hq.className=="CodeMirror-linewidget"){ho.node.removeChild(hq)}}gf(i,ho,hr)}function aP(i,hp,hq,hr){var ho=et(i,hp);hp.text=hp.node=ho.pre;if(ho.bgClass){hp.bgClass=ho.bgClass}if(ho.textClass){hp.textClass=ho.textClass}eb(i,hp);dM(i,hp,hq,hr);gf(i,hp,hr);return hp.node}function gf(ho,hq,hr){g7(ho,hq.line,hq,hr,true);if(hq.rest){for(var hp=0;hp<hq.rest.length;hp++){g7(ho,hq.rest[hp],hq,hr,false)}}}function g7(hw,hx,ht,hv,hr){if(!hx.widgets){return}var ho=gy(ht);for(var hq=0,hu=hx.widgets;hq<hu.length;++hq){var hs=hu[hq],hp=g3("div",[hs.node],"CodeMirror-linewidget");if(!hs.handleMouseEvents){hp.setAttribute("cm-ignore-events","true")}bZ(hs,hp,ht,hv);hw.display.input.setUneditable(hp);if(hr&&hs.above){ho.insertBefore(hp,ht.gutter||ht.text)}else{ho.appendChild(hp)}am(hs,"redraw")}}function bZ(hq,hp,i,hr){if(hq.noHScroll){(i.alignable||(i.alignable=[])).push(hp);var ho=hr.wrapperWidth;hp.style.left=hr.fixedPos+"px";if(!hq.coverGutter){ho-=hr.gutterTotalWidth;hp.style.paddingLeft=hr.gutterTotalWidth+"px"}hp.style.width=ho+"px"}if(hq.coverGutter){hp.style.zIndex=5;hp.style.position="relative";if(!hq.noHScroll){hp.style.marginLeft=-hr.gutterTotalWidth+"px"}}}function dr(hp){if(hp.height!=null){return hp.height}var i=hp.doc.cm;if(!i){return 0}if(!he(document.body,hp.node)){var ho="position: relative;";if(hp.coverGutter){ho+="margin-left: -"+i.display.gutters.offsetWidth+"px;"}if(hp.noHScroll){ho+="width: "+i.display.wrapper.clientWidth+"px;"}ce(i.display.measure,g3("div",[hp.node],null,ho))}return hp.height=hp.node.parentNode.offsetHeight}function bo(ho,i){for(var hp=Q(i);hp!=ho.wrapper;hp=hp.parentNode){if(!hp||(hp.nodeType==1&&hp.getAttribute("cm-ignore-events")=="true")||(hp.parentNode==ho.sizer&&hp!=ho.mover)){return true}}}function fW(i){return i.lineSpace.offsetTop}function b2(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function fS(hq){if(hq.cachedPaddingH){return hq.cachedPaddingH}var hp=ce(hq.measure,g3("pre","x"));var i=window.getComputedStyle?window.getComputedStyle(hp):hp.currentStyle;var ho={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};if(!isNaN(ho.left)&&!isNaN(ho.right)){hq.cachedPaddingH=ho}return ho}function dl(i){return ee-i.display.nativeBarWidth}function dS(i){return i.display.scroller.clientWidth-dl(i)-i.display.barWidth}function dn(i){return i.display.scroller.clientHeight-dl(i)-i.display.barHeight}function cG(hv,hr,hu){var hq=hv.options.lineWrapping;var hs=hq&&dS(hv);if(!hr.measure.heights||hq&&hr.measure.width!=hs){var ht=hr.measure.heights=[];if(hq){hr.measure.width=hs;var hx=hr.text.firstChild.getClientRects();for(var ho=0;ho<hx.length-1;ho++){var hw=hx[ho],hp=hx[ho+1];if(Math.abs(hw.bottom-hp.bottom)>2){ht.push((hw.bottom+hp.top)/2-hu.top)}}}ht.push(hu.bottom-hu.top)}}function cU(hq,ho,hr){if(hq.line==ho){return{map:hq.measure.map,cache:hq.measure.cache}}for(var hp=0;hp<hq.rest.length;hp++){if(hq.rest[hp]==ho){return{map:hq.measure.maps[hp],cache:hq.measure.caches[hp]}}}for(var hs=0;hs<hq.rest.length;hs++){if(b8(hq.rest[hs])>hr){return{map:hq.measure.maps[hs],cache:hq.measure.caches[hs],before:true}}}}function dv(i,hp){hp=z(hp);var hr=b8(hp);var ho=i.display.externalMeasured=new bO(i.doc,hp,hr);ho.lineN=hr;var hq=ho.built=fD(i,ho);ho.text=hq.pre;ce(i.display.lineMeasure,hq.pre);return ho}function eS(i,ho,hq,hp){return F(i,bi(i,ho),hq,hp)}function fZ(i,hp){if(hp>=i.display.viewFrom&&hp<i.display.viewTo){return i.display.view[dY(i,hp)]}var ho=i.display.externalMeasured;if(ho&&hp>=ho.lineN&&hp<ho.lineN+ho.size){return ho}}function bi(i,hp){var hq=b8(hp);var ho=fZ(i,hq);if(ho&&!ho.text){ho=null}else{if(ho&&ho.changes){aj(i,ho,hq,f0(i));i.curOp.forceUpdate=true}}if(!ho){ho=dv(i,hp)}var hr=cU(ho,hp,hq);return{line:hp,view:ho,rect:null,map:hr.map,cache:hr.cache,before:hr.before,hasHeights:false}}function F(i,ht,hr,ho,hq){if(ht.before){hr=-1}var hp=hr+(ho||""),hs;if(ht.cache.hasOwnProperty(hp)){hs=ht.cache[hp]}else{if(!ht.rect){ht.rect=ht.view.text.getBoundingClientRect()}if(!ht.hasHeights){cG(i,ht.view,ht.rect);ht.hasHeights=true}hs=l(i,ht,hr,ho);if(!hs.bogus){ht.cache[hp]=hs}}return{left:hs.left,right:hs.right,top:hq?hs.rtop:hs.top,bottom:hq?hs.rbottom:hs.bottom}}var fi={left:0,right:0,top:0,bottom:0};function aV(hp,ho,hv){var hr,hq,ht,hw,hs,hx;for(var hu=0;hu<hp.length;hu+=3){hs=hp[hu];hx=hp[hu+1];if(ho<hs){hq=0;ht=1;hw="left"}else{if(ho<hx){hq=ho-hs;ht=hq+1}else{if(hu==hp.length-3||ho==hx&&hp[hu+3]>ho){ht=hx-hs;hq=ht-1;if(ho>=hx){hw="right"}}}}if(hq!=null){hr=hp[hu+2];if(hs==hx&&hv==(hr.insertLeft?"left":"right")){hw=hv}if(hv=="left"&&hq==0){while(hu&&hp[hu-2]==hp[hu-3]&&hp[hu-1].insertLeft){hr=hp[(hu-=3)+2];hw="left"}}if(hv=="right"&&hq==hx-hs){while(hu<hp.length-3&&hp[hu+3]==hp[hu+4]&&!hp[hu+5].insertLeft){hr=hp[(hu+=3)+2];hw="right"}}break}}return{node:hr,start:hq,end:ht,collapse:hw,coverStart:hs,coverEnd:hx}}function fE(hp,ho){var hr=fi;if(ho=="left"){for(var hq=0;hq<hp.length;hq++){if((hr=hp[hq]).left!=hr.right){break}}}else{for(var hs=hp.length-1;hs>=0;hs--){if((hr=hp[hs]).left!=hr.right){break}}}return hr}function l(hw,hG,hz,ht){var hx=aV(hG.map,hz,ht);var hE=hx.node,hs=hx.start,hr=hx.end,ho=hx.collapse;var hp;if(hE.nodeType==3){for(var hu=0;hu<4;hu++){while(hs&&gb(hG.line.text.charAt(hx.coverStart+hs))){--hs}while(hx.coverStart+hr<hx.coverEnd&&gb(hG.line.text.charAt(hx.coverStart+hr))){++hr}if(eg&&m<9&&hs==0&&hr==hx.coverEnd-hx.coverStart){hp=hE.parentNode.getBoundingClientRect()}else{hp=fE(cM(hE,hs,hr).getClientRects(),ht)}if(hp.left||hp.right||hs==0){break}hr=hs;hs=hs-1;ho="right"}if(eg&&m<11){hp=fy(hw.display.measure,hp)}}else{if(hs>0){ho=ht="right"}var hq;if(hw.options.lineWrapping&&(hq=hE.getClientRects()).length>1){hp=hq[ht=="right"?hq.length-1:0]}else{hp=hE.getBoundingClientRect()}}if(eg&&m<9&&!hs&&(!hp||!hp.left&&!hp.right)){var hv=hE.parentNode.getClientRects()[0];if(hv){hp={left:hv.left,right:hv.left+d8(hw.display),top:hv.top,bottom:hv.bottom}}else{hp=fi}}var hC=hp.top-hG.rect.top,hA=hp.bottom-hG.rect.top;var hI=(hC+hA)/2;var hH=hG.view.measure.heights;var hF=0;for(;hF<hH.length-1;hF++){if(hI<hH[hF]){break}}var hD=hF?hH[hF-1]:0,hB=hH[hF];var hy={left:(ho=="right"?hp.right:hp.left)-hG.rect.left,right:(ho=="left"?hp.left:hp.right)-hG.rect.left,top:hD,bottom:hB};if(!hp.left&&!hp.right){hy.bogus=true}if(!hw.options.singleCursorHeightPerLine){hy.rtop=hC;hy.rbottom=hA}return hy}function fy(hp,hq){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aW(hp)){return hq}var ho=screen.logicalXDPI/screen.deviceXDPI;var i=screen.logicalYDPI/screen.deviceYDPI;return{left:hq.left*ho,right:hq.right*ho,top:hq.top*i,bottom:hq.bottom*i}}function aE(hp){if(hp.measure){hp.measure.cache={};hp.measure.heights=null;if(hp.rest){for(var ho=0;ho<hp.rest.length;ho++){hp.measure.caches[ho]={}}}}}function a0(ho){ho.display.externalMeasure=null;eB(ho.display.lineMeasure);for(var hp=0;hp<ho.display.view.length;hp++){aE(ho.display.view[hp])}}function ar(i){a0(i);i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null;if(!i.options.lineWrapping){i.display.maxLineChanged=true}i.display.lineNumChars=null}function cV(){if(dJ&&aY){return -(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft))}return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cT(){if(dJ&&aY){return -(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop))}return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ef(hp){var ho=0;if(hp.widgets){for(var hq=0;hq<hp.widgets.length;++hq){if(hp.widgets[hq].above){ho+=dr(hp.widgets[hq])}}}return ho}function fB(ht,hq,hs,ho,hp){if(!hp){var hu=ef(hq);hs.top+=hu;hs.bottom+=hu}if(ho=="line"){return hs}if(!ho){ho="local"}var hr=b7(hq);if(ho=="local"){hr+=fW(ht.display)}else{hr-=ht.display.viewOffset}if(ho=="page"||ho=="window"){var i=ht.display.lineSpace.getBoundingClientRect();hr+=i.top+(ho=="window"?0:cT());var hv=i.left+(ho=="window"?0:cV());hs.left+=hv;hs.right+=hv}hs.top+=hr;hs.bottom+=hr;return hs}function hj(ho,hr,hp){if(hp=="div"){return hr}var ht=hr.left,hs=hr.top;if(hp=="page"){ht-=cV();hs-=cT()}else{if(hp=="local"||!hp){var hq=ho.display.sizer.getBoundingClientRect();ht+=hq.left;hs+=hq.top}}var i=ho.display.lineSpace.getBoundingClientRect();return{left:ht-i.left,top:hs-i.top}}function dc(i,hr,hq,hp,ho){if(!hp){hp=f2(i.doc,hr.line)}return fB(i,hp,eS(i,hp,hr.ch,ho),hq)}function es(hy,hw,hp,ht,hA,hu){ht=ht||f2(hy.doc,hw.line);if(!hA){hA=bi(hy,ht)}function hr(hD,hC){var hB=F(hy,hA,hD,hC?"right":"left",hu);if(hC){hB.left=hB.right}else{hB.right=hB.left}return fB(hy,ht,hB,hp)}var hs=a(ht,hy.doc.direction),i=hw.ch,hx=hw.sticky;if(i>=ht.text.length){i=ht.text.length;hx="before"}else{if(i<=0){i=0;hx="after"}}if(!hs){return hr(hx=="before"?i-1:i,hx=="before")}function hz(hE,hB,hF){var hC=hs[hB],hD=hC.level==1;return hr(hF?hE-1:hE,hD!=hF)}var ho=aS(hs,i,hx);var hv=fQ;var hq=hz(i,ho,hx=="before");if(hv!=null){hq.other=hz(i,hv,hx!="before")}return hq}function ec(i,hr){var hq=0;hr=gB(i.doc,hr);if(!i.options.lineWrapping){hq=d8(i.display)*hr.ch}var ho=f2(i.doc,hr.line);var hp=b7(ho)+fW(i.display);return{left:hq,right:hq,top:hp,bottom:hp+ho.height}}function g1(i,ho,hq,hp,hs){var hr=ac(i,ho,hq);hr.xRel=hs;if(hp){hr.outside=true}return hr}function gJ(hu,hr,hq){var ht=hu.doc;hq+=hu.display.viewOffset;if(hq<0){return g1(ht.first,0,null,true,-1)}var hp=b1(ht,hq),hv=ht.first+ht.size-1;if(hp>hv){return g1(ht.first+ht.size-1,f2(ht,hv).text.length,null,true,1)}if(hr<0){hr=0}var ho=f2(ht,hp);for(;;){var hw=ds(hu,ho,hp,hr,hq);var hs=fb(ho);var i=hs&&hs.find(0,true);if(hs&&(hw.ch>i.from.ch||hw.ch==i.from.ch&&hw.xRel>0)){hp=b8(ho=i.to.line)}else{return hw}}}function bD(i,hp,hr,hs){hs-=ef(hp);var ho=hp.text.length;var hq=cN(function(ht){return F(i,hr,ht-1).bottom<=hs},ho,0);ho=cN(function(ht){return F(i,hr,ht).top>hs},hq,ho);return{begin:hq,end:ho}}function bB(i,ho,hq,hr){if(!hq){hq=bi(i,ho)}var hp=fB(i,ho,F(i,hq,hr),"line").top;return bD(i,ho,hq,hp)}function aA(ho,i,hq,hp){return ho.bottom<=hq?false:ho.top>hq?true:(hp?ho.left:ho.right)>i}function ds(hq,ho,hu,ht,hs){hs-=b7(ho);var hy=bi(hq,ho);var hH=ef(ho);var hF=0,hp=ho.text.length,hC=true;var hA=a(ho,hq.doc.direction);if(hA){var hz=(hq.options.lineWrapping?gY:gD)(hq,ho,hu,hy,hA,ht,hs);hC=hz.level!=1;hF=hC?hz.from:hz.to-1;hp=hC?hz.to:hz.from-1}var hr=null,hw=null;var hx=cN(function(hI){var hJ=F(hq,hy,hI);hJ.top+=hH;hJ.bottom+=hH;if(!aA(hJ,ht,hs,false)){return false}if(hJ.top<=hs&&hJ.left<=ht){hr=hI;hw=hJ}return true},hF,hp);var i,hG,hE=false;if(hw){var hD=ht-hw.left<hw.right-ht,hv=hD==hC;hx=hr+(hv?0:1);hG=hv?"after":"before";i=hD?hw.left:hw.right}else{if(!hC&&(hx==hp||hx==hF)){hx++}hG=hx==0?"after":hx==ho.text.length?"before":(F(hq,hy,hx-(hC?1:0)).bottom+hH<=hs)==hC?"after":"before";var hB=es(hq,ac(hu,hx,hG),"line",ho,hy);i=hB.left;hE=hs<hB.top||hs>=hB.bottom}hx=eV(ho.text,hx,1);return g1(hu,hx,hG,hE,ht-i)}function gD(hw,hs,hr,hx,hq,hv,hu){var ht=cN(function(hA){var hy=hq[hA],hz=hy.level!=1;return aA(es(hw,ac(hr,hz?hy.to:hy.from,hz?"before":"after"),"line",hs,hx),hv,hu,true)},0,hq.length-1);var hp=hq[ht];if(ht>0){var ho=hp.level!=1;var i=es(hw,ac(hr,ho?hp.from:hp.to,ho?"after":"before"),"line",hs,hx);if(aA(i,hv,hu,true)&&i.top>hu){hp=hq[ht-1]}}return hp}function gY(hB,hw,hz,hE,ht,hA,hy){var hs=bD(hB,hw,hE,hy);var hr=hs.begin;var hu=hs.end;var hq=null,hC=null;for(var hv=0;hv<ht.length;hv++){var ho=ht[hv];if(ho.from>=hu||ho.to<=hr){continue}var hp=ho.level!=1;var hD=F(hB,hE,hp?Math.min(hu,ho.to)-1:Math.max(hr,ho.from)).right;var hx=hD<hA?hA-hD+1000000000:hD-hA;if(!hq||hC>hx){hq=ho;hC=hx}}if(!hq){hq=ht[ht.length-1]}if(hq.from<hr){hq={from:hr,to:hq.to,level:hq.level}}if(hq.to>hu){hq={from:hq.from,to:hu,level:hq.level}}return hq}var aR;function bb(hq){if(hq.cachedTextHeight!=null){return hq.cachedTextHeight}if(aR==null){aR=g3("pre");for(var hp=0;hp<49;++hp){aR.appendChild(document.createTextNode("x"));aR.appendChild(g3("br"))}aR.appendChild(document.createTextNode("x"))}ce(hq.measure,aR);var ho=aR.offsetHeight/50;if(ho>3){hq.cachedTextHeight=ho}eB(hq.measure);return ho||1}function d8(hr){if(hr.cachedCharWidth!=null){return hr.cachedCharWidth}var i=g3("span","xxxxxxxxxx");var hq=g3("pre",[i]);ce(hr.measure,hq);var hp=i.getBoundingClientRect(),ho=(hp.right-hp.left)/10;if(ho>2){hr.cachedCharWidth=ho}return ho||10}function f0(ho){var ht=ho.display,hr={},hq={};var hs=ht.gutters.clientLeft;for(var hu=ht.gutters.firstChild,hp=0;hu;hu=hu.nextSibling,++hp){hr[ho.options.gutters[hp]]=hu.offsetLeft+hu.clientLeft+hs;hq[ho.options.gutters[hp]]=hu.clientWidth}return{fixedPos:ew(ht),gutterTotalWidth:ht.gutters.offsetWidth,gutterLeft:hr,gutterWidth:hq,wrapperWidth:ht.wrapper.clientWidth}}function ew(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function br(i){var hp=bb(i.display),ho=i.options.lineWrapping;var hq=ho&&Math.max(5,i.display.scroller.clientWidth/d8(i.display)-3);return function(hs){if(gj(i.doc,hs)){return 0}var hr=0;if(hs.widgets){for(var ht=0;ht<hs.widgets.length;ht++){if(hs.widgets[ht].height){hr+=hs.widgets[ht].height}}}if(ho){return hr+(Math.ceil(hs.text.length/hq)||1)*hp}else{return hr+hp}}}function af(i){var hp=i.doc,ho=br(i);hp.iter(function(hq){var hr=ho(hq);if(hr!=hq.height){g9(hq,hr)}})}function cO(hw,hr,ho,hp){var hs=hw.display;if(!ho&&Q(hr).getAttribute("cm-not-content")=="true"){return null}var hv,ht,i=hs.lineSpace.getBoundingClientRect();try{hv=hr.clientX-i.left;ht=hr.clientY-i.top}catch(hr){return null}var hu=gJ(hw,hv,ht),hx;if(hp&&hu.xRel==1&&(hx=f2(hw.doc,hu.line).text).length==hu.ch){var hq=cd(hx,hx.length,hw.options.tabSize)-hx.length;hu=ac(hu.line,Math.max(0,Math.round((hv-fS(hw.display).left)/d8(hw.display))-hq))}return hu}function dY(ho,hr){if(hr>=ho.display.viewTo){return null}hr-=ho.display.viewFrom;if(hr<0){return null}var hp=ho.display.view;for(var hq=0;hq<hp.length;hq++){hr-=hp[hq].size;if(hr<0){return hq}}}function bW(i){i.display.input.showSelection(i.display.input.prepareSelection())}function gz(hv,ho){if(ho===void 0){ho=true}var hu=hv.doc,hw={};var ht=hw.cursors=document.createDocumentFragment();var hp=hw.selection=document.createDocumentFragment();for(var hr=0;hr<hu.sel.ranges.length;hr++){if(!ho&&hr==hu.sel.primIndex){continue}var hs=hu.sel.ranges[hr];if(hs.from().line>=hv.display.viewTo||hs.to().line<hv.display.viewFrom){continue}var hq=hs.empty();if(hq||hv.options.showCursorWhenSelecting){C(hv,hs.head,ht)}if(!hq){bX(hv,hs,hp)}}return hw}function C(i,hq,hp){var hs=es(i,hq,"div",null,null,!i.options.singleCursorHeightPerLine);var hr=hp.appendChild(g3("div","\u00a0","CodeMirror-cursor"));hr.style.left=hs.left+"px";hr.style.top=hs.top+"px";hr.style.height=Math.max(0,hs.bottom-hs.top)*i.options.cursorHeight+"px";if(hs.other){var ho=hp.appendChild(g3("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));ho.style.display="";ho.style.left=hs.other.left+"px";ho.style.top=hs.other.top+"px";ho.style.height=(hs.other.bottom-hs.other.top)*0.85+"px"}}function gT(ho,i){return ho.top-i.top||ho.left-i.left}function bX(hr,hx,hs){var hA=hr.display,hE=hr.doc;var i=document.createDocumentFragment();var hw=fS(hr.display),hq=hw.left;var hB=Math.max(hA.sizerWidth,dS(hr)-hA.sizer.offsetLeft)-hw.right;function hy(hI,hH,hG,hF){if(hH<0){hH=0}hH=Math.round(hH);hF=Math.round(hF);i.appendChild(g3("div",null,"CodeMirror-selected",("position: absolute; left: "+hI+"px;\n                             top: "+hH+"px; width: "+(hG==null?hB-hI:hG)+"px;\n                             height: "+(hF-hH)+"px")))}function ho(hN,hG,hM){var hJ=f2(hE,hN);var hK=hJ.text.length;var hF,hI;function hL(hP,hO){return dc(hr,ac(hN,hP),"div",hJ,hO)}var hH=a(hJ,hE.direction);eE(hH,hG||0,hM==null?hK:hM,function(hW,hX,hQ,hR){var hZ=hL(hW,hQ=="ltr"?"left":"right");var hV=hL(hX-1,hQ=="ltr"?"right":"left");if(hQ=="ltr"){var hU=hG==null&&hW==0?hq:hZ.left;var hT=hM==null&&hX==hK?hB:hV.right;if(hV.top-hZ.top<=3){hy(hU,hV.top,hT-hU,hV.bottom)}else{hy(hU,hZ.top,null,hZ.bottom);if(hZ.bottom<hV.top){hy(hq,hZ.bottom,null,hV.top)}hy(hq,hV.top,hV.right,hV.bottom)}}else{if(hW<hX){var hP=hG==null&&hW==0?hB:hZ.right;var hS=hM==null&&hX==hK?hq:hV.left;if(hV.top-hZ.top<=3){hy(hS,hV.top,hP-hS,hV.bottom)}else{var hY=hq;if(hR){var hO=bB(hr,hJ,null,hW).end;hY=hL(hO-(/\s/.test(hJ.text.charAt(hO-1))?2:1),"left").left}hy(hY,hZ.top,hP-hY,hZ.bottom);if(hZ.bottom<hV.top){hy(hq,hZ.bottom,null,hV.top)}var h1=null;if(hR<hH.length-1||true){var h0=bB(hr,hJ,null,hX).begin;h1=hL(h0,"right").right-hS}hy(hS,hV.top,h1,hV.bottom)}}}if(!hF||gT(hZ,hF)<0){hF=hZ}if(gT(hV,hF)<0){hF=hV}if(!hI||gT(hZ,hI)<0){hI=hZ}if(gT(hV,hI)<0){hI=hV}});return{start:hF,end:hI}}var hD=hx.from(),hC=hx.to();if(hD.line==hC.line){ho(hD.line,hD.ch,hC.ch)}else{var hp=f2(hE,hD.line),hu=f2(hE,hC.line);var ht=z(hp)==z(hu);var hv=ho(hD.line,hD.ch,ht?hp.text.length+1:null).end;var hz=ho(hC.line,ht?0:null,hC.ch).start;if(ht){if(hv.top<hz.top-2){hy(hv.right,hv.top,null,hv.bottom);hy(hq,hz.top,hz.left,hz.bottom)}else{hy(hv.right,hv.top,hz.left-hv.right,hv.bottom)}}if(hv.bottom<hz.top){hy(hq,hv.bottom,null,hz.top)}}hs.appendChild(i)}function q(i){if(!i.state.focused){return}var hp=i.display;clearInterval(hp.blinker);var ho=true;hp.cursorDiv.style.visibility="";if(i.options.cursorBlinkRate>0){hp.blinker=setInterval(function(){return hp.cursorDiv.style.visibility=(ho=!ho)?"":"hidden"},i.options.cursorBlinkRate)}else{if(i.options.cursorBlinkRate<0){hp.cursorDiv.style.visibility="hidden"}}}function t(i){if(!i.state.focused){i.display.input.focus();c2(i)}}function at(i){i.state.delayingBlurEvent=true;setTimeout(function(){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false;a8(i)}},100)}function c2(i,ho){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false}if(i.options.readOnly=="nocursor"){return}if(!i.state.focused){aO(i,"focus",i,ho);i.state.focused=true;gq(i.display.wrapper,"CodeMirror-focused");if(!i.curOp&&i.display.selForContextMenu!=i.doc.sel){i.display.input.reset();if(dt){setTimeout(function(){return i.display.input.reset(true)},20)}}i.display.input.receivedFocus()}q(i)}function a8(i,ho){if(i.state.delayingBlurEvent){return}if(i.state.focused){aO(i,"blur",i,ho);i.state.focused=false;h(i.display.wrapper,"CodeMirror-focused")}clearInterval(i.display.blinker);setTimeout(function(){if(!i.state.focused){i.display.shift=false}},150)}function bm(hv){var ht=hv.display;var hp=ht.lineDiv.offsetTop;for(var hq=0;hq<ht.view.length;hq++){var hw=ht.view[hq],hx=(void 0);if(hw.hidden){continue}if(eg&&m<8){var hs=hw.node.offsetTop+hw.node.offsetHeight;hx=hs-hp;hp=hs}else{var hr=hw.node.getBoundingClientRect();hx=hr.bottom-hr.top}var hu=hw.line.height-hx;if(hx<2){hx=bb(ht)}if(hu>0.005||hu<-0.005){g9(hw.line,hx);cy(hw.line);if(hw.rest){for(var ho=0;ho<hw.rest.length;ho++){cy(hw.rest[ho])}}}}}function cy(ho){if(ho.widgets){for(var hp=0;hp<ho.widgets.length;++hp){ho.widgets[hp].height=ho.widgets[hp].node.parentNode.offsetHeight}}}function ct(hq,hu,hp){var hr=hp&&hp.top!=null?Math.max(0,hp.top):hq.scroller.scrollTop;hr=Math.floor(hr-fW(hq));var i=hp&&hp.bottom!=null?hp.bottom:hr+hq.wrapper.clientHeight;var hs=b1(hu,hr),ht=b1(hu,i);if(hp&&hp.ensure){var ho=hp.ensure.from.line,hv=hp.ensure.to.line;if(ho<hs){hs=ho;ht=b1(hu,b7(f2(hu,ho))+hq.wrapper.clientHeight)}else{if(Math.min(hv,hu.lastLine())>=ht){hs=b1(hu,b7(f2(hu,hv))-hq.wrapper.clientHeight);ht=hv}}}return{from:hs,to:Math.max(ht,hs+1)}}function fm(hw){var hu=hw.display,hv=hu.view;if(!hu.alignWidgets&&(!hu.gutters.firstChild||!hw.options.fixedGutter)){return}var hs=ew(hu)-hu.scroller.scrollLeft+hw.doc.scrollLeft;var ho=hu.gutters.offsetWidth,hp=hs+"px";for(var hr=0;hr<hv.length;hr++){if(!hv[hr].hidden){if(hw.options.fixedGutter){if(hv[hr].gutter){hv[hr].gutter.style.left=hp}if(hv[hr].gutterBackground){hv[hr].gutterBackground.style.left=hp}}var ht=hv[hr].alignable;if(ht){for(var hq=0;hq<ht.length;hq++){ht[hq].style.left=hp}}}}if(hw.options.fixedGutter){hu.gutters.style.left=(hs+ho)+"px"}}function eF(i){if(!i.options.lineNumbers){return false}var hs=i.doc,ho=e6(i.options,hs.first+hs.size-1),hr=i.display;if(ho.length!=hr.lineNumChars){var ht=hr.measure.appendChild(g3("div",[g3("div",ho)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var hp=ht.firstChild.offsetWidth,hq=ht.offsetWidth-hp;hr.lineGutter.style.width="";hr.lineNumInnerWidth=Math.max(hp,hr.lineGutter.offsetWidth-hq)+1;hr.lineNumWidth=hr.lineNumInnerWidth+hq;hr.lineNumChars=hr.lineNumInnerWidth?ho.length:-1;hr.lineGutter.style.width=hr.lineNumWidth+"px";dx(i);return true}return false}function eG(ho,hq){if(a4(ho,"scrollCursorIntoView")){return}var hs=ho.display,hp=hs.sizer.getBoundingClientRect(),i=null;if(hq.top+hp.top<0){i=true}else{if(hq.bottom+hp.top>(window.innerHeight||document.documentElement.clientHeight)){i=false}}if(i!=null&&!gg){var hr=g3("div","\u200b",null,("position: absolute;\n                         top: "+(hq.top-hs.viewOffset-fW(ho.display))+"px;\n                         height: "+(hq.bottom-hq.top+dl(ho)+hs.barHeight)+"px;\n                         left: "+(hq.left)+"px; width: "+(Math.max(2,hq.right-hq.left))+"px;"));ho.display.lineSpace.appendChild(hr);hr.scrollIntoView(i);ho.display.lineSpace.removeChild(hr)}}function G(hy,hv,hr,hq){if(hq==null){hq=0}var hw;if(!hy.options.lineWrapping&&hv==hr){hv=hv.ch?ac(hv.line,hv.sticky=="before"?hv.ch-1:hv.ch,"after"):hv;hr=hv.sticky=="before"?ac(hv.line,hv.ch+1,"before"):hv}for(var hs=0;hs<5;hs++){var ht=false;var hx=es(hy,hv);var i=!hr||hr==hv?hx:es(hy,hr);hw={left:Math.min(hx.left,i.left),top:Math.min(hx.top,i.top)-hq,right:Math.max(hx.left,i.left),bottom:Math.max(hx.bottom,i.bottom)+hq};var hp=L(hy,hw);var hu=hy.doc.scrollTop,ho=hy.doc.scrollLeft;if(hp.scrollTop!=null){B(hy,hp.scrollTop);if(Math.abs(hy.doc.scrollTop-hu)>1){ht=true}}if(hp.scrollLeft!=null){bY(hy,hp.scrollLeft);if(Math.abs(hy.doc.scrollLeft-ho)>1){ht=true}}if(!ht){break}}return hw}function H(i,ho){var hp=L(i,ho);if(hp.scrollTop!=null){B(i,hp.scrollTop)}if(hp.scrollLeft!=null){bY(i,hp.scrollLeft)}}function L(hw,hv){var ht=hw.display,hr=bb(hw.display);if(hv.top<0){hv.top=0}var hp=hw.curOp&&hw.curOp.scrollTop!=null?hw.curOp.scrollTop:ht.scroller.scrollTop;var hy=dn(hw),hA={};if(hv.bottom-hv.top>hy){hv.bottom=hv.top+hy}var ho=hw.doc.height+b2(ht);var i=hv.top<hr,hs=hv.bottom>ho-hr;if(hv.top<hp){hA.scrollTop=i?0:hv.top}else{if(hv.bottom>hp+hy){var hu=Math.min(hv.top,(hs?ho:hv.bottom)-hy);if(hu!=hp){hA.scrollTop=hu}}}var hz=hw.curOp&&hw.curOp.scrollLeft!=null?hw.curOp.scrollLeft:ht.scroller.scrollLeft;var hx=dS(hw)-(hw.options.fixedGutter?ht.gutters.offsetWidth:0);var hq=hv.right-hv.left>hx;if(hq){hv.right=hv.left+hx}if(hv.left<10){hA.scrollLeft=0}else{if(hv.left<hz){hA.scrollLeft=Math.max(0,hv.left-(hq?0:10))}else{if(hv.right>hx+hz-3){hA.scrollLeft=hv.right+(hq?0:10)-hx}}}return hA}function c9(i,ho){if(ho==null){return}gs(i);i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+ho}function gv(i){gs(i);var ho=i.getCursor();i.curOp.scrollToPos={from:ho,to:ho,margin:i.options.cursorScrollMargin}}function fw(ho,i,hp){if(i!=null||hp!=null){gs(ho)}if(i!=null){ho.curOp.scrollLeft=i}if(hp!=null){ho.curOp.scrollTop=hp}}function cB(i,ho){gs(i);i.curOp.scrollToPos=ho}function gs(i){var ho=i.curOp.scrollToPos;if(ho){i.curOp.scrollToPos=null;var hq=ec(i,ho.from),hp=ec(i,ho.to);cb(i,hq,hp,ho.margin)}}function cb(i,hr,hq,hp){var ho=L(i,{left:Math.min(hr.left,hq.left),top:Math.min(hr.top,hq.top)-hp,right:Math.max(hr.right,hq.right),bottom:Math.max(hr.bottom,hq.bottom)+hp});fw(i,ho.scrollLeft,ho.scrollTop)}function B(i,ho){if(Math.abs(i.doc.scrollTop-ho)<2){return}if(!cP){er(i,{top:ho})}T(i,ho,true);if(cP){er(i)}eP(i,100)}function T(i,hp,ho){hp=Math.min(i.display.scroller.scrollHeight-i.display.scroller.clientHeight,hp);if(i.display.scroller.scrollTop==hp&&!ho){return}i.doc.scrollTop=hp;i.display.scrollbars.setScrollTop(hp);if(i.display.scroller.scrollTop!=hp){i.display.scroller.scrollTop=hp}}function bY(i,hq,hp,ho){hq=Math.min(hq,i.display.scroller.scrollWidth-i.display.scroller.clientWidth);if((hp?hq==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-hq)<2)&&!ho){return}i.doc.scrollLeft=hq;fm(i);if(i.display.scroller.scrollLeft!=hq){i.display.scroller.scrollLeft=hq}i.display.scrollbars.setScrollLeft(hq)}function d6(i){var hq=i.display,hp=hq.gutters.offsetWidth;var ho=Math.round(i.doc.height+b2(i.display));return{clientHeight:hq.scroller.clientHeight,viewHeight:hq.wrapper.clientHeight,scrollWidth:hq.scroller.scrollWidth,clientWidth:hq.scroller.clientWidth,viewWidth:hq.wrapper.clientWidth,barLeft:i.options.fixedGutter?hp:0,docHeight:ho,scrollHeight:ho+dl(i)+hq.barHeight,nativeBarWidth:hq.nativeBarWidth,gutterWidth:hp}}var dR=function(hp,ho,i){this.cm=i;var hq=this.vert=g3("div",[g3("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var hr=this.horiz=g3("div",[g3("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");hp(hq);hp(hr);cj(hq,"scroll",function(){if(hq.clientHeight){ho(hq.scrollTop,"vertical")}});cj(hr,"scroll",function(){if(hr.clientWidth){ho(hr.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(eg&&m<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};dR.prototype.update=function(hq){var hr=hq.scrollWidth>hq.clientWidth+1;var hp=hq.scrollHeight>hq.clientHeight+1;var hs=hq.nativeBarWidth;if(hp){this.vert.style.display="block";this.vert.style.bottom=hr?hs+"px":"0";var ho=hq.viewHeight-(hr?hs:0);this.vert.firstChild.style.height=Math.max(0,hq.scrollHeight-hq.clientHeight+ho)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(hr){this.horiz.style.display="block";this.horiz.style.right=hp?hs+"px":"0";this.horiz.style.left=hq.barLeft+"px";var i=hq.viewWidth-hq.barLeft-(hp?hs:0);this.horiz.firstChild.style.width=Math.max(0,hq.scrollWidth-hq.clientWidth+i)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&hq.clientHeight>0){if(hs==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:hp?hs:0,bottom:hr?hs:0}};dR.prototype.setScrollLeft=function(i){if(this.horiz.scrollLeft!=i){this.horiz.scrollLeft=i}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}};dR.prototype.setScrollTop=function(i){if(this.vert.scrollTop!=i){this.vert.scrollTop=i}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}};dR.prototype.zeroWidthHack=function(){var i=cu&&!dB?"12px":"18px";this.horiz.style.height=this.vert.style.width=i;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new hn;this.disableVert=new hn};dR.prototype.enableZeroWidthBar=function(hp,i,ho){hp.style.pointerEvents="auto";function hq(){var hs=hp.getBoundingClientRect();var hr=ho=="vert"?document.elementFromPoint(hs.right-1,(hs.top+hs.bottom)/2):document.elementFromPoint((hs.right+hs.left)/2,hs.bottom-1);if(hr!=hp){hp.style.pointerEvents="none"}else{i.set(1000,hq)}}i.set(1000,hq)};dR.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz);i.removeChild(this.vert)};var fR=function(){};fR.prototype.update=function(){return{bottom:0,right:0}};fR.prototype.setScrollLeft=function(){};fR.prototype.setScrollTop=function(){};fR.prototype.clear=function(){};function fL(hq,hs){if(!hs){hs=d6(hq)}var hp=hq.display.barWidth,ho=hq.display.barHeight;a7(hq,hs);for(var hr=0;hr<4&&hp!=hq.display.barWidth||ho!=hq.display.barHeight;hr++){if(hp!=hq.display.barWidth&&hq.options.lineWrapping){bm(hq)}a7(hq,d6(hq));hp=hq.display.barWidth;ho=hq.display.barHeight}}function a7(i,ho){var hq=i.display;var hp=hq.scrollbars.update(ho);hq.sizer.style.paddingRight=(hq.barWidth=hp.right)+"px";hq.sizer.style.paddingBottom=(hq.barHeight=hp.bottom)+"px";hq.heightForcer.style.borderBottom=hp.bottom+"px solid transparent";if(hp.right&&hp.bottom){hq.scrollbarFiller.style.display="block";hq.scrollbarFiller.style.height=hp.bottom+"px";hq.scrollbarFiller.style.width=hp.right+"px"}else{hq.scrollbarFiller.style.display=""}if(hp.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter){hq.gutterFiller.style.display="block";hq.gutterFiller.style.height=hp.bottom+"px";hq.gutterFiller.style.width=ho.gutterWidth+"px"}else{hq.gutterFiller.style.display=""}}var bA={"native":dR,"null":fR};function aN(i){if(i.display.scrollbars){i.display.scrollbars.clear();if(i.display.scrollbars.addClass){h(i.display.wrapper,i.display.scrollbars.addClass)}}i.display.scrollbars=new bA[i.options.scrollbarStyle](function(ho){i.display.wrapper.insertBefore(ho,i.display.scrollbarFiller);cj(ho,"mousedown",function(){if(i.state.focused){setTimeout(function(){return i.display.input.focus()},0)}});ho.setAttribute("cm-not-content","true")},function(hp,ho){if(ho=="horizontal"){bY(i,hp)}else{B(i,hp)}},i);if(i.display.scrollbars.addClass){gq(i.display.wrapper,i.display.scrollbars.addClass)}}var eK=0;function db(i){i.curOp={cm:i,viewChanged:false,startHeight:i.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++eK};fe(i.curOp)}function aw(i){var ho=i.curOp;ck(ho,function(hq){for(var hp=0;hp<hq.ops.length;hp++){hq.ops[hp].cm.curOp=null}de(hq)})}function de(ht){var hp=ht.ops;for(var ho=0;ho<hp.length;ho++){cs(hp[ho])}for(var hu=0;hu<hp.length;hu++){az(hp[hu])}for(var hs=0;hs<hp.length;hs++){co(hp[hs])}for(var hr=0;hr<hp.length;hr++){ay(hp[hr])}for(var hq=0;hq<hp.length;hq++){fN(hp[hq])}}function cs(hp){var i=hp.cm,ho=i.display;N(i);if(hp.updateMaxLine){f(i)}hp.mustUpdate=hp.viewChanged||hp.forceUpdate||hp.scrollTop!=null||hp.scrollToPos&&(hp.scrollToPos.from.line<ho.viewFrom||hp.scrollToPos.to.line>=ho.viewTo)||ho.maxLineChanged&&i.options.lineWrapping;hp.update=hp.mustUpdate&&new aU(i,hp.mustUpdate&&{top:hp.scrollTop,ensure:hp.scrollToPos},hp.forceUpdate)}function az(i){i.updatedDisplay=i.mustUpdate&&E(i.cm,i.update)}function co(hp){var i=hp.cm,ho=i.display;if(hp.updatedDisplay){bm(i)}hp.barMeasure=d6(i);if(ho.maxLineChanged&&!i.options.lineWrapping){hp.adjustWidthTo=eS(i,ho.maxLine,ho.maxLine.text.length).left+3;i.display.sizerWidth=hp.adjustWidthTo;hp.barMeasure.scrollWidth=Math.max(ho.scroller.clientWidth,ho.sizer.offsetLeft+hp.adjustWidthTo+dl(i)+i.display.barWidth);hp.maxScrollLeft=Math.max(0,ho.sizer.offsetLeft+hp.adjustWidthTo-dS(i))}if(hp.updatedDisplay||hp.selectionChanged){hp.preparedSelection=ho.input.prepareSelection()}}function ay(hp){var i=hp.cm;if(hp.adjustWidthTo!=null){i.display.sizer.style.minWidth=hp.adjustWidthTo+"px";if(hp.maxScrollLeft<i.doc.scrollLeft){bY(i,Math.min(i.display.scroller.scrollLeft,hp.maxScrollLeft),true)}i.display.maxLineChanged=false}var ho=hp.focus&&hp.focus==ek();if(hp.preparedSelection){i.display.input.showSelection(hp.preparedSelection,ho)}if(hp.updatedDisplay||hp.startHeight!=i.doc.height){fL(i,hp.barMeasure)}if(hp.updatedDisplay){d5(i,hp.barMeasure)}if(hp.selectionChanged){q(i)}if(i.state.focused&&hp.updateInput){i.display.input.reset(hp.typing)}if(ho){t(hp.cm)}}function fN(hr){var hw=hr.cm,ht=hw.display,hv=hw.doc;if(hr.updatedDisplay){cI(hw,hr.update)}if(ht.wheelStartX!=null&&(hr.scrollTop!=null||hr.scrollLeft!=null||hr.scrollToPos)){ht.wheelStartX=ht.wheelStartY=null}if(hr.scrollTop!=null){T(hw,hr.scrollTop,hr.forceScroll)}if(hr.scrollLeft!=null){bY(hw,hr.scrollLeft,true,true)}if(hr.scrollToPos){var hu=G(hw,gB(hv,hr.scrollToPos.from),gB(hv,hr.scrollToPos.to),hr.scrollToPos.margin);eG(hw,hu)}var hs=hr.maybeHiddenMarkers,ho=hr.maybeUnhiddenMarkers;if(hs){for(var hq=0;hq<hs.length;++hq){if(!hs[hq].lines.length){aO(hs[hq],"hide")}}}if(ho){for(var hp=0;hp<ho.length;++hp){if(ho[hp].lines.length){aO(ho[hp],"unhide")}}}if(ht.wrapper.offsetHeight){hv.scrollTop=hw.display.scroller.scrollTop}if(hr.changeObjs){aO(hw,"changes",hw,hr.changeObjs)}if(hr.update){hr.update.finish()}}function df(i,ho){if(i.curOp){return ho()}db(i);try{return ho()}finally{aw(i)}}function du(i,ho){return function(){if(i.curOp){return ho.apply(i,arguments)}db(i);try{return ho.apply(i,arguments)}finally{aw(i)}}}function dE(i){return function(){if(this.curOp){return i.apply(this,arguments)}db(this);try{return i.apply(this,arguments)}finally{aw(this)}}}function c5(i){return function(){var ho=this.cm;if(!ho||ho.curOp){return i.apply(this,arguments)}db(ho);try{return i.apply(this,arguments)}finally{aw(ho)}}}function ap(hv,ht,hu,hw){if(ht==null){ht=hv.doc.first}if(hu==null){hu=hv.doc.first+hv.doc.size}if(!hw){hw=0}var hq=hv.display;if(hw&&hu<hq.viewTo&&(hq.updateLineNumbers==null||hq.updateLineNumbers>ht)){hq.updateLineNumbers=ht}hv.curOp.viewChanged=true;if(ht>=hq.viewTo){if(bk&&a9(hv.doc,ht)<hq.viewTo){fc(hv)}}else{if(hu<=hq.viewFrom){if(bk&&eD(hv.doc,hu+hw)>hq.viewFrom){fc(hv)}else{hq.viewFrom+=hw;hq.viewTo+=hw}}else{if(ht<=hq.viewFrom&&hu>=hq.viewTo){fc(hv)}else{if(ht<=hq.viewFrom){var hs=dL(hv,hu,hu+hw,1);if(hs){hq.view=hq.view.slice(hs.index);hq.viewFrom=hs.lineN;hq.viewTo+=hw}else{fc(hv)}}else{if(hu>=hq.viewTo){var ho=dL(hv,ht,ht,-1);if(ho){hq.view=hq.view.slice(0,ho.index);hq.viewTo=ho.lineN}else{fc(hv)}}else{var hr=dL(hv,ht,ht,-1);var hp=dL(hv,hu,hu+hw,1);if(hr&&hp){hq.view=hq.view.slice(0,hr.index).concat(fH(hv,hr.lineN,hp.lineN)).concat(hq.view.slice(hp.index));hq.viewTo+=hw}else{fc(hv)}}}}}}var i=hq.externalMeasured;if(i){if(hu<i.lineN){i.lineN+=hw}else{if(ht<i.lineN+i.size){hq.externalMeasured=null}}}}function W(ho,hp,hs){ho.curOp.viewChanged=true;var ht=ho.display,hr=ho.display.externalMeasured;if(hr&&hp>=hr.lineN&&hp<hr.lineN+hr.size){ht.externalMeasured=null}if(hp<ht.viewFrom||hp>=ht.viewTo){return}var hq=ht.view[dY(ho,hp)];if(hq.node==null){return}var i=hq.changes||(hq.changes=[]);if(dP(i,hs)==-1){i.push(hs)}}function fc(i){i.display.viewFrom=i.display.viewTo=i.doc.first;i.display.view=[];i.display.viewOffset=0}function dL(hw,hq,hs,hp){var ht=dY(hw,hq),hv,hu=hw.display.view;if(!bk||hs==hw.doc.first+hw.doc.size){return{index:ht,lineN:hs}}var ho=hw.display.viewFrom;for(var hr=0;hr<ht;hr++){ho+=hu[hr].size}if(ho!=hq){if(hp>0){if(ht==hu.length-1){return null}hv=(ho+hu[ht].size)-hq;ht++}else{hv=ho-hq}hq+=hv;hs+=hv}while(a9(hw.doc,hs)!=hs){if(ht==(hp<0?0:hu.length-1)){return null}hs+=hp*hu[ht-(hp<0?1:0)].size;ht+=hp}return{index:ht,lineN:hs}}function dk(i,hr,hq){var hp=i.display,ho=hp.view;if(ho.length==0||hr>=hp.viewTo||hq<=hp.viewFrom){hp.view=fH(i,hr,hq);hp.viewFrom=hr}else{if(hp.viewFrom>hr){hp.view=fH(i,hr,hp.viewFrom).concat(hp.view)}else{if(hp.viewFrom<hr){hp.view=hp.view.slice(dY(i,hr))}}hp.viewFrom=hr;if(hp.viewTo<hq){hp.view=hp.view.concat(fH(i,hp.viewTo,hq))}else{if(hp.viewTo>hq){hp.view=hp.view.slice(0,dY(i,hq))}}}hp.viewTo=hq}function dI(ho){var hp=ho.display.view,hs=0;for(var hr=0;hr<hp.length;hr++){var hq=hp[hr];if(!hq.hidden&&(!hq.node||hq.changes)){++hs}}return hs}function eP(i,ho){if(i.doc.highlightFrontier<i.display.viewTo){i.state.highlight.set(ho,cW(dj,i))}}function dj(i){var hr=i.doc;if(hr.highlightFrontier>=i.display.viewTo){return}var hp=+new Date+i.options.workTime;var hq=fJ(i,hr.highlightFrontier);var ho=[];hr.iter(hq.line,Math.min(hr.first+hr.size,i.display.viewTo+500),function(ht){if(hq.line>=i.display.viewFrom){var hw=ht.styles;var hs=ht.text.length>i.options.maxHighlightLength?cq(hr.mode,hq.state):null;var hy=gn(i,ht,hq,true);if(hs){hq.state=hs}ht.styles=hy.styles;var hv=ht.styleClasses,hx=hy.classes;if(hx){ht.styleClasses=hx}else{if(hv){ht.styleClasses=null}}var hz=!hw||hw.length!=ht.styles.length||hv!=hx&&(!hv||!hx||hv.bgClass!=hx.bgClass||hv.textClass!=hx.textClass);for(var hu=0;!hz&&hu<hw.length;++hu){hz=hw[hu]!=ht.styles[hu]}if(hz){ho.push(hq.line)}ht.stateAfter=hq.save();hq.nextLine()}else{if(ht.text.length<=i.options.maxHighlightLength){d4(i,ht.text,hq)}ht.stateAfter=hq.line%5==0?hq.save():null;hq.nextLine()}if(+new Date>hp){eP(i,i.options.workDelay);return true}});hr.highlightFrontier=hq.line;hr.modeFrontier=Math.max(hr.modeFrontier,hq.line);if(ho.length){df(i,function(){for(var hs=0;hs<ho.length;hs++){W(i,ho[hs],"text")}})}}var aU=function(ho,i,hp){var hq=ho.display;this.viewport=i;this.visible=ct(hq,ho.doc,i);this.editorIsHidden=!hq.wrapper.offsetWidth;this.wrapperHeight=hq.wrapper.clientHeight;this.wrapperWidth=hq.wrapper.clientWidth;this.oldDisplayWidth=dS(ho);this.force=hp;this.dims=f0(ho);this.events=[]};aU.prototype.signal=function(ho,i){if(f7(ho,i)){this.events.push(arguments)}};aU.prototype.finish=function(){var hp=this;for(var ho=0;ho<this.events.length;ho++){aO.apply(null,hp.events[ho])}};function N(i){var ho=i.display;if(!ho.scrollbarsClipped&&ho.scroller.offsetWidth){ho.nativeBarWidth=ho.scroller.offsetWidth-ho.scroller.clientWidth;ho.heightForcer.style.height=dl(i)+"px";ho.sizer.style.marginBottom=-ho.nativeBarWidth+"px";ho.sizer.style.borderRightWidth=dl(i)+"px";ho.scrollbarsClipped=true}}function bC(ho){if(ho.hasFocus()){return null}var hq=ek();if(!hq||!he(ho.display.lineDiv,hq)){return null}var i={activeElt:hq};if(window.getSelection){var hp=window.getSelection();if(hp.anchorNode&&hp.extend&&he(ho.display.lineDiv,hp.anchorNode)){i.anchorNode=hp.anchorNode;i.anchorOffset=hp.anchorOffset;i.focusNode=hp.focusNode;i.focusOffset=hp.focusOffset}}return i}function j(ho){if(!ho||!ho.activeElt||ho.activeElt==ek()){return}ho.activeElt.focus();if(ho.anchorNode&&he(document.body,ho.anchorNode)&&he(document.body,ho.focusNode)){var hp=window.getSelection(),i=document.createRange();i.setEnd(ho.anchorNode,ho.anchorOffset);i.collapse(false);hp.removeAllRanges();hp.addRange(i);hp.extend(ho.focusNode,ho.focusOffset)}}function E(hw,hq){var hr=hw.display,hv=hw.doc;if(hq.editorIsHidden){fc(hw);return false}if(!hq.force&&hq.visible.from>=hr.viewFrom&&hq.visible.to<=hr.viewTo&&(hr.updateLineNumbers==null||hr.updateLineNumbers>=hr.viewTo)&&hr.renderedView==hr.view&&dI(hw)==0){return false}if(eF(hw)){fc(hw);hq.dims=f0(hw)}var hp=hv.first+hv.size;var ht=Math.max(hq.visible.from-hw.options.viewportMargin,hv.first);var hu=Math.min(hp,hq.visible.to+hw.options.viewportMargin);if(hr.viewFrom<ht&&ht-hr.viewFrom<20){ht=Math.max(hv.first,hr.viewFrom)}if(hr.viewTo>hu&&hr.viewTo-hu<20){hu=Math.min(hp,hr.viewTo)}if(bk){ht=a9(hw.doc,ht);hu=eD(hw.doc,hu)}var ho=ht!=hr.viewFrom||hu!=hr.viewTo||hr.lastWrapHeight!=hq.wrapperHeight||hr.lastWrapWidth!=hq.wrapperWidth;dk(hw,ht,hu);hr.viewOffset=b7(f2(hw.doc,hr.viewFrom));hw.display.mover.style.top=hr.viewOffset+"px";var i=dI(hw);if(!ho&&i==0&&!hq.force&&hr.renderedView==hr.view&&(hr.updateLineNumbers==null||hr.updateLineNumbers>=hr.viewTo)){return false}var hs=bC(hw);if(i>4){hr.lineDiv.style.display="none"}cL(hw,hr.updateLineNumbers,hq.dims);if(i>4){hr.lineDiv.style.display=""}hr.renderedView=hr.view;j(hs);eB(hr.cursorDiv);eB(hr.selectionDiv);hr.gutters.style.height=hr.sizer.style.minHeight=0;if(ho){hr.lastWrapHeight=hq.wrapperHeight;hr.lastWrapWidth=hq.wrapperWidth;eP(hw,400)}hr.updateLineNumbers=null;return true}function cI(ho,hr){var i=hr.viewport;for(var hq=true;;hq=false){if(!hq||!ho.options.lineWrapping||hr.oldDisplayWidth==dS(ho)){if(i&&i.top!=null){i={top:Math.min(ho.doc.height+b2(ho.display)-dn(ho),i.top)}}hr.visible=ct(ho.display,ho.doc,i);if(hr.visible.from>=ho.display.viewFrom&&hr.visible.to<=ho.display.viewTo){break}}if(!E(ho,hr)){break}bm(ho);var hp=d6(ho);bW(ho);fL(ho,hp);d5(ho,hp);hr.force=false}hr.signal(ho,"update",ho);if(ho.display.viewFrom!=ho.display.reportedViewFrom||ho.display.viewTo!=ho.display.reportedViewTo){hr.signal(ho,"viewportChange",ho,ho.display.viewFrom,ho.display.viewTo);ho.display.reportedViewFrom=ho.display.viewFrom;ho.display.reportedViewTo=ho.display.viewTo}}function er(ho,i){var hq=new aU(ho,i);if(E(ho,hq)){bm(ho);cI(ho,hq);var hp=d6(ho);bW(ho);fL(ho,hp);d5(ho,hp);hq.finish()}}function cL(hz,hq,hy){var hv=hz.display,hB=hz.options.lineNumbers;var ho=hv.lineDiv,hA=ho.firstChild;function hu(hC){var i=hC.nextSibling;if(dt&&cu&&hz.display.currentWheelTarget==hC){hC.style.display="none"}else{hC.parentNode.removeChild(hC)}return i}var hw=hv.view,ht=hv.viewFrom;for(var hr=0;hr<hw.length;hr++){var hs=hw[hr];if(hs.hidden){}else{if(!hs.node||hs.node.parentNode!=ho){var hp=aP(hz,hs,ht,hy);ho.insertBefore(hp,hA)}else{while(hA!=hs.node){hA=hu(hA)}var hx=hB&&hq!=null&&hq<=ht&&hs.lineNumber;if(hs.changes){if(dP(hs.changes,"gutter")>-1){hx=false}aj(hz,hs,ht,hy)}if(hx){eB(hs.lineNumber);hs.lineNumber.appendChild(document.createTextNode(e6(hz.options,ht)))}hA=hs.node.nextSibling}}ht+=hs.size}while(hA){hA=hu(hA)}}function dx(i){var ho=i.display.gutters.offsetWidth;i.display.sizer.style.marginLeft=ho+"px"}function d5(i,ho){i.display.sizer.style.minHeight=ho.docHeight+"px";i.display.heightForcer.style.top=ho.docHeight+"px";i.display.gutters.style.height=(ho.docHeight+i.display.barHeight+dl(i))+"px"}function eN(ho){var hp=ho.display.gutters,ht=ho.options.gutters;eB(hp);var hq=0;for(;hq<ht.length;++hq){var hr=ht[hq];var hs=hp.appendChild(g3("div",null,"CodeMirror-gutter "+hr));if(hr=="CodeMirror-linenumbers"){ho.display.lineGutter=hs;hs.style.width=(ho.display.lineNumWidth||1)+"px"}}hp.style.display=hq?"":"none";dx(ho)}function cD(i){var ho=dP(i.gutters,"CodeMirror-linenumbers");if(ho==-1&&i.lineNumbers){i.gutters=i.gutters.concat(["CodeMirror-linenumbers"])}else{if(ho>-1&&!i.lineNumbers){i.gutters=i.gutters.slice(0);i.gutters.splice(ho,1)}}}var f9=0;var cF=null;if(eg){cF=-0.53}else{if(cP){cF=15}else{if(dJ){cF=-0.7}else{if(aM){cF=-1/3}}}}function di(hp){var ho=hp.wheelDeltaX,i=hp.wheelDeltaY;if(ho==null&&hp.detail&&hp.axis==hp.HORIZONTAL_AXIS){ho=hp.detail}if(i==null&&hp.detail&&hp.axis==hp.VERTICAL_AXIS){i=hp.detail}else{if(i==null){i=hp.wheelDelta}}return{x:ho,y:i}}function aJ(i){var ho=di(i);ho.x*=cF;ho.y*=cF;return ho}function c(hy,hs){var hA=di(hs),hC=hA.x,hB=hA.y;var hu=hy.display,hx=hu.scroller;var hr=hx.scrollWidth>hx.clientWidth;var hq=hx.scrollHeight>hx.clientHeight;if(!(hC&&hr||hB&&hq)){return}if(hB&&cu&&dt){outer:for(var hz=hs.target,hw=hu.view;hz!=hx;hz=hz.parentNode){for(var hp=0;hp<hw.length;hp++){if(hw[hp].node==hz){hy.display.currentWheelTarget=hz;break outer}}}}if(hC&&!cP&&!eC&&cF!=null){if(hB&&hq){B(hy,Math.max(0,hx.scrollTop+hB*cF))}bY(hy,Math.max(0,hx.scrollLeft+hC*cF));if(!hB||(hB&&hq)){c7(hs)}hu.wheelStartX=null;return}if(hB&&cF!=null){var ho=hB*cF;var hv=hy.doc.scrollTop,ht=hv+hu.wrapper.clientHeight;if(ho<0){hv=Math.max(0,hv+ho-50)}else{ht=Math.min(hy.doc.height,ht+ho+50)}er(hy,{top:hv,bottom:ht})}if(f9<20){if(hu.wheelStartX==null){hu.wheelStartX=hx.scrollLeft;hu.wheelStartY=hx.scrollTop;hu.wheelDX=hC;hu.wheelDY=hB;setTimeout(function(){if(hu.wheelStartX==null){return}var i=hx.scrollLeft-hu.wheelStartX;var hE=hx.scrollTop-hu.wheelStartY;var hD=(hE&&hu.wheelDY&&hE/hu.wheelDY)||(i&&hu.wheelDX&&i/hu.wheelDX);hu.wheelStartX=hu.wheelStartY=null;if(!hD){return}cF=(cF*f9+hD)/(f9+1);++f9},200)}else{hu.wheelDX+=hC;hu.wheelDY+=hB}}}var g2=function(i,ho){this.ranges=i;this.primIndex=ho};g2.prototype.primary=function(){return this.ranges[this.primIndex]};g2.prototype.equals=function(ho){var hs=this;if(ho==this){return true}if(ho.primIndex!=this.primIndex||ho.ranges.length!=this.ranges.length){return false}for(var hq=0;hq<this.ranges.length;hq++){var hp=hs.ranges[hq],hr=ho.ranges[hq];if(!ad(hp.anchor,hr.anchor)||!ad(hp.head,hr.head)){return false}}return true};g2.prototype.deepCopy=function(){var hq=this;var ho=[];for(var hp=0;hp<this.ranges.length;hp++){ho[hp]=new ev(cH(hq.ranges[hp].anchor),cH(hq.ranges[hp].head))}return new g2(ho,this.primIndex)};g2.prototype.somethingSelected=function(){var hp=this;for(var ho=0;ho<this.ranges.length;ho++){if(!hp.ranges[ho].empty()){return true}}return false};g2.prototype.contains=function(hs,ho){var hr=this;if(!ho){ho=hs}for(var hq=0;hq<this.ranges.length;hq++){var hp=hr.ranges[hq];if(cE(ho,hp.from())>=0&&cE(hs,hp.to())<=0){return hq}}return -1};var ev=function(i,ho){this.anchor=i;this.head=ho};ev.prototype.from=function(){return aB(this.anchor,this.head)};ev.prototype.to=function(){return bR(this.anchor,this.head)};ev.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function cX(ho,hv){var hq=ho[hv];ho.sort(function(hx,i){return cE(hx.from(),i.from())});hv=dP(ho,hq);for(var hs=1;hs<ho.length;hs++){var hw=ho[hs],hp=ho[hs-1];if(cE(hp.to(),hw.from())>=0){var ht=aB(hp.from(),hw.from()),hu=bR(hp.to(),hw.to());var hr=hp.empty()?hw.from()==hw.head:hp.from()==hp.head;if(hs<=hv){--hv}ho.splice(--hs,2,new ev(hr?hu:ht,hr?ht:hu))}}return new g2(ho,hv)}function fC(i,ho){return new g2([new ev(i,ho||i)],0)}function dq(i){if(!i.text){return i.to}return ac(i.from.line+i.text.length-1,gw(i.text).length+(i.text.length==1?i.from.ch:0))}function cm(hq,hp){if(cE(hq,hp.from)<0){return hq}if(cE(hq,hp.to)<=0){return dq(hp)}var i=hq.line+hp.text.length-(hp.to.line-hp.from.line)-1,ho=hq.ch;if(hq.line==hp.to.line){ho+=dq(hp).ch-hp.to.ch}return ac(i,ho)}function f6(hr,hs){var hp=[];for(var hq=0;hq<hr.sel.ranges.length;hq++){var ho=hr.sel.ranges[hq];hp.push(new ev(cm(ho.anchor,hs),cm(ho.head,hs)))}return cX(hp,hr.sel.primIndex)}function bN(hp,ho,i){if(hp.line==ho.line){return ac(i.line,hp.ch-ho.ch+i.ch)}else{return ac(i.line+(hp.line-ho.line),hp.ch)}}function an(hy,hv,hp){var hq=[];var ho=ac(hy.first,0),hz=ho;for(var hs=0;hs<hv.length;hs++){var hu=hv[hs];var hx=bN(hu.from,ho,hz);var hw=bN(dq(hu),ho,hz);ho=hu.to;hz=hw;if(hp=="around"){var ht=hy.sel.ranges[hs],hr=cE(ht.head,ht.anchor)<0;hq[hs]=new ev(hr?hw:hx,hr?hx:hw)}else{hq[hs]=new ev(hx,hx)}}return new g2(hq,hy.sel.primIndex)}function bK(i){i.doc.mode=gp(i.options,i.doc.modeOption);eY(i)}function eY(i){i.doc.iter(function(ho){if(ho.stateAfter){ho.stateAfter=null}if(ho.styles){ho.styles=null}});i.doc.modeFrontier=i.doc.highlightFrontier=i.doc.first;eP(i,100);i.state.modeGen++;if(i.curOp){ap(i)}}function ep(i,ho){return ho.from.ch==0&&ho.to.ch==0&&gw(ho.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function gm(hE,hx,hr,hv){function hq(hF){return hr?hr[hF]:null}function hw(hF,hH,hG){e0(hF,hH,hG,hv);am(hF,"change",hF,hx)}function hB(hI,hG){var hF=[];for(var hH=hI;hH<hG;++hH){hF.push(new g8(hz[hH],hq(hH),hv))}return hF}var hC=hx.from,ho=hx.to,hz=hx.text;var hy=f2(hE,hC.line),i=f2(hE,ho.line);var hp=gw(hz),hD=hq(hz.length-1),hA=ho.line-hC.line;if(hx.full){hE.insert(0,hB(0,hz.length));hE.remove(hz.length,hE.size-hz.length)}else{if(ep(hE,hx)){var hu=hB(0,hz.length-1);hw(i,i.text,hD);if(hA){hE.remove(hC.line,hA)}if(hu.length){hE.insert(hC.line,hu)}}else{if(hy==i){if(hz.length==1){hw(hy,hy.text.slice(0,hC.ch)+hp+hy.text.slice(ho.ch),hD)}else{var ht=hB(1,hz.length-1);ht.push(new g8(hp+hy.text.slice(ho.ch),hD,hv));hw(hy,hy.text.slice(0,hC.ch)+hz[0],hq(0));hE.insert(hC.line+1,ht)}}else{if(hz.length==1){hw(hy,hy.text.slice(0,hC.ch)+hz[0]+i.text.slice(ho.ch),hq(0));hE.remove(hC.line+1,hA)}else{hw(hy,hy.text.slice(0,hC.ch)+hz[0],hq(0));hw(i,hp+i.text.slice(ho.ch),hD);var hs=hB(1,hz.length-1);if(hA>1){hE.remove(hC.line+1,hA-1)}hE.insert(hC.line+1,hs)}}}}am(hE,"change",hE,hx)}function eH(hq,hp,ho){function i(hw,hu,hs){if(hw.linked){for(var ht=0;ht<hw.linked.length;++ht){var hr=hw.linked[ht];if(hr.doc==hu){continue}var hv=hs&&hr.sharedHist;if(ho&&!hv){continue}hp(hr.doc,hv);i(hr.doc,hw,hv)}}}i(hq,null,true)}function eM(i,ho){if(ho.cm){throw new Error("This document is already in use.")}i.doc=ho;ho.cm=i;af(i);bK(i);D(i);if(!i.options.lineWrapping){f(i)}i.options.mode=ho.modeOption;ap(i)}function D(i){(i.doc.direction=="rtl"?gq:h)(i.display.lineDiv,"CodeMirror-rtl")}function ey(i){df(i,function(){D(i);ap(i)})}function gP(i){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=i||1}function d2(i,hp){var ho={from:cH(hp.from),to:dq(hp),text:g6(i,hp.from,hp.to)};cl(i,ho,hp.from.line,hp.to.line+1);eH(i,function(hq){return cl(hq,ho,hp.from.line,hp.to.line+1)},true);return ho}function gr(ho){while(ho.length){var i=gw(ho);if(i.ranges){ho.pop()}else{break}}}function fx(ho,i){if(i){gr(ho.done);return gw(ho.done)}else{if(ho.done.length&&!gw(ho.done).ranges){return gw(ho.done)}else{if(ho.done.length>1&&!ho.done[ho.done.length-2].ranges){ho.done.pop();return gw(ho.done)}}}}function gE(ht,hr,i,hq){var hp=ht.history;hp.undone.length=0;var ho=+new Date,hu;var hv;if((hp.lastOp==hq||hp.lastOrigin==hr.origin&&hr.origin&&((hr.origin.charAt(0)=="+"&&ht.cm&&hp.lastModTime>ho-ht.cm.options.historyEventDelay)||hr.origin.charAt(0)=="*"))&&(hu=fx(hp,hp.lastOp==hq))){hv=gw(hu.changes);if(cE(hr.from,hr.to)==0&&cE(hr.from,hv.to)==0){hv.to=dq(hr)}else{hu.changes.push(d2(ht,hr))}}else{var hs=gw(hp.done);if(!hs||!hs.ranges){dh(ht.sel,hp.done)}hu={changes:[d2(ht,hr)],generation:hp.generation};hp.done.push(hu);while(hp.done.length>hp.undoDepth){hp.done.shift();if(!hp.done[0].ranges){hp.done.shift()}}}hp.done.push(i);hp.generation=++hp.maxGeneration;hp.lastModTime=hp.lastSelTime=ho;hp.lastOp=hp.lastSelOp=hq;hp.lastOrigin=hp.lastSelOrigin=hr.origin;if(!hv){aO(ht,"historyAdded")}}function bU(hr,i,hp,hq){var ho=i.charAt(0);return ho=="*"||ho=="+"&&hp.ranges.length==hq.ranges.length&&hp.somethingSelected()==hq.somethingSelected()&&new Date-hr.history.lastSelTime<=(hr.cm?hr.cm.options.historyEventDelay:500)}function hg(hs,hq,i,hp){var hr=hs.history,ho=hp&&hp.origin;if(i==hr.lastSelOp||(ho&&hr.lastSelOrigin==ho&&(hr.lastModTime==hr.lastSelTime&&hr.lastOrigin==ho||bU(hs,ho,gw(hr.done),hq)))){hr.done[hr.done.length-1]=hq}else{dh(hq,hr.done)}hr.lastSelTime=+new Date;hr.lastSelOrigin=ho;hr.lastSelOp=i;if(hp&&hp.clearRedo!==false){gr(hr.undone)}}function dh(ho,i){var hp=gw(i);if(!(hp&&hp.ranges&&hp.equals(ho))){i.push(ho)}}function cl(ho,hs,hr,hq){var i=hs["spans_"+ho.id],hp=0;ho.iter(Math.max(ho.first,hr),Math.min(ho.first+ho.size,hq),function(ht){if(ht.markedSpans){(i||(i=hs["spans_"+ho.id]={}))[hp]=ht.markedSpans}++hp})}function by(hq){if(!hq){return null}var ho;for(var hp=0;hp<hq.length;++hp){if(hq[hp].marker.explicitlyCleared){if(!ho){ho=hq.slice(0,hp)}}else{if(ho){ho.push(hq[hp])}}}return !ho?hq:ho.length?ho:null}function cr(hr,hs){var hq=hs["spans_"+hr.id];if(!hq){return null}var ho=[];for(var hp=0;hp<hs.text.length;++hp){ho.push(by(hq[hp]))}return ho}function eJ(hw,hu){var ho=cr(hw,hu);var hx=eW(hw,hu);if(!ho){return hx}if(!hx){return ho}for(var hr=0;hr<ho.length;++hr){var hs=ho[hr],ht=hx[hr];if(hs&&ht){spans:for(var hq=0;hq<ht.length;++hq){var hv=ht[hq];for(var hp=0;hp<hs.length;++hp){if(hs[hp].marker==hv.marker){continue spans}}hs.push(hv)}}else{if(ht){ho[hr]=ht}}}return ho}function ca(hz,hr,hy){var hp=[];for(var hu=0;hu<hz.length;++hu){var hq=hz[hu];if(hq.ranges){hp.push(hy?g2.prototype.deepCopy.call(hq):hq);continue}var hw=hq.changes,hx=[];hp.push({changes:hx});for(var ht=0;ht<hw.length;++ht){var hv=hw[ht],hs=(void 0);hx.push({from:hv.from,to:hv.to,text:hv.text});if(hr){for(var ho in hv){if(hs=ho.match(/^spans_(\d+)$/)){if(dP(hr,Number(hs[1]))>-1){gw(hx)[ho]=hv[ho];delete hv[ho]}}}}}}return hp}function gh(ho,hr,i,hs){if(hs){var hq=ho.anchor;if(i){var hp=cE(hr,hq)<0;if(hp!=(cE(i,hq)<0)){hq=hr;hr=i}else{if(hp!=(cE(hr,i)<0)){hr=i}}}return new ev(hq,hr)}else{return new ev(i||hr,hr)}}function gV(hq,hp,i,ho,hr){if(hr==null){hr=hq.cm&&(hq.cm.display.shift||hq.extend)}cg(hq,new g2([gh(hq.sel.primary(),hp,i,hr)],0),ho)}function aF(ht,hs,hq){var hp=[];var hu=ht.cm&&(ht.cm.display.shift||ht.extend);for(var hr=0;hr<ht.sel.ranges.length;hr++){hp[hr]=gh(ht.sel.ranges[hr],hs[hr],null,hu)}var ho=cX(hp,ht.sel.primIndex);cg(ht,ho,hq)}function e(hs,hr,hp,hq){var ho=hs.sel.ranges.slice(0);ho[hr]=hp;cg(hs,cX(ho,hs.sel.primIndex),hq)}function J(hq,ho,hp,i){cg(hq,fC(ho,hp),i)}function b(hq,ho,i){var hp={ranges:ho.ranges,update:function(hr){var ht=this;this.ranges=[];for(var hs=0;hs<hr.length;hs++){ht.ranges[hs]=new ev(gB(hq,hr[hs].anchor),gB(hq,hr[hs].head))}},origin:i&&i.origin};aO(hq,"beforeSelectionChange",hq,hp);if(hq.cm){aO(hq.cm,"beforeSelectionChange",hq.cm,hp)}if(hp.ranges!=ho.ranges){return cX(hp.ranges,hp.ranges.length-1)}else{return ho}}function fV(hr,hq,ho){var i=hr.history.done,hp=gw(i);if(hp&&hp.ranges){i[i.length-1]=hq;e2(hr,hq,ho)}else{cg(hr,hq,ho)}}function cg(hp,ho,i){e2(hp,ho,i);hg(hp,hp.sel,hp.cm?hp.cm.curOp.id:NaN,i)}function e2(hq,hp,ho){if(f7(hq,"beforeSelectionChange")||hq.cm&&f7(hq.cm,"beforeSelectionChange")){hp=b(hq,hp,ho)}var i=ho&&ho.bias||(cE(hp.primary().head,hq.sel.primary().head)<0?-1:1);dD(hq,p(hq,hp,i,true));if(!(ho&&ho.scroll===false)&&hq.cm){gv(hq.cm)}}function dD(ho,i){if(i.equals(ho.sel)){return}ho.sel=i;if(ho.cm){ho.cm.curOp.updateInput=ho.cm.curOp.selectionChanged=true;ab(ho.cm)}am(ho,"cursorActivity",ho)}function fd(i){dD(i,p(i,i.sel,null,false))}function p(hx,ho,hu,hv){var hr;for(var hs=0;hs<ho.ranges.length;hs++){var ht=ho.ranges[hs];var hp=ho.ranges.length==hx.sel.ranges.length&&hx.sel.ranges[hs];var hw=ch(hx,ht.anchor,hp&&hp.anchor,hu,hv);var hq=ch(hx,ht.head,hp&&hp.head,hu,hv);if(hr||hw!=ht.anchor||hq!=ht.head){if(!hr){hr=ho.ranges.slice(0,hs)}hr[hs]=new ev(hw,hq)}}return hr?cX(hr,ho.primIndex):ho}function fs(hy,hw,hr,hq,hu){var hz=f2(hy,hw.line);if(hz.markedSpans){for(var hs=0;hs<hz.markedSpans.length;++hs){var ho=hz.markedSpans[hs],hp=ho.marker;if((ho.from==null||(hp.inclusiveLeft?ho.from<=hw.ch:ho.from<hw.ch))&&(ho.to==null||(hp.inclusiveRight?ho.to>=hw.ch:ho.to>hw.ch))){if(hu){aO(hp,"beforeCursorEnter");if(hp.explicitlyCleared){if(!hz.markedSpans){break}else{--hs;continue}}}if(!hp.atomic){continue}if(hr){var hv=hp.find(hq<0?1:-1),hx=(void 0);if(hq<0?hp.inclusiveRight:hp.inclusiveLeft){hv=hk(hy,hv,-hq,hv&&hv.line==hw.line?hz:null)}if(hv&&hv.line==hw.line&&(hx=cE(hv,hr))&&(hq<0?hx<0:hx>0)){return fs(hy,hv,hw,hq,hu)}}var ht=hp.find(hq<0?-1:1);if(hq<0?hp.inclusiveLeft:hp.inclusiveRight){ht=hk(hy,ht,hq,ht.line==hw.line?hz:null)}return ht?fs(hy,ht,hw,hq,hu):null}}}return hw}function ch(hs,ht,hq,ho,i){var hp=ho||1;var hr=fs(hs,ht,hq,hp,i)||(!i&&fs(hs,ht,hq,hp,true))||fs(hs,ht,hq,-hp,i)||(!i&&fs(hs,ht,hq,-hp,true));if(!hr){hs.cantEdit=true;return ac(hs.first,0)}return hr}function hk(hp,hq,ho,i){if(ho<0&&hq.ch==0){if(hq.line>hp.first){return gB(hp,ac(hq.line-1))}else{return null}}else{if(ho>0&&hq.ch==(i||f2(hp,hq.line)).text.length){if(hq.line<hp.first+hp.size-1){return ac(hq.line+1,0)}else{return null}}else{return new ac(hq.line,hq.ch+ho)}}}function av(i){i.setSelection(ac(i.firstLine(),0),ac(i.lastLine()),ah)}function en(ho,hq,hp){var i={canceled:false,from:hq.from,to:hq.to,text:hq.text,origin:hq.origin,cancel:function(){return i.canceled=true}};if(hp){i.update=function(hu,ht,hs,hr){if(hu){i.from=gB(ho,hu)}if(ht){i.to=gB(ho,ht)}if(hs){i.text=hs}if(hr!==undefined){i.origin=hr}}}aO(ho,"beforeChange",ho,i);if(ho.cm){aO(ho.cm,"beforeChange",ho.cm,i)}if(i.canceled){return null}return{from:i.from,to:i.to,text:i.text,origin:i.origin}}function bt(hr,hs,hq){if(hr.cm){if(!hr.cm.curOp){return du(hr.cm,bt)(hr,hs,hq)}if(hr.cm.state.suppressEdits){return}}if(f7(hr,"beforeChange")||hr.cm&&f7(hr.cm,"beforeChange")){hs=en(hr,hs,true);if(!hs){return}}var hp=hi&&!hq&&da(hr,hs.from,hs.to);if(hp){for(var ho=hp.length-1;ho>=0;--ho){P(hr,{from:hp[ho].from,to:hp[ho].to,text:ho?[""]:hs.text,origin:hs.origin})}}else{P(hr,hs)}}function P(hp,hq){if(hq.text.length==1&&hq.text[0]==""&&cE(hq.from,hq.to)==0){return}var ho=f6(hp,hq);gE(hp,hq,ho,hp.cm?hp.cm.curOp.id:NaN);eO(hp,hq,ho,eW(hp,hq));var i=[];eH(hp,function(hs,hr){if(!hr&&dP(i,hs.history)==-1){d9(hs.history,hq);i.push(hs.history)}eO(hs,hq,null,eW(hs,hq))})}function cv(hz,hy,hB){if(hz.cm&&hz.cm.state.suppressEdits&&!hB){return}var hx=hz.history,hp,hr=hz.sel;var ho=hy=="undo"?hx.done:hx.undone,hA=hy=="undo"?hx.undone:hx.done;var hu=0;for(;hu<ho.length;hu++){hp=ho[hu];if(hB?hp.ranges&&!hp.equals(hz.sel):!hp.ranges){break}}if(hu==ho.length){return}hx.lastOrigin=hx.lastSelOrigin=null;for(;;){hp=ho.pop();if(hp.ranges){dh(hp,hA);if(hB&&!hp.equals(hz.sel)){cg(hz,hp,{clearRedo:false});return}hr=hp}else{break}}var hw=[];dh(hr,hA);hA.push({changes:hw,generation:hx.generation});hx.generation=hp.generation||++hx.maxGeneration;var hq=f7(hz,"beforeChange")||hz.cm&&f7(hz.cm,"beforeChange");var hv=function(hC){var hF=hp.changes[hC];hF.origin=hy;if(hq&&!en(hz,hF,false)){ho.length=0;return{}}hw.push(d2(hz,hF));var hE=hC?f6(hz,hF):gw(ho);eO(hz,hF,hE,eJ(hz,hF));if(!hC&&hz.cm){hz.cm.scrollIntoView({from:hF.from,to:dq(hF)})}var hD=[];eH(hz,function(hG,i){if(!i&&dP(hD,hG.history)==-1){d9(hG.history,hF);hD.push(hG.history)}eO(hG,hF,null,eJ(hG,hF))})};for(var hs=hp.changes.length-1;hs>=0;--hs){var ht=hv(hs);if(ht){return ht.v}}}function ga(ho,hq){if(hq==0){return}ho.first+=hq;ho.sel=new g2(cf(ho.sel.ranges,function(hr){return new ev(ac(hr.anchor.line+hq,hr.anchor.ch),ac(hr.head.line+hq,hr.head.ch))}),ho.sel.primIndex);if(ho.cm){ap(ho.cm,ho.first,ho.first-hq,hq);for(var hp=ho.cm.display,i=hp.viewFrom;i<hp.viewTo;i++){W(ho.cm,i,"gutter")}}}function eO(hr,hs,hq,ho){if(hr.cm&&!hr.cm.curOp){return du(hr.cm,eO)(hr,hs,hq,ho)}if(hs.to.line<hr.first){ga(hr,hs.text.length-1-(hs.to.line-hs.from.line));return}if(hs.from.line>hr.lastLine()){return}if(hs.from.line<hr.first){var i=hs.text.length-1-(hr.first-hs.from.line);ga(hr,i);hs={from:ac(hr.first,0),to:ac(hs.to.line+i,hs.to.ch),text:[gw(hs.text)],origin:hs.origin}}var hp=hr.lastLine();if(hs.to.line>hp){hs={from:hs.from,to:ac(hp,f2(hr,hp).text.length),text:[hs.text[0]],origin:hs.origin}}hs.removed=g6(hr,hs.from,hs.to);if(!hq){hq=f6(hr,hs)}if(hr.cm){aT(hr.cm,hs,ho)}else{gm(hr,hs,ho)}e2(hr,hq,ah)}function aT(hy,hu,hs){var hx=hy.doc,ht=hy.display,hv=hu.from,hw=hu.to;var i=false,hr=hv.line;if(!hy.options.lineWrapping){hr=b8(z(f2(hx,hv.line)));hx.iter(hr,hw.line+1,function(hA){if(hA==ht.maxLine){i=true;return true}})}if(hx.sel.contains(hu.from,hu.to)>-1){ab(hy)}gm(hx,hu,hs,br(hy));if(!hy.options.lineWrapping){hx.iter(hr,hv.line+hu.text.length,function(hB){var hA=eZ(hB);if(hA>ht.maxLineLength){ht.maxLine=hB;ht.maxLineLength=hA;ht.maxLineChanged=true;i=false}});if(i){hy.curOp.updateMaxLine=true}}hh(hx,hv.line);eP(hy,400);var hz=hu.text.length-(hw.line-hv.line)-1;if(hu.full){ap(hy)}else{if(hv.line==hw.line&&hu.text.length==1&&!ep(hy.doc,hu)){W(hy,hv.line,"text")}else{ap(hy,hv.line,hw.line+1,hz)}}var hp=f7(hy,"changes"),hq=f7(hy,"change");if(hq||hp){var ho={from:hv,to:hw,text:hu.text,removed:hu.removed,origin:hu.origin};if(hq){am(hy,"change",hy,ho)}if(hp){(hy.curOp.changeObjs||(hy.curOp.changeObjs=[])).push(ho)}}hy.display.selForContextMenu=null}function be(hq,hp,hs,hr,ho){if(!hr){hr=hs}if(cE(hr,hs)<0){var i;(i=[hr,hs],hs=i[0],hr=i[1],i)}if(typeof hp=="string"){hp=hq.splitLines(hp)}bt(hq,{from:hs,to:hr,text:hp,origin:ho})}function M(hq,hp,ho,i){if(ho<hq.line){hq.line+=i}else{if(hp<hq.line){hq.line=hp;hq.ch=0}}}function f4(hs,hu,hv,hw){for(var hr=0;hr<hs.length;++hr){var ho=hs[hr],ht=true;if(ho.ranges){if(!ho.copied){ho=hs[hr]=ho.deepCopy();ho.copied=true}for(var hq=0;hq<ho.ranges.length;hq++){M(ho.ranges[hq].anchor,hu,hv,hw);M(ho.ranges[hq].head,hu,hv,hw)}continue}for(var hp=0;hp<ho.changes.length;++hp){var hx=ho.changes[hp];if(hv<hx.from.line){hx.from=ac(hx.from.line+hw,hx.from.ch);hx.to=ac(hx.to.line+hw,hx.to.ch)}else{if(hu<=hx.to.line){ht=false;break}}}if(!ht){hs.splice(0,hr+1);hr=0}}}function d9(ho,hr){var hq=hr.from.line,hp=hr.to.line,i=hr.text.length-(hp-hq)-1;f4(ho.done,hq,hp,i);f4(ho.undone,hq,hp,i)}function fg(hq,hp,i,hs){var hr=hp,ho=hp;if(typeof hp=="number"){ho=f2(hq,dy(hq,hp))}else{hr=b8(hp)}if(hr==null){return null}if(hs(ho,hr)&&hq.cm){W(hq.cm,hr,i)}return ho}function fM(hp){var hr=this;this.lines=hp;this.parent=null;var ho=0;for(var hq=0;hq<hp.length;++hq){hp[hq].parent=hr;ho+=hp[hq].height}this.height=ho}fM.prototype={chunkSize:function X(){return this.lines.length},removeInner:function O(ho,ht){var hs=this;for(var hq=ho,hr=ho+ht;hq<hr;++hq){var hp=hs.lines[hq];hs.height-=hp.height;bV(hp);am(hp,"delete")}this.lines.splice(ho,ht)},collapse:function gi(i){i.push.apply(i,this.lines)},insertInner:function a2(hp,hq,ho){var hs=this;this.height+=ho;this.lines=this.lines.slice(0,hp).concat(hq).concat(this.lines.slice(hp));for(var hr=0;hr<hq.length;++hr){hq[hr].parent=hs}},iterN:function g4(i,hr,hq){var hp=this;for(var ho=i+hr;i<ho;++i){if(hq(hp.lines[i])){return true}}}};function gl(hr){var ht=this;this.children=hr;var hq=0,ho=0;for(var hp=0;hp<hr.length;++hp){var hs=hr[hp];hq+=hs.chunkSize();ho+=hs.height;hs.parent=ht}this.size=hq;this.height=ho;this.parent=null}gl.prototype={chunkSize:function X(){return this.size},removeInner:function O(hq,hp){var hs=this;this.size-=hp;for(var hr=0;hr<this.children.length;++hr){var ho=hs.children[hr],hu=ho.chunkSize();if(hq<hu){var ht=Math.min(hp,hu-hq),hv=ho.height;ho.removeInner(hq,ht);hs.height-=hv-ho.height;if(hu==ht){hs.children.splice(hr--,1);ho.parent=null}if((hp-=ht)==0){break}hq=0}else{hq-=hu}}if(this.size-hp<25&&(this.children.length>1||!(this.children[0] instanceof fM))){var hw=[];this.collapse(hw);this.children=[new fM(hw)];this.children[0].parent=this}},collapse:function gi(ho){var hq=this;for(var hp=0;hp<this.children.length;++hp){hq.children[hp].collapse(ho)}},insertInner:function a2(hp,hx,hw){var hs=this;this.size+=hx.length;this.height+=hw;for(var hr=0;hr<this.children.length;++hr){var ho=hs.children[hr],hu=ho.chunkSize();if(hp<=hu){ho.insertInner(hp,hx,hw);if(ho.lines&&ho.lines.length>50){var hq=ho.lines.length%25+25;for(var hv=hq;hv<ho.lines.length;){var ht=new fM(ho.lines.slice(hv,hv+=25));ho.height-=ht.height;hs.children.splice(++hr,0,ht);ht.parent=hs}ho.lines=ho.lines.slice(0,hq);hs.maybeSpill()}break}hp-=hu}},maybeSpill:function e7(){if(this.children.length<=10){return}var hq=this;do{var ho=hq.children.splice(hq.children.length-5,5);var hp=new gl(ho);if(!hq.parent){var hr=new gl(hq.children);hr.parent=hq;hq.children=[hr,hp];hq=hr}else{hq.size-=hp.size;hq.height-=hp.height;var i=dP(hq.parent.children,hq);hq.parent.children.splice(i+1,0,hp)}hp.parent=hq.parent}while(hq.children.length>10);hq.parent.maybeSpill()},iterN:function g4(ho,hv,hu){var ht=this;for(var hp=0;hp<this.children.length;++hp){var hs=ht.children[hp],hr=hs.chunkSize();if(ho<hr){var hq=Math.min(hv,hr-ho);if(hs.iterN(ho,hq,hu)){return true}if((hv-=hq)==0){break}ho=0}else{ho-=hr}}}};var d7=function(hq,hp,i){var hr=this;if(i){for(var ho in i){if(i.hasOwnProperty(ho)){hr[ho]=i[ho]}}}this.doc=hq;this.node=hp};d7.prototype.clear=function(){var hu=this;var hp=this.doc.cm,hr=this.line.widgets,hq=this.line,ht=b8(hq);if(ht==null||!hr){return}for(var hs=0;hs<hr.length;++hs){if(hr[hs]==hu){hr.splice(hs--,1)}}if(!hr.length){hq.widgets=null}var ho=dr(this);g9(hq,Math.max(0,hq.height-ho));if(hp){df(hp,function(){ex(hp,hq,-ho);W(hp,ht,"widget")});am(hp,"lineWidgetCleared",hp,this,ht)}};d7.prototype.changed=function(){var hr=this;var ho=this.height,i=this.doc.cm,hp=this.line;this.height=null;var hq=dr(this)-ho;if(!hq){return}g9(hp,hp.height+hq);if(i){df(i,function(){i.curOp.forceUpdate=true;ex(i,hp,hq);am(i,"lineWidgetChanged",i,hr,b8(hp))})}};bT(d7);function ex(i,ho,hp){if(b7(ho)<((i.curOp&&i.curOp.scrollTop)||i.doc.scrollTop)){c9(i,hp)}}function b0(hs,hr,hp,ho){var hq=new d7(hs,hp,ho);var i=hs.cm;if(i&&hq.noHScroll){i.display.alignWidgets=true}fg(hs,hr,"widget",function(hu){var hv=hu.widgets||(hu.widgets=[]);if(hq.insertAt==null){hv.push(hq)}else{hv.splice(Math.min(hv.length-1,Math.max(0,hq.insertAt)),0,hq)}hq.line=hu;if(i&&!gj(hs,hu)){var ht=b7(hu)<hs.scrollTop;g9(hu,hu.height+dr(hq));if(ht){c9(i,hq.height)}i.curOp.forceUpdate=true}return true});am(i,"lineWidgetAdded",i,hq,typeof hr=="number"?hr:b8(hr));return hq}var bh=0;var V=function(ho,i){this.lines=[];this.type=i;this.doc=ho;this.id=++bh};V.prototype.clear=function(){var ht=this;if(this.explicitlyCleared){return}var hx=this.doc.cm,hq=hx&&!hx.curOp;if(hq){db(hx)}if(f7(this,"clear")){var hy=this.find();if(hy){am(this,"clear",hy.from,hy.to)}}var hr=null,hv=null;for(var hs=0;hs<this.lines.length;++hs){var hz=ht.lines[hs];var hw=fX(hz.markedSpans,ht);if(hx&&!ht.collapsed){W(hx,b8(hz),"text")}else{if(hx){if(hw.to!=null){hv=b8(hz)}if(hw.from!=null){hr=b8(hz)}}}hz.markedSpans=fq(hz.markedSpans,hw);if(hw.from==null&&ht.collapsed&&!gj(ht.doc,hz)&&hx){g9(hz,bb(hx.display))}}if(hx&&this.collapsed&&!hx.options.lineWrapping){for(var hp=0;hp<this.lines.length;++hp){var ho=z(ht.lines[hp]),hu=eZ(ho);if(hu>hx.display.maxLineLength){hx.display.maxLine=ho;hx.display.maxLineLength=hu;hx.display.maxLineChanged=true}}}if(hr!=null&&hx&&this.collapsed){ap(hx,hr,hv+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(hx){fd(hx.doc)}}if(hx){am(hx,"markerCleared",hx,this,hr,hv)}if(hq){aw(hx)}if(this.parent){this.parent.clear()}};V.prototype.find=function(hr,hp){var hv=this;if(hr==null&&this.type=="bookmark"){hr=1}var hu,ht;for(var hq=0;hq<this.lines.length;++hq){var ho=hv.lines[hq];var hs=fX(ho.markedSpans,hv);if(hs.from!=null){hu=ac(hp?ho:b8(ho),hs.from);if(hr==-1){return hu}}if(hs.to!=null){ht=ac(hp?ho:b8(ho),hs.to);if(hr==1){return ht}}}return hu&&{from:hu,to:ht}};V.prototype.changed=function(){var hq=this;var hp=this.find(-1,true),ho=this,i=this.doc.cm;if(!hp||!i){return}df(i,function(){var hs=hp.line,ht=b8(hp.line);var hr=fZ(i,ht);if(hr){aE(hr);i.curOp.selectionChanged=i.curOp.forceUpdate=true}i.curOp.updateMaxLine=true;if(!gj(ho.doc,hs)&&ho.height!=null){var hv=ho.height;ho.height=null;var hu=dr(ho)-hv;if(hu){g9(hs,hs.height+hu)}}am(i,"markerChanged",i,hq)})};V.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var ho=this.doc.cm.curOp;if(!ho.maybeHiddenMarkers||dP(ho.maybeHiddenMarkers,this)==-1){(ho.maybeUnhiddenMarkers||(ho.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(i)};V.prototype.detachLine=function(i){this.lines.splice(dP(this.lines,i),1);if(!this.lines.length&&this.doc.cm){var ho=this.doc.cm.curOp;(ho.maybeHiddenMarkers||(ho.maybeHiddenMarkers=[])).push(this)}};bT(V);function fn(hw,hu,hv,hy,hs){if(hy&&hy.shared){return S(hw,hu,hv,hy,hs)}if(hw.cm&&!hw.cm.curOp){return du(hw.cm,fn)(hw,hu,hv,hy,hs)}var hr=new V(hw,hs),hx=cE(hu,hv);if(hy){aZ(hy,hr,false)}if(hx>0||hx==0&&hr.clearWhenEmpty!==false){return hr}if(hr.replacedWith){hr.collapsed=true;hr.widgetNode=ha("span",[hr.replacedWith],"CodeMirror-widget");if(!hy.handleMouseEvents){hr.widgetNode.setAttribute("cm-ignore-events","true")}if(hy.insertLeft){hr.widgetNode.insertLeft=true}}if(hr.collapsed){if(A(hw,hu.line,hu,hv,hr)||hu.line!=hv.line&&A(hw,hv.line,hu,hv,hr)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}bQ()}if(hr.addToHistory){gE(hw,{from:hu,to:hv,origin:"markText"},hw.sel,NaN)}var hp=hu.line,ht=hw.cm,ho;hw.iter(hp,hv.line+1,function(i){if(ht&&hr.collapsed&&!ht.options.lineWrapping&&z(i)==ht.display.maxLine){ho=true}if(hr.collapsed&&hp!=hu.line){g9(i,0)}cC(i,new eU(hr,hp==hu.line?hu.ch:null,hp==hv.line?hv.ch:null));++hp});if(hr.collapsed){hw.iter(hu.line,hv.line+1,function(i){if(gj(hw,i)){g9(i,0)}})}if(hr.clearOnEnter){cj(hr,"beforeCursorEnter",function(){return hr.clear()})}if(hr.readOnly){go();if(hw.history.done.length||hw.history.undone.length){hw.clearHistory()}}if(hr.collapsed){hr.id=++bh;hr.atomic=true}if(ht){if(ho){ht.curOp.updateMaxLine=true}if(hr.collapsed){ap(ht,hu.line,hv.line+1)}else{if(hr.className||hr.title||hr.startStyle||hr.endStyle||hr.css){for(var hq=hu.line;hq<=hv.line;hq++){W(ht,hq,"text")}}}if(hr.atomic){fd(ht.doc)}am(ht,"markerAdded",ht,hr)}return hr}var y=function(hq,hp){var hr=this;this.markers=hq;this.primary=hp;for(var ho=0;ho<hq.length;++ho){hq[ho].parent=hr}};y.prototype.clear=function(){var hp=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var ho=0;ho<this.markers.length;++ho){hp.markers[ho].clear()}am(this,"clear")};y.prototype.find=function(ho,i){return this.primary.find(ho,i)};bT(y);function S(hr,hu,ht,i,hp){i=aZ(i);i.shared=false;var hs=[fn(hr,hu,ht,i,hp)],ho=hs[0];var hq=i.widgetNode;eH(hr,function(hw){if(hq){i.widgetNode=hq.cloneNode(true)}hs.push(fn(hw,gB(hw,hu),gB(hw,ht),i,hp));for(var hv=0;hv<hw.linked.length;++hv){if(hw.linked[hv].isParent){return}}ho=gw(hs)});return new y(hs,ho)}function fz(i){return i.findMarks(ac(i.first,0),i.clipPos(ac(i.lastLine())),function(ho){return ho.parent})}function ea(ht,hu){for(var hr=0;hr<hu.length;hr++){var hp=hu[hr],hv=hp.find();var ho=ht.clipPos(hv.from),hs=ht.clipPos(hv.to);if(cE(ho,hs)){var hq=fn(ht,ho,hs,hp.primary,hp.primary.type);hp.markers.push(hq);hq.parent=hp}}}function e1(hq){var ho=function(ht){var hr=hq[ht],hv=[hr.primary.doc];eH(hr.primary.doc,function(i){return hv.push(i)});for(var hs=0;hs<hr.markers.length;hs++){var hu=hr.markers[hs];if(dP(hv,hu.doc)==-1){hu.parent=null;hr.markers.splice(hs--,1)}}};for(var hp=0;hp<hq.length;hp++){ho(hp)}}var cS=0;var aD=function(hr,hq,i,hp,ho){if(!(this instanceof aD)){return new aD(hr,hq,i,hp,ho)}if(i==null){i=0}gl.call(this,[new fM([new g8("",null)])]);this.first=i;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=i;var hs=ac(i,0);this.sel=fC(hs);this.history=new gP(null);this.id=++cS;this.modeOption=hq;this.lineSep=hp;this.direction=(ho=="rtl")?"rtl":"ltr";this.extend=false;if(typeof hr=="string"){hr=this.splitLines(hr)}gm(this,{from:hs,to:hs,text:hr});cg(this,fC(hs),ah)};aD.prototype=cK(gl.prototype,{constructor:aD,iter:function(hp,ho,i){if(i){this.iterN(hp-this.first,ho-hp,i)}else{this.iterN(this.first,this.first+this.size,hp)}},insert:function(hp,hq){var ho=0;for(var hr=0;hr<hq.length;++hr){ho+=hq[hr].height}this.insertInner(hp-this.first,hq,ho)},remove:function(i,ho){this.removeInner(i-this.first,ho)},getValue:function(ho){var i=bf(this,this.first,this.first+this.size);if(ho===false){return i}return i.join(ho||this.lineSeparator())},setValue:c5(function(ho){var hp=ac(this.first,0),i=this.first+this.size-1;bt(this,{from:hp,to:ac(i,f2(this,i).text.length),text:this.splitLines(ho),origin:"setValue",full:true},true);if(this.cm){fw(this.cm,0,0)}cg(this,fC(hp),ah)}),replaceRange:function(ho,hq,hp,i){hq=gB(this,hq);hp=hp?gB(this,hp):hq;be(this,ho,hq,hp,i)},getRange:function(hq,hp,ho){var i=g6(this,gB(this,hq),gB(this,hp));if(ho===false){return i}return i.join(ho||this.lineSeparator())},getLine:function(ho){var i=this.getLineHandle(ho);return i&&i.text},getLineHandle:function(i){if(cw(this,i)){return f2(this,i)}},getLineNumber:function(i){return b8(i)},getLineHandleVisualStart:function(i){if(typeof i=="number"){i=f2(this,i)}return z(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return gB(this,i)},getCursor:function(hp){var i=this.sel.primary(),ho;if(hp==null||hp=="head"){ho=i.head}else{if(hp=="anchor"){ho=i.anchor}else{if(hp=="end"||hp=="to"||hp===false){ho=i.to()}else{ho=i.from()}}}return ho},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:c5(function(i,hp,ho){J(this,gB(this,typeof i=="number"?ac(i,hp||0):i),null,ho)}),setSelection:c5(function(ho,hp,i){J(this,gB(this,ho),gB(this,hp||ho),i)}),extendSelection:c5(function(hp,i,ho){gV(this,gB(this,hp),i&&gB(this,i),ho)}),extendSelections:c5(function(ho,i){aF(this,ez(this,ho),i)}),extendSelectionsBy:c5(function(hp,i){var ho=cf(this.sel.ranges,hp);aF(this,ez(this,ho),i)}),setSelections:c5(function(ho,hs,hq){var ht=this;if(!ho.length){return}var hp=[];for(var hr=0;hr<ho.length;hr++){hp[hr]=new ev(gB(ht,ho[hr].anchor),gB(ht,ho[hr].head))}if(hs==null){hs=Math.min(ho.length-1,this.sel.primIndex)}cg(this,cX(hp,hs),hq)}),addSelection:c5(function(hp,hq,ho){var i=this.sel.ranges.slice(0);i.push(new ev(gB(this,hp),gB(this,hq||hp)));cg(this,cX(i,i.length-1),ho)}),getSelection:function(hs){var ht=this;var hp=this.sel.ranges,ho;for(var hq=0;hq<hp.length;hq++){var hr=g6(ht,hp[hq].from(),hp[hq].to());ho=ho?ho.concat(hr):hr}if(hs===false){return ho}else{return ho.join(hs||this.lineSeparator())}},getSelections:function(hs){var ht=this;var hr=[],ho=this.sel.ranges;for(var hp=0;hp<ho.length;hp++){var hq=g6(ht,ho[hp].from(),ho[hp].to());if(hs!==false){hq=hq.join(hs||ht.lineSeparator())}hr[hp]=hq}return hr},replaceSelection:function(hq,hs,ho){var hr=[];for(var hp=0;hp<this.sel.ranges.length;hp++){hr[hp]=hq}this.replaceSelections(hr,hs,ho||"+input")},replaceSelections:c5(function(hp,hv,hx){var ht=this;var hw=[],hr=this.sel;for(var hs=0;hs<hr.ranges.length;hs++){var hu=hr.ranges[hs];hw[hs]={from:hu.from(),to:hu.to(),text:ht.splitLines(hp[hs]),origin:hx}}var ho=hv&&hv!="end"&&an(this,hw,hv);for(var hq=hw.length-1;hq>=0;hq--){bt(ht,hw[hq])}if(ho){fV(this,ho)}else{if(this.cm){gv(this.cm)}}}),undo:c5(function(){cv(this,"undo")}),redo:c5(function(){cv(this,"redo")}),undoSelection:c5(function(){cv(this,"undo",true)}),redoSelection:c5(function(){cv(this,"redo",true)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){var hr=this.history,ho=0,hq=0;for(var hp=0;hp<hr.done.length;hp++){if(!hr.done[hp].ranges){++ho}}for(var hs=0;hs<hr.undone.length;hs++){if(!hr.undone[hs].ranges){++hq}}return{undo:ho,redo:hq}},clearHistory:function(){this.history=new gP(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(i){if(i){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:ca(this.history.done),undone:ca(this.history.undone)}},setHistory:function(ho){var i=this.history=new gP(this.history.maxGeneration);i.done=ca(ho.done.slice(0),null,true);i.undone=ca(ho.undone.slice(0),null,true)},setGutterMarker:c5(function(i,ho,hp){return fg(this,i,"gutter",function(hq){var hr=hq.gutterMarkers||(hq.gutterMarkers={});hr[ho]=hp;if(!hp&&fG(hr)){hq.gutterMarkers=null}return true})}),clearGutter:c5(function(i){var ho=this;this.iter(function(hp){if(hp.gutterMarkers&&hp.gutterMarkers[i]){fg(ho,hp,"gutter",function(){hp.gutterMarkers[i]=null;if(fG(hp.gutterMarkers)){hp.gutterMarkers=null}return true})}})}),lineInfo:function(i){var ho;if(typeof i=="number"){if(!cw(this,i)){return null}ho=i;i=f2(this,i);if(!i){return null}}else{ho=b8(i);if(ho==null){return null}}return{line:ho,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:c5(function(hp,ho,i){return fg(this,hp,ho=="gutter"?"gutter":"class",function(hq){var hr=ho=="text"?"textClass":ho=="background"?"bgClass":ho=="gutter"?"gutterClass":"wrapClass";if(!hq[hr]){hq[hr]=i}else{if(Y(i).test(hq[hr])){return false}else{hq[hr]+=" "+i}}return true})}),removeLineClass:c5(function(hp,ho,i){return fg(this,hp,ho=="gutter"?"gutter":"class",function(hr){var hu=ho=="text"?"textClass":ho=="background"?"bgClass":ho=="gutter"?"gutterClass":"wrapClass";var ht=hr[hu];if(!ht){return false}else{if(i==null){hr[hu]=null}else{var hs=ht.match(Y(i));if(!hs){return false}var hq=hs.index+hs[0].length;hr[hu]=ht.slice(0,hs.index)+(!hs.index||hq==ht.length?"":" ")+ht.slice(hq)||null}}return true})}),addLineWidget:c5(function(hp,ho,i){return b0(this,hp,ho,i)}),removeLineWidget:function(i){i.clear()},markText:function(hp,ho,i){return fn(this,gB(this,hp),gB(this,ho),i,i&&i.type||"range")},setBookmark:function(hp,i){var ho={replacedWith:i&&(i.nodeType==null?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:false,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents};hp=gB(this,hp);return fn(this,hp,hp,ho,"bookmark")},findMarksAt:function(hs){hs=gB(this,hs);var hr=[],hp=f2(this,hs.line).markedSpans;if(hp){for(var ho=0;ho<hp.length;++ho){var hq=hp[ho];if((hq.from==null||hq.from<=hs.ch)&&(hq.to==null||hq.to>=hs.ch)){hr.push(hq.marker.parent||hq.marker)}}}return hr},findMarks:function(hr,hq,i){hr=gB(this,hr);hq=gB(this,hq);var ho=[],hp=hr.line;this.iter(hr.line,hq.line+1,function(hs){var hu=hs.markedSpans;if(hu){for(var ht=0;ht<hu.length;ht++){var hv=hu[ht];if(!(hv.to!=null&&hp==hr.line&&hr.ch>=hv.to||hv.from==null&&hp!=hr.line||hv.from!=null&&hp==hq.line&&hv.from>=hq.ch)&&(!i||i(hv.marker))){ho.push(hv.marker.parent||hv.marker)}}}++hp});return ho},getAllMarks:function(){var i=[];this.iter(function(hp){var ho=hp.markedSpans;if(ho){for(var hq=0;hq<ho.length;++hq){if(ho[hq].from!=null){i.push(ho[hq].marker)}}}});return i},posFromIndex:function(hp){var i,hq=this.first,ho=this.lineSeparator().length;this.iter(function(hr){var hs=hr.text.length+ho;if(hs>hp){i=hp;return true}hp-=hs;++hq});return gB(this,ac(hq,i))},indexFromPos:function(hp){hp=gB(this,hp);var i=hp.ch;if(hp.line<this.first||hp.ch<0){return 0}var ho=this.lineSeparator().length;this.iter(this.first,hp.line,function(hq){i+=hq.text.length+ho});return i},copy:function(i){var ho=new aD(bf(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);ho.scrollTop=this.scrollTop;ho.scrollLeft=this.scrollLeft;ho.sel=this.sel;ho.extend=false;if(i){ho.history.undoDepth=this.history.undoDepth;ho.setHistory(this.getHistory())}return ho},linkedDoc:function(i){if(!i){i={}}var hq=this.first,hp=this.first+this.size;if(i.from!=null&&i.from>hq){hq=i.from}if(i.to!=null&&i.to<hp){hp=i.to}var ho=new aD(bf(this,hq,hp),i.mode||this.modeOption,hq,this.lineSep,this.direction);if(i.sharedHist){ho.history=this.history}(this.linked||(this.linked=[])).push({doc:ho,sharedHist:i.sharedHist});ho.linked=[{doc:this,isParent:true,sharedHist:i.sharedHist}];ea(ho,fz(this));return ho},unlinkDoc:function(hp){var hs=this;if(hp instanceof K){hp=hp.doc}if(this.linked){for(var hq=0;hq<this.linked.length;++hq){var hr=hs.linked[hq];if(hr.doc!=hp){continue}hs.linked.splice(hq,1);hp.unlinkDoc(hs);e1(fz(hs));break}}if(hp.history==this.history){var ho=[hp.id];eH(hp,function(i){return ho.push(i.id)},true);hp.history=new gP(null);hp.history.done=ca(this.history.done,ho);hp.history.undone=ca(this.history.undone,ho)}},iterLinkedDocs:function(i){eH(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){if(this.lineSep){return i.split(this.lineSep)}return gM(i)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:c5(function(i){if(i!="rtl"){i="ltr"}if(i==this.direction){return}this.direction=i;this.iter(function(ho){return ho.order=null});if(this.cm){ey(this.cm)}})});aD.prototype.eachLine=aD.prototype.iter;var ao=0;function bx(hw){var hy=this;dH(hy);if(a4(hy,hw)||bo(hy.display,hw)){return}c7(hw);if(eg){ao=+new Date}var hx=cO(hy,hw,true),hp=hw.dataTransfer.files;if(!hx||hy.isReadOnly()){return}if(hp&&hp.length&&window.FileReader&&window.File){var hs=hp.length,hz=Array(hs),hq=0;var hu=function(hC,hB){if(hy.options.allowDropFileTypes&&dP(hy.options.allowDropFileTypes,hC.type)==-1){return}var hA=new FileReader;hA.onload=du(hy,function(){var i=hA.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(i)){i=""}hz[hB]=i;if(++hq==hs){hx=gB(hy.doc,hx);var hD={from:hx,to:hx,text:hy.doc.splitLines(hz.join(hy.doc.lineSeparator())),origin:"paste"};bt(hy.doc,hD);fV(hy.doc,fC(hx,dq(hD)))}});hA.readAsText(hC)};for(var hv=0;hv<hs;++hv){hu(hp[hv],hv)}}else{if(hy.state.draggingText&&hy.doc.sel.contains(hx)>-1){hy.state.draggingText(hw);setTimeout(function(){return hy.display.input.focus()},20);return}try{var ho=hw.dataTransfer.getData("Text");if(ho){var ht;if(hy.state.draggingText&&!hy.state.draggingText.copy){ht=hy.listSelections()}e2(hy.doc,fC(hx,hx));if(ht){for(var hr=0;hr<ht.length;++hr){be(hy.doc,"",ht[hr].anchor,ht[hr].head,"drag")}}hy.replaceSelection(ho,"around","paste");hy.display.input.focus()}}catch(hw){}}}function U(i,hp){if(eg&&(!i.state.draggingText||+new Date-ao<100)){e4(hp);return}if(a4(i,hp)||bo(i.display,hp)){return}hp.dataTransfer.setData("Text",i.getSelection());hp.dataTransfer.effectAllowed="copyMove";if(hp.dataTransfer.setDragImage&&!aM){var ho=g3("img",null,null,"position: fixed; left: 0; top: 0;");ho.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(eC){ho.width=ho.height=1;i.display.wrapper.appendChild(ho);ho._top=ho.offsetTop}hp.dataTransfer.setDragImage(ho,0,0);if(eC){ho.parentNode.removeChild(ho)}}}function hl(i,ho){var hq=cO(i,ho);if(!hq){return}var hp=document.createDocumentFragment();C(i,hq,hp);if(!i.display.dragCursor){i.display.dragCursor=g3("div",null,"CodeMirror-cursors CodeMirror-dragcursors");i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)}ce(i.display.dragCursor,hp)}function dH(i){if(i.display.dragCursor){i.display.lineSpace.removeChild(i.display.dragCursor);i.display.dragCursor=null}}function aK(hr){if(!document.getElementsByClassName){return}var hq=document.getElementsByClassName("CodeMirror");for(var hp=0;hp<hq.length;hp++){var ho=hq[hp].CodeMirror;if(ho){hr(ho)}}}var c4=false;function bw(){if(c4){return}gu();c4=true}function gu(){var i;cj(window,"resize",function(){if(i==null){i=setTimeout(function(){i=null;aK(a6)},100)}});cj(window,"blur",function(){return aK(a8)})}function a6(i){var ho=i.display;if(ho.lastWrapHeight==ho.wrapper.clientHeight&&ho.lastWrapWidth==ho.wrapper.clientWidth){return}ho.cachedCharWidth=ho.cachedTextHeight=ho.cachedPaddingH=null;ho.scrollbarsClipped=false;i.setSize()}var f3={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var gk=0;gk<10;gk++){f3[gk+48]=f3[gk+96]=String(gk)}for(var gO=65;gO<=90;gO++){f3[gO]=String.fromCharCode(gO)}for(var gN=1;gN<=12;gN++){f3[gN+111]=f3[gN+63235]="F"+gN}var fY={};fY.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};fY.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};fY.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};fY.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};fY["default"]=cu?fY.macDefault:fY.pcDefault;function d0(hp){var hv=hp.split(/-(?!$)/);hp=hv[hv.length-1];var hu,ht,ho,hs;for(var hr=0;hr<hv.length-1;hr++){var hq=hv[hr];if(/^(cmd|meta|m)$/i.test(hq)){hs=true}else{if(/^a(lt)?$/i.test(hq)){hu=true}else{if(/^(c|ctrl|control)$/i.test(hq)){ht=true}else{if(/^s(hift)?$/i.test(hq)){ho=true}else{throw new Error("Unrecognized modifier name: "+hq)}}}}}if(hu){hp="Alt-"+hp}if(ht){hp="Ctrl-"+hp}if(hs){hp="Cmd-"+hp}if(ho){hp="Shift-"+hp}return hp}function c8(hv){var hp={};for(var hu in hv){if(hv.hasOwnProperty(hu)){var hw=hv[hu];if(/^(name|fallthrough|(de|at)tach)$/.test(hu)){continue}if(hw=="..."){delete hv[hu];continue}var hx=cf(hu.split(" "),d0);for(var ht=0;ht<hx.length;ht++){var hr=(void 0),hq=(void 0);if(ht==hx.length-1){hq=hx.join(" ");hr=hw}else{hq=hx.slice(0,ht+1).join(" ");hr="..."}var hs=hp[hq];if(!hs){hp[hq]=hr}else{if(hs!=hr){throw new Error("Inconsistent bindings for "+hq)}}}delete hv[hu]}}for(var ho in hp){hv[ho]=hp[ho]}return hv}function k(hr,hu,ht,hq){hu=gU(hu);var hs=hu.call?hu.call(hr,hq):hu[hr];if(hs===false){return"nothing"}if(hs==="..."){return"multi"}if(hs!=null&&ht(hs)){return"handled"}if(hu.fallthrough){if(Object.prototype.toString.call(hu.fallthrough)!="[object Array]"){return k(hr,hu.fallthrough,ht,hq)}for(var hp=0;hp<hu.fallthrough.length;hp++){var ho=k(hr,hu.fallthrough[hp],ht,hq);if(ho){return ho}}}}function fh(ho){var i=typeof ho=="string"?ho:f3[ho.keyCode];return i=="Ctrl"||i=="Alt"||i=="Shift"||i=="Mod"}function gX(i,ho,hq){var hp=i;if(ho.altKey&&hp!="Alt"){i="Alt-"+i}if((cc?ho.metaKey:ho.ctrlKey)&&hp!="Ctrl"){i="Ctrl-"+i}if((cc?ho.ctrlKey:ho.metaKey)&&hp!="Cmd"){i="Cmd-"+i}if(!hq&&ho.shiftKey&&hp!="Shift"){i="Shift-"+i}return i}function gd(ho,hp){if(eC&&ho.keyCode==34&&ho["char"]){return false}var i=f3[ho.keyCode];if(i==null||ho.altGraphKey){return false}return gX(i,ho,hp)}function gU(i){return typeof i=="string"?fY[i]:i}function fK(ho,hu){var hp=ho.doc.sel.ranges,hs=[];for(var hr=0;hr<hp.length;hr++){var hq=hu(hp[hr]);while(hs.length&&cE(hq.from,gw(hs).to)<=0){var ht=hs.pop();if(cE(ht.from,hq.from)<0){hq.from=ht.from;break}}hs.push(hq)}df(ho,function(){for(var hv=hs.length-1;hv>=0;hv--){be(ho.doc,"",hs[hv].from,hs[hv].to,"+delete")}gv(ho)})}function bH(i,hp,ho){var hq=eV(i.text,hp+ho,ho);return hq<0||hq>i.text.length?null:hq}function aq(i,hq,ho){var hp=bH(i,hq.ch,ho);return hp==null?null:new ac(hq.line,hp,ho<0?"after":"before")}function ff(ho,hw,ht,hs,hq){if(ho){var hr=a(ht,hw.doc.direction);if(hr){var hp=hq<0?gw(hr):hr[0];var hy=(hq<0)==(hp.level==1);var hv=hy?"after":"before";var i;if(hp.level>0){var hu=bi(hw,ht);i=hq<0?ht.text.length-1:0;var hx=F(hw,hu,i).top;i=cN(function(hz){return F(hw,hu,hz).top==hx},(hq<0)==(hp.level==1)?hp.from:hp.to-1,i);if(hv=="before"){i=bH(ht,i,1)}}else{i=hq<0?hp.to:hp.from}return new ac(hs,i,hv)}}return new ac(hs,hq<0?ht.text.length:0,hq<0?"before":"after")}function v(hy,hD,hr,hu){var hA=a(hD,hy.doc.direction);if(!hA){return aq(hD,hr,hu)}if(hr.ch>=hD.text.length){hr.ch=hD.text.length;hr.sticky="before"}else{if(hr.ch<=0){hr.ch=0;hr.sticky="after"}}var hq=aS(hA,hr.ch,hr.sticky),hs=hA[hq];if(hy.doc.direction=="ltr"&&hs.level%2==0&&(hu>0?hs.to>hr.ch:hs.from<hr.ch)){return aq(hD,hr,hu)}var hB=function(hF,hE){return bH(hD,hF instanceof ac?hF.ch:hF,hE)};var hv;var hz=function(hE){if(!hy.options.lineWrapping){return{begin:0,end:hD.text.length}}hv=hv||bi(hy,hD);return bB(hy,hD,hv,hE)};var ht=hz(hr.sticky=="before"?hB(hr,-1):hr.ch);if(hy.doc.direction=="rtl"||hs.level==1){var hC=(hs.level==1)==(hu<0);var ho=hB(hr,hC?1:-1);if(ho!=null&&(!hC?ho>=hs.from&&ho>=ht.begin:ho<=hs.to&&ho<=ht.end)){var hx=hC?"before":"after";return new ac(hr.line,ho,hx)}}var hp=function(hE,hH,hK){var hG=function(hM,hL){return hL?new ac(hr.line,hB(hM,1),"before"):new ac(hr.line,hM,"after")};for(;hE>=0&&hE<hA.length;hE+=hH){var hF=hA[hE];var hI=(hH>0)==(hF.level!=1);var hJ=hI?hK.begin:hB(hK.end,-1);if(hF.from<=hJ&&hJ<hF.to){return hG(hJ,hI)}hJ=hI?hF.from:hB(hF.to,-1);if(hK.begin<=hJ&&hJ<hK.end){return hG(hJ,hI)}}};var hw=hp(hq+hu,hu,ht);if(hw){return hw}var i=hu>0?ht.end:hB(ht.begin,-1);if(i!=null&&!(hu>0&&i==hD.text.length)){hw=hp(hu>0?0:hA.length-1,hu,hz(i));if(hw){return hw}}return null}var fk={selectAll:av,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),ah)},killLine:function(i){return fK(i,function(hp){if(hp.empty()){var ho=f2(i.doc,hp.head.line).text.length;if(hp.head.ch==ho&&hp.head.line<i.lastLine()){return{from:hp.head,to:ac(hp.head.line+1,0)}}else{return{from:hp.head,to:ac(hp.head.line,ho)}}}else{return{from:hp.from(),to:hp.to()}}})},deleteLine:function(i){return fK(i,function(ho){return({from:ac(ho.from().line,0),to:gB(i.doc,ac(ho.to().line+1,0))})})},delLineLeft:function(i){return fK(i,function(ho){return({from:ac(ho.from().line,0),to:ho.from()})})},delWrappedLineLeft:function(i){return fK(i,function(ho){var hq=i.charCoords(ho.head,"div").top+5;var hp=i.coordsChar({left:0,top:hq},"div");return{from:hp,to:ho.from()}})},delWrappedLineRight:function(i){return fK(i,function(ho){var hq=i.charCoords(ho.head,"div").top+5;var hp=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:hq},"div");return{from:ho.from(),to:hp}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(ac(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(ac(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(ho){return bM(i,ho.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(ho){return ed(i,ho.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(ho){return em(i,ho.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(ho){var hp=i.cursorCoords(ho.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:hp},"div")},dp)},goLineLeft:function(i){return i.extendSelectionsBy(function(ho){var hp=i.cursorCoords(ho.head,"div").top+5;return i.coordsChar({left:0,top:hp},"div")},dp)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(ho){var hp=i.cursorCoords(ho.head,"div").top+5;var hq=i.coordsChar({left:0,top:hp},"div");if(hq.ch<i.getLine(hq.line).search(/\S/)){return ed(i,ho.head)}return hq},dp)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"char")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("\t")},insertSoftTab:function(ho){var hq=[],hp=ho.listSelections(),ht=ho.options.tabSize;for(var hs=0;hs<hp.length;hs++){var hu=hp[hs].from();var hr=cd(ho.getLine(hu.line),hu.ch,ht);hq.push(cQ(ht-hr%ht))}ho.replaceSelections(hq)},defaultTab:function(i){if(i.somethingSelected()){i.indentSelection("add")}else{i.execCommand("insertTab")}},transposeChars:function(i){return df(i,function(){var hq=i.listSelections(),hp=[];for(var hr=0;hr<hq.length;hr++){if(!hq[hr].empty()){continue}var ht=hq[hr].head,ho=f2(i.doc,ht.line).text;if(ho){if(ht.ch==ho.length){ht=new ac(ht.line,ht.ch-1)}if(ht.ch>0){ht=new ac(ht.line,ht.ch+1);i.replaceRange(ho.charAt(ht.ch-1)+ho.charAt(ht.ch-2),ac(ht.line,ht.ch-2),ht,"+transpose")}else{if(ht.line>i.doc.first){var hs=f2(i.doc,ht.line-1).text;if(hs){ht=new ac(ht.line,1);i.replaceRange(ho.charAt(0)+i.doc.lineSeparator()+hs.charAt(hs.length-1),ac(ht.line-1,hs.length-1),ht,"+transpose")}}}}hp.push(new ev(ht,ht))}i.setSelections(hp)})},newlineAndIndent:function(i){return df(i,function(){var ho=i.listSelections();for(var hp=ho.length-1;hp>=0;hp--){i.replaceRange(i.doc.lineSeparator(),ho[hp].anchor,ho[hp].head,"+input")}ho=i.listSelections();for(var hq=0;hq<ho.length;hq++){i.indentLine(ho[hq].from().line,null,true)}gv(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function bM(i,hp){var ho=f2(i.doc,hp);var hq=z(ho);if(hq!=ho){hp=b8(hq)}return ff(true,i,hq,hp,1)}function em(i,hp){var ho=f2(i.doc,hp);var hq=cJ(ho);if(hq!=ho){hp=b8(hq)}return ff(true,i,ho,hp,-1)}function ed(ho,ht){var hs=bM(ho,ht.line);var hp=f2(ho.doc,hs.line);var i=a(hp,ho.doc.direction);if(!i||i[0].level==0){var hr=Math.max(0,hp.text.search(/\S/));var hq=ht.line==hs.line&&ht.ch<=hr&&ht.ch;return ac(hs.line,hq?0:hr,hs.sticky)}return hs}function gL(ho,hr,i){if(typeof hr=="string"){hr=fk[hr];if(!hr){return false}}ho.display.input.ensurePolled();var hq=ho.display.shift,hp=false;try{if(ho.isReadOnly()){ho.state.suppressEdits=true}if(i){ho.display.shift=false}hp=hr(ho)!=cz}finally{ho.display.shift=hq;ho.state.suppressEdits=false}return hp}function eI(hp,hq,hs){for(var hr=0;hr<hp.state.keyMaps.length;hr++){var ho=k(hq,hp.state.keyMaps[hr],hs,hp);if(ho){return ho}}return(hp.options.extraKeys&&k(hq,hp.options.extraKeys,hs,hp))||k(hq,hp.options.keyMap,hs,hp)}var ei=new hn;function bq(ho,hq,hs,hr){var hp=ho.state.keySeq;if(hp){if(fh(hq)){return"handled"}ei.set(50,function(){if(ho.state.keySeq==hp){ho.state.keySeq=null;ho.display.input.reset()}});hq=hp+" "+hq}var i=eI(ho,hq,hr);if(i=="multi"){ho.state.keySeq=hq}if(i=="handled"){am(ho,"keyHandled",ho,hq,hs)}if(i=="handled"||i=="multi"){c7(hs);q(ho)}if(hp&&!i&&/\'$/.test(hq)){c7(hs);return true}return !!i}function f5(i,hp){var ho=gd(hp,true);if(!ho){return false}if(hp.shiftKey&&!i.state.keySeq){return bq(i,"Shift-"+ho,hp,function(hq){return gL(i,hq,true)})||bq(i,ho,hp,function(hq){if(typeof hq=="string"?/^go[A-Z]/.test(hq):hq.motion){return gL(i,hq)}})}else{return bq(i,ho,hp,function(hq){return gL(i,hq)})}}function eT(i,hp,ho){return bq(i,"'"+ho+"'",hp,function(hq){return gL(i,hq,true)})}var dV=null;function r(hq){var i=this;i.curOp.focus=ek();if(a4(i,hq)){return}if(eg&&m<11&&hq.keyCode==27){hq.returnValue=false}var ho=hq.keyCode;i.display.shift=ho==16||hq.shiftKey;var hp=f5(i,hq);if(eC){dV=hp?ho:null;if(!hp&&ho==88&&!dG&&(cu?hq.metaKey:hq.ctrlKey)){i.replaceSelection("",null,"cut")}}if(ho==18&&!/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)){aC(i)}}function aC(ho){var hp=ho.display.lineDiv;gq(hp,"CodeMirror-crosshair");function i(hq){if(hq.keyCode==18||!hq.altKey){h(hp,"CodeMirror-crosshair");eQ(document,"keyup",i);eQ(document,"mouseover",i)}}cj(document,"keyup",i);cj(document,"mouseover",i)}function bu(i){if(i.keyCode==16){this.doc.sel.shift=false}a4(this,i)}function cY(hr){var i=this;if(bo(i.display,hr)||a4(i,hr)||hr.ctrlKey&&!hr.altKey||cu&&hr.metaKey){return}var hq=hr.keyCode,ho=hr.charCode;if(eC&&hq==dV){dV=null;c7(hr);return}if((eC&&(!hr.which||hr.which<10))&&f5(i,hr)){return}var hp=String.fromCharCode(ho==null?hq:ho);if(hp=="\x08"){return}if(eT(i,hr,hp)){return}i.display.input.onKeyPress(hr)}var dz=400;var dT=function(ho,hp,i){this.time=ho;this.pos=hp;this.button=i};dT.prototype.compare=function(ho,hp,i){return this.time+dz>ho&&cE(hp,this.pos)==0&&i==this.button};var dU;var dK;function I(hp,ho){var i=+new Date;if(dK&&dK.compare(i,hp,ho)){dU=dK=null;return"triple"}else{if(dU&&dU.compare(i,hp,ho)){dK=new dT(i,hp,ho);dU=null;return"double"}else{dU=new dT(i,hp,ho);dK=null;return"single"}}}function e9(hr){var i=this,hq=i.display;if(a4(i,hr)||hq.activeTouch&&hq.input.supportsTouch()){return}hq.input.ensurePolled();hq.shift=hr.shiftKey;if(bo(hq,hr)){if(!dt){hq.scroller.draggable=false;setTimeout(function(){return hq.scroller.draggable=true},100)}return}if(n(i,hr)){return}var hs=cO(i,hr),ho=gH(hr),hp=hs?I(hs,ho):"single";window.focus();if(ho==1&&i.state.selectingText){i.state.selectingText(hr)}if(hs&&dd(i,ho,hs,hp,hr)){return}if(ho==1){if(hs){aG(i,hs,hp,hr)}else{if(Q(hr)==hq.scroller){c7(hr)}}}else{if(ho==2){if(hs){gV(i.doc,hs)}setTimeout(function(){return hq.input.focus()},20)}else{if(ho==3){if(hd){aH(i,hr)}else{at(i)}}}}}function dd(i,hp,hs,hr,hq){var ho="Click";if(hr=="double"){ho="Double"+ho}else{if(hr=="triple"){ho="Triple"+ho}}ho=(hp==1?"Left":hp==2?"Middle":"Right")+ho;return bq(i,gX(ho,hq),hq,function(hu){if(typeof hu=="string"){hu=fk[hu]}if(!hu){return false}var ht=false;try{if(i.isReadOnly()){i.state.suppressEdits=true}ht=hu(i,hs)!=cz}finally{i.state.suppressEdits=false}return ht})}function b3(i,hs,hq){var ho=i.getOption("configureMouse");var hr=ho?ho(i,hs,hq):{};if(hr.unit==null){var hp=gA?hq.shiftKey&&hq.metaKey:hq.altKey;hr.unit=hp?"rectangle":hs=="single"?"char":hs=="double"?"word":"line"}if(hr.extend==null||i.doc.extend){hr.extend=i.doc.extend||hq.shiftKey}if(hr.addNew==null){hr.addNew=cu?hq.metaKey:hq.ctrlKey}if(hr.moveOnDrag==null){hr.moveOnDrag=!(cu?hq.altKey:hq.ctrlKey)}return hr}function aG(i,ht,hs,hq){if(eg){setTimeout(cW(t,i),0)}else{i.curOp.focus=ek()}var hp=b3(i,hs,hq);var hr=i.doc.sel,ho;if(i.options.dragDrop&&fv&&!i.isReadOnly()&&hs=="single"&&(ho=hr.contains(ht))>-1&&(cE((ho=hr.ranges[ho]).from(),ht)<0||ht.xRel>0)&&(cE(ho.to(),ht)>0||ht.xRel<0)){bg(i,hq,ht,hp)}else{o(i,hq,ht,hp)}}function bg(hu,i,hr,ho){var hq=hu.display,hs=false;var hp=du(hu,function(hw){if(dt){hq.scroller.draggable=false}hu.state.draggingText=false;eQ(document,"mouseup",hp);eQ(document,"mousemove",hv);eQ(hq.scroller,"dragstart",ht);eQ(hq.scroller,"drop",hp);if(!hs){c7(hw);if(!ho.addNew){gV(hu.doc,hr,null,null,ho.extend)}if(dt||eg&&m==9){setTimeout(function(){document.body.focus();hq.input.focus()},20)}else{hq.input.focus()}}});var hv=function(hw){hs=hs||Math.abs(i.clientX-hw.clientX)+Math.abs(i.clientY-hw.clientY)>=10};var ht=function(){return hs=true};if(dt){hq.scroller.draggable=true}hu.state.draggingText=hp;hp.copy=!ho.moveOnDrag;if(hq.scroller.dragDrop){hq.scroller.dragDrop()}cj(document,"mouseup",hp);cj(document,"mousemove",hv);cj(hq.scroller,"dragstart",ht);cj(hq.scroller,"drop",hp);at(hu);setTimeout(function(){return hq.input.focus()},20)}function eq(ho,hq,hp){if(hp=="char"){return new ev(hq,hq)}if(hp=="word"){return ho.findWordAt(hq)}if(hp=="line"){return new ev(ac(hq.line,0),gB(ho.doc,ac(hq.line+1,0)))}var i=hp(ho,hq);return new ev(i.from,i.to)}function o(hq,hC,hp,hu){var hB=hq.display,hF=hq.doc;c7(hC);var ho,hE,hr=hF.sel,i=hr.ranges;if(hu.addNew&&!hu.extend){hE=hF.sel.contains(hp);if(hE>-1){ho=i[hE]}else{ho=new ev(hp,hp)}}else{ho=hF.sel.primary();hE=hF.sel.primIndex}if(hu.unit=="rectangle"){if(!hu.addNew){ho=new ev(hp,hp)}hp=cO(hq,hC,true,true);hE=-1}else{var hv=eq(hq,hp,hu.unit);if(hu.extend){ho=gh(ho,hv.anchor,hv.head,hu.extend)}else{ho=hv}}if(!hu.addNew){hE=0;cg(hF,new g2([ho],0),R);hr=hF.sel}else{if(hE==-1){hE=i.length;cg(hF,cX(i.concat([ho]),hE),{scroll:false,origin:"*mouse"})}else{if(i.length>1&&i[hE].empty()&&hu.unit=="char"&&!hu.extend){cg(hF,cX(i.slice(0,hE).concat(i.slice(hE+1)),0),{scroll:false,origin:"*mouse"});hr=hF.sel}else{e(hF,hE,ho,R)}}}var hA=hp;function hz(hR){if(cE(hA,hR)==0){return}hA=hR;if(hu.unit=="rectangle"){var hI=[],hO=hq.options.tabSize;var hH=cd(f2(hF,hp.line).text,hp.ch,hO);var hU=cd(f2(hF,hR.line).text,hR.ch,hO);var hJ=Math.min(hH,hU),hS=Math.max(hH,hU);for(var hV=Math.min(hp.line,hR.line),hL=Math.min(hq.lastLine(),Math.max(hp.line,hR.line));hV<=hL;hV++){var hT=f2(hF,hV).text,hK=e3(hT,hJ,hO);if(hJ==hS){hI.push(new ev(ac(hV,hK),ac(hV,hK)))}else{if(hT.length>hK){hI.push(new ev(ac(hV,hK),ac(hV,e3(hT,hS,hO))))}}}if(!hI.length){hI.push(new ev(hp,hp))}cg(hF,cX(hr.ranges.slice(0,hE).concat(hI),hE),{origin:"*mouse",scroll:false});hq.scrollIntoView(hR)}else{var hP=ho;var hN=eq(hq,hR,hu.unit);var hM=hP.anchor,hQ;if(cE(hN.anchor,hM)>0){hQ=hN.head;hM=aB(hP.from(),hN.anchor)}else{hQ=hN.anchor;hM=bR(hP.to(),hN.head)}var hG=hr.ranges.slice(0);hG[hE]=au(hq,new ev(gB(hF,hM),hQ));cg(hF,cX(hG,hE),R)}}var hx=hB.wrapper.getBoundingClientRect();var hs=0;function hD(hI){var hG=++hs;var hK=cO(hq,hI,true,hu.unit=="rectangle");if(!hK){return}if(cE(hK,hA)!=0){hq.curOp.focus=ek();hz(hK);var hJ=ct(hB,hF);if(hK.line>=hJ.to||hK.line<hJ.from){setTimeout(du(hq,function(){if(hs==hG){hD(hI)}}),150)}}else{var hH=hI.clientY<hx.top?-20:hI.clientY>hx.bottom?20:0;if(hH){setTimeout(du(hq,function(){if(hs!=hG){return}hB.scroller.scrollTop+=hH;hD(hI)}),50)}}}function hw(hG){hq.state.selectingText=false;hs=Infinity;c7(hG);hB.input.focus();eQ(document,"mousemove",hy);eQ(document,"mouseup",ht);hF.history.lastSelOrigin=null}var hy=du(hq,function(hG){if(!gH(hG)){hw(hG)}else{hD(hG)}});var ht=du(hq,hw);hq.state.selectingText=ht;cj(document,"mousemove",hy);cj(document,"mouseup",ht)}function au(hC,hv){var hu=hv.anchor;var hz=hv.head;var hy=f2(hC.doc,hu.line);if(cE(hu,hz)==0&&hu.sticky==hz.sticky){return hv}var hr=a(hy);if(!hr){return hv}var hx=aS(hr,hu.ch,hu.sticky),hp=hr[hx];if(hp.from!=hu.ch&&hp.to!=hu.ch){return hv}var ho=hx+((hp.from==hu.ch)==(hp.level!=1)?0:1);if(ho==0||ho==hr.length){return hv}var hw;if(hz.line!=hu.line){hw=(hz.line-hu.line)*(hC.doc.direction=="ltr"?1:-1)>0}else{var ht=aS(hr,hz.ch,hz.sticky);var hq=ht-hx||(hz.ch-hu.ch)*(hp.level==1?-1:1);if(ht==ho-1||ht==ho){hw=hq<0}else{hw=hq>0}}var hs=hr[ho+(hw?-1:0)];var hB=hw==(hs.level==1);var i=hB?hs.from:hs.to,hA=hB?"after":"before";return hu.ch==i&&hu.sticky==hA?hv:new ev(new ac(hu.line,i,hA),hz)}function hm(hy,hu,hw,hx){var hp,ho;if(hu.touches){hp=hu.touches[0].clientX;ho=hu.touches[0].clientY}else{try{hp=hu.clientX;ho=hu.clientY}catch(hu){return false}}if(hp>=Math.floor(hy.display.gutters.getBoundingClientRect().right)){return false}if(hx){c7(hu)}var hv=hy.display;var ht=hv.lineDiv.getBoundingClientRect();if(ho>ht.bottom||!f7(hy,hw)){return b6(hu)}ho-=ht.top-hv.viewOffset;for(var hr=0;hr<hy.options.gutters.length;++hr){var hs=hv.gutters.childNodes[hr];if(hs&&hs.getBoundingClientRect().right>=hp){var hz=b1(hy.doc,ho);var hq=hy.options.gutters[hr];aO(hy,hw,hy,hz,hq,hu);return b6(hu)}}}function n(i,ho){return hm(i,ho,"gutterClick",true)}function aH(i,ho){if(bo(i.display,ho)||dN(i,ho)){return}if(a4(i,ho,"contextmenu")){return}i.display.input.onContextMenu(ho)}function dN(i,ho){if(!f7(i,"gutterContextMenu")){return false}return hm(i,ho,"gutterContextMenu",false)}function dg(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-");ar(i)}var cA={toString:function(){return"CodeMirror.Init"}};var fP={};var bs={};function fp(i){var hp=i.optionHandlers;function ho(hq,ht,hs,hr){i.defaults[hq]=ht;if(hs){hp[hq]=hr?function(hu,hw,hv){if(hv!=cA){hs(hu,hw,hv)}}:hs}}i.defineOption=ho;i.Init=cA;ho("value","",function(hq,hr){return hq.setValue(hr)},true);ho("mode",null,function(hq,hr){hq.doc.modeOption=hr;bK(hq)},true);ho("indentUnit",2,bK,true);ho("indentWithTabs",false);ho("smartIndent",true);ho("tabSize",4,function(hq){eY(hq);ar(hq);ap(hq)},true);ho("lineSeparator",null,function(hq,ht){hq.doc.lineSep=ht;if(!ht){return}var hs=[],hu=hq.doc.first;hq.doc.iter(function(hv){for(var hx=0;;){var hw=hv.text.indexOf(ht,hx);if(hw==-1){break}hx=hw+ht.length;hs.push(ac(hu,hw))}hu++});for(var hr=hs.length-1;hr>=0;hr--){be(hq.doc,ht,hs[hr],ac(hs[hr].line,hs[hr].ch+ht.length))}});ho("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(hq,hs,hr){hq.state.specialChars=new RegExp(hs.source+(hs.test("\t")?"":"|\t"),"g");if(hr!=cA){hq.refresh()}});ho("specialCharPlaceholder",f1,function(hq){return hq.refresh()},true);ho("electricChars",true);ho("inputStyle",eR?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);ho("spellcheck",false,function(hq,hr){return hq.getInputField().spellcheck=hr},true);ho("rtlMoveVisually",!a1);ho("wholeLineUpdateBefore",true);ho("theme","default",function(hq){dg(hq);d3(hq)},true);ho("keyMap","default",function(hq,hu,hr){var hs=gU(hu);var ht=hr!=cA&&gU(hr);if(ht&&ht.detach){ht.detach(hq,hs)}if(hs.attach){hs.attach(hq,ht||null)}});ho("extraKeys",null);ho("configureMouse",null);ho("lineWrapping",false,fo,true);ho("gutters",[],function(hq){cD(hq.options);d3(hq)},true);ho("fixedGutter",true,function(hq,hr){hq.display.gutters.style.left=hr?ew(hq.display)+"px":"0";hq.refresh()},true);ho("coverGutterNextToScrollbar",false,function(hq){return fL(hq)},true);ho("scrollbarStyle","native",function(hq){aN(hq);fL(hq);hq.display.scrollbars.setScrollTop(hq.doc.scrollTop);hq.display.scrollbars.setScrollLeft(hq.doc.scrollLeft)},true);ho("lineNumbers",false,function(hq){cD(hq.options);d3(hq)},true);ho("firstLineNumber",1,d3,true);ho("lineNumberFormatter",function(hq){return hq},d3,true);ho("showCursorWhenSelecting",false,bW,true);ho("resetSelectionOnContextMenu",true);ho("lineWiseCopyCut",true);ho("pasteLinesPerSelection",true);ho("readOnly",false,function(hq,hr){if(hr=="nocursor"){a8(hq);hq.display.input.blur()}hq.display.input.readOnlyChanged(hr)});ho("disableInput",false,function(hq,hr){if(!hr){hq.display.input.reset()}},true);ho("dragDrop",true,g0);ho("allowDropFileTypes",null);ho("cursorBlinkRate",530);ho("cursorScrollMargin",0);ho("cursorHeight",1,bW,true);ho("singleCursorHeightPerLine",true,bW,true);ho("workTime",100);ho("workDelay",100);ho("flattenSpans",true,eY,true);ho("addModeClass",false,eY,true);ho("pollInterval",100);ho("undoDepth",200,function(hq,hr){return hq.doc.history.undoDepth=hr});ho("historyEventDelay",1250);ho("viewportMargin",10,function(hq){return hq.refresh()},true);ho("maxHighlightLength",10000,eY,true);ho("moveInputWithCursor",true,function(hq,hr){if(!hr){hq.display.input.resetPosition()}});ho("tabindex",null,function(hq,hr){return hq.display.input.getField().tabIndex=hr||""});ho("autofocus",null);ho("direction","ltr",function(hq,hr){return hq.doc.setDirection(hr)},true)}function d3(i){eN(i);ap(i);fm(i)}function g0(ho,hr,hp){var hs=hp&&hp!=cA;if(!hr!=!hs){var hq=ho.display.dragFunctions;var i=hr?cj:eQ;i(ho.display.scroller,"dragstart",hq.start);i(ho.display.scroller,"dragenter",hq.enter);i(ho.display.scroller,"dragover",hq.over);i(ho.display.scroller,"dragleave",hq.leave);i(ho.display.scroller,"drop",hq.drop)}}function fo(i){if(i.options.lineWrapping){gq(i.display.wrapper,"CodeMirror-wrap");i.display.sizer.style.minWidth="";i.display.sizerWidth=null}else{h(i.display.wrapper,"CodeMirror-wrap");f(i)}af(i);ap(i);ar(i);setTimeout(function(){return fL(i)},100)}function K(ho,hq){var hv=this;if(!(this instanceof K)){return new K(ho,hq)}this.options=hq=hq?aZ(hq):{};aZ(fP,hq,false);cD(hq);var hu=hq.value;if(typeof hu=="string"){hu=new aD(hu,hq.mode,null,hq.lineSeparator,hq.direction)}this.doc=hu;var hp=new K.inputStyles[hq.inputStyle](this);var ht=this.display=new fr(ho,hu,hp);ht.wrapper.CodeMirror=this;eN(this);dg(this);if(hq.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}aN(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new hn(),keySeq:null,specialChars:null};if(hq.autofocus&&!eR){ht.input.focus()}if(eg&&m<11){setTimeout(function(){return hv.display.input.reset(true)},20)}gK(this);bw();db(this);this.curOp.forceUpdate=true;eM(this,hu);if((hq.autofocus&&!eR)||this.hasFocus()){setTimeout(cW(c2,this),20)}else{a8(this)}for(var hs in bs){if(bs.hasOwnProperty(hs)){bs[hs](hv,hq[hs],cA)}}eF(this);if(hq.finishInit){hq.finishInit(this)}for(var hr=0;hr<bl.length;++hr){bl[hr](hv)}aw(this);if(dt&&hq.lineWrapping&&getComputedStyle(ht.lineDiv).textRendering=="optimizelegibility"){ht.lineDiv.style.textRendering="auto"}}K.defaults=fP;K.optionHandlers=bs;function gK(ho){var hs=ho.display;cj(hs.scroller,"mousedown",du(ho,e9));if(eg&&m<11){cj(hs.scroller,"dblclick",du(ho,function(hw){if(a4(ho,hw)){return}var hx=cO(ho,hw);if(!hx||n(ho,hw)||bo(ho.display,hw)){return}c7(hw);var hv=ho.findWordAt(hx);gV(ho.doc,hv.anchor,hv.head)}))}else{cj(hs.scroller,"dblclick",function(hv){return a4(ho,hv)||c7(hv)})}if(!hd){cj(hs.scroller,"contextmenu",function(hv){return aH(ho,hv)})}var hu,i={end:0};function ht(){if(hs.activeTouch){hu=setTimeout(function(){return hs.activeTouch=null},1000);i=hs.activeTouch;i.end=+new Date}}function hq(hv){if(hv.touches.length!=1){return false}var hw=hv.touches[0];return hw.radiusX<=1&&hw.radiusY<=1}function hp(hy,hv){if(hv.left==null){return true}var hx=hv.left-hy.left,hw=hv.top-hy.top;return hx*hx+hw*hw>20*20}cj(hs.scroller,"touchstart",function(hw){if(!a4(ho,hw)&&!hq(hw)&&!n(ho,hw)){hs.input.ensurePolled();clearTimeout(hu);var hv=+new Date;hs.activeTouch={start:hv,moved:false,prev:hv-i.end<=300?i:null};if(hw.touches.length==1){hs.activeTouch.left=hw.touches[0].pageX;hs.activeTouch.top=hw.touches[0].pageY}}});cj(hs.scroller,"touchmove",function(){if(hs.activeTouch){hs.activeTouch.moved=true}});cj(hs.scroller,"touchend",function(hw){var hy=hs.activeTouch;if(hy&&!bo(hs,hw)&&hy.left!=null&&!hy.moved&&new Date-hy.start<300){var hx=ho.coordsChar(hs.activeTouch,"page"),hv;if(!hy.prev||hp(hy,hy.prev)){hv=new ev(hx,hx)}else{if(!hy.prev.prev||hp(hy,hy.prev.prev)){hv=ho.findWordAt(hx)}else{hv=new ev(ac(hx.line,0),gB(ho.doc,ac(hx.line+1,0)))}}ho.setSelection(hv.anchor,hv.head);ho.focus();c7(hw)}ht()});cj(hs.scroller,"touchcancel",ht);cj(hs.scroller,"scroll",function(){if(hs.scroller.clientHeight){B(ho,hs.scroller.scrollTop);bY(ho,hs.scroller.scrollLeft,true);aO(ho,"scroll",ho)}});cj(hs.scroller,"mousewheel",function(hv){return c(ho,hv)});cj(hs.scroller,"DOMMouseScroll",function(hv){return c(ho,hv)});cj(hs.wrapper,"scroll",function(){return hs.wrapper.scrollTop=hs.wrapper.scrollLeft=0});hs.dragFunctions={enter:function(hv){if(!a4(ho,hv)){e4(hv)}},over:function(hv){if(!a4(ho,hv)){hl(ho,hv);e4(hv)}},start:function(hv){return U(ho,hv)},drop:du(ho,bx),leave:function(hv){if(!a4(ho,hv)){dH(ho)}}};var hr=hs.input.getField();cj(hr,"keyup",function(hv){return bu.call(ho,hv)});cj(hr,"keydown",du(ho,r));cj(hr,"keypress",du(ho,cY));cj(hr,"focus",function(hv){return c2(ho,hv)});cj(hr,"blur",function(hv){return a8(ho,hv)})}var bl=[];K.defineInitHook=function(i){return bl.push(i)};function ak(hD,hs,hC,hq){var hB=hD.doc,hp;if(hC==null){hC="add"}if(hC=="smart"){if(!hB.mode.indent){hC="prev"}else{hp=fJ(hD,hs).state}}var hw=hD.options.tabSize;var hE=f2(hB,hs),hv=cd(hE.text,null,hw);if(hE.stateAfter){hE.stateAfter=null}var ho=hE.text.match(/^\s*/)[0],hz;if(!hq&&!/\S/.test(hE.text)){hz=0;hC="not"}else{if(hC=="smart"){hz=hB.mode.indent(hp,hE.text.slice(ho.length),hE.text);if(hz==cz||hz>150){if(!hq){return}hC="prev"}}}if(hC=="prev"){if(hs>hB.first){hz=cd(f2(hB,hs-1).text,null,hw)}else{hz=0}}else{if(hC=="add"){hz=hv+hD.options.indentUnit}else{if(hC=="subtract"){hz=hv-hD.options.indentUnit}else{if(typeof hC=="number"){hz=hv+hC}}}}hz=Math.max(0,hz);var hA="",hy=0;if(hD.options.indentWithTabs){for(var ht=Math.floor(hz/hw);ht;--ht){hy+=hw;hA+="\t"}}if(hy<hz){hA+=cQ(hz-hy)}if(hA!=ho){be(hB,hA,ac(hs,0),ac(hs,ho.length),"+input");hE.stateAfter=null;return true}else{for(var hr=0;hr<hB.sel.ranges.length;hr++){var hu=hB.sel.ranges[hr];if(hu.head.line==hs&&hu.head.ch<ho.length){var hx=ac(hs,ho.length);e(hB,hr,new ev(hx,hx));break}}}}var bz=null;function dA(i){bz=i}function gW(hD,ht,hr,hq,hC){var hB=hD.doc;hD.display.shift=false;if(!hq){hq=hB.sel}var hs=hD.state.pasteIncoming||hC=="paste";var hw=gM(ht),ho=null;if(hs&&hq.ranges.length>1){if(bz&&bz.text.join("\n")==ht){if(hq.ranges.length%bz.text.length==0){ho=[];for(var hu=0;hu<bz.text.length;hu++){ho.push(hB.splitLines(bz.text[hu]))}}}else{if(hw.length==hq.ranges.length&&hD.options.pasteLinesPerSelection){ho=cf(hw,function(i){return[i]})}}}var hx;for(var hp=hq.ranges.length-1;hp>=0;hp--){var hv=hq.ranges[hp];var hA=hv.from(),hz=hv.to();if(hv.empty()){if(hr&&hr>0){hA=ac(hA.line,hA.ch-hr)}else{if(hD.state.overwrite&&!hs){hz=ac(hz.line,Math.min(f2(hB,hz.line).text.length,hz.ch+gw(hw).length))}else{if(bz&&bz.lineWise&&bz.text.join("\n")==ht){hA=hz=ac(hA.line,0)}}}}hx=hD.curOp.updateInput;var hy={from:hA,to:hz,text:ho?ho[hp%ho.length]:hw,origin:hC||(hs?"paste":hD.state.cutIncoming?"cut":"+input")};bt(hD.doc,hy);am(hD,"inputRead",hD,hy)}if(ht&&!hs){gS(hD,ht)}gv(hD);hD.curOp.updateInput=hx;hD.curOp.typing=true;hD.state.pasteIncoming=hD.state.cutIncoming=false}function bn(hp,i){var ho=hp.clipboardData&&hp.clipboardData.getData("Text");if(ho){hp.preventDefault();if(!i.isReadOnly()&&!i.options.disableInput){df(i,function(){return gW(i,ho,0,null,"paste")})}return true}}function gS(ho,hs){if(!ho.options.electricChars||!ho.options.smartIndent){return}var ht=ho.doc.sel;for(var hr=ht.ranges.length-1;hr>=0;hr--){var hp=ht.ranges[hr];if(hp.head.ch>100||(hr&&ht.ranges[hr-1].head.line==hp.head.line)){continue}var hu=ho.getModeAt(hp.head);var hv=false;if(hu.electricChars){for(var hq=0;hq<hu.electricChars.length;hq++){if(hs.indexOf(hu.electricChars.charAt(hq))>-1){hv=ak(ho,hp.head.line,"smart");break}}}else{if(hu.electricInput){if(hu.electricInput.test(f2(ho.doc,hp.head.line).text.slice(0,hp.head.ch))){hv=ak(ho,hp.head.line,"smart")}}}if(hv){am(ho,"electricInput",ho,hp.head.line)}}}function dO(ho){var ht=[],hq=[];for(var hr=0;hr<ho.doc.sel.ranges.length;hr++){var hp=ho.doc.sel.ranges[hr].head.line;var hs={anchor:ac(hp,0),head:ac(hp+1,0)};hq.push(hs);ht.push(ho.getRange(hs.anchor,hs.head))}return{text:ht,ranges:hq}}function gI(ho,i){ho.setAttribute("autocorrect","off");ho.setAttribute("autocapitalize","off");ho.setAttribute("spellcheck",!!i)}function ba(){var i=g3("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var ho=g3("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(dt){i.style.width="1000px"}else{i.setAttribute("wrap","off")}if(fO){i.style.border="1px solid black"}gI(i);return ho}function el(i){var ho=i.optionHandlers;var hp=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(hs,ht){var hr=this.options,hq=hr[hs];if(hr[hs]==ht&&hs!="mode"){return}hr[hs]=ht;if(ho.hasOwnProperty(hs)){du(this,ho[hs])(this,ht,hq)}aO(this,"optionChange",this,hs)},getOption:function(hq){return this.options[hq]},getDoc:function(){return this.doc},addKeyMap:function(hr,hq){this.state.keyMaps[hq?"push":"unshift"](gU(hr))},removeKeyMap:function(hr){var hs=this.state.keyMaps;for(var hq=0;hq<hs.length;++hq){if(hs[hq]==hr||hs[hq].name==hr){hs.splice(hq,1);return true}}},addOverlay:dE(function(hq,hr){var hs=hq.token?hq:i.getMode(this.options,hq);if(hs.startState){throw new Error("Overlays may not be stateful.")}cx(this.state.overlays,{mode:hs,modeSpec:hq,opaque:hr&&hr.opaque,priority:(hr&&hr.priority)||0},function(ht){return ht.priority});this.state.modeGen++;ap(this)}),removeOverlay:dE(function(hq){var hu=this;var hs=this.state.overlays;for(var hr=0;hr<hs.length;++hr){var ht=hs[hr].modeSpec;if(ht==hq||typeof hq=="string"&&ht.name==hq){hs.splice(hr,1);hu.state.modeGen++;ap(hu);return}}}),indentLine:dE(function(hs,hq,hr){if(typeof hq!="string"&&typeof hq!="number"){if(hq==null){hq=this.options.smartIndent?"smart":"prev"}else{hq=hq?"add":"subtract"}}if(cw(this.doc,hs)){ak(this,hs,hq,hr)}}),indentSelection:dE(function(hA){var hw=this;var hq=this.doc.sel.ranges,ht=-1;for(var hv=0;hv<hq.length;hv++){var hx=hq[hv];if(!hx.empty()){var hy=hx.from(),hz=hx.to();var hr=Math.max(ht,hy.line);ht=Math.min(hw.lastLine(),hz.line-(hz.ch?0:1))+1;for(var hu=hr;hu<ht;++hu){ak(hw,hu,hA)}var hs=hw.doc.sel.ranges;if(hy.ch==0&&hq.length==hs.length&&hs[hv].from().ch>0){e(hw.doc,hv,new ev(hy,hs[hv].to()),ah)}}else{if(hx.head.line>ht){ak(hw,hx.head.line,hA,true);ht=hx.head.line;if(hv==hw.doc.sel.primIndex){gv(hw)}}}}}),getTokenAt:function(hr,hq){return cR(this,hr,hq)},getLineTokens:function(hr,hq){return cR(this,ac(hr),hq,true)},getTokenTypeAt:function(hx){hx=gB(this.doc,hx);var ht=dC(this,f2(this.doc,hx.line));var hv=0,hw=(ht.length-1)/2,hs=hx.ch;var hr;if(hs==0){hr=ht[2]}else{for(;;){var hq=(hv+hw)>>1;if((hq?ht[hq*2-1]:0)>=hs){hw=hq}else{if(ht[hq*2+1]<hs){hv=hq+1}else{hr=ht[hq*2+2];break}}}}var hu=hr?hr.indexOf("overlay "):-1;return hu<0?hr:hu==0?null:hr.slice(0,hu-1)},getModeAt:function(hr){var hq=this.doc.mode;if(!hq.innerMode){return hq}return i.innerMode(hq,this.getTokenAt(hr).state).mode},getHelper:function(hr,hq){return this.getHelpers(hr,hq)[0]},getHelpers:function(hx,hw){var hu=this;var hz=[];if(!hp.hasOwnProperty(hw)){return hz}var hs=hp[hw],hv=this.getModeAt(hx);if(typeof hv[hw]=="string"){if(hs[hv[hw]]){hz.push(hs[hv[hw]])}}else{if(hv[hw]){for(var ht=0;ht<hv[hw].length;ht++){var hr=hs[hv[hw][ht]];if(hr){hz.push(hr)}}}else{if(hv.helperType&&hs[hv.helperType]){hz.push(hs[hv.helperType])}else{if(hs[hv.name]){hz.push(hs[hv.name])}}}}for(var hq=0;hq<hs._global.length;hq++){var hy=hs._global[hq];if(hy.pred(hv,hu)&&dP(hz,hy.val)==-1){hz.push(hy.val)}}return hz},getStateAfter:function(hr,hq){var hs=this.doc;hr=dy(hs,hr==null?hs.first+hs.size-1:hr);return fJ(this,hr+1,hq).state},cursorCoords:function(ht,hr){var hs,hq=this.doc.sel.primary();if(ht==null){hs=hq.head}else{if(typeof ht=="object"){hs=gB(this.doc,ht)}else{hs=ht?hq.from():hq.to()}}return es(this,hs,hr||"page")},charCoords:function(hr,hq){return dc(this,gB(this.doc,hr),hq||"page")},coordsChar:function(hq,hr){hq=hj(this,hq,hr||"page");return gJ(this,hq.left,hq.top)},lineAtHeight:function(hq,hr){hq=hj(this,{top:hq,left:0},hr||"page").top;return b1(this.doc,hq+this.display.viewOffset)},heightAtLine:function(hr,hv,hu){var hq=false,hs;if(typeof hr=="number"){var ht=this.doc.first+this.doc.size-1;if(hr<this.doc.first){hr=this.doc.first}else{if(hr>ht){hr=ht;hq=true}}hs=f2(this.doc,hr)}else{hs=hr}return fB(this,hs,{top:0,left:0},hv||"page",hu||hq).top+(hq?this.doc.height-b7(hs):0)},defaultTextHeight:function(){return bb(this.display)},defaultCharWidth:function(){return d8(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(hv,hs,hx,ht,hz){var hu=this.display;hv=es(this,gB(this.doc,hv));var hw=hv.bottom,hr=hv.left;hs.style.position="absolute";hs.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(hs);hu.sizer.appendChild(hs);if(ht=="over"){hw=hv.top}else{if(ht=="above"||ht=="near"){var hq=Math.max(hu.wrapper.clientHeight,this.doc.height),hy=Math.max(hu.sizer.clientWidth,hu.lineSpace.clientWidth);if((ht=="above"||hv.bottom+hs.offsetHeight>hq)&&hv.top>hs.offsetHeight){hw=hv.top-hs.offsetHeight}else{if(hv.bottom+hs.offsetHeight<=hq){hw=hv.bottom}}if(hr+hs.offsetWidth>hy){hr=hy-hs.offsetWidth}}}hs.style.top=hw+"px";hs.style.left=hs.style.right="";if(hz=="right"){hr=hu.sizer.clientWidth-hs.offsetWidth;hs.style.right="0px"}else{if(hz=="left"){hr=0}else{if(hz=="middle"){hr=(hu.sizer.clientWidth-hs.offsetWidth)/2}}hs.style.left=hr+"px"}if(hx){H(this,{left:hr,top:hw,right:hr+hs.offsetWidth,bottom:hw+hs.offsetHeight})}},triggerOnKeyDown:dE(r),triggerOnKeyPress:dE(cY),triggerOnKeyUp:bu,triggerOnMouseDown:dE(e9),execCommand:function(hq){if(fk.hasOwnProperty(hq)){return fk[hq].call(null,this)}},triggerElectric:dE(function(hq){gS(this,hq)}),findPosH:function(hx,ht,hu,hr){var hw=this;var hq=1;if(ht<0){hq=-1;ht=-ht}var hv=gB(this.doc,hx);for(var hs=0;hs<ht;++hs){hv=bP(hw.doc,hv,hq,hu,hr);if(hv.hitSide){break}}return hv},moveH:dE(function(hq,hr){var hs=this;this.extendSelectionsBy(function(ht){if(hs.display.shift||hs.doc.extend||ht.empty()){return bP(hs.doc,ht.head,hq,hr,hs.options.rtlMoveVisually)}else{return hq<0?ht.from():ht.to()}},dp)}),deleteH:dE(function(hq,hr){var hs=this.doc.sel,ht=this.doc;if(hs.somethingSelected()){ht.replaceSelection("",null,"+delete")}else{fK(this,function(hv){var hu=bP(ht,hv.head,hq,hr,false);return hq<0?{from:hu,to:hv.head}:{from:hv.head,to:hu}})}}),findPosV:function(hw,ht,hx,hz){var hs=this;var hq=1,hv=hz;if(ht<0){hq=-1;ht=-ht}var hy=gB(this.doc,hw);for(var hr=0;hr<ht;++hr){var hu=es(hs,hy,"div");if(hv==null){hv=hu.left}else{hu.left=hv}hy=bJ(hs,hu,hq,hx);if(hy.hitSide){break}}return hy},moveV:dE(function(hq,hs){var hw=this;var hu=this.doc,ht=[];var hv=!this.display.shift&&!hu.extend&&hu.sel.somethingSelected();hu.extendSelectionsBy(function(hx){if(hv){return hq<0?hx.from():hx.to()}var hz=es(hw,hx.head,"div");if(hx.goalColumn!=null){hz.left=hx.goalColumn}ht.push(hz.left);var hy=bJ(hw,hz,hq,hs);if(hs=="page"&&hx==hu.sel.primary()){c9(hw,dc(hw,hy,"div").top-hz.top)}return hy},dp);if(ht.length){for(var hr=0;hr<hu.sel.ranges.length;hr++){hu.sel.ranges[hr].goalColumn=ht[hr]}}}),findWordAt:function(hx){var hv=this.doc,ht=f2(hv,hx.line).text;var hw=hx.ch,hs=hx.ch;if(ht){var hu=this.getHelper(hx,"wordChars");if((hx.sticky=="before"||hs==ht.length)&&hw){--hw}else{++hs}var hr=ht.charAt(hw);var hq=c1(hr,hu)?function(hy){return c1(hy,hu)}:/\s/.test(hr)?function(hy){return/\s/.test(hy)}:function(hy){return(!/\s/.test(hy)&&!c1(hy))};while(hw>0&&hq(ht.charAt(hw-1))){--hw}while(hs<ht.length&&hq(ht.charAt(hs))){++hs}}return new ev(ac(hx.line,hw),ac(hx.line,hs))},toggleOverwrite:function(hq){if(hq!=null&&hq==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){gq(this.display.cursorDiv,"CodeMirror-overwrite")}else{h(this.display.cursorDiv,"CodeMirror-overwrite")}aO(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==ek()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:dE(function(hq,hr){fw(this,hq,hr)}),getScrollInfo:function(){var hq=this.display.scroller;return{left:hq.scrollLeft,top:hq.scrollTop,height:hq.scrollHeight-dl(this)-this.display.barHeight,width:hq.scrollWidth-dl(this)-this.display.barWidth,clientHeight:dn(this),clientWidth:dS(this)}},scrollIntoView:dE(function(hq,hr){if(hq==null){hq={from:this.doc.sel.primary().head,to:null};if(hr==null){hr=this.options.cursorScrollMargin}}else{if(typeof hq=="number"){hq={from:ac(hq,0),to:null}}else{if(hq.from==null){hq={from:hq,to:null}}}}if(!hq.to){hq.to=hq.from}hq.margin=hr||0;if(hq.from.line!=null){cB(this,hq)}else{cb(this,hq.from,hq.to,hq.margin)}}),setSize:dE(function(hs,hq){var hu=this;var hr=function(hv){return typeof hv=="number"||/^\d+$/.test(String(hv))?hv+"px":hv};if(hs!=null){this.display.wrapper.style.width=hr(hs)}if(hq!=null){this.display.wrapper.style.height=hr(hq)}if(this.options.lineWrapping){a0(this)}var ht=this.display.viewFrom;this.doc.iter(ht,this.display.viewTo,function(hv){if(hv.widgets){for(var hw=0;hw<hv.widgets.length;hw++){if(hv.widgets[hw].noHScroll){W(hu,ht,"widget");break}}}++ht});this.curOp.forceUpdate=true;aO(this,"refresh",this)}),operation:function(hq){return df(this,hq)},startOperation:function(){return db(this)},endOperation:function(){return aw(this)},refresh:dE(function(){var hq=this.display.cachedTextHeight;ap(this);this.curOp.forceUpdate=true;ar(this);fw(this,this.doc.scrollLeft,this.doc.scrollTop);dx(this);if(hq==null||Math.abs(hq-bb(this.display))>0.5){af(this)}aO(this,"refresh",this)}),swapDoc:dE(function(hr){var hq=this.doc;hq.cm=null;eM(this,hr);ar(this);this.display.input.reset();fw(this,hr.scrollLeft,hr.scrollTop);this.curOp.forceScroll=true;am(this,"swapDoc",this,hq);return hq}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bT(i);i.registerHelper=function(hr,hq,hs){if(!hp.hasOwnProperty(hr)){hp[hr]=i[hr]={_global:[]}}hp[hr][hq]=hs};i.registerGlobalHelper=function(hs,hr,hq,ht){i.registerHelper(hs,hr,ht);hp[hs]._global.push({pred:hq,val:ht})}}function bP(hz,hy,hq,hA,ho){var hr=hy;var hv=hq;var hu=f2(hz,hy.line);function i(){var hE=hy.line+hq;if(hE<hz.first||hE>=hz.first+hz.size){return false}hy=new ac(hE,hy.ch,hy.sticky);return hu=f2(hz,hE)}function hs(hF){var hE;if(ho){hE=v(hz.cm,hu,hy,hq)}else{hE=aq(hu,hy,hq)}if(hE==null){if(!hF&&i()){hy=ff(ho,hz.cm,hu,hy.line,hq)}else{return false}}else{hy=hE}return true}if(hA=="char"){hs()}else{if(hA=="column"){hs(true)}else{if(hA=="word"||hA=="group"){var hx=null,hC=hA=="group";var hp=hz.cm&&hz.cm.getHelper(hy,"wordChars");for(var ht=true;;ht=false){if(hq<0&&!hs(!ht)){break}var hB=hu.text.charAt(hy.ch)||"\n";var hw=c1(hB,hp)?"w":hC&&hB=="\n"?"n":!hC||/\s/.test(hB)?null:"p";if(hC&&!ht&&!hw){hw="s"}if(hx&&hx!=hw){if(hq<0){hq=1;hs();hy.sticky="after"}break}if(hw){hx=hw}if(hq>0&&!hs(!ht)){break}}}}}var hD=ch(hz,hy,hr,hv,true);if(ad(hr,hD)){hD.hitSide=true}return hD}function bJ(hw,hr,ho,hv){var hu=hw.doc,ht=hr.left,hs;if(hv=="page"){var hq=Math.min(hw.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var i=Math.max(hq-0.5*bb(hw.display),3);hs=(ho>0?hr.bottom:hr.top)+ho*i}else{if(hv=="line"){hs=ho>0?hr.bottom+3:hr.top-3}}var hp;for(;;){hp=gJ(hw,ht,hs);if(!hp.outside){break}if(ho<0?hs<=0:hs>=hu.height){hp.hitSide=true;break}hs+=ho*5}return hp}var d1=function(i){this.cm=i;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new hn();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};d1.prototype.init=function(hq){var hs=this;var hp=this,i=hp.cm;var hr=hp.div=hq.lineDiv;gI(hr,i.options.spellcheck);cj(hr,"paste",function(ht){if(a4(i,ht)||bn(ht,i)){return}if(m<=11){setTimeout(du(i,function(){return hs.updateFromDOM()}),20)}});cj(hr,"compositionstart",function(ht){hs.composing={data:ht.data,done:false}});cj(hr,"compositionupdate",function(ht){if(!hs.composing){hs.composing={data:ht.data,done:false}}});cj(hr,"compositionend",function(ht){if(hs.composing){if(ht.data!=hs.composing.data){hs.readFromDOMSoon()}hs.composing.done=true}});cj(hr,"touchstart",function(){return hp.forceCompositionEnd()});cj(hr,"input",function(){if(!hs.composing){hs.readFromDOMSoon()}});function ho(hx){if(a4(i,hx)){return}if(i.somethingSelected()){dA({lineWise:false,text:i.getSelections()});if(hx.type=="cut"){i.replaceSelection("",null,"cut")}}else{if(!i.options.lineWiseCopyCut){return}else{var hu=dO(i);dA({lineWise:true,text:hu.text});if(hx.type=="cut"){i.operation(function(){i.setSelections(hu.ranges,0,ah);i.replaceSelection("",null,"cut")})}}}if(hx.clipboardData){hx.clipboardData.clearData();var hw=bz.text.join("\n");hx.clipboardData.setData("Text",hw);if(hx.clipboardData.getData("Text")==hw){hx.preventDefault();return}}var hv=ba(),hy=hv.firstChild;i.display.lineSpace.insertBefore(hv,i.display.lineSpace.firstChild);hy.value=bz.text.join("\n");var ht=document.activeElement;eh(hy);setTimeout(function(){i.display.lineSpace.removeChild(hv);ht.focus();if(ht==hr){hp.showPrimarySelection()}},50)}cj(hr,"copy",ho);cj(hr,"cut",ho)};d1.prototype.prepareSelection=function(){var i=gz(this.cm,false);i.focus=this.cm.state.focused;return i};d1.prototype.showSelection=function(ho,i){if(!ho||!this.cm.display.view.length){return}if(ho.focus||i){this.showPrimarySelection()}this.showMultipleSelections(ho)};d1.prototype.showPrimarySelection=function(){var hr=window.getSelection(),hB=this.cm,hu=hB.doc.sel.primary();var hz=hu.from(),hA=hu.to();if(hB.display.viewTo==hB.display.viewFrom||hz.line>=hB.display.viewTo||hA.line<hB.display.viewFrom){hr.removeAllRanges();return}var hs=aI(hB,hr.anchorNode,hr.anchorOffset);var hw=aI(hB,hr.focusNode,hr.focusOffset);if(hs&&!hs.bad&&hw&&!hw.bad&&cE(aB(hs,hw),hz)==0&&cE(bR(hs,hw),hA)==0){return}var hy=hB.display.view;var hq=(hz.line>=hB.display.viewFrom&&c0(hB,hz))||{node:hy[0].measure.map[2],offset:0};var hv=hA.line<hB.display.viewTo&&c0(hB,hA);if(!hv){var hp=hy[hy.length-1].measure;var ho=hp.maps?hp.maps[hp.maps.length-1]:hp.map;hv={node:ho[ho.length-1],offset:ho[ho.length-2]-ho[ho.length-3]}}if(!hq||!hv){hr.removeAllRanges();return}var ht=hr.rangeCount&&hr.getRangeAt(0),i;try{i=cM(hq.node,hq.offset,hv.offset,hv.node)}catch(hx){}if(i){if(!cP&&hB.state.focused){hr.collapse(hq.node,hq.offset);if(!i.collapsed){hr.removeAllRanges();hr.addRange(i)}}else{hr.removeAllRanges();hr.addRange(i)}if(ht&&hr.anchorNode==null){hr.addRange(ht)}else{if(cP){this.startGracePeriod()}}}this.rememberSelection()};d1.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){i.gracePeriod=false;if(i.selectionChanged()){i.cm.operation(function(){return i.cm.curOp.selectionChanged=true})}},20)};d1.prototype.showMultipleSelections=function(i){ce(this.cm.display.cursorDiv,i.cursors);ce(this.cm.display.selectionDiv,i.selection)};d1.prototype.rememberSelection=function(){var i=window.getSelection();this.lastAnchorNode=i.anchorNode;this.lastAnchorOffset=i.anchorOffset;this.lastFocusNode=i.focusNode;this.lastFocusOffset=i.focusOffset};d1.prototype.selectionInEditor=function(){var ho=window.getSelection();if(!ho.rangeCount){return false}var i=ho.getRangeAt(0).commonAncestorContainer;return he(this.div,i)};d1.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};d1.prototype.blur=function(){this.div.blur()};d1.prototype.getField=function(){return this.div};d1.prototype.supportsTouch=function(){return true};d1.prototype.receivedFocus=function(){var i=this;if(this.selectionInEditor()){this.pollSelection()}else{df(this.cm,function(){return i.cm.curOp.selectionChanged=true})}function ho(){if(i.cm.state.focused){i.pollSelection();i.polling.set(i.cm.options.pollInterval,ho)}}this.polling.set(this.cm.options.pollInterval,ho)};d1.prototype.selectionChanged=function(){var i=window.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset};d1.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var hq=window.getSelection(),i=this.cm;if(aY&&dJ&&this.cm.options.gutters.length&&g5(hq.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var ho=aI(i,hq.anchorNode,hq.anchorOffset);var hp=aI(i,hq.focusNode,hq.focusOffset);if(ho&&hp){df(i,function(){cg(i.doc,fC(ho,hp),ah);if(ho.bad||hp.bad){i.curOp.selectionChanged=true}})}};d1.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var hx=this.cm,hH=hx.display,hF=hx.doc.sel.primary();var hG=hF.from(),hr=hF.to();if(hG.ch==0&&hG.line>hx.firstLine()){hG=ac(hG.line-1,f2(hx.doc,hG.line-1).length)}if(hr.ch==f2(hx.doc,hr.line).text.length&&hr.line<hx.lastLine()){hr=ac(hr.line+1,0)}if(hG.line<hH.viewFrom||hr.line>hH.viewTo-1){return false}var hu,hs,hw;if(hG.line==hH.viewFrom||(hu=dY(hx,hG.line))==0){hs=b8(hH.view[0].line);hw=hH.view[0].node}else{hs=b8(hH.view[hu].line);hw=hH.view[hu-1].node.nextSibling}var hE=dY(hx,hr.line);var hz,hC;if(hE==hH.view.length-1){hz=hH.viewTo-1;hC=hH.lineDiv.lastChild}else{hz=b8(hH.view[hE+1].line)-1;hC=hH.view[hE+1].node.previousSibling}if(!hw){return false}var hI=hx.doc.splitLines(gZ(hx,hw,hC,hs,hz));var hB=g6(hx.doc,ac(hs,0),ac(hz,f2(hx.doc,hz).text.length));while(hI.length>1&&hB.length>1){if(gw(hI)==gw(hB)){hI.pop();hB.pop();hz--}else{if(hI[0]==hB[0]){hI.shift();hB.shift();hs++}else{break}}}var hD=0,hp=0;var hy=hI[0],ho=hB[0],i=Math.min(hy.length,ho.length);while(hD<i&&hy.charCodeAt(hD)==ho.charCodeAt(hD)){++hD}var hv=gw(hI),hJ=gw(hB);var hq=Math.min(hv.length-(hI.length==1?hD:0),hJ.length-(hB.length==1?hD:0));while(hp<hq&&hv.charCodeAt(hv.length-hp-1)==hJ.charCodeAt(hJ.length-hp-1)){++hp}if(hI.length==1&&hB.length==1&&hs==hG.line){while(hD&&hD>hG.ch&&hv.charCodeAt(hv.length-hp-1)==hJ.charCodeAt(hJ.length-hp-1)){hD--;hp++}}hI[hI.length-1]=hv.slice(0,hv.length-hp).replace(/^\u200b+/,"");hI[0]=hI[0].slice(hD).replace(/\u200b+$/,"");var ht=ac(hs,hD);var hA=ac(hz,hB.length?gw(hB).length-hp:0);if(hI.length>1||hI[0]||cE(ht,hA)){be(hx.doc,hI,ht,hA,"+input");return true}};d1.prototype.ensurePolled=function(){this.forceCompositionEnd()};d1.prototype.reset=function(){this.forceCompositionEnd()};d1.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};d1.prototype.readFromDOMSoon=function(){var i=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){i.readDOMTimeout=null;if(i.composing){if(i.composing.done){i.composing=null}else{return}}i.updateFromDOM()},80)};d1.prototype.updateFromDOM=function(){var i=this;if(this.cm.isReadOnly()||!this.pollContent()){df(this.cm,function(){return ap(i.cm)})}};d1.prototype.setUneditable=function(i){i.contentEditable="false"};d1.prototype.onKeyPress=function(i){if(i.charCode==0){return}i.preventDefault();if(!this.cm.isReadOnly()){du(this.cm,gW)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0)}};d1.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")};d1.prototype.onContextMenu=function(){};d1.prototype.resetPosition=function(){};d1.prototype.needsContentAttribute=true;function c0(ht,hr){var hs=fZ(ht,hr.line);if(!hs||hs.hidden){return null}var hv=f2(ht.doc,hr.line);var ho=cU(hs,hv,hr.line);var hp=a(hv,ht.doc.direction),hq="left";if(hp){var i=aS(hp,hr.ch);hq=i%2?"right":"left"}var hu=aV(ho.map,hr.ch,hq);hu.offset=hu.collapse=="right"?hu.end:hu.start;return hu}function g5(ho){for(var i=ho;i;i=i.parentNode){if(/CodeMirror-gutter-wrapper/.test(i.className)){return true}}return false}function e5(ho,i){if(i){ho.bad=true}return ho}function gZ(hv,ht,hu,hq,ho){var hx="",hp=false,i=hv.doc.lineSeparator();function hr(hz){return function(hA){return hA.id==hz}}function hy(){if(hp){hx+=i;hp=false}}function hw(hz){if(hz){hy();hx+=hz}}function hs(hE){if(hE.nodeType==1){var hB=hE.getAttribute("cm-text");if(hB!=null){hw(hB||hE.textContent.replace(/\u200b/g,""));return}var hD=hE.getAttribute("cm-marker"),hA;if(hD){var hF=hv.findMarks(ac(hq,0),ac(ho+1,0),hr(+hD));if(hF.length&&(hA=hF[0].find(0))){hw(g6(hv.doc,hA.from,hA.to).join(i))}return}if(hE.getAttribute("contenteditable")=="false"){return}var hz=/^(pre|div|p)$/i.test(hE.nodeName);if(hz){hy()}for(var hC=0;hC<hE.childNodes.length;hC++){hs(hE.childNodes[hC])}if(hz){hp=true}}else{if(hE.nodeType==3){hw(hE.nodeValue)}}}for(;;){hs(ht);if(ht==hu){break}ht=ht.nextSibling}return hx}function aI(ho,hr,ht){var hs;if(hr==ho.display.lineDiv){hs=ho.display.lineDiv.childNodes[ht];if(!hs){return e5(ho.clipPos(ac(ho.display.viewTo-1)),true)}hr=null;ht=0}else{for(hs=hr;;hs=hs.parentNode){if(!hs||hs==ho.display.lineDiv){return null}if(hs.parentNode&&hs.parentNode==ho.display.lineDiv){break}}}for(var hq=0;hq<ho.display.view.length;hq++){var hp=ho.display.view[hq];if(hp.node==hs){return ai(hp,hr,ht)}}}function ai(hw,hs,hu){var hp=hw.text.firstChild,hr=false;if(!hs||!he(hp,hs)){return e5(ac(b8(hw.line),0),true)}if(hs==hp){hr=true;hs=hp.childNodes[hu];hu=0;if(!hs){var hC=hw.rest?gw(hw.rest):hw.line;return e5(ac(b8(hC),hC.text.length),hr)}}var ht=hs.nodeType==3?hs:null,hA=hs;if(!ht&&hs.childNodes.length==1&&hs.firstChild.nodeType==3){ht=hs.firstChild;if(hu){hu=ht.nodeValue.length}}while(hA.parentNode!=hp){hA=hA.parentNode}var ho=hw.measure,hy=ho.maps;function hv(hF,hK,hH){for(var hJ=-1;hJ<(hy?hy.length:0);hJ++){var hE=hJ<0?ho.map:hy[hJ];for(var hI=0;hI<hE.length;hI+=3){var hG=hE[hI+2];if(hG==hF||hG==hK){var hL=b8(hJ<0?hw.line:hw.rest[hJ]);var hD=hE[hI]+hH;if(hH<0||hG!=hF){hD=hE[hI+(hH?1:0)]}return ac(hL,hD)}}}}var hB=hv(ht,hA,hu);if(hB){return e5(hB,hr)}for(var i=hA.nextSibling,hx=ht?ht.nodeValue.length-hu:0;i;i=i.nextSibling){hB=hv(i,i.firstChild,0);if(hB){return e5(ac(hB.line,hB.ch-hx),hr)}else{hx+=i.textContent.length}}for(var hz=hA.previousSibling,hq=hu;hz;hz=hz.previousSibling){hB=hv(hz,hz.firstChild,-1);if(hB){return e5(ac(hB.line,hB.ch+hq),hr)}else{hq+=hz.textContent.length}}}var ae=function(i){this.cm=i;this.prevInput="";this.pollingFast=false;this.polling=new hn();this.hasSelection=false;this.composing=null};ae.prototype.init=function(hp){var ht=this;var ho=this,i=this.cm;var hs=this.wrapper=ba();var hq=this.textarea=hs.firstChild;hp.wrapper.insertBefore(hs,hp.wrapper.firstChild);if(fO){hq.style.width="0px"}cj(hq,"input",function(){if(eg&&m>=9&&ht.hasSelection){ht.hasSelection=null}ho.poll()});cj(hq,"paste",function(hu){if(a4(i,hu)||bn(hu,i)){return}i.state.pasteIncoming=true;ho.fastPoll()});function hr(hv){if(a4(i,hv)){return}if(i.somethingSelected()){dA({lineWise:false,text:i.getSelections()})}else{if(!i.options.lineWiseCopyCut){return}else{var hu=dO(i);dA({lineWise:true,text:hu.text});if(hv.type=="cut"){i.setSelections(hu.ranges,null,ah)}else{ho.prevInput="";hq.value=hu.text.join("\n");eh(hq)}}}if(hv.type=="cut"){i.state.cutIncoming=true}}cj(hq,"cut",hr);cj(hq,"copy",hr);cj(hp.scroller,"paste",function(hu){if(bo(hp,hu)||a4(i,hu)){return}i.state.pasteIncoming=true;ho.focus()});cj(hp.lineSpace,"selectstart",function(hu){if(!bo(hp,hu)){c7(hu)}});cj(hq,"compositionstart",function(){var hu=i.getCursor("from");if(ho.composing){ho.composing.range.clear()}ho.composing={start:hu,range:i.markText(hu,i.getCursor("to"),{className:"CodeMirror-composing"})}});cj(hq,"compositionend",function(){if(ho.composing){ho.poll();ho.composing.range.clear();ho.composing=null}})};ae.prototype.prepareSelection=function(){var ho=this.cm,hs=ho.display,hr=ho.doc;var i=gz(ho);if(ho.options.moveInputWithCursor){var ht=es(ho,hr.sel.primary().head,"div");var hp=hs.wrapper.getBoundingClientRect(),hq=hs.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(hs.wrapper.clientHeight-10,ht.top+hq.top-hp.top));i.teLeft=Math.max(0,Math.min(hs.wrapper.clientWidth-10,ht.left+hq.left-hp.left))}return i};ae.prototype.showSelection=function(hp){var i=this.cm,ho=i.display;ce(ho.cursorDiv,hp.cursors);ce(ho.selectionDiv,hp.selection);if(hp.teTop!=null){this.wrapper.style.top=hp.teTop+"px";this.wrapper.style.left=hp.teLeft+"px"}};ae.prototype.reset=function(ho){if(this.contextMenuPending||this.composing){return}var i=this.cm;if(i.somethingSelected()){this.prevInput="";var hp=i.getSelection();this.textarea.value=hp;if(i.state.focused){eh(this.textarea)}if(eg&&m>=9){this.hasSelection=hp}}else{if(!ho){this.prevInput=this.textarea.value="";if(eg&&m>=9){this.hasSelection=null}}}};ae.prototype.getField=function(){return this.textarea};ae.prototype.supportsTouch=function(){return false};ae.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!eR||ek()!=this.textarea)){try{this.textarea.focus()}catch(i){}}};ae.prototype.blur=function(){this.textarea.blur()};ae.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};ae.prototype.receivedFocus=function(){this.slowPoll()};ae.prototype.slowPoll=function(){var i=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){i.poll();if(i.cm.state.focused){i.slowPoll()}})};ae.prototype.fastPoll=function(){var ho=false,i=this;i.pollingFast=true;function hp(){var hq=i.poll();if(!hq&&!ho){ho=true;i.polling.set(60,hp)}else{i.pollingFast=false;i.slowPoll()}}i.polling.set(20,hp)};ae.prototype.poll=function(){var hu=this;var i=this.cm,hp=this.textarea,hq=this.prevInput;if(this.contextMenuPending||!i.state.focused||(bL(hp)&&!hq&&!this.composing)||i.isReadOnly()||i.options.disableInput||i.state.keySeq){return false}var hs=hp.value;if(hs==hq&&!i.somethingSelected()){return false}if(eg&&m>=9&&this.hasSelection===hs||cu&&/[\uf700-\uf7ff]/.test(hs)){i.display.input.reset();return false}if(i.doc.sel==i.display.selForContextMenu){var hr=hs.charCodeAt(0);if(hr==8203&&!hq){hq="\u200b"}if(hr==8666){this.reset();return this.cm.execCommand("undo")}}var ht=0,ho=Math.min(hq.length,hs.length);while(ht<ho&&hq.charCodeAt(ht)==hs.charCodeAt(ht)){++ht}df(i,function(){gW(i,hs.slice(ht),hq.length-ht,null,hu.composing?"*compose":null);if(hs.length>1000||hs.indexOf("\n")>-1){hp.value=hu.prevInput=""}else{hu.prevInput=hs}if(hu.composing){hu.composing.range.clear();hu.composing.range=i.markText(hu.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"})}});return true};ae.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};ae.prototype.onKeyPress=function(){if(eg&&m>=9){this.hasSelection=null}this.fastPoll()};ae.prototype.onContextMenu=function(hs){var hx=this,hy=hx.cm,hu=hy.display,ho=hx.textarea;var hw=cO(hy,hs),i=hu.scroller.scrollTop;if(!hw||eC){return}var hr=hy.options.resetSelectionOnContextMenu;if(hr&&hy.doc.sel.contains(hw)==-1){du(hy,cg)(hy.doc,fC(hw),ah)}var ht=ho.style.cssText,hB=hx.wrapper.style.cssText;hx.wrapper.style.cssText="position: absolute";var hA=hx.wrapper.getBoundingClientRect();ho.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(hs.clientY-hA.top-5)+"px; left: "+(hs.clientX-hA.left-5)+"px;\n      z-index: 1000; background: "+(eg?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var hz;if(dt){hz=window.scrollY}hu.input.focus();if(dt){window.scrollTo(null,hz)}hu.input.reset();if(!hy.somethingSelected()){ho.value=hx.prevInput=" "}hx.contextMenuPending=true;hu.selForContextMenu=hy.doc.sel;clearTimeout(hu.detectingSelectAll);function hq(){if(ho.selectionStart!=null){var hC=hy.somethingSelected();var hD="\u200b"+(hC?ho.value:"");ho.value="\u21da";ho.value=hD;hx.prevInput=hC?"":"\u200b";ho.selectionStart=1;ho.selectionEnd=hD.length;hu.selForContextMenu=hy.doc.sel}}function hv(){hx.contextMenuPending=false;hx.wrapper.style.cssText=hB;ho.style.cssText=ht;if(eg&&m<9){hu.scrollbars.setScrollTop(hu.scroller.scrollTop=i)}if(ho.selectionStart!=null){if(!eg||(eg&&m<9)){hq()}var hC=0,hD=function(){if(hu.selForContextMenu==hy.doc.sel&&ho.selectionStart==0&&ho.selectionEnd>0&&hx.prevInput=="\u200b"){du(hy,av)(hy)}else{if(hC++<10){hu.detectingSelectAll=setTimeout(hD,500)}else{hu.selForContextMenu=null;hu.input.reset()}}};hu.detectingSelectAll=setTimeout(hD,200)}}if(eg&&m>=9){hq()}if(hd){e4(hs);var hp=function(){eQ(window,"mouseup",hp);setTimeout(hv,20)};cj(window,"mouseup",hp)}else{setTimeout(hv,50)}};ae.prototype.readOnlyChanged=function(i){if(!i){this.reset()}this.textarea.disabled=i=="nocursor"};ae.prototype.setUneditable=function(){};ae.prototype.needsContentAttribute=false;function gx(hu,hv){hv=hv?aZ(hv):{};hv.value=hu.value;if(!hv.tabindex&&hu.tabIndex){hv.tabindex=hu.tabIndex}if(!hv.placeholder&&hu.placeholder){hv.placeholder=hu.placeholder}if(hv.autofocus==null){var i=ek();hv.autofocus=i==hu||hu.getAttribute("autofocus")!=null&&i==document.body}function hr(){hu.value=ht.getValue()}var hs;if(hu.form){cj(hu.form,"submit",hr);if(!hv.leaveSubmitMethodAlone){var ho=hu.form;hs=ho.submit;try{var hq=ho.submit=function(){hr();ho.submit=hs;ho.submit();ho.submit=hq}}catch(hp){}}}hv.finishInit=function(hw){hw.save=hr;hw.getTextArea=function(){return hu};hw.toTextArea=function(){hw.toTextArea=isNaN;hr();hu.parentNode.removeChild(hw.getWrapperElement());hu.style.display="";if(hu.form){eQ(hu.form,"submit",hr);if(typeof hu.form.submit=="function"){hu.form.submit=hs}}}};hu.style.display="none";var ht=K(function(hw){return hu.parentNode.insertBefore(hw,hu.nextSibling)},hv);return ht}function gC(i){i.off=eQ;i.on=cj;i.wheelEventPixels=aJ;i.Doc=aD;i.splitLines=gM;i.countColumn=cd;i.findColumn=e3;i.isWordChar=gt;i.Pass=cz;i.signal=aO;i.Line=g8;i.changeEnd=dq;i.scrollbarModel=bA;i.Pos=ac;i.cmpPos=cE;i.modes=dZ;i.mimeModes=a5;i.resolveMode=hf;i.getMode=gp;i.modeExtensions=dW;i.extendMode=fl;i.copyState=cq;i.startState=cn;i.innerMode=hb;i.commands=fk;i.keyMap=fY;i.keyName=gd;i.isModifierKey=fh;i.lookupKey=k;i.normalizeKeyMap=c8;i.StringStream=fF;i.SharedTextMarker=y;i.TextMarker=V;i.LineWidget=d7;i.e_preventDefault=c7;i.e_stopPropagation=dX;i.e_stop=e4;i.addClass=gq;i.contains=he;i.rmClass=h;i.keyNames=f3}fp(K);el(K);var d="iter insert remove copy getEditor constructor".split(" ");for(var b5 in aD.prototype){if(aD.prototype.hasOwnProperty(b5)&&dP(d,b5)<0){K.prototype[b5]=(function(i){return function(){return i.apply(this.doc,arguments)}})(aD.prototype[b5])}}bT(aD);K.inputStyles={textarea:ae,contenteditable:d1};K.defineMode=function(i){if(!K.defaults.mode&&i!="null"){K.defaults.mode=i}e8.apply(this,arguments)};K.defineMIME=bE;K.defineMode("null",function(){return({token:function(i){return i.skipToEnd()}})});K.defineMIME("text/plain","null");K.defineExtension=function(i,ho){K.prototype[i]=ho};K.defineDocExtension=function(i,ho){aD.prototype[i]=ho};K.fromTextArea=gx;gC(K);K.version="5.30.0";return K})));(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(c){var h="CodeMirror-activeline";var g="CodeMirror-activeline-background";var f="CodeMirror-activeline-gutter";c.defineOption("styleActiveLine",false,function(i,l,j){var k=j==c.Init?false:j;if(l==k){return}if(k){i.off("beforeSelectionChange",b);d(i);delete i.state.activeLines}if(l){i.state.activeLines=[];e(i,i.listSelections());i.on("beforeSelectionChange",b)}});function d(j){for(var k=0;k<j.state.activeLines.length;k++){j.removeLineClass(j.state.activeLines[k],"wrap",h);j.removeLineClass(j.state.activeLines[k],"background",g);j.removeLineClass(j.state.activeLines[k],"gutter",f)}}function a(k,j){if(k.length!=j.length){return false}for(var l=0;l<k.length;l++){if(k[l]!=j[l]){return false}}return true}function e(j,l){var p=[];for(var n=0;n<l.length;n++){var m=l[n];var o=j.getOption("styleActiveLine");if(typeof o=="object"&&o.nonEmpty?m.anchor.line!=m.head.line:!m.empty()){continue}var k=j.getLineHandleVisualStart(m.head.line);if(p[p.length-1]!=k){p.push(k)}}if(a(j.state.activeLines,p)){return}j.operation(function(){d(j);for(var q=0;q<p.length;q++){j.addLineClass(p[q],"wrap",h);j.addLineClass(p[q],"background",g);j.addLineClass(p[q],"gutter",f)}j.state.activeLines=p})}function b(i,j){e(i,j.ranges)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","brace",function(m,h){var o=h.line,g=m.getLine(o);var t;function d(u){for(var i=h.ch,v=0;;){var w=i<=0?-1:g.lastIndexOf(u,i-1);if(w==-1){if(v==1){break}v=1;i=g.length;continue}if(v==1&&w<h.ch){break}t=m.getTokenTypeAt(a.Pos(o,w+1));if(!/^(comment|string)/.test(t)){return w+1}i=w-1}}var j="{",e="}",n=d("{");if(n==null){j="[",e="]";n=d("[")}if(n==null){return}var l=1,c=m.lastLine(),f,q;outer:for(var s=o;s<=c;++s){var p=m.getLine(s),k=s==o?n:0;for(;;){var b=p.indexOf(j,k),r=p.indexOf(e,k);if(b<0){b=p.length}if(r<0){r=p.length}k=Math.min(b,r);if(k==p.length){break}if(m.getTokenTypeAt(a.Pos(s,k+1))==t){if(k==b){++l}else{if(!--l){f=s;q=k;break outer}}}++k}}if(f==null||o==f&&q==n){return}return{from:a.Pos(o,n),to:a.Pos(f,q)}});a.registerHelper("fold","import",function(b,i){function h(k){if(k<b.firstLine()||k>b.lastLine()){return null}var o=b.getTokenAt(a.Pos(k,1));if(!/\S/.test(o.string)){o=b.getTokenAt(a.Pos(k,o.end+1))}if(o.type!="keyword"||o.string!="import"){return null}for(var l=k,m=Math.min(b.lastLine(),k+10);l<=m;++l){var n=b.getLine(l),j=n.indexOf(";");if(j!=-1){return{startCh:o.end,end:a.Pos(l,j)}}}}var g=i.line,d=h(g),f;if(!d||h(g-1)||((f=h(g-2))&&f.end.line==g-1)){return null}for(var c=d.end;;){var e=h(c.line+1);if(e==null){break}c=e.end}return{from:b.clipPos(a.Pos(g,d.startCh+1)),to:c}});a.registerHelper("fold","include",function(b,h){function f(i){if(i<b.firstLine()||i>b.lastLine()){return null}var j=b.getTokenAt(a.Pos(i,1));if(!/\S/.test(j.string)){j=b.getTokenAt(a.Pos(i,j.end+1))}if(j.type=="meta"&&j.string.slice(0,8)=="#include"){return j.start+8}}var g=h.line,d=f(g);if(d==null||f(g-1)!=null){return null}for(var c=g;;){var e=f(c+1);if(e==null){break}++c}return{from:a.Pos(g,d+1),to:b.clipPos(a.Pos(c))}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerGlobalHelper("fold","comment",function(b){return b.blockCommentStart&&b.blockCommentEnd},function(l,h){var q=l.getModeAt(h),j=q.blockCommentStart,e=q.blockCommentEnd;if(!j||!e){return}var n=h.line,g=l.getLine(n);var m;for(var r=h.ch,c=0;;){var o=r<=0?-1:g.lastIndexOf(j,r-1);if(o==-1){if(c==1){return}c=1;r=g.length;continue}if(c==1&&o<h.ch){return}if(/comment/.test(l.getTokenTypeAt(a.Pos(n,o+1)))&&(o==0||g.slice(o-e.length,o)==e||!/comment/.test(l.getTokenTypeAt(a.Pos(n,o))))){m=o+j.length;break}r=o-1}var v=1,d=l.lastLine(),f,s;outer:for(var u=n;u<=d;++u){var p=l.getLine(u),k=u==n?m:0;for(;;){var b=p.indexOf(j,k),t=p.indexOf(e,k);if(b<0){b=p.length}if(t<0){t=p.length}k=Math.min(b,t);if(k==p.length){break}if(k==b){++v}else{if(!--v){f=u;s=k;break outer}}++k}}if(f==null||n==f&&s==m){return}return{from:a.Pos(n,m),to:a.Pos(f,s)}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){var c={};var g=/[^\s\u00a0]/;var e=b.Pos;function f(i){var h=i.search(g);return h==-1?0:h}b.commands.toggleComment=function(h){h.toggleComment()};b.defineExtension("toggleComment",function(k){if(!k){k=c}var h=this;var m=Infinity,j=this.listSelections(),n=null;for(var l=j.length-1;l>=0;l--){var p=j[l].from(),o=j[l].to();if(p.line>=m){continue}if(o.line>=m){o=e(m,0)}m=p.line;if(n==null){if(h.uncomment(p,o,k)){n="un"}else{h.lineComment(p,o,k);n="line"}}else{if(n=="un"){h.uncomment(p,o,k)}else{h.lineComment(p,o,k)}}}});function d(h,j,i){return/\bstring\b/.test(h.getTokenTypeAt(e(j.line,0)))&&!/^[\'\"\`]/.test(i)}function a(h,j){var i=h.getMode();return i.useInnerComments===false||!i.innerMode?i:h.getModeAt(j)}b.defineExtension("lineComment",function(m,n,q){if(!q){q=c}var o=this,j=a(o,m);var l=o.getLine(m.line);if(l==null||d(o,m,l)){return}var p=q.lineComment||j.lineComment;if(!p){if(q.blockCommentStart||j.blockCommentStart){q.fullLines=true;o.blockComment(m,n,q)}return}var i=Math.min(n.ch!=0||n.line==m.line?n.line+1:n.line,o.lastLine()+1);var h=q.padding==null?" ":q.padding;var k=q.commentBlankLines||m.line==n.line;o.operation(function(){if(q.indent){var u=null;for(var t=m.line;t<i;++t){var r=o.getLine(t);var s=r.slice(0,f(r));if(u==null||u.length>s.length){u=s}}for(var t=m.line;t<i;++t){var r=o.getLine(t),v=u.length;if(!k&&!g.test(r)){continue}if(r.slice(0,v)!=u){v=f(r)}o.replaceRange(u+p+h,e(t,0),e(t,v))}}else{for(var t=m.line;t<i;++t){if(k||g.test(o.getLine(t))){o.replaceRange(p+h,e(t,0))}}}})});b.defineExtension("blockComment",function(l,m,p){if(!p){p=c}var o=this,j=a(o,l);var k=p.blockCommentStart||j.blockCommentStart;var n=p.blockCommentEnd||j.blockCommentEnd;if(!k||!n){if((p.lineComment||j.lineComment)&&p.fullLines!=false){o.lineComment(l,m,p)}return}if(/\bcomment\b/.test(o.getTokenTypeAt(e(l.line,0)))){return}var i=Math.min(m.line,o.lastLine());if(i!=l.line&&m.ch==0&&g.test(o.getLine(i))){--i}var h=p.padding==null?" ":p.padding;if(l.line>i){return}o.operation(function(){if(p.fullLines!=false){var s=g.test(o.getLine(i));o.replaceRange(h+n,e(i));o.replaceRange(k+h,e(l.line,0));var q=p.blockCommentLead||j.blockCommentLead;if(q!=null){for(var r=l.line+1;r<=i;++r){if(r!=i||s){o.replaceRange(q+h,e(r,0))}}}}else{o.replaceRange(n,m);o.replaceRange(k,l)}})});b.defineExtension("uncomment",function(C,l,m){if(!m){m=c}var y=this,v=a(y,C);var n=Math.min(l.ch!=0||l.line==C.line?l.line:l.line-1,y.lastLine()),o=Math.min(C.line,n);var x=m.lineComment||v.lineComment,k=[];var G=m.padding==null?" ":m.padding,q;lineComment:{if(!x){break lineComment}for(var D=o;D<=n;++D){var r=y.getLine(D);var s=r.indexOf(x);if(s>-1&&!/comment/.test(y.getTokenTypeAt(e(D,s+1)))){s=-1}if(s==-1&&g.test(r)){break lineComment}if(s>-1&&g.test(r.slice(0,s))){break lineComment}k.push(r)}y.operation(function(){for(var K=o;K<=n;++K){var I=k[K-o];var L=I.indexOf(x),J=L+x.length;if(L<0){continue}if(I.slice(J,J+G.length)==G){J+=G.length}q=true;y.replaceRange("",e(K,L),e(K,J))}});if(q){return true}}var t=m.blockCommentStart||v.blockCommentStart;var h=m.blockCommentEnd||v.blockCommentEnd;if(!t||!h){return false}var F=m.blockCommentLead||v.blockCommentLead;var B=y.getLine(o),u=B.indexOf(t);if(u==-1){return false}var p=n==o?B:y.getLine(n);var w=p.indexOf(h,n==o?u+t.length:0);if(w==-1&&o!=n){p=y.getLine(--n);w=p.indexOf(h)}var E=e(o,u+1),z=e(n,w+1);if(w==-1||!/comment/.test(y.getTokenTypeAt(E))||!/comment/.test(y.getTokenTypeAt(z))||y.getRange(E,z,"\n").indexOf(h)>-1){return false}var A=B.lastIndexOf(t,C.ch);var H=A==-1?-1:B.slice(0,C.ch).indexOf(h,A+t.length);if(A!=-1&&H!=-1&&H+h.length!=C.ch){return false}H=p.indexOf(h,l.ch);var j=p.slice(l.ch).lastIndexOf(t,H-l.ch);A=(H==-1||j==-1)?-1:l.ch+j;if(H!=-1&&A!=-1&&A!=l.ch){return false}y.operation(function(){y.replaceRange("",e(n,w-(G&&p.slice(w-G.length,w)==G?G.length:0)),e(n,w+h.length));var L=u+t.length;if(G&&B.slice(L,L+G.length)==G){L+=G.length}y.replaceRange("",e(o,u),e(o,L));if(F){for(var K=o+1;K<=n;++K){var J=y.getLine(K),M=J.indexOf(F);if(M==-1||g.test(J.slice(0,M))){continue}var I=M+F.length;if(G&&J.slice(I,I+G.length)==G){I+=G.length}y.replaceRange("",e(K,M),e(K,I))}}});return true})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){function c(d,h,e){var g=d.getWrapperElement();var f;f=g.appendChild(document.createElement("div"));if(e){f.className="CodeMirror-dialog CodeMirror-dialog-bottom"}else{f.className="CodeMirror-dialog CodeMirror-dialog-top"}if(typeof h=="string"){f.innerHTML=h}else{f.appendChild(h)}return f}function a(d,e){if(d.state.currentNotificationClose){d.state.currentNotificationClose()}d.state.currentNotificationClose=e}b.defineExtension("openDialog",function(i,j,l){if(!l){l={}}a(this,null);var f=c(this,i,l.bottom);var e=false,g=this;function k(m){if(typeof m=="string"){h.value=m}else{if(e){return}e=true;f.parentNode.removeChild(f);g.focus();if(l.onClose){l.onClose(f)}}}var h=f.getElementsByTagName("input")[0],d;if(h){h.focus();if(l.value){h.value=l.value;if(l.selectValueOnOpen!==false){h.select()}}if(l.onInput){b.on(h,"input",function(m){l.onInput(m,h.value,k)})}if(l.onKeyUp){b.on(h,"keyup",function(m){l.onKeyUp(m,h.value,k)})}b.on(h,"keydown",function(m){if(l&&l.onKeyDown&&l.onKeyDown(m,h.value,k)){return}if(m.keyCode==27||(l.closeOnEnter!==false&&m.keyCode==13)){h.blur();b.e_stop(m);k()}if(m.keyCode==13){j(h.value,m)}});if(l.closeOnBlur!==false){b.on(h,"blur",k)}}else{if(d=f.getElementsByTagName("button")[0]){b.on(d,"click",function(){k();g.focus()});if(l.closeOnBlur!==false){b.on(d,"blur",k)}d.focus()}}return k});b.defineExtension("openConfirm",function(m,g,o){a(this,null);var h=c(this,m,o&&o.bottom);var j=h.getElementsByTagName("button");var f=false,k=this,d=1;function n(){if(f){return}f=true;h.parentNode.removeChild(h);k.focus()}j[0].focus();for(var e=0;e<j.length;++e){var l=j[e];(function(i){b.on(l,"click",function(p){b.e_preventDefault(p);n();if(i){i(k)}})})(g[e]);b.on(l,"blur",function(){--d;setTimeout(function(){if(d<=0){n()}},200)});b.on(l,"focus",function(){++d})}});b.defineExtension("openNotification",function(g,e){a(this,j);var f=c(this,g,e&&e.bottom);var d=false,h;var i=e&&typeof e.duration!=="undefined"?e.duration:5000;function j(){if(d){return}d=true;clearTimeout(h);f.parentNode.removeChild(f)}b.on(f,"click",function(k){b.e_preventDefault(k);j()});if(i){h=setTimeout(j,i)}return j})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){function d(n,m,o,i){if(o&&o.call){var g=o;o=null}else{var g=c(n,o,"rangeFinder")}if(typeof m=="number"){m=b.Pos(m,0)}var h=c(n,o,"minFoldSize");function f(p){var q=g(n,m);if(!q||q.to.line-q.from.line<h){return null}var s=n.findMarksAt(q.from);for(var r=0;r<s.length;++r){if(s[r].__isFold&&i!=="fold"){if(!p){return null}q.cleared=true;s[r].clear()}}return q}var k=f(true);if(c(n,o,"scanUp")){while(!k&&m.line>n.firstLine()){m=b.Pos(m.line-1,0);k=f(false)}}if(!k||k.cleared||i==="unfold"){return}var l=e(n,o);b.on(l,"mousedown",function(p){j.clear();b.e_preventDefault(p)});var j=n.markText(k.from,k.to,{replacedWith:l,clearOnEnter:c(n,o,"clearOnEnter"),__isFold:true});j.on("clear",function(q,p){b.signal(n,"unfold",n,q,p)});b.signal(n,"fold",n,k.from,k.to)}function e(f,g){var h=c(f,g,"widget");if(typeof h=="string"){var i=document.createTextNode(h);h=document.createElement("span");h.appendChild(i);h.className="CodeMirror-foldmarker"}else{if(h){h=h.cloneNode(true)}}return h}b.newFoldFunction=function(g,f){return function(h,i){d(h,i,{rangeFinder:g,widget:f})}};b.defineExtension("foldCode",function(h,f,g){d(this,h,f,g)});b.defineExtension("isFolded",function(h){var g=this.findMarksAt(h);for(var f=0;f<g.length;++f){if(g[f].__isFold){return true}}});b.commands.toggleFold=function(f){f.foldCode(f.getCursor())};b.commands.fold=function(f){f.foldCode(f.getCursor(),null,"fold")};b.commands.unfold=function(f){f.foldCode(f.getCursor(),null,"unfold")};b.commands.foldAll=function(f){f.operation(function(){for(var g=f.firstLine(),h=f.lastLine();g<=h;g++){f.foldCode(b.Pos(g,0),null,"fold")}})};b.commands.unfoldAll=function(f){f.operation(function(){for(var g=f.firstLine(),h=f.lastLine();g<=h;g++){f.foldCode(b.Pos(g,0),null,"unfold")}})};b.registerHelper("fold","combine",function(){var f=Array.prototype.slice.call(arguments,0);return function(g,k){for(var h=0;h<f.length;++h){var j=f[h](g,k);if(j){return j}}}});b.registerHelper("fold","auto",function(f,k){var h=f.getHelpers(k,"fold");for(var g=0;g<h.length;g++){var j=h[g](f,k);if(j){return j}}});var a={rangeFinder:b.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:false,clearOnEnter:true};b.defineOption("foldOptions",null);function c(f,h,g){if(h&&h[g]!==undefined){return h[g]}var i=f.options.foldOptions;if(i&&i[g]!==undefined){return i[g]}return a[g]}b.defineExtension("foldOption",function(g,f){return c(this,g,f)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("./foldcode"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","./foldcode"],a)}else{a(CodeMirror)}}})(function(d){d.defineOption("foldGutter",false,function(m,o,n){if(n&&n!=d.Init){m.clearGutter(m.state.foldGutter.options.gutter);m.state.foldGutter=null;m.off("gutterClick",k);m.off("change",g);m.off("viewportChange",l);m.off("fold",e);m.off("unfold",e);m.off("swapDoc",g)}if(o){m.state.foldGutter=new j(i(o));b(m);m.on("gutterClick",k);m.on("change",g);m.on("viewportChange",l);m.on("fold",e);m.on("unfold",e);m.on("swapDoc",g)}});var h=d.Pos;function j(m){this.options=m;this.from=this.to=0}function i(m){if(m===true){m={}}if(m.gutter==null){m.gutter="CodeMirror-foldgutter"}if(m.indicatorOpen==null){m.indicatorOpen="CodeMirror-foldgutter-open"}if(m.indicatorFolded==null){m.indicatorFolded="CodeMirror-foldgutter-folded"}return m}function c(m,n){var p=m.findMarks(h(n,0),h(n+1,0));for(var o=0;o<p.length;++o){if(p[o].__isFold&&p[o].find().from.line==n){return p[o]}}}function f(m){if(typeof m=="string"){var n=document.createElement("div");n.className=m+" CodeMirror-guttermarker-subtle";return n}else{return m.cloneNode(true)}}function a(m,s,r){var o=m.state.foldGutter.options,q=s;var p=m.foldOption(o,"minFoldSize");var n=m.foldOption(o,"rangeFinder");m.eachLine(s,r,function(t){var w=null;if(c(m,q)){w=f(o.indicatorFolded)}else{var v=h(q,0);var u=n&&n(m,v);if(u&&u.to.line-u.from.line>=p){w=f(o.indicatorOpen)}}m.setGutterMarker(t,o.gutter,w);++q})}function b(m){var n=m.getViewport(),o=m.state.foldGutter;if(!o){return}m.operation(function(){a(m,n.from,n.to)});o.from=n.from;o.to=n.to}function k(m,n,q){var p=m.state.foldGutter;if(!p){return}var o=p.options;if(q!=o.gutter){return}var r=c(m,n);if(r){r.clear()}else{m.foldCode(h(n,0),o.rangeFinder)}}function g(m){var o=m.state.foldGutter;if(!o){return}var n=o.options;o.from=o.to=0;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){b(m)},n.foldOnChangeTimeSpan||600)}function l(m){var o=m.state.foldGutter;if(!o){return}var n=o.options;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){var p=m.getViewport();if(o.from==o.to||p.from-o.to>20||o.from-p.to>20){b(m)}else{m.operation(function(){if(p.from<o.from){a(m,p.from,o.from);o.from=p.from}if(p.to>o.to){a(m,o.to,p.to);o.to=p.to}})}},n.updateViewportTimeSpan||400)}function e(m,p){var o=m.state.foldGutter;if(!o){return}var n=p.line;if(n>=o.from&&n<o.to){a(m,n,n+1)}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(o){var b="CodeMirror-lint-markers";function f(w,v){var u=document.createElement("div");u.className="CodeMirror-lint-tooltip";u.appendChild(v.cloneNode(true));document.body.appendChild(u);function t(x){if(!u.parentNode){return o.off(document,"mousemove",t)}u.style.top=Math.max(0,x.clientY-u.offsetHeight-5)+"px";u.style.left=(x.clientX+5)+"px"}o.on(document,"mousemove",t);t(w);if(u.style.opacity!=null){u.style.opacity=1}return u}function j(t){if(t.parentNode){t.parentNode.removeChild(t)}}function i(t){if(!t.parentNode){return}if(t.style.opacity==null){j(t)}t.style.opacity=0;setTimeout(function(){j(t)},600)}function s(x,v,u){var w=f(x,v);function t(){o.off(u,"mouseout",t);if(w){i(w);w=null}}var y=setInterval(function(){if(w){for(var z=u;;z=z.parentNode){if(z&&z.nodeType==11){z=z.host}if(z==document.body){return}if(!z){t();break}}}if(!w){return clearInterval(y)}},400);o.on(u,"mouseout",t)}function m(t,v,u){this.marked=[];this.options=v;this.timeout=null;this.hasGutter=u;this.onMouseOver=function(w){n(t,w)};this.waitingFor=0}function a(u,t){if(t instanceof Function){return{getAnnotations:t}}if(!t||t===true){t={}}return t}function d(t){var v=t.state.lint;if(v.hasGutter){t.clearGutter(b)}for(var u=0;u<v.marked.length;++u){v.marked[u].clear()}v.marked.length=0}function r(y,w,t,x){var u=document.createElement("div"),v=u;u.className="CodeMirror-lint-marker-"+w;if(t){v=u.appendChild(document.createElement("div"));v.className="CodeMirror-lint-marker-multiple"}if(x!=false){o.on(v,"mouseover",function(z){s(z,y,v)})}return u}function g(u,t){if(u=="error"){return u}else{return t}}function h(x){var u=[];for(var v=0;v<x.length;++v){var w=x[v],t=w.from.line;(u[t]||(u[t]=[])).push(w)}return u}function c(v){var t=v.severity;if(!t){t="error"}var u=document.createElement("div");u.className="CodeMirror-lint-message-"+t;if(typeof v.messageHTML!="undefined"){u.innerHTML=v.messageHTML}else{u.appendChild(document.createTextNode(v.message))}return u}function k(t,y,u){var v=t.state.lint;var x=++v.waitingFor;function w(){x=-1;t.off("change",w)}t.on("change",w);y(t.getValue(),function(A,z){t.off("change",w);if(v.waitingFor!=x){return}if(z&&A instanceof o){A=z}l(t,A)},u,t)}function q(t){var w=t.state.lint,v=w.options;var u=v.options||v;var y=v.getAnnotations||t.getHelper(o.Pos(0,0),"lint");if(!y){return}if(v.async||y.async){k(t,y,u)}else{var x=y(t.getValue(),u,t);if(!x){return}if(x.then){x.then(function(z){l(t,z)})}else{l(t,x)}}}function l(A,z){d(A);var u=A.state.lint,C=u.options;var y=h(z);for(var D=0;D<y.length;++D){var w=y[D];if(!w){continue}var E=null;var v=u.hasGutter&&document.createDocumentFragment();for(var x=0;x<w.length;++x){var t=w[x];var B=t.severity;if(!B){B="error"}E=g(E,B);if(C.formatAnnotation){t=C.formatAnnotation(t)}if(u.hasGutter){v.appendChild(c(t))}if(t.to){u.marked.push(A.markText(t.from,t.to,{className:"CodeMirror-lint-mark-"+B,__annotation:t}))}}if(u.hasGutter){A.setGutterMarker(D,b,r(v,E,w.length>1,u.options.tooltips))}}if(C.onUpdateLinting){C.onUpdateLinting(z,y,A)}}function p(t){var u=t.state.lint;if(!u){return}clearTimeout(u.timeout);u.timeout=setTimeout(function(){q(t)},u.options.delay||500)}function e(y,x){var w=x.target||x.srcElement;var v=document.createDocumentFragment();for(var t=0;t<y.length;t++){var u=y[t];v.appendChild(c(u))}s(x,v,w)}function n(E,z){var A=z.target||z.srcElement;if(!/\bCodeMirror-lint-mark-/.test(A.className)){return}var v=A.getBoundingClientRect(),D=(v.left+v.right)/2,C=(v.top+v.bottom)/2;var B=E.findMarksAt(E.coordsChar({left:D,top:C},"client"));var w=[];for(var u=0;u<B.length;++u){var t=B[u].__annotation;if(t){w.push(t)}}if(w.length){e(w,z)}}o.defineOption("lint",false,function(t,z,u){if(u&&u!=o.Init){d(t);if(t.state.lint.options.lintOnChange!==false){t.off("change",p)}o.off(t.getWrapperElement(),"mouseover",t.state.lint.onMouseOver);clearTimeout(t.state.lint.timeout);delete t.state.lint}if(z){var v=t.getOption("gutters"),x=false;for(var w=0;w<v.length;++w){if(v[w]==b){x=true}}var y=t.state.lint=new m(t,a(t,z),x);if(y.options.lintOnChange!==false){t.on("change",p)}if(y.options.tooltips!=false&&y.options.tooltips!="gutter"){o.on(t.getWrapperElement(),"mouseover",y.onMouseOver)}q(t)}});o.defineExtension("performLint",function(){if(this.state.lint){q(this)}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(e){var d=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var i=e.Pos;var a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function f(q,n,k){var s=q.getLineHandle(n.line),p=n.ch-1;var m=k&&k.afterCursor;if(m==null){m=/(^| )cm-fat-cursor($| )/.test(q.getWrapperElement().className)}var o=(!m&&p>=0&&a[s.text.charAt(p)])||a[s.text.charAt(++p)];if(!o){return null}var l=o.charAt(1)==">"?1:-1;if(k&&k.strict&&(l>0)!=(p==n.ch)){return null}var j=q.getTokenTypeAt(i(n.line,p+1));var r=g(q,i(n.line,p+(l>0?1:0)),l,j||null,k);if(r==null){return null}return{from:i(n.line,p),to:r&&r.pos,match:r&&r.ch==o.charAt(0),forward:l>0}}function g(w,r,n,k,m){var l=(m&&m.maxScanLineLength)||10000;var t=(m&&m.maxScanLines)||1000;var v=[];var x=m&&m.bracketRegex?m.bracketRegex:/[(){}[\]]/;var q=n>0?Math.min(r.line+t,w.lastLine()+1):Math.max(w.firstLine()-1,r.line-t);for(var o=r.line;o!=q;o+=n){var y=w.getLine(o);if(!y){continue}var u=n>0?0:y.length-1,p=n>0?y.length:-1;if(y.length>l){continue}if(o==r.line){u=r.ch-(n<0?1:0)}for(;u!=p;u+=n){var j=y.charAt(u);if(x.test(j)&&(k===undefined||w.getTokenTypeAt(i(o,u+1))==k)){var s=a[j];if((s.charAt(1)==">")==(n>0)){v.push(j)}else{if(!v.length){return{pos:i(o,u),ch:j}}else{v.pop()}}}}}return o-n==(n>0?w.lastLine():w.firstLine())?false:null}function b(s,n,m){var k=s.state.matchBrackets.maxHighlightLineLength||1000;var r=[],l=s.listSelections();for(var o=0;o<l.length;o++){var q=l[o].empty()&&f(s,l[o].head,m);if(q&&s.getLine(q.from.line).length<=k){var j=q.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";r.push(s.markText(q.from,i(q.from.line,q.from.ch+1),{className:j}));if(q.to&&s.getLine(q.to.line).length<=k){r.push(s.markText(q.to,i(q.to.line,q.to.ch+1),{className:j}))}}}if(r.length){if(d&&s.state.focused){s.focus()}var p=function(){s.operation(function(){for(var t=0;t<r.length;t++){r[t].clear()}})};if(n){setTimeout(p,800)}else{return p}}}var c=null;function h(j){j.operation(function(){if(c){c();c=null}c=b(j,false,j.state.matchBrackets)})}e.defineOption("matchBrackets",false,function(j,l,k){if(k&&k!=e.Init){j.off("cursorActivity",h);if(c){c();c=null}}if(l){j.state.matchBrackets=typeof l=="object"?l:{};j.on("cursorActivity",h)}});e.defineExtension("matchBrackets",function(){b(this,true)});e.defineExtension("findMatchingBracket",function(l,k,j){if(j||typeof k=="boolean"){if(!j){k=k?{strict:true}:null}else{j.strict=k;k=j}}return f(this,l,k)});e.defineExtension("scanForBracket",function(m,k,l,j){return g(this,m,k,l,j)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],a)}else{a(CodeMirror)}}})(function(n){function k(w,v){if(typeof w=="string"){w=new RegExp(w.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),v?"gi":"g")}else{if(!w.global){w=new RegExp(w.source,w.ignoreCase?"gi":"g")}}return{token:function(y){w.lastIndex=y.pos;var x=w.exec(y.string);if(x&&x.index==y.pos){y.pos+=x[0].length||1;return"searching"}else{if(x){y.pos=x.index}else{y.skipToEnd()}}}}}function j(){this.posFrom=this.posTo=this.lastQuery=this.query=null;this.overlay=null}function s(v){return v.state.search||(v.state.search=new j())}function e(v){return typeof v=="string"&&v==v.toLowerCase()}function b(v,w,x){return v.getSearchCursor(w,x,{caseFold:e(w),multiline:true})}function d(v,y,z,w,x){v.openDialog(y,w,{value:z,selectValueOnOpen:true,closeOnEnter:false,onClose:function(){q(v)},onKeyDown:x})}function p(v,y,w,z,x){if(v.openDialog){v.openDialog(y,x,{value:z,selectValueOnOpen:true})}else{x(prompt(w,z))}}function l(w,y,x,v){if(w.openConfirm){w.openConfirm(y,v)}else{if(confirm(x)){v[0]()}}}function i(v){return v.replace(/\\(.)/g,function(w,x){if(x=="n"){return"\n"}if(x=="r"){return"\r"}return x})}function h(w){var v=w.match(/^\/(.*)\/([a-z]*)$/);if(v){try{w=new RegExp(v[1],v[2].indexOf("i")==-1?"":"i")}catch(x){}}else{w=i(w)}if(typeof w=="string"?w=="":w.test("")){w=/x^/}return w}var u='<span class="CodeMirror-search-label">Search:</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';function t(v,x,w){x.queryText=w;x.query=h(w);v.removeOverlay(x.overlay,e(x.query));x.overlay=k(x.query,e(x.query));v.addOverlay(x.overlay);if(v.showMatchesOnScrollbar){if(x.annotate){x.annotate.clear();x.annotate=null}x.annotate=v.showMatchesOnScrollbar(x.query,e(x.query))}}function m(v,y,x,z){var C=s(v);if(C.query){return f(v,y)}var B=v.getSelection()||C.lastQuery;if(B instanceof RegExp&&B.source=="x^"){B=null}if(x&&v.openDialog){var w=null;var A=function(E,D){n.e_stop(D);if(!E){return}if(E!=C.queryText){t(v,C,E);C.posFrom=C.posTo=v.getCursor()}if(w){w.style.opacity=1}f(v,D.shiftKey,function(F,H){var G;if(H.line<3&&document.querySelector&&(G=v.display.wrapper.querySelector(".CodeMirror-dialog"))&&G.getBoundingClientRect().bottom-4>v.cursorCoords(H,"window").top){(w=G).style.opacity=0.4}})};d(v,u,B,A,function(F,H){var E=n.keyName(F);var D=v.getOption("extraKeys"),G=(D&&D[E])||n.keyMap[v.getOption("keyMap")][E];if(G=="findNext"||G=="findPrev"||G=="findPersistentNext"||G=="findPersistentPrev"){n.e_stop(F);t(v,s(v),H);v.execCommand(G)}else{if(G=="find"||G=="findPersistent"){n.e_stop(F);A(H,F)}}});if(z&&B){t(v,C,B);f(v,y)}}else{p(v,u,"Search for:",B,function(D){if(D&&!C.query){v.operation(function(){t(v,C,D);C.posFrom=C.posTo=v.getCursor();f(v,y)})}})}}function f(v,w,x){v.operation(function(){var y=s(v);var z=b(v,y.query,w?y.posFrom:y.posTo);if(!z.find(w)){z=b(v,y.query,w?n.Pos(v.lastLine()):n.Pos(v.firstLine(),0));if(!z.find(w)){return}}v.setSelection(z.from(),z.to());v.scrollIntoView({from:z.from(),to:z.to()},20);y.posFrom=z.from();y.posTo=z.to();if(x){x(z.from(),z.to())}})}function q(v){v.operation(function(){var w=s(v);w.lastQuery=w.query;if(!w.query){return}w.query=w.queryText=null;v.removeOverlay(w.overlay);if(w.annotate){w.annotate.clear();w.annotate=null}})}var a=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';var g='<span class="CodeMirror-search-label">With:</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>';var o='<span class="CodeMirror-search-label">Replace?</span> <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>';function c(v,w,x){v.operation(function(){for(var z=b(v,w);z.findNext();){if(typeof w!="string"){var y=v.getRange(z.from(),z.to()).match(w);z.replace(x.replace(/\$(\d)/g,function(A,B){return y[B]}))}else{z.replace(x)}}})}function r(v,x){if(v.getOption("readOnly")){return}var y=v.getSelection()||s(v).lastQuery;var w='<span class="CodeMirror-search-label">'+(x?"Replace all:":"Replace:")+"</span>";p(v,w+a,w,y,function(z){if(!z){return}z=h(z);p(v,g,"Replace with:","",function(D){D=i(D);if(x){c(v,z,D)}else{q(v);var C=b(v,z,v.getCursor("from"));var B=function(){var F=C.from(),E;if(!(E=C.findNext())){C=b(v,z);if(!(E=C.findNext())||(F&&C.from().line==F.line&&C.from().ch==F.ch)){return}}v.setSelection(C.from(),C.to());v.scrollIntoView({from:C.from(),to:C.to()});l(v,o,"Replace?",[function(){A(E)},B,function(){c(v,z,D)}])};var A=function(E){C.replace(typeof z=="string"?D:D.replace(/\$(\d)/g,function(F,G){return E[G]}));B()};B()}})})}n.commands.find=function(v){q(v);m(v)};n.commands.findPersistent=function(v){q(v);m(v,false,true)};n.commands.findPersistentNext=function(v){m(v,false,true,true)};n.commands.findPersistentPrev=function(v){m(v,true,true,true)};n.commands.findNext=m;n.commands.findPrev=function(v){m(v,true)};n.commands.clearSearch=q;n.commands.replace=r;n.commands.replaceAll=function(v){r(v,true)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(e){var l=e.Pos;function f(r){var q=r.flags;return q!=null?q:(r.ignoreCase?"i":"")+(r.global?"g":"")+(r.multiline?"m":"")}function b(q){return q.global?q:new RegExp(q.source,f(q)+"g")}function o(q){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(q.source)}function n(w,v,x){v=b(v);for(var q=x.line,t=x.ch,u=w.lastLine();q<=u;q++,t=0){v.lastIndex=t;var s=w.getLine(q),r=v.exec(s);if(r){return{from:l(q,r.index),to:l(q,r.index+r[0].length),match:r}}}}function g(A,x,r){if(!o(x)){return n(A,x,r)}x=b(x);var w,z=1;for(var D=r.line,B=A.lastLine();D<=B;){for(var u=0;u<z;u++){var q=A.getLine(D++);w=w==null?q:w+"\n"+q}z=z*2;x.lastIndex=r.ch;var v=x.exec(w);if(v){var y=w.slice(0,v.index).split("\n"),t=v[0].split("\n");var C=r.line+y.length-1,s=y[y.length-1].length;return{from:l(C,s),to:l(C+t.length-1,t.length==1?s+t[0].length:t[t.length-1].length),match:v}}}}function h(r,t){var u=0,q;for(;;){t.lastIndex=u;var s=t.exec(r);if(!s){return q}q=s;u=q.index+(q[0].length||1);if(u==r.length){return q}}}function d(v,u,x){u=b(u);for(var q=x.line,t=x.ch,w=v.firstLine();q>=w;q--,t=-1){var s=v.getLine(q);if(t>-1){s=s.slice(0,t)}var r=h(s,u);if(r){return{from:l(q,r.index),to:l(q,r.index+r[0].length),match:r}}}}function i(B,y,r){y=b(y);var x,A=1;for(var D=r.line,w=B.firstLine();D>=w;){for(var u=0;u<A;u++){var q=B.getLine(D--);x=x==null?q.slice(0,r.ch):q+"\n"+x}A*=2;var v=h(x,y);if(v){var z=x.slice(0,v.index).split("\n"),t=v[0].split("\n");var C=D+z.length,s=z[z.length-1].length;return{from:l(C,s),to:l(C+t.length-1,t.length==1?s+t[0].length:t[t.length-1].length),match:v}}}}var p,a;if(String.prototype.normalize){p=function(q){return q.normalize("NFD").toLowerCase()};a=function(q){return q.normalize("NFD")}}else{p=function(q){return q.toLowerCase()};a=function(q){return q}}function m(x,v,w,t){if(x.length==v.length){return w}for(var u=0,r=w+Math.max(0,x.length-v.length);;){if(u==r){return u}var s=(u+r)>>1;var q=t(x.slice(0,s)).length;if(q==w){return s}else{if(q>w){r=s}else{u=s+1}}}}function k(C,y,r,u){if(!y.length){return null}var w=u?p:a;var F=w(y).split(/\r|\n\r?/);search:for(var G=r.line,q=r.ch,D=C.lastLine()+1-F.length;G<=D;G++,q=0){var B=C.getLine(G).slice(q),v=w(B);if(F.length==1){var E=v.indexOf(F[0]);if(E==-1){continue search}var r=m(B,v,E,w)+q;return{from:l(G,m(B,v,E,w)+q),to:l(G,m(B,v,E+F[0].length,w)+q)}}else{var x=v.length-F[0].length;if(v.slice(x)!=F[0]){continue search}for(var t=1;t<F.length-1;t++){if(w(C.getLine(G+t))!=F[t]){continue search}}var s=C.getLine(G+F.length-1),A=w(s),z=F[F.length-1];if(s.slice(0,z.length)!=z){continue search}return{from:l(G,m(B,v,x,w)+q),to:l(G+F.length-1,m(s,A,z.length,w))}}}}function c(C,y,r,t){if(!y.length){return null}var x=t?p:a;var E=x(y).split(/\r|\n\r?/);search:for(var F=r.line,q=r.ch,u=C.firstLine()-1+E.length;F>=u;F--,q=-1){var B=C.getLine(F);if(q>-1){B=B.slice(0,q)}var v=x(B);if(E.length==1){var D=v.lastIndexOf(E[0]);if(D==-1){continue search}return{from:l(F,m(B,v,D,x)),to:l(F,m(B,v,D+E[0].length,x))}}else{var A=E[E.length-1];if(v.slice(0,A.length)!=A){continue search}for(var s=1,r=F-E.length+1;s<E.length-1;s++){if(x(C.getLine(r+s))!=E[s]){continue search}}var z=C.getLine(F+1-E.length),w=x(z);if(w.slice(w.length-E[0].length)!=E[0]){continue search}return{from:l(F+1-E.length,m(z,w,z.length-E[0].length,x)),to:l(F,m(B,v,A.length,x))}}}}function j(t,s,u,q){this.atOccurrence=false;this.doc=t;u=u?t.clipPos(u):l(0,0);this.pos={from:u,to:u};var r;if(typeof q=="object"){r=q.caseFold}else{r=q;q=null}if(typeof s=="string"){if(r==null){r=false}this.matches=function(v,w){return(v?c:k)(t,s,w,r)}}else{s=b(s);if(!q||q.multiline!==false){this.matches=function(v,w){return(v?i:g)(t,s,w)}}else{this.matches=function(v,w){return(v?d:n)(t,s,w)}}}}j.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(s){var q=this.matches(s,this.doc.clipPos(s?this.pos.from:this.pos.to));while(q&&e.cmpPos(q.from,q.to)==0){if(s){if(q.from.ch){q.from=l(q.from.line,q.from.ch-1)}else{if(q.from.line==this.doc.firstLine()){q=null}else{q=this.matches(s,this.doc.clipPos(l(q.from.line-1)))}}}else{if(q.to.ch<this.doc.getLine(q.to.line).length){q.to=l(q.to.line,q.to.ch+1)}else{if(q.to.line==this.doc.lastLine()){q=null}else{q=this.matches(s,l(q.to.line+1,0))}}}}if(q){this.pos=q;this.atOccurrence=true;return this.pos.match||true}else{var r=l(s?this.doc.firstLine():this.doc.lastLine()+1,0);this.pos={from:r,to:r};return this.atOccurrence=false}},from:function(){if(this.atOccurrence){return this.pos.from}},to:function(){if(this.atOccurrence){return this.pos.to}},replace:function(s,r){if(!this.atOccurrence){return}var q=e.splitLines(s);this.doc.replaceRange(q,this.pos.from,this.pos.to,r);this.pos.to=l(this.pos.from.line+q.length-1,q[q.length-1].length+(q.length==1?this.pos.from.ch:0))}};e.defineExtension("getSearchCursor",function(r,s,q){return new j(this.doc,r,s,q)});e.defineDocExtension("getSearchCursor",function(r,s,q){return new j(this,r,s,q)});e.defineExtension("selectMatches",function(s,r){var q=[];var t=this.getSearchCursor(s,this.getCursor("from"),r);while(t.findNext()){if(e.cmpPos(t.to(),this.getCursor("to"))>0){break}q.push({anchor:t.from(),head:t.to()})}if(q.length){this.setSelections(q,0)}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.runMode=function(m,j,q,s){var l=a.getMode(a.defaults,j);var d=/MSIE \d/.test(navigator.userAgent);var h=d&&(document.documentMode==null||document.documentMode<9);if(q.appendChild){var n=(s&&s.tabSize)||a.defaults.tabSize;var g=q,f=0;g.innerHTML="";q=function(y,v){if(y=="\n"){g.appendChild(document.createTextNode(h?"\r":y));f=0;return}var w="";for(var z=0;;){var e=y.indexOf("\t",z);if(e==-1){w+=y.slice(z);f+=y.length-z;break}else{f+=e-z;w+=y.slice(z,e);var u=n-f%n;f+=u;for(var t=0;t<u;++t){w+=" "}z=e+1}}if(v){var x=g.appendChild(document.createElement("span"));x.className="cm-"+v.replace(/ +/g," cm-");x.appendChild(document.createTextNode(w))}else{g.appendChild(document.createTextNode(w))}}}var r=a.splitLines(m),c=(s&&s.state)||a.startState(l);for(var k=0,o=r.length;k<o;++k){if(k){q("\n")}var p=new a.StringStream(r[k]);if(!p.string&&l.blankLine){l.blankLine(c)}while(!p.eol()){var b=l.token(p,c);q(p.current(),b,k,p.start,c);p.start=p.pos}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets"))}else{if(typeof define=="function"&&define.amd){define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],a)}else{a(CodeMirror)}}})(function(p){var v=p.keyMap.sublime={fallthrough:"default"};var n=p.commands;var m=p.Pos;var e=p.keyMap["default"]==p.keyMap.macDefault;var i=e?"Cmd-":"Ctrl-";function g(H,z,A){if(A<0&&z.ch==0){return H.clipPos(m(z.line-1))}var I=H.getLine(z.line);if(A>0&&z.ch>=I.length){return H.clipPos(m(z.line+1,0))}var y="start",E;for(var G=z.ch,D=A<0?0:I.length,B=0;G!=D;G+=A,B++){var C=I.charAt(A<0?G-1:G);var F=C!="_"&&p.isWordChar(C)?"w":"o";if(F=="w"&&C.toUpperCase()==C){F="W"}if(y=="start"){if(F!="o"){y="in";E=F}}else{if(y=="in"){if(E!=F){if(E=="w"&&F=="W"&&A<0){G--}if(E=="W"&&F=="w"&&A>0){E="w";continue}break}}}}return m(z.line,G)}function s(y,z){y.extendSelectionsBy(function(A){if(y.display.shift||y.doc.extend||A.empty()){return g(y.doc,A.head,z)}else{return z<0?A.from():A.to()}})}var u=e?"Ctrl-":"Alt-";n[v[u+"Left"]="goSubwordLeft"]=function(y){s(y,-1)};n[v[u+"Right"]="goSubwordRight"]=function(y){s(y,1)};if(e){v["Cmd-Left"]="goLineStartSmart"}var x=e?"Ctrl-Alt-":"Ctrl-";n[v[x+"Up"]="scrollLineUp"]=function(y){var A=y.getScrollInfo();if(!y.somethingSelected()){var z=y.lineAtHeight(A.top+A.clientHeight,"local");if(y.getCursor().line>=z){y.execCommand("goLineUp")}}y.scrollTo(null,A.top-y.defaultTextHeight())};n[v[x+"Down"]="scrollLineDown"]=function(y){var A=y.getScrollInfo();if(!y.somethingSelected()){var z=y.lineAtHeight(A.top,"local")+1;if(y.getCursor().line<=z){y.execCommand("goLineDown")}}y.scrollTo(null,A.top+y.defaultTextHeight())};n[v["Shift-"+i+"L"]="splitSelectionByLine"]=function(y){var A=y.listSelections(),C=[];for(var B=0;B<A.length;B++){var E=A[B].from(),D=A[B].to();for(var z=E.line;z<=D.line;++z){if(!(D.line>E.line&&z==D.line&&D.ch==0)){C.push({anchor:z==E.line?E:m(z,0),head:z==D.line?D:m(z)})}}}y.setSelections(C,0)};v["Shift-Tab"]="indentLess";n[v.Esc="singleSelectionTop"]=function(y){var z=y.listSelections()[0];y.setSelection(z.anchor,z.head,{scroll:false})};n[v[i+"L"]="selectLine"]=function(z){var A=z.listSelections(),y=[];for(var C=0;C<A.length;C++){var B=A[C];y.push({anchor:m(B.from().line,0),head:m(B.to().line+1,0)})}z.setSelections(y)};v["Shift-Ctrl-K"]="deleteLine";function a(z,y){if(z.isReadOnly()){return p.Pass}z.operation(function(){var C=z.listSelections().length,B=[],F=-1;for(var E=0;E<C;E++){var D=z.listSelections()[E].head;if(D.line<=F){continue}var A=m(D.line+(y?0:1),0);z.replaceRange("\n",A,null,"+insertLine");z.indentLine(A.line,null,true);B.push({head:A,anchor:A});F=D.line+1}z.setSelections(B)});z.execCommand("indentAuto")}n[v[i+"Enter"]="insertLineAfter"]=function(y){return a(y,false)};n[v["Shift-"+i+"Enter"]="insertLineBefore"]=function(y){return a(y,true)};function b(y,C){var B=C.ch,A=B,z=y.getLine(C.line);while(B&&p.isWordChar(z.charAt(B-1))){--B}while(A<z.length&&p.isWordChar(z.charAt(A))){++A}return{from:m(C.line,B),to:m(C.line,A),word:z.slice(B,A)}}n[v[i+"D"]="selectNextOccurrence"]=function(D){var B=D.getCursor("from"),C=D.getCursor("to");var z=D.state.sublimeFindFullWord==D.doc.sel;if(p.cmpPos(B,C)==0){var y=b(D,B);if(!y.word){return}D.setSelection(y.from,y.to);z=true}else{var F=D.getRange(B,C);var A=z?new RegExp("\\b"+F+"\\b"):F;var E=D.getSearchCursor(A,C);var G=E.findNext();if(!G){E=D.getSearchCursor(A,m(D.firstLine(),0));G=E.findNext()}if(!G||l(D.listSelections(),E.from(),E.to())){return p.Pass}D.addSelection(E.from(),E.to())}if(z){D.state.sublimeFindFullWord=D.doc.sel}};function d(G,A){var y=G.listSelections(),z=[];for(var C=0;C<y.length;C++){var D=y[C];var E=G.findPosV(D.anchor,A,"line");var B=G.findPosV(D.head,A,"line");var F={anchor:E,head:B};z.push(D);z.push(F)}G.setSelections(z)}var h=e?"Shift-Cmd":"Alt-Ctrl";n[v[h+"Up"]="addCursorToPrevLine"]=function(y){d(y,-1)};n[v[h+"Down"]="addCursorToNextLine"]=function(y){d(y,1)};function l(y,B,A){for(var z=0;z<y.length;z++){if(y[z].from()==B&&y[z].to()==A){return true}}return false}var k="(){}[]";function r(z){var A=z.listSelections(),C=[];for(var E=0;E<A.length;E++){var B=A[E],F=B.head,y=z.scanForBracket(F,-1);if(!y){return false}for(;;){var D=z.scanForBracket(F,1);if(!D){return false}if(D.ch==k.charAt(k.indexOf(y.ch)+1)){C.push({anchor:m(y.pos.line,y.pos.ch+1),head:D.pos});break}F=m(D.pos.line,D.pos.ch+1)}}z.setSelections(C);return true}n[v["Shift-"+i+"Space"]="selectScope"]=function(y){r(y)||y.execCommand("selectAll")};n[v["Shift-"+i+"M"]="selectBetweenBrackets"]=function(y){if(!r(y)){return p.Pass}};n[v[i+"M"]="goToBracket"]=function(y){y.extendSelectionsBy(function(z){var A=y.scanForBracket(z.head,1);if(A&&p.cmpPos(A.pos,z.head)!=0){return A.pos}var B=y.scanForBracket(z.head,-1);return B&&m(B.pos.line,B.pos.ch+1)||z.head})};var q=e?"Cmd-Ctrl-":"Shift-Ctrl-";n[v[q+"Up"]="swapLineUp"]=function(F){if(F.isReadOnly()){return p.Pass}var y=F.listSelections(),C=[],z=F.firstLine()-1,G=[];for(var A=0;A<y.length;A++){var B=y[A],E=B.from().line-1,D=B.to().line;G.push({anchor:m(B.anchor.line-1,B.anchor.ch),head:m(B.head.line-1,B.head.ch)});if(B.to().ch==0&&!B.empty()){--D}if(E>z){C.push(E,D)}else{if(C.length){C[C.length-1]=D}}z=D}F.operation(function(){for(var I=0;I<C.length;I+=2){var K=C[I],J=C[I+1];var H=F.getLine(K);F.replaceRange("",m(K,0),m(K+1,0),"+swapLine");if(J>F.lastLine()){F.replaceRange("\n"+H,m(F.lastLine()),null,"+swapLine")}else{F.replaceRange(H+"\n",m(J,0),null,"+swapLine")}}F.setSelections(G);F.scrollIntoView()})};n[v[q+"Down"]="swapLineDown"]=function(z){if(z.isReadOnly()){return p.Pass}var A=z.listSelections(),D=[],y=z.lastLine()+1;for(var C=A.length-1;C>=0;C--){var B=A[C],F=B.to().line+1,E=B.from().line;if(B.to().ch==0&&!B.empty()){F--}if(F<y){D.push(F,E)}else{if(D.length){D[D.length-1]=E}}y=E}z.operation(function(){for(var H=D.length-2;H>=0;H-=2){var J=D[H],I=D[H+1];var G=z.getLine(J);if(J==z.lastLine()){z.replaceRange("",m(J-1),m(J),"+swapLine")}else{z.replaceRange("",m(J,0),m(J+1,0),"+swapLine")}z.replaceRange(G+"\n",m(I,0),null,"+swapLine")}z.scrollIntoView()})};n[v[i+"/"]="toggleCommentIndented"]=function(y){y.toggleComment({indent:true})};n[v[i+"J"]="joinLines"]=function(y){var A=y.listSelections(),D=[];for(var C=0;C<A.length;C++){var B=A[C],F=B.from();var E=F.line,z=B.to().line;while(C<A.length-1&&A[C+1].from().line==z){z=A[++C].to().line}D.push({start:E,end:z,anchor:!B.empty()&&F})}y.operation(function(){var M=0,H=[];for(var K=0;K<D.length;K++){var L=D[K];var I=L.anchor&&m(L.anchor.line-M,L.anchor.ch),J;for(var G=L.start;G<=L.end;G++){var N=G-M;if(G==L.end){J=m(N,y.getLine(N).length+1)}if(N<y.lastLine()){y.replaceRange(" ",m(N),m(N+1,/^\s*/.exec(y.getLine(N+1))[0].length));++M}}H.push({anchor:I||J,head:J})}y.setSelections(H,0)})};n[v["Shift-"+i+"D"]="duplicateLine"]=function(y){y.operation(function(){var A=y.listSelections().length;for(var B=0;B<A;B++){var z=y.listSelections()[B];if(z.empty()){y.replaceRange(y.getLine(z.head.line)+"\n",m(z.head.line,0))}else{y.replaceRange(y.getRange(z.from(),z.to()),z.from())}}y.scrollIntoView()})};if(!e){v[i+"T"]="transposeChars"}function w(G,D){if(G.isReadOnly()){return p.Pass}var y=G.listSelections(),C=[],z;for(var A=0;A<y.length;A++){var B=y[A];if(B.empty()){continue}var F=B.from().line,E=B.to().line;while(A<y.length-1&&y[A+1].from().line==E){E=y[++A].to().line}if(!y[A].to().ch){E--}C.push(F,E)}if(C.length){z=true}else{C.push(G.firstLine(),G.lastLine())}G.operation(function(){var J=[];for(var K=0;K<C.length;K+=2){var N=C[K],M=C[K+1];var L=m(N,0),I=m(M);var H=G.getRange(L,I,false);if(D){H.sort()}else{H.sort(function(Q,O){var R=Q.toUpperCase(),P=O.toUpperCase();if(R!=P){Q=R;O=P}return Q<O?-1:Q==O?0:1})}G.replaceRange(H,L,I);if(z){J.push({anchor:L,head:m(M+1,0)})}}if(z){G.setSelections(J,0)}})}n[v.F9="sortLines"]=function(y){w(y,true)};n[v[i+"F9"]="sortLinesInsensitive"]=function(y){w(y,false)};n[v.F2="nextBookmark"]=function(y){var z=y.state.sublimeBookmarks;if(z){while(z.length){var B=z.shift();var A=B.find();if(A){z.push(B);return y.setSelection(A.from,A.to)}}}};n[v["Shift-F2"]="prevBookmark"]=function(y){var z=y.state.sublimeBookmarks;if(z){while(z.length){z.unshift(z.pop());var A=z[z.length-1].find();if(!A){z.pop()}else{return y.setSelection(A.from,A.to)}}}};n[v[i+"F2"]="toggleBookmark"]=function(F){var y=F.listSelections();var C=F.state.sublimeBookmarks||(F.state.sublimeBookmarks=[]);for(var B=0;B<y.length;B++){var D=y[B].from(),E=y[B].to();var G=F.findMarks(D,E);for(var A=0;A<G.length;A++){if(G[A].sublimeBookmark){G[A].clear();for(var z=0;z<C.length;z++){if(C[z]==G[A]){C.splice(z--,1)}}break}}if(A==G.length){C.push(F.markText(D,E,{sublimeBookmark:true,clearWhenEmpty:false}))}}};n[v["Shift-"+i+"F2"]="clearBookmarks"]=function(y){var A=y.state.sublimeBookmarks;if(A){for(var z=0;z<A.length;z++){A[z].clear()}}A.length=0};n[v["Alt-F2"]="selectBookmarks"]=function(y){var B=y.state.sublimeBookmarks,z=[];if(B){for(var A=0;A<B.length;A++){var C=B[A].find();if(!C){B.splice(A--,0)}else{z.push({anchor:C.from,head:C.to})}}}if(z.length){y.setSelections(z,0)}};v["Alt-Q"]="wrapLines";var c=i+"K ";function j(y,z){y.operation(function(){var B=y.listSelections(),G=[],E=[];for(var D=0;D<B.length;D++){var C=B[D];if(C.empty()){G.push(D);E.push("")}else{E.push(z(y.getRange(C.from(),C.to())))}}y.replaceSelections(E,"around","case");for(var D=G.length-1,A;D>=0;D--){var C=B[G[D]];if(A&&p.cmpPos(C.head,A)>0){continue}var F=b(y,C.head);A=F.from;y.replaceRange(z(F.word),F.from,F.to)}})}v[c+i+"Backspace"]="delLineLeft";n[v.Backspace="smartBackspace"]=function(y){if(y.somethingSelected()){return p.Pass}y.operation(function(){var E=y.listSelections();var A=y.getOption("indentUnit");for(var B=E.length-1;B>=0;B--){var F=E[B].head;var D=y.getRange({line:F.line,ch:0},F);var C=p.countColumn(D,null,y.getOption("tabSize"));var z=y.findPosH(F,-1,"char",false);if(D&&!/\S/.test(D)&&C%A==0){var G=new m(F.line,p.findColumn(D,C-A,A));if(G.ch!=F.ch){z=G}}y.replaceRange("",z,F,"+delete")}})};n[v[c+i+"K"]="delLineRight"]=function(y){y.operation(function(){var z=y.listSelections();for(var A=z.length-1;A>=0;A--){y.replaceRange("",z[A].anchor,m(z[A].to().line),"+delete")}y.scrollIntoView()})};n[v[c+i+"U"]="upcaseAtCursor"]=function(y){j(y,function(z){return z.toUpperCase()})};n[v[c+i+"L"]="downcaseAtCursor"]=function(y){j(y,function(z){return z.toLowerCase()})};n[v[c+i+"Space"]="setSublimeMark"]=function(y){if(y.state.sublimeMark){y.state.sublimeMark.clear()}y.state.sublimeMark=y.setBookmark(y.getCursor())};n[v[c+i+"A"]="selectToSublimeMark"]=function(y){var z=y.state.sublimeMark&&y.state.sublimeMark.find();if(z){y.setSelection(y.getCursor(),z)}};n[v[c+i+"W"]="deleteToSublimeMark"]=function(y){var A=y.state.sublimeMark&&y.state.sublimeMark.find();if(A){var C=y.getCursor(),B=A;if(p.cmpPos(C,B)>0){var z=B;B=C;C=z}y.state.sublimeKilled=y.getRange(C,B);y.replaceRange("",C,B)}};n[v[c+i+"X"]="swapWithSublimeMark"]=function(y){var z=y.state.sublimeMark&&y.state.sublimeMark.find();if(z){y.state.sublimeMark.clear();y.state.sublimeMark=y.setBookmark(y.getCursor());y.setCursor(z)}};n[v[c+i+"Y"]="sublimeYank"]=function(y){if(y.state.sublimeKilled!=null){y.replaceSelection(y.state.sublimeKilled,null,"paste")}};v[c+i+"G"]="clearBookmarks";n[v[c+i+"C"]="showInCenter"]=function(y){var z=y.cursorCoords(null,"local");y.scrollTo(null,(z.top+z.bottom)/2-y.getScrollInfo().clientHeight/2)};var f=e?"Ctrl-Shift-":"Ctrl-Alt-";n[v[f+"Up"]="selectLinesUpward"]=function(y){y.operation(function(){var z=y.listSelections();for(var B=0;B<z.length;B++){var A=z[B];if(A.head.line>y.firstLine()){y.addSelection(m(A.head.line-1,A.head.ch))}}})};n[v[f+"Down"]="selectLinesDownward"]=function(y){y.operation(function(){var z=y.listSelections();for(var B=0;B<z.length;B++){var A=z[B];if(A.head.line<y.lastLine()){y.addSelection(m(A.head.line+1,A.head.ch))}}})};function t(y){var B=y.getCursor("from"),A=y.getCursor("to");if(p.cmpPos(B,A)==0){var z=b(y,B);if(!z.word){return}B=z.from;A=z.to}return{from:B,to:A,query:y.getRange(B,A),word:z}}function o(y,z){var B=t(y);if(!B){return}var A=B.query;var C=y.getSearchCursor(A,z?B.to:B.from);if(z?C.findNext():C.findPrevious()){y.setSelection(C.from(),C.to())}else{C=y.getSearchCursor(A,z?m(y.firstLine(),0):y.clipPos(m(y.lastLine())));if(z?C.findNext():C.findPrevious()){y.setSelection(C.from(),C.to())}else{if(B.word){y.setSelection(B.from,B.to)}}}}n[v[i+"F3"]="findUnder"]=function(y){o(y,true)};n[v["Shift-"+i+"F3"]="findUnderPrevious"]=function(y){o(y,false)};n[v["Alt-F3"]="findAllUnder"]=function(y){var B=t(y);if(!B){return}var C=y.getSearchCursor(B.query);var A=[];var z=-1;while(C.findNext()){A.push({anchor:C.from(),head:C.to()});if(C.from().line<=B.from.line&&C.from().ch<=B.from.ch){z++}}y.setSelections(A,z)};v["Shift-"+i+"["]="fold";v["Shift-"+i+"]"]="unfold";v[c+i+"0"]=v[c+i+"J"]="unfoldAll";v[i+"I"]="findIncremental";v["Shift-"+i+"I"]="findIncrementalReverse";v[i+"H"]="replace";v.F3="findNext";v["Shift-F3"]="findPrev";p.normalizeKeyMap(v)});